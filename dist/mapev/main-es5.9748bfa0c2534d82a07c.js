function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(l){r=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _construct(t,e,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&_setPrototypeOf(r,n.prototype),r}).apply(null,arguments)}function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=_superPropBase(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(t);if(e){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}/*! For license information please see main-es2015.9748bfa0c2534d82a07c.js.LICENSE.txt */(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},1:function(t,e){},2:function(t,e){},"4ZJM":function(t,e,n){t.exports=function(){"use strict";var t,e,n;function i(i,r){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),n=r(a),"undefined"!=typeof window&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=r;else t=r}return i(0,(function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=i;function i(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=n,this.p2y=i}i.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},i.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},i.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},i.prototype.solveCurveX=function(t,e){var n,i,r,o,a;for(void 0===e&&(e=1e-6),r=t,a=0;a<8;a++){if(o=this.sampleCurveX(r)-t,Math.abs(o)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=o/s}if((r=t)<(n=0))return n;if(r>(i=1))return i;for(;n<i;){if(o=this.sampleCurveX(r),Math.abs(o-t)<e)return r;t>o?n=r:i=r,r=.5*(i-n)+n}return r},i.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var r=o;function o(t,e){this.x=t,this.y=e}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),i=Math.sin(t),r=e.y+i*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-i*(this.y-e.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var a="undefined"!=typeof self?self:{};function s(t,e,i,r){var o=new n(t,e,i,r);return function(t){return o.solve(t)}}var l=s(.25,.1,.25,1);function u(t,e,n){return Math.min(n,Math.max(e,t))}function c(t,e,n){var i=n-e,r=((t-e)%i+i)%i+e;return r===e?n:r}function h(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var i=0,r=e;i<r.length;i+=1){var o=r[i];for(var a in o)t[a]=o[a]}return t}var p=1;function f(){return p++}function d(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function m(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function g(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function y(t,e){return-1!==t.indexOf(e,t.length-e.length)}function v(t,e,n){var i={};for(var r in t)i[r]=e.call(n||this,t[r],r,t);return i}function _(t,e,n){var i={};for(var r in t)e.call(n||this,t[r],r,t)&&(i[r]=t[r]);return i}function b(t){return Array.isArray(t)?t.map(b):"object"==typeof t&&t?v(t,b):t}var x={};function w(t){x[t]||("undefined"!=typeof console&&console.warn(t),x[t]=!0)}function C(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function k(t){for(var e=0,n=0,i=t.length,r=i-1,o=void 0,a=void 0;n<i;r=n++)e+=((a=t[r]).x-(o=t[n]).x)*(o.y+a.y);return e}function E(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function S(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,n,i,r){var o=i||r;return e[n]=!o||o.toLowerCase(),""})),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}var I=null;function T(t){if(null==I){var e=t.navigator?t.navigator.userAgent:null;I=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return I}function P(t){try{var e=a[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var A,L,M,R,O=a.performance&&a.performance.now?a.performance.now.bind(a.performance):Date.now.bind(Date),D=a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||a.msRequestAnimationFrame,N=a.cancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelAnimationFrame||a.msCancelAnimationFrame,F={now:O,frame:function(t){var e=D(t);return{cancel:function(){return N(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var n=a.document.createElement("canvas"),i=n.getContext("2d");if(!i)throw new Error("failed to create canvas 2d context");return n.width=t.width,n.height=t.height,i.drawImage(t,0,0,t.width,t.height),i.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return A||(A=a.document.createElement("a")),A.href=t,A.href},hardwareConcurrency:a.navigator&&a.navigator.hardwareConcurrency||4,get devicePixelRatio(){return a.devicePixelRatio},get prefersReducedMotion(){return!!a.matchMedia&&(null==L&&(L=a.matchMedia("(prefers-reduced-motion: reduce)")),L.matches)}},z={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},B={supported:!1,testSupport:function(t){!V&&R&&(U?j(t):M=t)}},V=!1,U=!1;function j(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,R),t.isContextLost())return;B.supported=!0}catch(t){}t.deleteTexture(e),V=!0}a.document&&((R=a.document.createElement("img")).onload=function(){M&&j(M),M=null,U=!0},R.onerror=function(){V=!0,M=null},R.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var q="01",G=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function H(t){return 0===t.indexOf("mapbox:")}G.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",q,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},G.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},G.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},G.prototype.normalizeStyleURL=function(t,e){if(!H(t))return t;var n=Y(t);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},G.prototype.normalizeGlyphsURL=function(t,e){if(!H(t))return t;var n=Y(t);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},G.prototype.normalizeSourceURL=function(t,e){if(!H(t))return t;var n=Y(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||e)},G.prototype.normalizeSpriteURL=function(t,e,n,i){var r=Y(t);return H(t)?(r.path="/styles/v1"+r.path+"/sprite"+e+n,this._makeAPIURL(r,this._customAccessToken||i)):(r.path+=""+e+n,K(r))},G.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!H(t))return t;var n=Y(t);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,(F.devicePixelRatio>=2||512===e?"@2x":"")+(B.supported?".webp":"$1")),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path;var i=this._customAccessToken||function(t){for(var e=0,n=t;e<n.length;e+=1){var i=n[e].match(/^access_token=(.*)$/);if(i)return i[1]}return null}(n.params)||z.ACCESS_TOKEN;return z.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,i)},G.prototype.canonicalizeTileURL=function(t,e){var n=Y(t);if(!n.path.match(/(^\/v4\/)/)||!n.path.match(/\.[\w]+$/))return t;var i="mapbox://tiles/";i+=n.path.replace("/v4/","");var r=n.params;return e&&(r=r.filter((function(t){return!t.match(/^access_token=/)}))),r.length&&(i+="?"+r.join("&")),i},G.prototype.canonicalizeTileset=function(t,e){for(var n=!!e&&H(e),i=[],r=0,o=t.tiles||[];r<o.length;r+=1){var a=o[r];Z(a)?i.push(this.canonicalizeTileURL(a,n)):i.push(a)}return i},G.prototype._makeAPIURL=function(t,e){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",i=Y(z.API_URL);if(t.protocol=i.protocol,t.authority=i.authority,"/"!==i.path&&(t.path=""+i.path+t.path),!z.REQUIRE_ACCESS_TOKEN)return K(t);if(!(e=e||z.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+n);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n);return t.params=t.params.filter((function(t){return-1===t.indexOf("access_token")})),t.params.push("access_token="+e),K(t)};var X=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Z(t){return X.test(t)}var W=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Y(t){var e=t.match(W);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function K(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function J(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(a.atob(e[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return null}}var Q=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Q.prototype.getStorageKey=function(t){var e,n=J(z.ACCESS_TOKEN);return e=n&&n.u?a.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))}))):z.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},Q.prototype.fetchEventData=function(){var t=P("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{var i=a.localStorage.getItem(e);i&&(this.eventData=JSON.parse(i));var r=a.localStorage.getItem(n);r&&(this.anonId=r)}catch(t){w("Unable to read from LocalStorage")}},Q.prototype.saveEventData=function(){var t=P("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{a.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&a.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){w("Unable to write to LocalStorage")}},Q.prototype.processRequests=function(t){},Q.prototype.postEvent=function(t,e,n,i){var r=this;if(z.EVENTS_URL){var o=Y(z.EVENTS_URL);o.params.push("access_token="+(i||z.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.11.0",skuId:q,userId:this.anonId},s=e?h(a,e):a,l={url:K(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=bt(l,(function(t){r.pendingRequest=null,n(t),r.saveEventData(),r.processRequests(i)}))}},Q.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var $,tt,et=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e,n,i){this.skuToken=n,(z.EVENTS_URL&&i||z.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return H(t)||Z(t)})))&&this.queueRequest({id:e,timestamp:Date.now()},i)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),i=n.id,r=n.timestamp;i&&this.success[i]||(this.anonId||this.fetchEventData(),m(this.anonId)||(this.anonId=d()),this.postEvent(r,{skuToken:this.skuToken},(function(t){t||i&&(e.success[i]=!0)}),t))}},e}(Q),nt=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t,e){z.EVENTS_URL&&z.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return H(t)||Z(t)}))&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=J(z.ACCESS_TOKEN),i=n?n.u:z.ACCESS_TOKEN,r=i!==this.eventData.tokenU;m(this.anonId)||(this.anonId=d(),r=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),l=(o-this.eventData.lastSuccess)/864e5;r=r||l>=1||l<-1||a.getDate()!==s.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},(function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=i)}),t)}},e}(Q)),it=nt.postTurnstileEvent.bind(nt),rt=new et,ot=rt.postMapLoadEvent.bind(rt),at=500,st=50;function lt(){a.caches&&!$&&($=a.caches.open("mapbox-tiles"))}function ut(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var ct,ht=1/0;function pt(){return null==ct&&(ct=a.OffscreenCanvas&&new a.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof a.createImageBitmap),ct}var ft={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ft);var dt,mt,gt=function(t){function e(e,n,i){401===n&&Z(i)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=n,this.url=i,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),yt=E()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===a.location.protocol?a.parent:a).location.href},vt=function(t,e){if(!(/^file:/.test(n=t.url)||/^file:/.test(yt())&&!/^\w+:/.test(n))){if(a.fetch&&a.Request&&a.AbortController&&a.Request.prototype.hasOwnProperty("signal"))return function(t,e){var n,i=new a.AbortController,r=new a.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:yt(),signal:i.signal}),o=!1,s=!1,l=(n=r.url).indexOf("sku=")>0&&Z(n);"json"===t.type&&r.headers.set("Accept","application/json");var u=function(n,i,o){if(!s){if(n&&"SecurityError"!==n.message&&w(n),i&&o)return c(i);var u=Date.now();a.fetch(r).then((function(n){if(n.ok){var i=l?n.clone():null;return c(n,i,u)}return e(new gt(n.statusText,n.status,t.url))})).catch((function(t){20!==t.code&&e(new Error(t.message))}))}},c=function(n,i,l){("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then((function(t){s||(i&&l&&function(t,e,n){if(lt(),$){var i={status:e.status,statusText:e.statusText,headers:new a.Headers};e.headers.forEach((function(t,e){return i.headers.set(e,t)}));var r=S(e.headers.get("Cache-Control")||"");r["no-store"]||(r["max-age"]&&i.headers.set("Expires",new Date(n+1e3*r["max-age"]).toUTCString()),new Date(i.headers.get("Expires")).getTime()-n<42e4||function(t,e){if(void 0===tt)try{new Response(new ReadableStream),tt=!0}catch(t){tt=!1}tt?e(t.body):t.blob().then(e)}(e,(function(e){var n=new a.Response(e,i);lt(),$&&$.then((function(e){return e.put(ut(t.url),n)})).catch((function(t){return w(t.message)}))})))}}(r,i,l),o=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((function(t){s||e(new Error(t.message))}))};return l?function(t,e){if(lt(),!$)return e(null);var n=ut(t.url);$.then((function(t){t.match(n).then((function(i){var r=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),n=S(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(i);t.delete(n),r&&t.put(n,i.clone()),e(null,i,r)})).catch(e)})).catch(e)}(r,u):u(null,null),{cancel:function(){s=!0,o||i.abort()}}}(t,e);if(E()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(t,e){var n=new a.XMLHttpRequest;for(var i in n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer"),t.headers)n.setRequestHeader(i,t.headers[i]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var i=n.response;if("json"===t.type)try{i=JSON.parse(n.response)}catch(t){return e(t)}e(null,i,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else e(new gt(n.statusText,n.status,t.url))},n.send(t.body),{cancel:function(){return n.abort()}}}(t,e)},_t=function(t,e){return vt(h(t,{type:"arrayBuffer"}),e)},bt=function(t,e){return vt(h(t,{method:"POST"}),e)};dt=[],mt=0;function xt(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function wt(t,e,n){if(n&&n[t]){var i=n[t].indexOf(e);-1!==i&&n[t].splice(i,1)}}var Ct=function(t,e){void 0===e&&(e={}),h(this,e),this.type=t},kt=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,"error",h({error:e},n))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Ct),Et=function(){};Et.prototype.on=function(t,e){return this._listeners=this._listeners||{},xt(t,e,this._listeners),this},Et.prototype.off=function(t,e){return wt(t,e,this._listeners),wt(t,e,this._oneTimeListeners),this},Et.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},xt(t,e,this._oneTimeListeners),this},Et.prototype.fire=function(t,e){"string"==typeof t&&(t=new Ct(t,e||{}));var n=t.type;if(this.listens(n)){t.target=this;for(var i=0,r=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];i<r.length;i+=1)r[i].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];o<a.length;o+=1){var s=a[o];wt(n,s,this._oneTimeListeners),s.call(this,t)}var l=this._eventedParent;l&&(h(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(t))}else t instanceof kt&&console.error(t.error);return this},Et.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},Et.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var St={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},It=function(t,e,n,i){this.message=(t?t+": ":"")+n,i&&(this.identifier=i),null!=e&&e.__line__&&(this.line=e.__line__)};function Tt(t){var e=t.value;return e?[new It(t.key,e,"constants have been deprecated as of v8")]:[]}function Pt(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var i=0,r=e;i<r.length;i+=1){var o=r[i];for(var a in o)t[a]=o[a]}return t}function At(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Lt(t){if(Array.isArray(t))return t.map(Lt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var n in t)e[n]=Lt(t[n]);return e}return At(t)}var Mt=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Rt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,i=e;n<i.length;n+=1){var r=i[n];this.bindings[r[0]]=r[1]}};Rt.prototype.concat=function(t){return new Rt(this,t)},Rt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Rt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Ot={kind:"null"},Dt={kind:"number"},Nt={kind:"string"},Ft={kind:"boolean"},zt={kind:"color"},Bt={kind:"object"},Vt={kind:"value"},Ut={kind:"collator"},jt={kind:"formatted"},qt={kind:"resolvedImage"};function Gt(t,e){return{kind:"array",itemType:t,N:e}}function Ht(t){if("array"===t.kind){var e=Ht(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var Xt=[Ot,Dt,Nt,Ft,zt,jt,Bt,Gt(Vt),qt];function Zt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Zt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,i=Xt;n<i.length;n+=1)if(!Zt(i[n],e))return null}return"Expected "+Ht(t)+" but found "+Ht(e)+" instead."}function Wt(t,e){return e.some((function(e){return e.kind===t.kind}))}function Yt(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t}))}var Kt=e((function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function i(t){return(t=Math.round(t))<0?0:t>255?255:t}function r(t){return i("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function a(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=s.indexOf("("),u=s.indexOf(")");if(-1!==l&&u+1===s.length){var c=s.substr(0,l),h=s.substr(l+1,u-(l+1)).split(","),p=1;switch(c){case"rgba":if(4!==h.length)return null;p=o(h.pop());case"rgb":return 3!==h.length?null:[r(h[0]),r(h[1]),r(h[2]),p];case"hsla":if(4!==h.length)return null;p=o(h.pop());case"hsl":if(3!==h.length)return null;var f=(parseFloat(h[0])%360+360)%360/360,d=o(h[1]),m=o(h[2]),g=m<=.5?m*(d+1):m+d-m*d,y=2*m-g;return[i(255*a(y,g,f+1/3)),i(255*a(y,g,f)),i(255*a(y,g,f-1/3)),p];default:return null}}return null}}catch(t){}})).parseCSSColor,Jt=function(t,e,n,i){void 0===i&&(i=1),this.r=t,this.g=e,this.b=n,this.a=i};Jt.parse=function(t){if(t){if(t instanceof Jt)return t;if("string"==typeof t){var e=Kt(t);if(e)return new Jt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Jt.prototype.toString=function(){var t=this.toArray(),e=t[1],n=t[2],i=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(n)+","+i+")"},Jt.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},Jt.black=new Jt(0,0,0,1),Jt.white=new Jt(1,1,1,1),Jt.transparent=new Jt(0,0,0,0),Jt.red=new Jt(1,0,0,1);var Qt=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Qt.prototype.compare=function(t,e){return this.collator.compare(t,e)},Qt.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var $t=function(t,e,n,i,r){this.text=t,this.image=e,this.scale=n,this.fontStack=i,this.textColor=r},te=function(t){this.sections=t};te.fromString=function(t){return new te([new $t(t,null,null,null,null)])},te.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},te.factory=function(t){return t instanceof te?t:te.fromString(t)},te.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},te.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var i=n[e];if(i.image)t.push(["image",i.image.name]);else{t.push(i.text);var r={};i.fontStack&&(r["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(r["font-scale"]=i.scale),i.textColor&&(r["text-color"]=["rgba"].concat(i.textColor.toArray())),t.push(r)}}return t};var ee=function(t){this.name=t.name,this.available=t.available};function ne(t,e,n,i){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:"Invalid rgba value ["+[t,e,n,i].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof i?[t,e,n,i]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ie(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Jt)return!0;if(t instanceof Qt)return!0;if(t instanceof te)return!0;if(t instanceof ee)return!0;if(Array.isArray(t)){for(var e=0,n=t;e<n.length;e+=1)if(!ie(n[e]))return!1;return!0}if("object"==typeof t){for(var i in t)if(!ie(t[i]))return!1;return!0}return!1}function re(t){if(null===t)return Ot;if("string"==typeof t)return Nt;if("boolean"==typeof t)return Ft;if("number"==typeof t)return Dt;if(t instanceof Jt)return zt;if(t instanceof Qt)return Ut;if(t instanceof te)return jt;if(t instanceof ee)return qt;if(Array.isArray(t)){for(var e,n=t.length,i=0,r=t;i<r.length;i+=1){var o=re(r[i]);if(e){if(e===o)continue;e=Vt;break}e=o}return Gt(e||Vt,n)}return Bt}function oe(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Jt||t instanceof te||t instanceof ee?t.toString():JSON.stringify(t)}ee.prototype.toString=function(){return this.name},ee.fromString=function(t){return t?new ee({name:t,available:!1}):null},ee.prototype.serialize=function(){return["image",this.name]};var ae=function(t,e){this.type=t,this.value=e};ae.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!ie(t[1]))return e.error("invalid value");var n=t[1],i=re(n),r=e.expectedType;return"array"!==i.kind||0!==i.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(i=r),new ae(i,n)},ae.prototype.evaluate=function(){return this.value},ae.prototype.eachChild=function(){},ae.prototype.outputDefined=function(){return!0},ae.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Jt?["rgba"].concat(this.value.toArray()):this.value instanceof te?this.value.serialize():this.value};var se=function(t){this.name="ExpressionEvaluationError",this.message=t};se.prototype.toJSON=function(){return this.message};var le={string:Nt,number:Dt,boolean:Ft,object:Bt},ue=function(t,e){this.type=t,this.args=e};ue.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n,i=1,r=t[0];if("array"===r){var o,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in le)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=le[s],i++}else o=Vt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],i++}n=Gt(o,a)}else n=le[r];for(var l=[];i<t.length;i++){var u=e.parse(t[i],i,Vt);if(!u)return null;l.push(u)}return new ue(n,l)},ue.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!Zt(this.type,re(n)))return n;if(e===this.args.length-1)throw new se("Expected value to be of type "+Ht(this.type)+", but found "+Ht(re(n))+" instead.")}return null},ue.prototype.eachChild=function(t){this.args.forEach(t)},ue.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},ue.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var i=t.N;("number"==typeof i||this.args.length>1)&&e.push(i)}}return e.concat(this.args.map((function(t){return t.serialize()})))};var ce=function(t){this.type=jt,this.sections=t};ce.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");for(var i=[],r=!1,o=1;o<=t.length-1;++o){var a=t[o];if(r&&"object"==typeof a&&!Array.isArray(a)){r=!1;var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,Dt)))return null;var l=null;if(a["text-font"]&&!(l=e.parse(a["text-font"],1,Gt(Nt))))return null;var u=null;if(a["text-color"]&&!(u=e.parse(a["text-color"],1,zt)))return null;var c=i[i.length-1];c.scale=s,c.font=l,c.textColor=u}else{var h=e.parse(t[o],1,Vt);if(!h)return null;var p=h.type.kind;if("string"!==p&&"value"!==p&&"null"!==p&&"resolvedImage"!==p)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,i.push({content:h,scale:null,font:null,textColor:null})}}return new ce(i)},ce.prototype.evaluate=function(t){return new te(this.sections.map((function(e){var n=e.content.evaluate(t);return re(n)===qt?new $t("",n,null,null,null):new $t(oe(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))},ce.prototype.eachChild=function(t){for(var e=0,n=this.sections;e<n.length;e+=1){var i=n[e];t(i.content),i.scale&&t(i.scale),i.font&&t(i.font),i.textColor&&t(i.textColor)}},ce.prototype.outputDefined=function(){return!1},ce.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var i=n[e];t.push(i.content.serialize());var r={};i.scale&&(r["font-scale"]=i.scale.serialize()),i.font&&(r["text-font"]=i.font.serialize()),i.textColor&&(r["text-color"]=i.textColor.serialize()),t.push(r)}return t};var he=function(t){this.type=qt,this.input=t};he.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,Nt);return n?new he(n):e.error("No image name provided.")},he.prototype.evaluate=function(t){var e=this.input.evaluate(t),n=ee.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n},he.prototype.eachChild=function(t){t(this.input)},he.prototype.outputDefined=function(){return!1},he.prototype.serialize=function(){return["image",this.input.serialize()]};var pe={"to-boolean":Ft,"to-color":zt,"to-number":Dt,"to-string":Nt},fe=function(t,e){this.type=t,this.args=e};fe.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");for(var i=pe[n],r=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,Vt);if(!a)return null;r.push(a)}return new fe(i,r)},fe.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,n,i=0,r=this.args;i<r.length;i+=1){if(n=null,(e=r[i].evaluate(t))instanceof Jt)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":ne(e[0],e[1],e[2],e[3])))return new Jt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new se(n||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,l=this.args;s<l.length;s+=1){if(null===(a=l[s].evaluate(t)))return 0;var u=Number(a);if(!isNaN(u))return u}throw new se("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?te.fromString(oe(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?ee.fromString(oe(this.args[0].evaluate(t))):oe(this.args[0].evaluate(t))},fe.prototype.eachChild=function(t){this.args.forEach(t)},fe.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},fe.prototype.serialize=function(){if("formatted"===this.type.kind)return new ce([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new he(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var de=["Unknown","Point","LineString","Polygon"],me=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};me.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},me.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?de[this.feature.type]:this.feature.type:null},me.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},me.prototype.canonicalID=function(){return this.canonical},me.prototype.properties=function(){return this.feature&&this.feature.properties||{}},me.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Jt.parse(t)),e};var ge=function(t,e,n,i){this.name=t,this.type=e,this._evaluate=n,this.args=i};ge.prototype.evaluate=function(t){return this._evaluate(t,this.args)},ge.prototype.eachChild=function(t){this.args.forEach(t)},ge.prototype.outputDefined=function(){return!1},ge.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},ge.parse=function(t,e){var n,i=t[0],r=ge.definitions[i];if(!r)return e.error('Unknown expression "'+i+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(r)?r[0]:r.type,a=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,s=a.filter((function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1})),l=null,u=0,c=s;u<c.length;u+=1){var h=c[u],p=h[0],f=h[1];l=new ze(e.registry,e.path,null,e.scope);for(var d=[],m=!1,g=1;g<t.length;g++){var y=t[g],v=Array.isArray(p)?p[g-1]:p.type,_=l.parse(y,1+d.length,v);if(!_){m=!0;break}d.push(_)}if(!m)if(Array.isArray(p)&&p.length!==d.length)l.error("Expected "+p.length+" arguments, but found "+d.length+" instead.");else{for(var b=0;b<d.length;b++){var x=Array.isArray(p)?p[b]:p.type,w=d[b];l.concat(b+1).checkSubtype(x,w.type)}if(0===l.errors.length)return new ge(i,o,f,d)}}if(1===s.length)(n=e.errors).push.apply(n,l.errors);else{for(var C=(s.length?s:a).map((function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Ht).join(", ")+")":"("+Ht(e.type)+"...)"})).join(" | "),k=[],E=1;E<t.length;E++){var S=e.parse(t[E],1+k.length);if(!S)return null;k.push(Ht(S.type))}e.error("Expected arguments of type "+C+", but found ("+k.join(", ")+") instead.")}return null},ge.register=function(t,e){for(var n in ge.definitions=e,e)t[n]=ge};var ye=function(t,e,n){this.type=Ut,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};function ve(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function _e(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function be(t,e){var n=(180+t[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,r=Math.pow(2,e.z);return[Math.round(n*r*8192),Math.round(i*r*8192)]}function xe(t,e,n){return e[1]>t[1]!=n[1]>t[1]&&t[0]<(n[0]-e[0])*(t[1]-e[1])/(n[1]-e[1])+e[0]}function we(t,e){for(var n,i,r,o,a,s,l,u=!1,c=0,h=e.length;c<h;c++)for(var p=e[c],f=0,d=p.length;f<d-1;f++){if((o=(n=t)[0]-(i=p[f])[0])*(l=n[1]-(r=p[f+1])[1])-(s=n[0]-r[0])*(a=n[1]-i[1])==0&&o*s<=0&&a*l<=0)return!1;xe(t,p[f],p[f+1])&&(u=!u)}return u}function Ce(t,e){for(var n=0;n<e.length;n++)if(we(t,e[n]))return!0;return!1}function ke(t,e,n,i){var r=i[0]-n[0],o=i[1]-n[1],a=(t[0]-n[0])*o-r*(t[1]-n[1]),s=(e[0]-n[0])*o-r*(e[1]-n[1]);return a>0&&s<0||a<0&&s>0}function Ee(t,e,n){for(var i=0,r=n;i<r.length;i+=1)for(var o=r[i],a=0;a<o.length-1;++a)if(0!=(h=[(c=o[a+1])[0]-(u=o[a])[0],c[1]-u[1]])[0]*(p=[(l=e)[0]-(s=t)[0],l[1]-s[1]])[1]-h[1]*p[0]&&ke(s,l,u,c)&&ke(u,c,s,l))return!0;var s,l,u,c,h,p;return!1}function Se(t,e){for(var n=0;n<t.length;++n)if(!we(t[n],e))return!1;for(var i=0;i<t.length-1;++i)if(Ee(t[i],t[i+1],e))return!1;return!0}function Ie(t,e){for(var n=0;n<e.length;n++)if(Se(t,e[n]))return!0;return!1}function Te(t,e,n){for(var i=[],r=0;r<t.length;r++){for(var o=[],a=0;a<t[r].length;a++){var s=be(t[r][a],n);ve(e,s),o.push(s)}i.push(o)}return i}function Pe(t,e,n){for(var i=[],r=0;r<t.length;r++){var o=Te(t[r],e,n);i.push(o)}return i}function Ae(t,e,n,i){if(t[0]<n[0]||t[0]>n[2]){var r=.5*i,o=t[0]-n[0]>r?-i:n[0]-t[0]>r?i:0;0===o&&(o=t[0]-n[2]>r?-i:n[2]-t[0]>r?i:0),t[0]+=o}ve(e,t)}function Le(t,e,n,i){for(var r=8192*Math.pow(2,i.z),o=[8192*i.x,8192*i.y],a=[],s=0,l=t;s<l.length;s+=1)for(var u=0,c=l[s];u<c.length;u+=1){var h=c[u],p=[h.x+o[0],h.y+o[1]];Ae(p,e,n,r),a.push(p)}return a}function Me(t,e,n,i){for(var r,o=8192*Math.pow(2,i.z),a=[8192*i.x,8192*i.y],s=[],l=0,u=t;l<u.length;l+=1){for(var c=[],h=0,p=u[l];h<p.length;h+=1){var f=p[h],d=[f.x+a[0],f.y+a[1]];ve(e,d),c.push(d)}s.push(c)}if(e[2]-e[0]<=o/2){(r=e)[0]=r[1]=1/0,r[2]=r[3]=-1/0;for(var m=0,g=s;m<g.length;m+=1)for(var y=0,v=g[m];y<v.length;y+=1)Ae(v[y],e,n,o)}return s}ye.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var i=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Ft);if(!i)return null;var r=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Ft);if(!r)return null;var o=null;return n.locale&&!(o=e.parse(n.locale,1,Nt))?null:new ye(i,r,o)},ye.prototype.evaluate=function(t){return new Qt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},ye.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},ye.prototype.outputDefined=function(){return!1},ye.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Re=function(t,e){this.type=Ft,this.geojson=t,this.geometries=e};function Oe(t){if(t instanceof ge){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Re)return!1;var e=!0;return t.eachChild((function(t){e&&!Oe(t)&&(e=!1)})),e}function De(t){if(t instanceof ge&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!De(t)&&(e=!1)})),e}function Ne(t,e){if(t instanceof ge&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild((function(t){n&&!Ne(t,e)&&(n=!1)})),n}Re.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(ie(t[1])){var n=t[1];if("FeatureCollection"===n.type)for(var i=0;i<n.features.length;++i){var r=n.features[i].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new Re(n,n.features[i].geometry)}else if("Feature"===n.type){var o=n.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Re(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new Re(n,n)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Re.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){var o=Te(e.coordinates,i,r),a=Le(t.geometry(),n,i,r);if(!_e(n,i))return!1;for(var s=0,l=a;s<l.length;s+=1)if(!we(l[s],o))return!1}if("MultiPolygon"===e.type){var u=Pe(e.coordinates,i,r),c=Le(t.geometry(),n,i,r);if(!_e(n,i))return!1;for(var h=0,p=c;h<p.length;h+=1)if(!Ce(p[h],u))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){var o=Te(e.coordinates,i,r),a=Me(t.geometry(),n,i,r);if(!_e(n,i))return!1;for(var s=0,l=a;s<l.length;s+=1)if(!Se(l[s],o))return!1}if("MultiPolygon"===e.type){var u=Pe(e.coordinates,i,r),c=Me(t.geometry(),n,i,r);if(!_e(n,i))return!1;for(var h=0,p=c;h<p.length;h+=1)if(!Ie(p[h],u))return!1}return!0}(t,this.geometries)}return!1},Re.prototype.eachChild=function(){},Re.prototype.outputDefined=function(){return!0},Re.prototype.serialize=function(){return["within",this.geojson]};var Fe=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};Fe.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new Fe(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},Fe.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Fe.prototype.eachChild=function(){},Fe.prototype.outputDefined=function(){return!1},Fe.prototype.serialize=function(){return["var",this.name]};var ze=function(t,e,n,i,r){void 0===e&&(e=[]),void 0===i&&(i=new Rt),void 0===r&&(r=[]),this.registry=t,this.path=e,this.key=e.map((function(t){return"["+t+"]"})).join(""),this.scope=i,this.errors=r,this.expectedType=n};function Be(t,e){for(var n,i=t.length-1,r=0,o=i,a=0;r<=o;)if((n=t[a=Math.floor((r+o)/2)])<=e){if(a===i||e<t[a+1])return a;r=a+1}else{if(!(n>e))throw new se("Input is not a number.");o=a-1}return 0}ze.prototype.parse=function(t,e,n,i,r){return void 0===r&&(r={}),e?this.concat(e,n,i)._parse(t,r):this._parse(t,r)},ze.prototype._parse=function(t,e){function n(t,e,n){return"assert"===n?new ue(e,[t]):"coerce"===n?new fe(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var i=t[0];if("string"!=typeof i)return this.error("Expression name must be a string, but found "+typeof i+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var r=this.registry[i];if(r){var o=r.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,e.typeAnnotation||"coerce");else o=n(o,a,e.typeAnnotation||"assert")}if(!(o instanceof ae)&&"resolvedImage"!==o.type.kind&&function t(e){if(e instanceof Fe)return t(e.boundExpression);if(e instanceof ge&&"error"===e.name)return!1;if(e instanceof ye)return!1;if(e instanceof Re)return!1;var n=e instanceof fe||e instanceof ue,i=!0;return e.eachChild((function(e){i=n?i&&t(e):i&&e instanceof ae})),!!i&&Oe(e)&&Ne(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var l=new me;try{o=new ae(o.type,o.evaluate(l))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+i+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},ze.prototype.concat=function(t,e,n){var i="number"==typeof t?this.path.concat(t):this.path,r=n?this.scope.concat(n):this.scope;return new ze(this.registry,i,e||null,r,this.errors)},ze.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var i=""+this.key+e.map((function(t){return"["+t+"]"})).join("");this.errors.push(new Mt(i,t))},ze.prototype.checkSubtype=function(t,e){var n=Zt(t,e);return n&&this.error(n),n};var Ve=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var i=0,r=n;i<r.length;i+=1){var o=r[i],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};function Ue(t,e,n){return t*(1-n)+e*n}Ve.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var n=e.parse(t[1],1,Dt);if(!n)return null;var i=[],r=null;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var o=1;o<t.length;o+=2){var a=1===o?-1/0:t[o],s=t[o+1],l=o,u=o+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var c=e.parse(s,u,r);if(!c)return null;r=r||c.type,i.push([a,c])}return new Ve(r,n,i)},Ve.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);var r=e.length;return i>=e[r-1]?n[r-1].evaluate(t):n[Be(e,i)].evaluate(t)},Ve.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Ve.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},Ve.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var je=Object.freeze({__proto__:null,number:Ue,color:function(t,e,n){return new Jt(Ue(t.r,e.r,n),Ue(t.g,e.g,n),Ue(t.b,e.b,n),Ue(t.a,e.a,n))},array:function(t,e,n){return t.map((function(t,i){return Ue(t,e[i],n)}))}}),qe=6/29*3*(6/29),Ge=Math.PI/180,He=180/Math.PI;function Xe(t){return t>.008856451679035631?Math.pow(t,1/3):t/qe+4/29}function Ze(t){return t>6/29?t*t*t:qe*(t-4/29)}function We(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ye(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ke(t){var e=Ye(t.r),n=Ye(t.g),i=Ye(t.b),r=Xe((.4124564*e+.3575761*n+.1804375*i)/.95047),o=Xe((.2126729*e+.7151522*n+.072175*i)/1);return{l:116*o-16,a:500*(r-o),b:200*(o-Xe((.0193339*e+.119192*n+.9503041*i)/1.08883)),alpha:t.a}}function Je(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200;return e=1*Ze(e),n=.95047*Ze(n),i=1.08883*Ze(i),new Jt(We(3.2404542*n-1.5371385*e-.4985314*i),We(-.969266*n+1.8760108*e+.041556*i),We(.0556434*n-.2040259*e+1.0572252*i),t.alpha)}function Qe(t,e,n){var i=e-t;return t+n*(i>180||i<-180?i-360*Math.round(i/360):i)}var $e={forward:Ke,reverse:Je,interpolate:function(t,e,n){return{l:Ue(t.l,e.l,n),a:Ue(t.a,e.a,n),b:Ue(t.b,e.b,n),alpha:Ue(t.alpha,e.alpha,n)}}},tn={forward:function(t){var e=Ke(t),n=e.l,i=e.a,r=e.b,o=Math.atan2(r,i)*He;return{h:o<0?o+360:o,c:Math.sqrt(i*i+r*r),l:n,alpha:t.a}},reverse:function(t){var e=t.h*Ge,n=t.c;return Je({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:Qe(t.h,e.h,n),c:Ue(t.c,e.c,n),l:Ue(t.l,e.l,n),alpha:Ue(t.alpha,e.alpha,n)}}},en=Object.freeze({__proto__:null,lab:$e,hcl:tn}),nn=function(t,e,n,i,r){this.type=t,this.operator=e,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(var o=0,a=r;o<a.length;o+=1){var s=a[o],l=s[1];this.labels.push(s[0]),this.outputs.push(l)}};function rn(t,e,n,i){var r=i-n,o=t-n;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}nn.interpolationFactor=function(t,e,i,r){var o=0;if("exponential"===t.name)o=rn(e,t.base,i,r);else if("linear"===t.name)o=rn(e,1,i,r);else if("cubic-bezier"===t.name){var a=t.controlPoints;o=new n(a[0],a[1],a[2],a[3]).solve(rn(e,1,i,r))}return o},nn.parse=function(t,e){var n=t[0],i=t[1],r=t[2],o=t.slice(3);if(!Array.isArray(i)||0===i.length)return e.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){var a=i[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:a}}else{if("cubic-bezier"!==i[0])return e.error("Unknown interpolation type "+String(i[0]),1,0);var s=i.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,2,Dt)))return null;var l=[],u=null;"interpolate-hcl"===n||"interpolate-lab"===n?u=zt:e.expectedType&&"value"!==e.expectedType.kind&&(u=e.expectedType);for(var c=0;c<o.length;c+=2){var h=o[c],p=o[c+1],f=c+3,d=c+4;if("number"!=typeof h)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(l.length&&l[l.length-1][0]>=h)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);var m=e.parse(p,d,u);if(!m)return null;u=u||m.type,l.push([h,m])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new nn(u,n,i,r,l):e.error("Type "+Ht(u)+" is not interpolatable.")},nn.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);var r=e.length;if(i>=e[r-1])return n[r-1].evaluate(t);var o=Be(e,i),a=nn.interpolationFactor(this.interpolation,i,e[o],e[o+1]),s=n[o].evaluate(t),l=n[o+1].evaluate(t);return"interpolate"===this.operator?je[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?tn.reverse(tn.interpolate(tn.forward(s),tn.forward(l),a)):$e.reverse($e.interpolate($e.forward(s),$e.forward(l),a))},nn.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},nn.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},nn.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e};var on=function(t,e){this.type=t,this.args=e};on.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,i=e.expectedType;i&&"value"!==i.kind&&(n=i);for(var r=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=e.parse(a[o],1+r.length,n,void 0,{typeAnnotation:"omit"});if(!s)return null;n=n||s.type,r.push(s)}var l=i&&r.some((function(t){return Zt(i,t.type)}));return new on(l?Vt:n,r)},on.prototype.evaluate=function(t){for(var e,n=null,i=0,r=0,o=this.args;r<o.length&&(i++,(n=o[r].evaluate(t))&&n instanceof ee&&!n.available&&(e||(e=n.name),n=null,i===this.args.length&&(n=e)),null===n);r+=1);return n},on.prototype.eachChild=function(t){this.args.forEach(t)},on.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},on.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var an=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};an.prototype.evaluate=function(t){return this.result.evaluate(t)},an.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},an.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],i=1;i<t.length-1;i+=2){var r=t[i];if("string"!=typeof r)return e.error("Expected string, but found "+typeof r+" instead.",i);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);var o=e.parse(t[i+1],i+1);if(!o)return null;n.push([r,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return a?new an(n,a):null},an.prototype.outputDefined=function(){return this.result.outputDefined()},an.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var i=n[e];t.push(i[0],i[1].serialize())}return t.push(this.result.serialize()),t};var sn=function(t,e,n){this.type=t,this.index=e,this.input=n};sn.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,Dt),i=e.parse(t[2],2,Gt(e.expectedType||Vt));return n&&i?new sn(i.type.itemType,n,i):null},sn.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new se("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new se("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new se("Array index must be an integer, but found "+e+" instead.");return n[e]},sn.prototype.eachChild=function(t){t(this.index),t(this.input)},sn.prototype.outputDefined=function(){return!1},sn.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ln=function(t,e){this.type=Ft,this.needle=t,this.haystack=e};ln.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,Vt),i=e.parse(t[2],2,Vt);return n&&i?Wt(n.type,[Ft,Nt,Dt,Ot,Vt])?new ln(n,i):e.error("Expected first argument to be of type boolean, string, number or null, but found "+Ht(n.type)+" instead"):null},ln.prototype.evaluate=function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!Yt(e,["boolean","string","number","null"]))throw new se("Expected first argument to be of type boolean, string, number or null, but found "+Ht(re(e))+" instead.");if(!Yt(n,["string","array"]))throw new se("Expected second argument to be of type array or string, but found "+Ht(re(n))+" instead.");return n.indexOf(e)>=0},ln.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},ln.prototype.outputDefined=function(){return!0},ln.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var un=function(t,e,n){this.type=Dt,this.needle=t,this.haystack=e,this.fromIndex=n};un.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,Vt),i=e.parse(t[2],2,Vt);if(!n||!i)return null;if(!Wt(n.type,[Ft,Nt,Dt,Ot,Vt]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+Ht(n.type)+" instead");if(4===t.length){var r=e.parse(t[3],3,Dt);return r?new un(n,i,r):null}return new un(n,i)},un.prototype.evaluate=function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!Yt(e,["boolean","string","number","null"]))throw new se("Expected first argument to be of type boolean, string, number or null, but found "+Ht(re(e))+" instead.");if(!Yt(n,["string","array"]))throw new se("Expected second argument to be of type array or string, but found "+Ht(re(n))+" instead.");if(this.fromIndex){var i=this.fromIndex.evaluate(t);return n.indexOf(e,i)}return n.indexOf(e)},un.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},un.prototype.outputDefined=function(){return!1},un.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var cn=function(t,e,n,i,r,o){this.inputType=t,this.type=e,this.input=n,this.cases=i,this.outputs=r,this.otherwise=o};cn.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var r={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],l=t[a+1];Array.isArray(s)||(s=[s]);var u=e.concat(a);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,h=s;c<h.length;c+=1){var p=h[c];if("number"!=typeof p&&"string"!=typeof p)return u.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof p&&Math.floor(p)!==p)return u.error("Numeric branch labels must be integer values.");if(n){if(u.checkSubtype(n,re(p)))return null}else n=re(p);if(void 0!==r[String(p)])return u.error("Branch labels must be unique.");r[String(p)]=o.length}var f=e.parse(l,a,i);if(!f)return null;i=i||f.type,o.push(f)}var d=e.parse(t[1],1,Vt);if(!d)return null;var m=e.parse(t[t.length-1],t.length-1,i);return m?"value"!==d.type.kind&&e.concat(1).checkSubtype(n,d.type)?null:new cn(n,i,d,r,o,m):null},cn.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(re(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},cn.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},cn.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()},cn.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],n=[],i={},r=0,o=Object.keys(this.cases).sort();r<o.length;r+=1){var a=o[r];void 0===(h=i[this.cases[a]])?(i[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[h][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},l=0,u=n;l<u.length;l+=1){var c=u[l],h=c[0],p=c[1];e.push(1===p.length?s(p[0]):p.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var hn=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};hn.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var i=[],r=1;r<t.length-1;r+=2){var o=e.parse(t[r],r,Ft);if(!o)return null;var a=e.parse(t[r+1],r+1,n);if(!a)return null;i.push([o,a]),n=n||a.type}var s=e.parse(t[t.length-1],t.length-1,n);return s?new hn(n,i,s):null},hn.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var i=n[e],r=i[1];if(i[0].evaluate(t))return r.evaluate(t)}return this.otherwise.evaluate(t)},hn.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var i=n[e],r=i[1];t(i[0]),t(r)}t(this.otherwise)},hn.prototype.outputDefined=function(){return this.branches.every((function(t){return t[1].outputDefined()}))&&this.otherwise.outputDefined()},hn.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var pn=function(t,e,n,i){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=i};function fn(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function dn(t,e,n,i){return 0===i.compare(e,n)}function mn(t,e,n){var i="=="!==t&&"!="!==t;return function(){function r(t,e,n){this.type=Ft,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return r.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],o=e.parse(t[1],1,Vt);if(!o)return null;if(!fn(n,o.type))return e.concat(1).error('"'+n+"\" comparisons are not supported for type '"+Ht(o.type)+"'.");var a=e.parse(t[2],2,Vt);if(!a)return null;if(!fn(n,a.type))return e.concat(2).error('"'+n+"\" comparisons are not supported for type '"+Ht(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+Ht(o.type)+"' and '"+Ht(a.type)+"'.");i&&("value"===o.type.kind&&"value"!==a.type.kind?o=new ue(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new ue(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,Ut)))return null}return new r(o,a,s)},r.prototype.evaluate=function(r){var o=this.lhs.evaluate(r),a=this.rhs.evaluate(r);if(i&&this.hasUntypedArgument){var s=re(o),l=re(a);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new se('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+l.kind+") instead.")}if(this.collator&&!i&&this.hasUntypedArgument){var u=re(o),c=re(a);if("string"!==u.kind||"string"!==c.kind)return e(r,o,a)}return this.collator?n(r,o,a,this.collator.evaluate(r)):e(r,o,a)},r.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},r.prototype.outputDefined=function(){return!0},r.prototype.serialize=function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e},r}()}pn.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,Vt),i=e.parse(t[2],2,Dt);if(!n||!i)return null;if(!Wt(n.type,[Gt(Vt),Nt,Vt]))return e.error("Expected first argument to be of type array or string, but found "+Ht(n.type)+" instead");if(4===t.length){var r=e.parse(t[3],3,Dt);return r?new pn(n.type,n,i,r):null}return new pn(n.type,n,i)},pn.prototype.evaluate=function(t){var e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!Yt(e,["string","array"]))throw new se("Expected first argument to be of type array or string, but found "+Ht(re(e))+" instead.");if(this.endIndex){var i=this.endIndex.evaluate(t);return e.slice(n,i)}return e.slice(n)},pn.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},pn.prototype.outputDefined=function(){return!1},pn.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var gn=mn("==",(function(t,e,n){return e===n}),dn),yn=mn("!=",(function(t,e,n){return e!==n}),(function(t,e,n,i){return!dn(0,e,n,i)})),vn=mn("<",(function(t,e,n){return e<n}),(function(t,e,n,i){return i.compare(e,n)<0})),_n=mn(">",(function(t,e,n){return e>n}),(function(t,e,n,i){return i.compare(e,n)>0})),bn=mn("<=",(function(t,e,n){return e<=n}),(function(t,e,n,i){return i.compare(e,n)<=0})),xn=mn(">=",(function(t,e,n){return e>=n}),(function(t,e,n,i){return i.compare(e,n)>=0})),wn=function(t,e,n,i,r){this.type=Nt,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=i,this.maxFractionDigits=r};wn.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,Dt);if(!n)return null;var i=t[2];if("object"!=typeof i||Array.isArray(i))return e.error("NumberFormat options argument must be an object.");var r=null;if(i.locale&&!(r=e.parse(i.locale,1,Nt)))return null;var o=null;if(i.currency&&!(o=e.parse(i.currency,1,Nt)))return null;var a=null;if(i["min-fraction-digits"]&&!(a=e.parse(i["min-fraction-digits"],1,Dt)))return null;var s=null;return i["max-fraction-digits"]&&!(s=e.parse(i["max-fraction-digits"],1,Dt))?null:new wn(n,r,o,a,s)},wn.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},wn.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},wn.prototype.outputDefined=function(){return!1},wn.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Cn=function(t){this.type=Dt,this.input=t};Cn.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+Ht(n.type)+" instead."):new Cn(n):null},Cn.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new se("Expected value to be of type string or array, but found "+Ht(re(e))+" instead.")},Cn.prototype.eachChild=function(t){t(this.input)},Cn.prototype.outputDefined=function(){return!1},Cn.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var kn={"==":gn,"!=":yn,">":_n,"<":vn,">=":xn,"<=":bn,array:ue,at:sn,boolean:ue,case:hn,coalesce:on,collator:ye,format:ce,image:he,in:ln,"index-of":un,interpolate:nn,"interpolate-hcl":nn,"interpolate-lab":nn,length:Cn,let:an,literal:ae,match:cn,number:ue,"number-format":wn,object:ue,slice:pn,step:Ve,string:ue,"to-boolean":fe,"to-color":fe,"to-number":fe,"to-string":fe,var:Fe,within:Re};function En(t,e){var n=e[0],i=e[1],r=e[2],o=e[3];n=n.evaluate(t),i=i.evaluate(t),r=r.evaluate(t);var a=o?o.evaluate(t):1,s=ne(n,i,r,a);if(s)throw new se(s);return new Jt(n/255*a,i/255*a,r/255*a,a)}function Sn(t,e){return t in e}function In(t,e){var n=e[t];return void 0===n?null:n}function Tn(t){return{type:t}}function Pn(t){return{result:"success",value:t}}function An(t){return{result:"error",value:t}}function Ln(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Mn(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Rn(t){return!!t.expression&&t.expression.interpolated}function On(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Dn(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Nn(t){return t}function Fn(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function zn(t,e,n,i,r){return Fn(typeof n===r?i[n]:void 0,t.default,e.default)}function Bn(t,e,n){if("number"!==On(n))return Fn(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var r=Be(t.stops.map((function(t){return t[0]})),n);return t.stops[r][1]}function Vn(t,e,n){var i=void 0!==t.base?t.base:1;if("number"!==On(n))return Fn(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var o=Be(t.stops.map((function(t){return t[0]})),n),a=function(t,e,n,i){var r=i-n,o=t-n;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}(n,i,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1],u=je[e.type]||Nn;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=en[t.colorSpace];u=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=s.evaluate.apply(void 0,t),i=l.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==i)return u(n,i,a)}}:u(s,l,a)}function Un(t,e,n){return"color"===e.type?n=Jt.parse(n):"formatted"===e.type?n=te.fromString(n.toString()):"resolvedImage"===e.type?n=ee.fromString(n.toString()):On(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),Fn(n,t.default,e.default)}ge.register(kn,{error:[{kind:"error"},[Nt],function(t,e){throw new se(e[0].evaluate(t))}],typeof:[Nt,[Vt],function(t,e){return Ht(re(e[0].evaluate(t)))}],"to-rgba":[Gt(Dt,4),[zt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[zt,[Dt,Dt,Dt],En],rgba:[zt,[Dt,Dt,Dt,Dt],En],has:{type:Ft,overloads:[[[Nt],function(t,e){return Sn(e[0].evaluate(t),t.properties())}],[[Nt,Bt],function(t,e){var n=e[1];return Sn(e[0].evaluate(t),n.evaluate(t))}]]},get:{type:Vt,overloads:[[[Nt],function(t,e){return In(e[0].evaluate(t),t.properties())}],[[Nt,Bt],function(t,e){var n=e[1];return In(e[0].evaluate(t),n.evaluate(t))}]]},"feature-state":[Vt,[Nt],function(t,e){return In(e[0].evaluate(t),t.featureState||{})}],properties:[Bt,[],function(t){return t.properties()}],"geometry-type":[Nt,[],function(t){return t.geometryType()}],id:[Vt,[],function(t){return t.id()}],zoom:[Dt,[],function(t){return t.globals.zoom}],"heatmap-density":[Dt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Dt,[],function(t){return t.globals.lineProgress||0}],accumulated:[Vt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Dt,Tn(Dt),function(t,e){for(var n=0,i=0,r=e;i<r.length;i+=1)n+=r[i].evaluate(t);return n}],"*":[Dt,Tn(Dt),function(t,e){for(var n=1,i=0,r=e;i<r.length;i+=1)n*=r[i].evaluate(t);return n}],"-":{type:Dt,overloads:[[[Dt,Dt],function(t,e){var n=e[1];return e[0].evaluate(t)-n.evaluate(t)}],[[Dt],function(t,e){return-e[0].evaluate(t)}]]},"/":[Dt,[Dt,Dt],function(t,e){var n=e[1];return e[0].evaluate(t)/n.evaluate(t)}],"%":[Dt,[Dt,Dt],function(t,e){var n=e[1];return e[0].evaluate(t)%n.evaluate(t)}],ln2:[Dt,[],function(){return Math.LN2}],pi:[Dt,[],function(){return Math.PI}],e:[Dt,[],function(){return Math.E}],"^":[Dt,[Dt,Dt],function(t,e){var n=e[1];return Math.pow(e[0].evaluate(t),n.evaluate(t))}],sqrt:[Dt,[Dt],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[Dt,[Dt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[Dt,[Dt],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[Dt,[Dt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[Dt,[Dt],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[Dt,[Dt],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[Dt,[Dt],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[Dt,[Dt],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[Dt,[Dt],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[Dt,[Dt],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[Dt,Tn(Dt),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[Dt,Tn(Dt),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[Dt,[Dt],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[Dt,[Dt],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[Dt,[Dt],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[Dt,[Dt],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[Ft,[Nt,Vt],function(t,e){var n=e[0],i=e[1];return t.properties()[n.value]===i.value}],"filter-id-==":[Ft,[Vt],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[Ft,[Nt],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[Ft,[Nt,Vt],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],o=i.value;return typeof r==typeof o&&r<o}],"filter-id-<":[Ft,[Vt],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i<r}],"filter->":[Ft,[Nt,Vt],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],o=i.value;return typeof r==typeof o&&r>o}],"filter-id->":[Ft,[Vt],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i>r}],"filter-<=":[Ft,[Nt,Vt],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],o=i.value;return typeof r==typeof o&&r<=o}],"filter-id-<=":[Ft,[Vt],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i<=r}],"filter->=":[Ft,[Nt,Vt],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],o=i.value;return typeof r==typeof o&&r>=o}],"filter-id->=":[Ft,[Vt],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i>=r}],"filter-has":[Ft,[Vt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Ft,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[Ft,[Gt(Nt)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Ft,[Gt(Vt)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[Ft,[Nt,Gt(Vt)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[Ft,[Nt,Gt(Vt)],function(t,e){var n=e[0],i=e[1];return function(t,e,n,i){for(;n<=i;){var r=n+i>>1;if(e[r]===t)return!0;e[r]>t?i=r-1:n=r+1}return!1}(t.properties()[n.value],i.value,0,i.value.length-1)}],all:{type:Ft,overloads:[[[Ft,Ft],function(t,e){var n=e[1];return e[0].evaluate(t)&&n.evaluate(t)}],[Tn(Ft),function(t,e){for(var n=0,i=e;n<i.length;n+=1)if(!i[n].evaluate(t))return!1;return!0}]]},any:{type:Ft,overloads:[[[Ft,Ft],function(t,e){var n=e[1];return e[0].evaluate(t)||n.evaluate(t)}],[Tn(Ft),function(t,e){for(var n=0,i=e;n<i.length;n+=1)if(i[n].evaluate(t))return!0;return!1}]]},"!":[Ft,[Ft],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Ft,[Nt],function(t,e){var n=t.globals&&t.globals.isSupportedScript;return!n||n(e[0].evaluate(t))}],upcase:[Nt,[Nt],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Nt,[Nt],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Nt,Tn(Vt),function(t,e){return e.map((function(e){return oe(e.evaluate(t))})).join("")}],"resolved-locale":[Nt,[Ut],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var jn=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new me,this._defaultValue=e?function(t){return"color"===t.type&&Dn(t.default)?new Jt(0,0,0,0):"color"===t.type?Jt.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function qn(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in kn}function Gn(t,e){var n=new ze(kn,[],e?function(t){var e={color:zt,string:Nt,number:Dt,enum:Nt,boolean:Ft,formatted:jt,resolvedImage:qt};return"array"===t.type?Gt(e[t.value]||Vt,t.length):e[t.type]}(e):void 0),i=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return i?Pn(new jn(i,e)):An(n.errors)}jn.prototype.evaluateWithoutErrorHandling=function(t,e,n,i,r,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},jn.prototype.evaluate=function(t,e,n,i,r,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new se("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Hn=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!De(e.expression)};Hn.prototype.evaluateWithoutErrorHandling=function(t,e,n,i,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r,o)},Hn.prototype.evaluate=function(t,e,n,i,r,o){return this._styleExpression.evaluate(t,e,n,i,r,o)};var Xn=function(t,e,n,i){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!De(e.expression),this.interpolationType=i};function Zn(t,e){if("error"===(t=Gn(t,e)).result)return t;var n=t.value.expression,i=Oe(n);if(!i&&!Ln(e))return An([new Mt("","data expressions not supported")]);var r=Ne(n,["zoom"]);if(!r&&!Mn(e))return An([new Mt("","zoom expressions not supported")]);var o=function t(e){var n=null;if(e instanceof an)n=t(e.result);else if(e instanceof on)for(var i=0,r=e.args;i<r.length&&!(n=t(r[i]));i+=1);else(e instanceof Ve||e instanceof nn)&&e.input instanceof ge&&"zoom"===e.input.name&&(n=e);return n instanceof Mt||e.eachChild((function(e){var i=t(e);i instanceof Mt?n=i:!n&&i?n=new Mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&i&&n!==i&&(n=new Mt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}(n);return o||r?o instanceof Mt?An([o]):o instanceof nn&&!Rn(e)?An([new Mt("",'"interpolate" expressions cannot be used with this property')]):Pn(o?new Xn(i?"camera":"composite",t.value,o.labels,o instanceof nn?o.interpolation:void 0):new Hn(i?"constant":"source",t.value)):An([new Mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Xn.prototype.evaluateWithoutErrorHandling=function(t,e,n,i,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r,o)},Xn.prototype.evaluate=function(t,e,n,i,r,o){return this._styleExpression.evaluate(t,e,n,i,r,o)},Xn.prototype.interpolationFactor=function(t,e,n){return this.interpolationType?nn.interpolationFactor(this.interpolationType,t,e,n):0};var Wn=function(t,e){this._parameters=t,this._specification=e,Pt(this,function t(e,n){var i,r,o,a="color"===n.type,s=e.stops&&"object"==typeof e.stops[0][0],l=s||!(s||void 0!==e.property),u=e.type||(Rn(n)?"exponential":"interval");if(a&&((e=Pt({},e)).stops&&(e.stops=e.stops.map((function(t){return[t[0],Jt.parse(t[1])]}))),e.default=Jt.parse(e.default?e.default:n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!en[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===u)i=Vn;else if("interval"===u)i=Bn;else if("categorical"===u){i=zn,r=Object.create(null);for(var c=0,h=e.stops;c<h.length;c+=1){var p=h[c];r[p[0]]=p[1]}o=typeof e.stops[0][0]}else{if("identity"!==u)throw new Error('Unknown function type "'+u+'"');i=Un}if(s){for(var f={},d=[],m=0;m<e.stops.length;m++){var g=e.stops[m],y=g[0].zoom;void 0===f[y]&&(f[y]={zoom:y,type:e.type,property:e.property,default:e.default,stops:[]},d.push(y)),f[y].stops.push([g[0].value,g[1]])}for(var v=[],_=0,b=d;_<b.length;_+=1){var x=b[_];v.push([f[x].zoom,t(f[x],n)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:nn.interpolationFactor.bind(void 0,w),zoomStops:v.map((function(t){return t[0]})),evaluate:function(t,i){var r=t.zoom;return Vn({stops:v,base:e.base},n,r).evaluate(r,i)}}}if(l){var C="exponential"===u?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:C,interpolationFactor:nn.interpolationFactor.bind(void 0,C),zoomStops:e.stops.map((function(t){return t[0]})),evaluate:function(t){return i(e,n,t.zoom,r,o)}}}return{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?Fn(e.default,n.default):i(e,n,s,r,o)}}}(this._parameters,this._specification))};function Yn(t){var e=t.key,n=t.value,i=t.valueSpec||{},r=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],l=On(n);if("object"!==l)return[new It(e,n,"object expected, "+l+" found")];for(var u in n){var c=u.split(".")[0],h=i[c]||i["*"],p=void 0;if(r[c])p=r[c];else if(i[c])p=bi;else if(r["*"])p=r["*"];else{if(!i["*"]){s.push(new It(e,n[u],'unknown property "'+u+'"'));continue}p=bi}s=s.concat(p({key:(e?e+".":e)+u,value:n[u],valueSpec:h,style:o,styleSpec:a,object:n,objectKey:u},n))}for(var f in i)r[f]||i[f].required&&void 0===i[f].default&&void 0===n[f]&&s.push(new It(e,n,'missing required property "'+f+'"'));return s}function Kn(t){var e=t.value,n=t.valueSpec,i=t.style,r=t.styleSpec,o=t.key,a=t.arrayElementValidator||bi;if("array"!==On(e))return[new It(o,e,"array expected, "+On(e)+" found")];if(n.length&&e.length!==n.length)return[new It(o,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new It(o,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var s={type:n.value,values:n.values};r.$version<7&&(s.function=n.function),"object"===On(n.value)&&(s=n.value);for(var l=[],u=0;u<e.length;u++)l=l.concat(a({array:e,arrayIndex:u,value:e[u],valueSpec:s,style:i,styleSpec:r,key:o+"["+u+"]"}));return l}function Jn(t){var e=t.key,n=t.value,i=t.valueSpec,r=On(n);return"number"===r&&n!=n&&(r="NaN"),"number"!==r?[new It(e,n,"number expected, "+r+" found")]:"minimum"in i&&n<i.minimum?[new It(e,n,n+" is less than the minimum value "+i.minimum)]:"maximum"in i&&n>i.maximum?[new It(e,n,n+" is greater than the maximum value "+i.maximum)]:[]}function Qn(t){var e,n,i,r=t.valueSpec,o=At(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,l=!s,u="array"===On(t.value.stops)&&"array"===On(t.value.stops[0])&&"object"===On(t.value.stops[0][0]),c=Yn({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new It(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value;return e=e.concat(Kn({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===On(n)&&0===n.length&&e.push(new It(t.key,n,"array must have at least one stop")),e},default:function(t){return bi({key:t.key,value:t.value,valueSpec:r,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&c.push(new It(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||c.push(new It(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!Rn(t.valueSpec)&&c.push(new It(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Ln(t.valueSpec)?c.push(new It(t.key,t.value,"property functions not supported")):s&&!Mn(t.valueSpec)&&c.push(new It(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!u||void 0!==t.value.property||c.push(new It(t.key,t.value,'"property" property is required')),c;function h(t){var e=[],o=t.value,s=t.key;if("array"!==On(o))return[new It(s,o,"array expected, "+On(o)+" found")];if(2!==o.length)return[new It(s,o,"array length 2 expected, length "+o.length+" found")];if(u){if("object"!==On(o[0]))return[new It(s,o,"object expected, "+On(o[0])+" found")];if(void 0===o[0].zoom)return[new It(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new It(s,o,"object stop key must have value")];if(i&&i>At(o[0].zoom))return[new It(s,o[0].zoom,"stop zoom values must appear in ascending order")];At(o[0].zoom)!==i&&(i=At(o[0].zoom),n=void 0,a={}),e=e.concat(Yn({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Jn,value:p}}))}else e=e.concat(p({key:s+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return qn(Lt(o[1]))?e.concat([new It(s+"[1]",o[1],"expressions are not allowed in function stops.")]):e.concat(bi({key:s+"[1]",value:o[1],valueSpec:r,style:t.style,styleSpec:t.styleSpec}))}function p(t,i){var s=On(t.value),l=At(t.value),u=null!==t.value?t.value:i;if(e){if(s!==e)return[new It(t.key,u,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new It(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, "+s+" found";return Ln(r)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new It(t.key,u,c)]}return"categorical"!==o||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==o&&"number"===s&&void 0!==n&&l<n?[new It(t.key,u,"stop domain values must appear in ascending order")]:(n=l,"categorical"===o&&l in a?[new It(t.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new It(t.key,u,"integer expected, found "+l)]}}function $n(t){var e=("property"===t.expressionContext?Zn:Gn)(Lt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new It(""+t.key+e.key,t.value,e.message)}));var n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new It(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!De(n))return[new It(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!De(n))return[new It(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Ne(n,["zoom","feature-state"]))return[new It(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Oe(n))return[new It(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ti(t){var e=t.key,n=t.value,i=t.valueSpec,r=[];return Array.isArray(i.values)?-1===i.values.indexOf(At(n))&&r.push(new It(e,n,"expected one of ["+i.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(i.values).indexOf(At(n))&&r.push(new It(e,n,"expected one of ["+Object.keys(i.values).join(", ")+"], "+JSON.stringify(n)+" found")),r}function ei(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var i=n[e];if(!ei(i)&&"boolean"!=typeof i)return!1}return!0;default:return!0}}Wn.deserialize=function(t){return new Wn(t._parameters,t._specification)},Wn.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var ni={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ii(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};ei(t)||(t=oi(t));var e=Gn(t,ni);if("error"===e.result)throw new Error(e.value.map((function(t){return t.key+": "+t.message})).join(", "));return{filter:function(t,n,i){return e.value.evaluate(t,n,{},i)},needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var n=1;n<e.length;n++)if(t(e[n]))return!0;return!1}(t)}}function ri(t,e){return t<e?-1:t>e?1:0}function oi(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?ai(t[1],t[2],"=="):"!="===n?ui(ai(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?ai(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(oi))):"all"===n?["all"].concat(t.slice(1).map(oi)):"none"===n?["all"].concat(t.slice(1).map(oi).map(ui)):"in"===n?si(t[1],t.slice(2)):"!in"===n?ui(si(t[1],t.slice(2))):"has"===n?li(t[1]):"!has"===n?ui(li(t[1])):"within"!==n||t}function ai(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function si(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(ri)]]:["filter-in-small",t,["literal",e]]}}function li(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function ui(t){return["!",t]}function ci(t){return ei(Lt(t.value))?$n(Pt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,i=e.key;if("array"!==On(n))return[new It(i,n,"array expected, "+On(n)+" found")];var r,o=e.styleSpec,a=[];if(n.length<1)return[new It(i,n,"filter array must have at least 1 element")];switch(a=a.concat(ti({key:i+"[0]",value:n[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),At(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===At(n[1])&&a.push(new It(i,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new It(i,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(r=On(n[1]))&&a.push(new It(i+"[1]",n[1],"string expected, "+r+" found"));for(var s=2;s<n.length;s++)r=On(n[s]),"$type"===At(n[1])?a=a.concat(ti({key:i+"["+s+"]",value:n[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&a.push(new It(i+"["+s+"]",n[s],"string, number, or boolean expected, "+r+" found"));break;case"any":case"all":case"none":for(var l=1;l<n.length;l++)a=a.concat(t({key:i+"["+l+"]",value:n[l],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":r=On(n[1]),2!==n.length?a.push(new It(i,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==r&&a.push(new It(i+"[1]",n[1],"string expected, "+r+" found"));break;case"within":r=On(n[1]),2!==n.length?a.push(new It(i,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"object"!==r&&a.push(new It(i+"[1]",n[1],"object expected, "+r+" found"))}return a}(t)}function hi(t,e){var n=t.key,i=t.style,r=t.styleSpec,o=t.value,a=t.objectKey,s=r[e+"_"+t.layerType];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return bi({key:n,value:o,valueSpec:r.transition,style:i,styleSpec:r});var u,c=t.valueSpec||s[a];if(!c)return[new It(n,o,'unknown property "'+a+'"')];if("string"===On(o)&&Ln(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new It(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var h=[];return"symbol"===t.layerType&&("text-field"===a&&i&&!i.glyphs&&h.push(new It(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Dn(Lt(o))&&"identity"===At(o.type)&&h.push(new It(n,o,'"text-font" does not support identity functions'))),h.concat(bi({key:t.key,value:o,valueSpec:c,style:i,styleSpec:r,expressionContext:"property",propertyType:e,propertyKey:a}))}function pi(t){return hi(t,"paint")}function fi(t){return hi(t,"layout")}function di(t){var e=[],n=t.value,i=t.key,r=t.style,o=t.styleSpec;n.type||n.ref||e.push(new It(i,n,'either "type" or "ref" is required'));var a,s=At(n.type),l=At(n.ref);if(n.id)for(var u=At(n.id),c=0;c<t.arrayIndex;c++){var h=r.layers[c];At(h.id)===u&&e.push(new It(i,n.id,'duplicate layer id "'+n.id+'", previously used at line '+h.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(t){t in n&&e.push(new It(i,n[t],'"'+t+'" is prohibited for ref layers'))})),r.layers.forEach((function(t){At(t.id)===l&&(a=t)})),a?a.ref?e.push(new It(i,n.ref,"ref cannot reference another ref layer")):s=At(a.type):e.push(new It(i,n.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(n.source){var p=r.sources&&r.sources[n.source],f=p&&At(p.type);p?"vector"===f&&"raster"===s?e.push(new It(i,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===f&&"raster"!==s?e.push(new It(i,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==f||n["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new It(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===f&&p.lineMetrics||e.push(new It(i,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new It(i,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new It(i,n.source,'source "'+n.source+'" not found'))}else e.push(new It(i,n,'missing required property "source"'));return e=e.concat(Yn({key:i,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return bi({key:i+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:ci,layout:function(t){return Yn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return fi(Pt({layerType:s},t))}}})},paint:function(t){return Yn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return pi(Pt({layerType:s},t))}}})}}}))}function mi(t){var e=t.value,n=t.key,i=On(e);return"string"!==i?[new It(n,e,"string expected, "+i+" found")]:[]}var gi={promoteId:function(t){var e=t.key,n=t.value;if("string"===On(n))return mi({key:e,value:n});var i=[];for(var r in n)i.push.apply(i,mi({key:e+"."+r,value:n[r]}));return i}};function yi(t){var e=t.value,n=t.key,i=t.styleSpec,r=t.style;if(!e.type)return[new It(n,e,'"type" is required')];var o,a=At(e.type);switch(a){case"vector":case"raster":case"raster-dem":return Yn({key:n,value:e,valueSpec:i["source_"+a.replace("-","_")],style:t.style,styleSpec:i,objectElementValidators:gi});case"geojson":if(o=Yn({key:n,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,objectElementValidators:gi}),e.cluster)for(var s in e.clusterProperties){var l=e.clusterProperties[s],u=l[0],c="string"==typeof u?[u,["accumulated"],["get",s]]:u;o.push.apply(o,$n({key:n+"."+s+".map",value:l[1],expressionContext:"cluster-map"})),o.push.apply(o,$n({key:n+"."+s+".reduce",value:c,expressionContext:"cluster-reduce"}))}return o;case"video":return Yn({key:n,value:e,valueSpec:i.source_video,style:r,styleSpec:i});case"image":return Yn({key:n,value:e,valueSpec:i.source_image,style:r,styleSpec:i});case"canvas":return[new It(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ti({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:i})}}function vi(t){var e=t.value,n=t.styleSpec,i=n.light,r=t.style,o=[],a=On(e);if(void 0===e)return o;if("object"!==a)return o.concat([new It("light",e,"object expected, "+a+" found")]);for(var s in e){var l=s.match(/^(.*)-transition$/);o=o.concat(l&&i[l[1]]&&i[l[1]].transition?bi({key:s,value:e[s],valueSpec:n.transition,style:r,styleSpec:n}):i[s]?bi({key:s,value:e[s],valueSpec:i[s],style:r,styleSpec:n}):[new It(s,e[s],'unknown property "'+s+'"')])}return o}var _i={"*":function(){return[]},array:Kn,boolean:function(t){var e=t.value,n=t.key,i=On(e);return"boolean"!==i?[new It(n,e,"boolean expected, "+i+" found")]:[]},number:Jn,color:function(t){var e=t.key,n=t.value,i=On(n);return"string"!==i?[new It(e,n,"color expected, "+i+" found")]:null===Kt(n)?[new It(e,n,'color expected, "'+n+'" found')]:[]},constants:Tt,enum:ti,filter:ci,function:Qn,layer:di,object:Yn,source:yi,light:vi,string:mi,formatted:function(t){return 0===mi(t).length?[]:$n(t)},resolvedImage:function(t){return 0===mi(t).length?[]:$n(t)}};function bi(t){var e=t.value,n=t.valueSpec,i=t.styleSpec;return n.expression&&Dn(At(e))?Qn(t):n.expression&&qn(Lt(e))?$n(t):n.type&&_i[n.type]?_i[n.type](t):Yn(Pt({},t,{valueSpec:n.type?i[n.type]:n}))}function xi(t){var e=t.value,n=t.key,i=mi(t);return i.length||(-1===e.indexOf("{fontstack}")&&i.push(new It(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&i.push(new It(n,e,'"glyphs" url must include a "{range}" token'))),i}function wi(t,e){void 0===e&&(e=St);var n=[];return n=n.concat(bi({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:xi,"*":function(){return[]}}})),t.constants&&(n=n.concat(Tt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Ci(n)}function Ci(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function ki(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return Ci(t.apply(this,e))}}wi.source=ki(yi),wi.light=ki(vi),wi.layer=ki(di),wi.filter=ki(ci),wi.paintProperty=ki(pi),wi.layoutProperty=ki(fi);var Ei=wi,Si=Ei.light,Ii=Ei.paintProperty,Ti=Ei.layoutProperty;function Pi(t,e){var n=!1;if(e&&e.length)for(var i=0,r=e;i<r.length;i+=1)t.fire(new kt(new Error(r[i].message))),n=!0;return n}var Ai=Li;function Li(t,e,n){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var r=new Int32Array(this.arrayBuffer);t=r[0],this.d=(e=r[1])+2*(n=r[2]);for(var o=0;o<this.d*this.d;o++){var a=r[3+o],s=r[3+o+1];i.push(a===s?null:r.subarray(a,s))}var l=r[3+i.length+1];this.keys=r.subarray(r[3+i.length],l),this.bboxes=r.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var u=0;u<this.d*this.d;u++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var c=n/e*t;this.min=-c,this.max=t+c}Li.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},Li.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Li.prototype._insertCell=function(t,e,n,i,r,o){this.cells[r].push(o)},Li.prototype.query=function(t,e,n,i,r){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=i&&!r)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,i,this._queryCell,s,{},r),s},Li.prototype._queryCell=function(t,e,n,i,r,o,a,s){var l=this.cells[r];if(null!==l)for(var u=this.keys,c=this.bboxes,h=0;h<l.length;h++){var p=l[h];if(void 0===a[p]){var f=4*p;(s?s(c[f+0],c[f+1],c[f+2],c[f+3]):t<=c[f+2]&&e<=c[f+3]&&n>=c[f+0]&&i>=c[f+1])?(a[p]=!0,o.push(u[p])):a[p]=!1}}},Li.prototype._forEachCell=function(t,e,n,i,r,o,a,s){for(var l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(n),h=this._convertToCellCoord(i),p=l;p<=c;p++)for(var f=u;f<=h;f++){var d=this.d*f+p;if((!s||s(this._convertFromCellCoord(p),this._convertFromCellCoord(f),this._convertFromCellCoord(p+1),this._convertFromCellCoord(f+1)))&&r.call(this,t,e,n,i,d,o,a,s))return}},Li.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Li.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Li.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,i=0;i<this.cells.length;i++)n+=this.cells[i].length;var r=new Int32Array(e+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];r[3+a]=o,r.set(s,o),o+=s.length}return r[3+t.length]=o,r.set(this.keys,o),r[3+t.length+1]=o+=this.keys.length,r.set(this.bboxes,o),o+=this.bboxes.length,r.buffer};var Mi=a.ImageData,Ri=a.ImageBitmap,Oi={};function Di(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Oi[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}for(var Ni in Di("Object",Object),Ai.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},Ai.deserialize=function(t){return new Ai(t.buffer)},Di("Grid",Ai),Di("Color",Jt),Di("Error",Error),Di("ResolvedImage",ee),Di("StylePropertyFunction",Wn),Di("StyleExpression",jn,{omit:["_evaluator"]}),Di("ZoomDependentExpression",Xn),Di("ZoomConstantExpression",Hn),Di("CompoundExpression",ge,{omit:["_evaluate"]}),kn)kn[Ni]._classRegistryKey||Di("Expression_"+Ni,kn[Ni]);function Fi(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function zi(t){return Ri&&t instanceof Ri}function Bi(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Fi(t)||zi(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof Mi)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var i=[],r=0,o=t;r<o.length;r+=1)i.push(Bi(o[r],e));return i}if("object"==typeof t){var a=t.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var l=a.serialize?a.serialize(t,e):{};if(!a.serialize){for(var u in t)if(t.hasOwnProperty(u)&&!(Oi[s].omit.indexOf(u)>=0)){var c=t[u];l[u]=Oi[s].shallow.indexOf(u)>=0?c:Bi(c,e)}t instanceof Error&&(l.message=t.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(l.$name=s),l}throw new Error("can't serialize object of type "+typeof t)}function Vi(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Fi(t)||zi(t)||ArrayBuffer.isView(t)||t instanceof Mi)return t;if(Array.isArray(t))return t.map(Vi);if("object"==typeof t){var e=t.$name||"Object",n=Oi[e].klass;if(!n)throw new Error("can't deserialize unregistered class "+e);if(n.deserialize)return n.deserialize(t);for(var i=Object.create(n.prototype),r=0,o=Object.keys(t);r<o.length;r+=1){var a=o[r];if("$name"!==a){var s=t[a];i[a]=Oi[e].shallow.indexOf(a)>=0?s:Vi(s)}}return i}throw new Error("can't deserialize object of type "+typeof t)}var Ui=function(){this.first=!0};Ui.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var ji={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function qi(t){for(var e=0,n=t;e<n.length;e+=1)if(Gi(n[e].charCodeAt(0)))return!0;return!1}function Gi(t){return!(746!==t&&747!==t&&(t<4352||!(ji["Bopomofo Extended"](t)||ji.Bopomofo(t)||ji["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||ji["CJK Compatibility Ideographs"](t)||ji["CJK Compatibility"](t)||ji["CJK Radicals Supplement"](t)||ji["CJK Strokes"](t)||!(!ji["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||ji["CJK Unified Ideographs Extension A"](t)||ji["CJK Unified Ideographs"](t)||ji["Enclosed CJK Letters and Months"](t)||ji["Hangul Compatibility Jamo"](t)||ji["Hangul Jamo Extended-A"](t)||ji["Hangul Jamo Extended-B"](t)||ji["Hangul Jamo"](t)||ji["Hangul Syllables"](t)||ji.Hiragana(t)||ji["Ideographic Description Characters"](t)||ji.Kanbun(t)||ji["Kangxi Radicals"](t)||ji["Katakana Phonetic Extensions"](t)||ji.Katakana(t)&&12540!==t||!(!ji["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!ji["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||ji["Unified Canadian Aboriginal Syllabics"](t)||ji["Unified Canadian Aboriginal Syllabics Extended"](t)||ji["Vertical Forms"](t)||ji["Yijing Hexagram Symbols"](t)||ji["Yi Syllables"](t)||ji["Yi Radicals"](t))))}function Hi(t){return!(Gi(t)||function(t){return!!(ji["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||ji["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||ji["Letterlike Symbols"](t)||ji["Number Forms"](t)||ji["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||ji["Control Pictures"](t)&&9251!==t||ji["Optical Character Recognition"](t)||ji["Enclosed Alphanumerics"](t)||ji["Geometric Shapes"](t)||ji["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||ji["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||ji["CJK Symbols and Punctuation"](t)||ji.Katakana(t)||ji["Private Use Area"](t)||ji["CJK Compatibility Forms"](t)||ji["Small Form Variants"](t)||ji["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Xi(t){return t>=1424&&t<=2303||ji["Arabic Presentation Forms-A"](t)||ji["Arabic Presentation Forms-B"](t)}function Zi(t,e){return!(!e&&Xi(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||ji.Khmer(t))}function Wi(t){for(var e=0,n=t;e<n.length;e+=1)if(Xi(n[e].charCodeAt(0)))return!0;return!1}var Yi=null,Ki="unavailable",Ji=null,Qi=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Ki="error"),Yi&&Yi(t)};function $i(){tr.fire(new Ct("pluginStateChange",{pluginStatus:Ki,pluginURL:Ji}))}var tr=new Et,er=function(){return Ki},nr=function(){if("deferred"!==Ki||!Ji)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ki="loading",$i(),Ji&&_t({url:Ji},(function(t){t?Qi(t):(Ki="loaded",$i())}))},ir={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Ki||null!=ir.applyArabicShaping},isLoading:function(){return"loading"===Ki},setState:function(t){Ki=t.pluginStatus,Ji=t.pluginURL},isParsed:function(){return null!=ir.applyArabicShaping&&null!=ir.processBidirectionalText&&null!=ir.processStyledBidirectionalText},getPluginURL:function(){return Ji}},rr=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ui,this.transition={})};rr.prototype.isSupportedScript=function(t){return function(t,e){for(var n=0,i=t;n<i.length;n+=1)if(!Zi(i[n].charCodeAt(0),e))return!1;return!0}(t,ir.isLoaded())},rr.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},rr.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}};var or=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Dn(t))return new Wn(t,e);if(qn(t)){var n=Zn(t,e);if("error"===n.result)throw new Error(n.value.map((function(t){return t.key+": "+t.message})).join(", "));return n.value}var i=t;return"string"==typeof t&&"color"===e.type&&(i=Jt.parse(t)),{kind:"constant",evaluate:function(){return i}}}(void 0===e?t.specification.default:e,t.specification)};or.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},or.prototype.possiblyEvaluate=function(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)};var ar=function(t){this.property=t,this.value=new or(t,void 0)};ar.prototype.transitioned=function(t,e){return new lr(this.property,this.value,e,h({},t.transition,this.transition),t.now)},ar.prototype.untransitioned=function(){return new lr(this.property,this.value,null,{},0)};var sr=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};sr.prototype.getValue=function(t){return b(this._values[t].value.value)},sr.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new ar(this._values[t].property)),this._values[t].value=new or(this._values[t].property,null===e?void 0:b(e))},sr.prototype.getTransition=function(t){return b(this._values[t].transition)},sr.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new ar(this._values[t].property)),this._values[t].transition=b(e)||void 0},sr.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e],r=this.getValue(i);void 0!==r&&(t[i]=r);var o=this.getTransition(i);void 0!==o&&(t[i+"-transition"]=o)}return t},sr.prototype.transitioned=function(t,e){for(var n=new ur(this._properties),i=0,r=Object.keys(this._values);i<r.length;i+=1){var o=r[i];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n},sr.prototype.untransitioned=function(){for(var t=new ur(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e];t._values[i]=this._values[i].untransitioned()}return t};var lr=function(t,e,n,i,r){this.property=t,this.value=e,this.begin=r+i.delay||0,this.end=this.begin+i.duration||0,t.specification.transition&&(i.delay||i.duration)&&(this.prior=n)};lr.prototype.possiblyEvaluate=function(t,e,n){var i=t.now||0,r=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(i>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(i<this.begin)return o.possiblyEvaluate(t,e,n);var a=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),r,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(a))}return r};var ur=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};ur.prototype.possiblyEvaluate=function(t,e,n){for(var i=new pr(this._properties),r=0,o=Object.keys(this._values);r<o.length;r+=1){var a=o[r];i._values[a]=this._values[a].possiblyEvaluate(t,e,n)}return i},ur.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var cr=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};cr.prototype.getValue=function(t){return b(this._values[t].value)},cr.prototype.setValue=function(t,e){this._values[t]=new or(this._values[t].property,null===e?void 0:b(e))},cr.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e],r=this.getValue(i);void 0!==r&&(t[i]=r)}return t},cr.prototype.possiblyEvaluate=function(t,e,n){for(var i=new pr(this._properties),r=0,o=Object.keys(this._values);r<o.length;r+=1){var a=o[r];i._values[a]=this._values[a].possiblyEvaluate(t,e,n)}return i};var hr=function(t,e,n){this.property=t,this.value=e,this.parameters=n};hr.prototype.isConstant=function(){return"constant"===this.value.kind},hr.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},hr.prototype.evaluate=function(t,e,n,i){return this.property.evaluate(this.value,this.parameters,t,e,n,i)};var pr=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};pr.prototype.get=function(t){return this._values[t]};var fr=function(t){this.specification=t};fr.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},fr.prototype.interpolate=function(t,e,n){var i=je[this.specification.type];return i?i(t,e,n):t};var dr=function(t,e){this.specification=t,this.overrides=e};dr.prototype.possiblyEvaluate=function(t,e,n,i){return new hr(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,i)}:t.expression,e)},dr.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new hr(this,{kind:"constant",value:void 0},t.parameters);var i=je[this.specification.type];return i?new hr(this,{kind:"constant",value:i(t.value.value,e.value.value,n)},t.parameters):t},dr.prototype.evaluate=function(t,e,n,i,r,o){return"constant"===t.kind?t.value:t.evaluate(e,n,i,r,o)};var mr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e,n,i){if(void 0===t.value)return new hr(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var r=t.expression.evaluate(e,null,{},n,i),o="resolvedImage"===t.property.specification.type&&"string"!=typeof r?r.name:r,a=this._calculate(o,o,o,e);return new hr(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new hr(this,{kind:"constant",value:s},e)}return new hr(this,t.expression,e)},e.prototype.evaluate=function(t,e,n,i,r,o){if("source"===t.kind){var a=t.evaluate(e,n,i,r,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,i),t.evaluate({zoom:Math.floor(e.zoom)},n,i),t.evaluate({zoom:Math.floor(e.zoom)+1},n,i),e):t.value},e.prototype._calculate=function(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},e.prototype.interpolate=function(t){return t},e}(dr),gr=function(t){this.specification=t};gr.prototype.possiblyEvaluate=function(t,e,n,i){if(void 0!==t.value){if("constant"===t.expression.kind){var r=t.expression.evaluate(e,null,{},n,i);return this._calculate(r,r,r,e)}return this._calculate(t.expression.evaluate(new rr(Math.floor(e.zoom-1),e)),t.expression.evaluate(new rr(Math.floor(e.zoom),e)),t.expression.evaluate(new rr(Math.floor(e.zoom+1),e)),e)}},gr.prototype._calculate=function(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},gr.prototype.interpolate=function(t){return t};var yr=function(t){this.specification=t};yr.prototype.possiblyEvaluate=function(t,e,n,i){return!!t.expression.evaluate(e,null,{},n,i)},yr.prototype.interpolate=function(){return!1};var vr=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var n=t[e];n.specification.overridable&&this.overridableProperties.push(e);var i=this.defaultPropertyValues[e]=new or(n,void 0),r=this.defaultTransitionablePropertyValues[e]=new ar(n);this.defaultTransitioningPropertyValues[e]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=i.possiblyEvaluate({})}};Di("DataDrivenProperty",dr),Di("DataConstantProperty",fr),Di("CrossFadedDataDrivenProperty",mr),Di("CrossFadedProperty",gr),Di("ColorRampProperty",yr);var _r=function(t){function e(e,n){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),n.layout&&(this._unevaluatedLayout=new cr(n.layout)),n.paint)){for(var i in this._transitionablePaint=new sr(n.paint),e.paint)this.setPaintProperty(i,e.paint[i],{validate:!1});for(var r in e.layout)this.setLayoutProperty(r,e.layout[r],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new pr(n.paint)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){void 0===n&&(n={}),null!=e&&this._validate(Ti,"layers."+this.id+".layout."+t,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},e.prototype.getPaintProperty=function(t){return y(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){if(void 0===n&&(n={}),null!=e&&this._validate(Ii,"layers."+this.id+".paint."+t,t,e,n))return!1;if(y(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var i=this._transitionablePaint._values[t],r="cross-faded-data-driven"===i.property.specification["property-type"],o=i.value.isDataDriven(),a=i.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||o||r||this._handleOverridablePaintPropertyUpdate(t,a,s)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,n){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),_(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))},e.prototype._validate=function(t,e,n,i,r){return void 0===r&&(r={}),(!r||!1!==r.validate)&&Pi(this,t.call(Ei,{key:e,layerType:this.type,objectKey:n,value:i,styleSpec:St,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof hr&&Ln(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(Et),br={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},xr=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},wr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Cr(t,e){void 0===e&&(e=1);var n=0,i=0;return{members:t.map((function(t){var r=br[t.type].BYTES_PER_ELEMENT,o=n=kr(n,Math.max(e,r)),a=t.components||1;return i=Math.max(i,r),n+=r*a,{name:t.name,type:t.type,components:a,offset:o}})),size:kr(n,Math.max(i,e)),alignment:e}}function kr(t,e){return Math.ceil(t/e)*e}wr.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},wr.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},wr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},wr.prototype.clear=function(){this.length=0},wr.prototype.resize=function(t){this.reserve(t),this.length=t},wr.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},wr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Er=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var i=2*t;return this.int16[i+0]=e,this.int16[i+1]=n,t},e}(wr);Er.prototype.bytesPerElement=4,Di("StructArrayLayout2i4",Er);var Sr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)},e.prototype.emplace=function(t,e,n,i,r){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=i,this.int16[o+3]=r,t},e}(wr);Sr.prototype.bytesPerElement=8,Di("StructArrayLayout4i8",Sr);var Ir=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,i,r,o)},e.prototype.emplace=function(t,e,n,i,r,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(wr);Ir.prototype.bytesPerElement=12,Di("StructArrayLayout2i4i12",Ir);var Tr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,i,r,o)},e.prototype.emplace=function(t,e,n,i,r,o,a){var s=4*t,l=8*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.uint8[l+4]=i,this.uint8[l+5]=r,this.uint8[l+6]=o,this.uint8[l+7]=a,t},e}(wr);Tr.prototype.bytesPerElement=8,Di("StructArrayLayout2i4ub8",Tr);var Pr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o,a,s,l,u){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,n,i,r,o,a,s,l,u)},e.prototype.emplace=function(t,e,n,i,r,o,a,s,l,u,c){var h=10*t;return this.uint16[h+0]=e,this.uint16[h+1]=n,this.uint16[h+2]=i,this.uint16[h+3]=r,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=u,this.uint16[h+9]=c,t},e}(wr);Pr.prototype.bytesPerElement=20,Di("StructArrayLayout10ui20",Pr);var Ar=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o,a,s,l,u,c,h){var p=this.length;return this.resize(p+1),this.emplace(p,t,e,n,i,r,o,a,s,l,u,c,h)},e.prototype.emplace=function(t,e,n,i,r,o,a,s,l,u,c,h,p){var f=12*t;return this.int16[f+0]=e,this.int16[f+1]=n,this.int16[f+2]=i,this.int16[f+3]=r,this.uint16[f+4]=o,this.uint16[f+5]=a,this.uint16[f+6]=s,this.uint16[f+7]=l,this.int16[f+8]=u,this.int16[f+9]=c,this.int16[f+10]=h,this.int16[f+11]=p,t},e}(wr);Ar.prototype.bytesPerElement=24,Di("StructArrayLayout4i4ui4i24",Ar);var Lr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)},e.prototype.emplace=function(t,e,n,i){var r=3*t;return this.float32[r+0]=e,this.float32[r+1]=n,this.float32[r+2]=i,t},e}(wr);Lr.prototype.bytesPerElement=12,Di("StructArrayLayout3f12",Lr);var Mr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(wr);Mr.prototype.bytesPerElement=4,Di("StructArrayLayout1ul4",Mr);var Rr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o,a,s,l){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,i,r,o,a,s,l)},e.prototype.emplace=function(t,e,n,i,r,o,a,s,l,u){var c=10*t,h=5*t;return this.int16[c+0]=e,this.int16[c+1]=n,this.int16[c+2]=i,this.int16[c+3]=r,this.int16[c+4]=o,this.int16[c+5]=a,this.uint32[h+3]=s,this.uint16[c+8]=l,this.uint16[c+9]=u,t},e}(wr);Rr.prototype.bytesPerElement=20,Di("StructArrayLayout6i1ul2ui20",Rr);var Or=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,i,r,o)},e.prototype.emplace=function(t,e,n,i,r,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(wr);Or.prototype.bytesPerElement=12,Di("StructArrayLayout2i2i2i12",Or);var Dr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,i,r)},e.prototype.emplace=function(t,e,n,i,r,o){var a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=i,this.int16[s+6]=r,this.int16[s+7]=o,t},e}(wr);Dr.prototype.bytesPerElement=16,Di("StructArrayLayout2f1f2i16",Dr);var Nr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)},e.prototype.emplace=function(t,e,n,i,r){var o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[a+1]=i,this.float32[a+2]=r,t},e}(wr);Nr.prototype.bytesPerElement=12,Di("StructArrayLayout2ub2f12",Nr);var Fr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)},e.prototype.emplace=function(t,e,n,i){var r=3*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,this.uint16[r+2]=i,t},e}(wr);Fr.prototype.bytesPerElement=6,Di("StructArrayLayout3ui6",Fr);var zr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o,a,s,l,u,c,h,p,f,d,m,g){var y=this.length;return this.resize(y+1),this.emplace(y,t,e,n,i,r,o,a,s,l,u,c,h,p,f,d,m,g)},e.prototype.emplace=function(t,e,n,i,r,o,a,s,l,u,c,h,p,f,d,m,g,y){var v=24*t,_=12*t,b=48*t;return this.int16[v+0]=e,this.int16[v+1]=n,this.uint16[v+2]=i,this.uint16[v+3]=r,this.uint32[_+2]=o,this.uint32[_+3]=a,this.uint32[_+4]=s,this.uint16[v+10]=l,this.uint16[v+11]=u,this.uint16[v+12]=c,this.float32[_+7]=h,this.float32[_+8]=p,this.uint8[b+36]=f,this.uint8[b+37]=d,this.uint8[b+38]=m,this.uint32[_+10]=g,this.int16[v+22]=y,t},e}(wr);zr.prototype.bytesPerElement=48,Di("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",zr);var Br=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o,a,s,l,u,c,h,p,f,d,m,g,y,v,_,b,x,w,C,k,E,S,I){var T=this.length;return this.resize(T+1),this.emplace(T,t,e,n,i,r,o,a,s,l,u,c,h,p,f,d,m,g,y,v,_,b,x,w,C,k,E,S,I)},e.prototype.emplace=function(t,e,n,i,r,o,a,s,l,u,c,h,p,f,d,m,g,y,v,_,b,x,w,C,k,E,S,I,T){var P=34*t,A=17*t;return this.int16[P+0]=e,this.int16[P+1]=n,this.int16[P+2]=i,this.int16[P+3]=r,this.int16[P+4]=o,this.int16[P+5]=a,this.int16[P+6]=s,this.int16[P+7]=l,this.uint16[P+8]=u,this.uint16[P+9]=c,this.uint16[P+10]=h,this.uint16[P+11]=p,this.uint16[P+12]=f,this.uint16[P+13]=d,this.uint16[P+14]=m,this.uint16[P+15]=g,this.uint16[P+16]=y,this.uint16[P+17]=v,this.uint16[P+18]=_,this.uint16[P+19]=b,this.uint16[P+20]=x,this.uint16[P+21]=w,this.uint16[P+22]=C,this.uint32[A+12]=k,this.float32[A+13]=E,this.float32[A+14]=S,this.float32[A+15]=I,this.float32[A+16]=T,t},e}(wr);Br.prototype.bytesPerElement=68,Di("StructArrayLayout8i15ui1ul4f68",Br);var Vr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(wr);Vr.prototype.bytesPerElement=4,Di("StructArrayLayout1f4",Vr);var Ur=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)},e.prototype.emplace=function(t,e,n,i){var r=3*t;return this.int16[r+0]=e,this.int16[r+1]=n,this.int16[r+2]=i,t},e}(wr);Ur.prototype.bytesPerElement=6,Di("StructArrayLayout3i6",Ur);var jr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)},e.prototype.emplace=function(t,e,n,i){var r=4*t;return this.uint32[2*t+0]=e,this.uint16[r+2]=n,this.uint16[r+3]=i,t},e}(wr);jr.prototype.bytesPerElement=8,Di("StructArrayLayout1ul2ui8",jr);var qr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var i=2*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,t},e}(wr);qr.prototype.bytesPerElement=4,Di("StructArrayLayout2ui4",qr);var Gr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(wr);Gr.prototype.bytesPerElement=2,Di("StructArrayLayout1ui2",Gr);var Hr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var i=2*t;return this.float32[i+0]=e,this.float32[i+1]=n,t},e}(wr);Hr.prototype.bytesPerElement=8,Di("StructArrayLayout2f8",Hr);var Xr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)},e.prototype.emplace=function(t,e,n,i,r){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=i,this.float32[o+3]=r,t},e}(wr);Xr.prototype.bytesPerElement=16,Di("StructArrayLayout4f16",Xr);var Zr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.anchorPoint.get=function(){return new r(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(xr);Zr.prototype.size=20;var Wr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Zr(this,t)},e}(Rr);Di("CollisionBoxArray",Wr);var Yr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},n.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},n.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,n),e}(xr);Yr.prototype.size=48;var Kr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Yr(this,t)},e}(zr);Di("PlacedSymbolArray",Kr);var Jr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},n.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},n.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},n.key.get=function(){return this._structArray.uint16[this._pos2+8]},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},n.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},n.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},n.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},n.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},n.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},n.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},n.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+12]=t},n.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},n.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},n.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},n.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,n),e}(xr);Jr.prototype.size=68;var Qr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Jr(this,t)},e}(Br);Di("SymbolInstanceArray",Qr);var $r=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e}(Vr);Di("GlyphOffsetArray",$r);var to=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(Ur);Di("SymbolLineVertexArray",to);var eo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,n),e}(xr);eo.prototype.size=8;var no=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new eo(this,t)},e}(jr);Di("FeatureIndexArray",no);var io=Cr([{name:"a_pos",components:2,type:"Int16"}],4).members,ro=function(t){void 0===t&&(t=[]),this.segments=t};function oo(t,e){return 256*(t=u(Math.floor(t),0,255))+u(Math.floor(e),0,255)}ro.prototype.prepareSegment=function(t,e,n,i){var r=this.segments[this.segments.length-1];return t>ro.MAX_VERTEX_ARRAY_LENGTH&&w("Max vertices per segment is "+ro.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!r||r.vertexLength+t>ro.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==i)&&(r={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==i&&(r.sortKey=i),this.segments.push(r)),r},ro.prototype.get=function(){return this.segments},ro.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var i in n.vaos)n.vaos[i].destroy()}},ro.simpleSegment=function(t,e,n,i){return new ro([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:i,vaos:{},sortKey:0}])},ro.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Di("SegmentVector",ro);var ao=Cr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),so=e((function(t){t.exports=function(t,e){var n,i,r,o,a,s,l,u;for(i=t.length-(n=3&t.length),r=e,a=3432918353,s=461845907,u=0;u<i;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,r=27492+(65535&(o=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}})),lo=e((function(t){t.exports=function(t,e){for(var n,i=t.length,r=e^i,o=0;i>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++o;switch(i){case 3:r^=(255&t.charCodeAt(o+2))<<16;case 2:r^=(255&t.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}})),uo=so,co=lo;uo.murmur3=so,uo.murmur2=co;var ho=function(){this.ids=[],this.positions=[],this.indexed=!1};ho.prototype.add=function(t,e,n,i){this.ids.push(fo(t)),this.positions.push(e,n,i)},ho.prototype.getPositions=function(t){for(var e=fo(t),n=0,i=this.ids.length-1;n<i;){var r=n+i>>1;this.ids[r]>=e?i=r:n=r+1}for(var o=[];this.ids[n]===e;)o.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return o},ho.serialize=function(t,e){var n=new Float64Array(t.ids),i=new Uint32Array(t.positions);return function t(e,n,i,r){for(;i<r;){for(var o=e[i+r>>1],a=i-1,s=r+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;mo(e,a,s),mo(n,3*a,3*s),mo(n,3*a+1,3*s+1),mo(n,3*a+2,3*s+2)}s-i<r-s?(t(e,n,i,s),i=s+1):(t(e,n,s+1,r),r=s)}}(n,i,0,n.length-1),e&&e.push(n.buffer,i.buffer),{ids:n,positions:i}},ho.deserialize=function(t){var e=new ho;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var po=Math.pow(2,53)-1;function fo(t){var e=+t;return!isNaN(e)&&e<=po?e:uo(String(t))}function mo(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}Di("FeaturePositionMap",ho);var go=function(t,e){this.gl=t.gl,this.location=e},yo=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(go),vo=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(go),_o=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(go),bo=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(go),xo=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(go),wo=function(t){function e(e,n){t.call(this,e,n),this.current=Jt.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(go),Co=new Float32Array(16),ko=function(t){function e(e,n){t.call(this,e,n),this.current=Co}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(go);function Eo(t){return[oo(255*t.r,255*t.g),oo(255*t.b,255*t.a)]}var So=function(t,e,n){this.value=t,this.uniformNames=e.map((function(t){return"u_"+t})),this.type=n};So.prototype.setUniform=function(t,e,n){t.set(n.constantOr(this.value))},So.prototype.getBinding=function(t,e,n){return"color"===this.type?new wo(t,e):new vo(t,e)};var Io=function(t,e){this.uniformNames=e.map((function(t){return"u_"+t})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Io.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},Io.prototype.setUniform=function(t,e,n,i){var r="u_pattern_to"===i?this.patternTo:"u_pattern_from"===i?this.patternFrom:"u_pixel_ratio_to"===i?this.pixelRatioTo:"u_pixel_ratio_from"===i?this.pixelRatioFrom:null;r&&t.set(r)},Io.prototype.getBinding=function(t,e,n){return"u_pattern"===n.substr(0,9)?new xo(t,e):new vo(t,e)};var To=function(t,e,n,i){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}})),this.paintVertexArray=new i};To.prototype.populatePaintArray=function(t,e,n,i,r){var o=this.paintVertexArray.length,a=this.expression.evaluate(new rr(0),e,{},i,[],r);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)},To.prototype.updatePaintArray=function(t,e,n,i){var r=this.expression.evaluate({zoom:0},n,i);this._setPaintValue(t,e,r)},To.prototype._setPaintValue=function(t,e,n){if("color"===this.type)for(var i=Eo(n),r=t;r<e;r++)this.paintVertexArray.emplace(r,i[0],i[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}},To.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},To.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Po=function(t,e,n,i,r,o){this.expression=t,this.uniformNames=e.map((function(t){return"u_"+t+"_t"})),this.type=n,this.useIntegerZoom=i,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}})),this.paintVertexArray=new o};Po.prototype.populatePaintArray=function(t,e,n,i,r){var o=this.expression.evaluate(new rr(this.zoom),e,{},i,[],r),a=this.expression.evaluate(new rr(this.zoom+1),e,{},i,[],r),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)},Po.prototype.updatePaintArray=function(t,e,n,i){var r=this.expression.evaluate({zoom:this.zoom},n,i),o=this.expression.evaluate({zoom:this.zoom+1},n,i);this._setPaintValue(t,e,r,o)},Po.prototype._setPaintValue=function(t,e,n,i){if("color"===this.type)for(var r=Eo(n),o=Eo(i),a=t;a<e;a++)this.paintVertexArray.emplace(a,r[0],r[1],o[0],o[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,n,i);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(i))}},Po.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Po.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Po.prototype.setUniform=function(t,e){var n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,i=u(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(i)},Po.prototype.getBinding=function(t,e,n){return new vo(t,e)};var Ao=function(t,e,n,i,r,o){this.expression=t,this.type=e,this.useIntegerZoom=n,this.zoom=i,this.layerId=o,this.zoomInPaintVertexArray=new r,this.zoomOutPaintVertexArray=new r};Ao.prototype.populatePaintArray=function(t,e,n){var i=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(i,t,e.patterns&&e.patterns[this.layerId],n)},Ao.prototype.updatePaintArray=function(t,e,n,i,r){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],r)},Ao.prototype._setPaintValues=function(t,e,n,i){if(i&&n){var r=i[n.min],o=i[n.mid],a=i[n.max];if(r&&o&&a)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],r.tl[0],r.tl[1],r.br[0],r.br[1],o.pixelRatio,r.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],o.pixelRatio,a.pixelRatio)}},Ao.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,ao.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,ao.members,this.expression.isStateDependent))},Ao.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Lo=function(t,e,n){this.binders={},this._buffers=[];var i=[];for(var r in t.paint._values)if(n(r)){var o=t.paint.get(r);if(o instanceof hr&&Ln(o.property.specification)){var a=Ro(r,t.type),s=o.value,l=o.property.specification.type,u=o.property.useIntegerZoom,c=o.property.specification["property-type"],h="cross-faded"===c||"cross-faded-data-driven"===c;if("constant"===s.kind)this.binders[r]=h?new Io(s.value,a):new So(s.value,a,l),i.push("/u_"+r);else if("source"===s.kind||h){var p=Oo(r,l,"source");this.binders[r]=h?new Ao(s,l,u,e,p,t.id):new To(s,a,l,p),i.push("/a_"+r)}else{var f=Oo(r,l,"composite");this.binders[r]=new Po(s,a,l,u,e,f),i.push("/z_"+r)}}}this.cacheKey=i.sort().join("")};Lo.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof To||e instanceof Po?e.maxValue:0},Lo.prototype.populatePaintArrays=function(t,e,n,i,r){for(var o in this.binders){var a=this.binders[o];(a instanceof To||a instanceof Po||a instanceof Ao)&&a.populatePaintArray(t,e,n,i,r)}},Lo.prototype.setConstantPatternPositions=function(t,e){for(var n in this.binders){var i=this.binders[n];i instanceof Io&&i.setConstantPatternPositions(t,e)}},Lo.prototype.updatePaintArrays=function(t,e,n,i,r){var o=!1;for(var a in t)for(var s=0,l=e.getPositions(a);s<l.length;s+=1){var u=l[s],c=n.feature(u.index);for(var h in this.binders){var p=this.binders[h];if((p instanceof To||p instanceof Po||p instanceof Ao)&&!0===p.expression.isStateDependent){var f=i.paint.get(h);p.expression=f.value,p.updatePaintArray(u.start,u.end,c,t[a],r),o=!0}}}return o},Lo.prototype.defines=function(){var t=[];for(var e in this.binders){var n=this.binders[e];(n instanceof So||n instanceof Io)&&t.push.apply(t,n.uniformNames.map((function(t){return"#define HAS_UNIFORM_"+t})))}return t},Lo.prototype.getBinderAttributes=function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof To||n instanceof Po)for(var i=0;i<n.paintVertexAttributes.length;i++)t.push(n.paintVertexAttributes[i].name);else if(n instanceof Ao)for(var r=0;r<ao.members.length;r++)t.push(ao.members[r].name)}return t},Lo.prototype.getBinderUniforms=function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof So||n instanceof Io||n instanceof Po)for(var i=0,r=n.uniformNames;i<r.length;i+=1)t.push(r[i])}return t},Lo.prototype.getPaintVertexBuffers=function(){return this._buffers},Lo.prototype.getUniforms=function(t,e){var n=[];for(var i in this.binders){var r=this.binders[i];if(r instanceof So||r instanceof Io||r instanceof Po)for(var o=0,a=r.uniformNames;o<a.length;o+=1){var s=a[o];if(e[s]){var l=r.getBinding(t,e[s],s);n.push({name:s,property:i,binding:l})}}}return n},Lo.prototype.setUniforms=function(t,e,n,i){for(var r=0,o=e;r<o.length;r+=1){var a=o[r],s=a.name,l=a.property;this.binders[l].setUniform(a.binding,i,n.get(l),s)}},Lo.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var n=this.binders[e];if(t&&n instanceof Ao){var i=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;i&&this._buffers.push(i)}else(n instanceof To||n instanceof Po)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}},Lo.prototype.upload=function(t){for(var e in this.binders){var n=this.binders[e];(n instanceof To||n instanceof Po||n instanceof Ao)&&n.upload(t)}this.updatePaintBuffers()},Lo.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof To||e instanceof Po||e instanceof Ao)&&e.destroy()}};var Mo=function(t,e,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var i=0,r=t;i<r.length;i+=1){var o=r[i];this.programConfigurations[o.id]=new Lo(o,e,n)}this.needsUpload=!1,this._featureMap=new ho,this._bufferOffset=0};function Ro(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function Oo(t,e,n){var i={color:{source:Hr,composite:Xr},number:{source:Vr,composite:Hr}},r=function(t){return{"line-pattern":{source:Pr,composite:Pr},"fill-pattern":{source:Pr,composite:Pr},"fill-extrusion-pattern":{source:Pr,composite:Pr}}[t]}(t);return r&&r[n]||i[e][n]}Mo.prototype.populatePaintArrays=function(t,e,n,i,r,o){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,i,r,o);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},Mo.prototype.updatePaintArrays=function(t,e,n,i){for(var r=0,o=n;r<o.length;r+=1){var a=o[r];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,i)||this.needsUpload}},Mo.prototype.get=function(t){return this.programConfigurations[t]},Mo.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Mo.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Di("ConstantBinder",So),Di("CrossFadedConstantBinder",Io),Di("SourceExpressionBinder",To),Di("CrossFadedCompositeBinder",Ao),Di("CompositeExpressionBinder",Po),Di("ProgramConfiguration",Lo,{omit:["_buffers"]}),Di("ProgramConfigurationSet",Mo);var Do=Math.pow(2,14)-1,No=-Do-1;function Fo(t){for(var e=8192/t.extent,n=t.loadGeometry(),i=0;i<n.length;i++)for(var r=n[i],o=0;o<r.length;o++){var a=r[o],s=Math.round(a.x*e),l=Math.round(a.y*e);a.x=u(s,No,Do),a.y=u(l,No,Do),(s<a.x||s>a.x+1||l<a.y||l>a.y+1)&&w("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function zo(t,e,n,i,r){t.emplaceBack(2*e+(i+1)/2,2*n+(r+1)/2)}var Bo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Er,this.indexArray=new Fr,this.segments=new ro,this.programConfigurations=new Mo(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function Vo(t,e){for(var n=0;n<t.length;n++)if(Yo(e,t[n]))return!0;for(var i=0;i<e.length;i++)if(Yo(t,e[i]))return!0;return!!Go(t,e)}function Uo(t,e,n){return!!Yo(t,e)||!!Xo(e,t,n)}function jo(t,e){if(1===t.length)return Wo(e,t[0]);for(var n=0;n<e.length;n++)for(var i=e[n],r=0;r<i.length;r++)if(Yo(t,i[r]))return!0;for(var o=0;o<t.length;o++)if(Wo(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(Go(t,e[a]))return!0;return!1}function qo(t,e,n){if(t.length>1){if(Go(t,e))return!0;for(var i=0;i<e.length;i++)if(Xo(e[i],t,n))return!0}for(var r=0;r<t.length;r++)if(Xo(t[r],e,n))return!0;return!1}function Go(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var i=t[n],r=t[n+1],o=0;o<e.length-1;o++)if(Ho(i,r,e[o],e[o+1]))return!0;return!1}function Ho(t,e,n,i){return C(t,n,i)!==C(e,n,i)&&C(t,e,n)!==C(t,e,i)}function Xo(t,e,n){var i=n*n;if(1===e.length)return t.distSqr(e[0])<i;for(var r=1;r<e.length;r++)if(Zo(t,e[r-1],e[r])<i)return!0;return!1}function Zo(t,e,n){var i=e.distSqr(n);if(0===i)return t.distSqr(e);var r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return t.distSqr(r<0?e:r>1?n:n.sub(e)._mult(r)._add(e))}function Wo(t,e){for(var n,i,r,o=!1,a=0;a<t.length;a++)for(var s=0,l=(n=t[a]).length-1;s<n.length;l=s++)(i=n[s]).y>e.y!=(r=n[l]).y>e.y&&e.x<(r.x-i.x)*(e.y-i.y)/(r.y-i.y)+i.x&&(o=!o);return o}function Yo(t,e){for(var n=!1,i=0,r=t.length-1;i<t.length;r=i++){var o=t[i],a=t[r];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function Ko(t,e,n){var i=n[0],r=n[2];if(t.x<i.x&&e.x<i.x||t.x>r.x&&e.x>r.x||t.y<i.y&&e.y<i.y||t.y>r.y&&e.y>r.y)return!1;var o=C(t,e,n[0]);return o!==C(t,e,n[1])||o!==C(t,e,n[2])||o!==C(t,e,n[3])}function Jo(t,e,n){var i=e.paint.get(t).value;return"constant"===i.kind?i.value:n.programConfigurations.get(e.id).getMaxValue(t)}function Qo(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function $o(t,e,n,i,o){if(!e[0]&&!e[1])return t;var a=r.convert(e)._mult(o);"viewport"===n&&a._rotate(-i);for(var s=[],l=0;l<t.length;l++)s.push(t[l].sub(a));return s}Bo.prototype.populate=function(t,e,n){var i=this.layers[0],r=[],o=null;"circle"===i.type&&(o=i.layout.get("circle-sort-key"));for(var a=0,s=t;a<s.length;a+=1){var l=s[a],u=l.feature,c=l.id,h=l.index,p=l.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,d={type:u.type,id:c,properties:u.properties,geometry:f?Fo(u):[]};if(this.layers[0]._featureFilter.filter(new rr(this.zoom),d,n)){f||(d.geometry=Fo(u));var m=o?o.evaluate(d,{},n):void 0;r.push({id:c,properties:u.properties,type:u.type,sourceLayerIndex:p,index:h,geometry:d.geometry,patterns:{},sortKey:m})}}o&&r.sort((function(t,e){return t.sortKey-e.sortKey}));for(var g=0,y=r;g<y.length;g+=1){var v=y[g],_=v.geometry,b=v.index,x=v.sourceLayerIndex,w=t[b].feature;this.addFeature(v,_,b,n),e.featureIndex.insert(w,_,b,x,this.index)}},Bo.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Bo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Bo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Bo.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,io),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Bo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Bo.prototype.addFeature=function(t,e,n,i){for(var r=0,o=e;r<o.length;r+=1)for(var a=0,s=o[r];a<s.length;a+=1){var l=s[a],u=l.x,c=l.y;if(!(u<0||u>=8192||c<0||c>=8192)){var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),p=h.vertexLength;zo(this.layoutVertexArray,u,c,-1,-1),zo(this.layoutVertexArray,u,c,1,-1),zo(this.layoutVertexArray,u,c,1,1),zo(this.layoutVertexArray,u,c,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),h.vertexLength+=4,h.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},i)},Di("CircleBucket",Bo,{omit:["layers"]});var ta=new vr({"circle-sort-key":new dr(St.layout_circle["circle-sort-key"])}),ea={paint:new vr({"circle-radius":new dr(St.paint_circle["circle-radius"]),"circle-color":new dr(St.paint_circle["circle-color"]),"circle-blur":new dr(St.paint_circle["circle-blur"]),"circle-opacity":new dr(St.paint_circle["circle-opacity"]),"circle-translate":new fr(St.paint_circle["circle-translate"]),"circle-translate-anchor":new fr(St.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new fr(St.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new fr(St.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new dr(St.paint_circle["circle-stroke-width"]),"circle-stroke-color":new dr(St.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new dr(St.paint_circle["circle-stroke-opacity"])}),layout:ta},na="undefined"!=typeof Float32Array?Float32Array:Array;function ia(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ra(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],m=e[12],g=e[13],y=e[14],v=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*i+b*s+x*h+w*m,t[1]=_*r+b*l+x*p+w*g,t[2]=_*o+b*u+x*f+w*y,t[3]=_*a+b*c+x*d+w*v,t[4]=(_=n[4])*i+(b=n[5])*s+(x=n[6])*h+(w=n[7])*m,t[5]=_*r+b*l+x*p+w*g,t[6]=_*o+b*u+x*f+w*y,t[7]=_*a+b*c+x*d+w*v,t[8]=(_=n[8])*i+(b=n[9])*s+(x=n[10])*h+(w=n[11])*m,t[9]=_*r+b*l+x*p+w*g,t[10]=_*o+b*u+x*f+w*y,t[11]=_*a+b*c+x*d+w*v,t[12]=(_=n[12])*i+(b=n[13])*s+(x=n[14])*h+(w=n[15])*m,t[13]=_*r+b*l+x*p+w*g,t[14]=_*o+b*u+x*f+w*y,t[15]=_*a+b*c+x*d+w*v,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,n=arguments.length;n--;)e+=t[n]*t[n];return Math.sqrt(e)});var oa,aa=ra;function sa(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*a,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*a,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*a,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*a,t}oa=new na(3),na!=Float32Array&&(oa[0]=0,oa[1]=0,oa[2]=0),function(){var t=new na(4);na!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var la=(function(){var t=new na(2);na!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function e(e){t.call(this,e,ea)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new Bo(t)},e.prototype.queryRadius=function(t){var e=t;return Jo("circle-radius",this,e)+Jo("circle-stroke-width",this,e)+Qo(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,r,o,a,s){for(var l=$o(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),u=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),c="map"===this.paint.get("circle-pitch-alignment"),h=c?l:function(t,e){return t.map((function(t){return ua(t,e)}))}(l,s),p=c?u*a:u,f=0,d=i;f<d.length;f+=1)for(var m=0,g=d[f];m<g.length;m+=1){var y=g[m],v=c?y:ua(y,s),_=p,b=sa([],[y.x,y.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=b[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=o.cameraToCenterDistance/b[3]),Uo(h,v,_))return!0}return!1},e}(_r));function ua(t,e){var n=sa([],[t.x,t.y,0,1],e);return new r(n[0]/n[3],n[1]/n[3])}var ca=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Bo);function ha(t,e,n,i){var r=e.width,o=e.height;if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==r*o*n)throw new RangeError("mismatched image size")}else i=new Uint8Array(r*o*n);return t.width=r,t.height=o,t.data=i,t}function pa(t,e,n){var i=e.width,r=e.height;if(i!==t.width||r!==t.height){var o=ha({},{width:i,height:r},n);fa(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,i),height:Math.min(t.height,r)},n),t.width=i,t.height=r,t.data=o.data}}function fa(t,e,n,i,r,o){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||n.x>t.width-r.width||n.y>t.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>e.width||r.height>e.height||i.x>e.width-r.width||i.y>e.height-r.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,l=0;l<r.height;l++)for(var u=((n.y+l)*t.width+n.x)*o,c=((i.y+l)*e.width+i.x)*o,h=0;h<r.width*o;h++)s[c+h]=a[u+h];return e}Di("HeatmapBucket",ca,{omit:["layers"]});var da=function(t,e){ha(this,t,1,e)};da.prototype.resize=function(t){pa(this,t,1)},da.prototype.clone=function(){return new da({width:this.width,height:this.height},new Uint8Array(this.data))},da.copy=function(t,e,n,i,r){fa(t,e,n,i,r,1)};var ma=function(t,e){ha(this,t,4,e)};ma.prototype.resize=function(t){pa(this,t,4)},ma.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},ma.prototype.clone=function(){return new ma({width:this.width,height:this.height},new Uint8Array(this.data))},ma.copy=function(t,e,n,i,r){fa(t,e,n,i,r,4)},Di("AlphaImage",da),Di("RGBAImage",ma);var ga={paint:new vr({"heatmap-radius":new dr(St.paint_heatmap["heatmap-radius"]),"heatmap-weight":new dr(St.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new fr(St.paint_heatmap["heatmap-intensity"]),"heatmap-color":new yr(St.paint_heatmap["heatmap-color"]),"heatmap-opacity":new fr(St.paint_heatmap["heatmap-opacity"])})};function ya(t,e){for(var n=new Uint8Array(1024),i={},r=0,o=0;r<256;r++,o+=4){i[e]=r/255;var a=t.evaluate(i);n[o+0]=Math.floor(255*a.r/a.a),n[o+1]=Math.floor(255*a.g/a.a),n[o+2]=Math.floor(255*a.b/a.a),n[o+3]=Math.floor(255*a.a)}return new ma({width:256,height:1},n)}var va=function(t){function e(e){t.call(this,e,ga),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new ca(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=ya(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(_r),_a={paint:new vr({"hillshade-illumination-direction":new fr(St.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new fr(St.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new fr(St.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new fr(St.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new fr(St.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new fr(St.paint_hillshade["hillshade-accent-color"])})},ba=function(t){function e(e){t.call(this,e,_a)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(_r),xa=Cr([{name:"a_pos",components:2,type:"Int16"}],4).members,wa=ka,Ca=ka;function ka(t,e,n){n=n||2;var i,r,o,a,s,l,u,c=e&&e.length,h=c?e[0]*n:t.length,p=Ea(t,0,h,n,!0),f=[];if(!p||p.next===p.prev)return f;if(c&&(p=function(t,e,n,i){var r,o,a,s=[];for(r=0,o=e.length;r<o;r++)(a=Ea(t,e[r]*i,r<o-1?e[r+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),s.push(Na(a));for(s.sort(Ma),r=0;r<s.length;r++)Ra(s[r],n),n=Sa(n,n.next);return n}(t,e,p,n)),t.length>80*n){i=o=t[0],r=a=t[1];for(var d=n;d<h;d+=n)(s=t[d])<i&&(i=s),(l=t[d+1])<r&&(r=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-i,a-r))?1/u:0}return Ia(p,f,n,i,r,u),f}function Ea(t,e,n,i,r){var o,a;if(r===Ya(t,e,n,i)>0)for(o=e;o<n;o+=i)a=Xa(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=Xa(o,t[o],t[o+1],a);return a&&Va(a,a.next)&&(Za(a),a=a.next),a}function Sa(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!Va(i,i.next)&&0!==Ba(i.prev,i,i.next))i=i.next;else{if(Za(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function Ia(t,e,n,i,r,o,a){if(t){!a&&o&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=Da(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,a,s,l,u=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<u&&(s++,i=i.nextZ);e++);for(l=u;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,u*=2}while(a>1)}(r)}(t,i,r,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?Pa(t,i,r,o):Ta(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),Za(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?Ia(t=Aa(Sa(t),e,n),e,n,i,r,o,2):2===a&&La(t,e,n,i,r,o):Ia(Sa(t),e,n,i,r,o,1);break}}}function Ta(t){var e=t.prev,n=t,i=t.next;if(Ba(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(Fa(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Ba(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Pa(t,e,n,i){var r=t.prev,o=t,a=t.next;if(Ba(r,o,a)>=0)return!1;for(var s=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,l=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,u=Da(r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,e,n,i),c=Da(s,l,e,n,i),h=t.prevZ,p=t.nextZ;h&&h.z>=u&&p&&p.z<=c;){if(h!==t.prev&&h!==t.next&&Fa(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Ba(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,p!==t.prev&&p!==t.next&&Fa(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Ba(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;h&&h.z>=u;){if(h!==t.prev&&h!==t.next&&Fa(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Ba(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=c;){if(p!==t.prev&&p!==t.next&&Fa(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Ba(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Aa(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!Va(r,o)&&Ua(r,i,i.next,o)&&Ga(r,o)&&Ga(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),Za(i),Za(i.next),i=t=o),i=i.next}while(i!==t);return Sa(i)}function La(t,e,n,i,r,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&za(a,s)){var l=Ha(a,s);return a=Sa(a,a.next),l=Sa(l,l.next),Ia(a,e,n,i,r,o),void Ia(l,e,n,i,r,o)}s=s.next}a=a.next}while(a!==t)}function Ma(t,e){return t.x-e.x}function Ra(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n;var l,u=n,c=n.x,h=n.y,p=1/0;i=n;do{r>=i.x&&i.x>=c&&r!==i.x&&Fa(o<h?r:a,o,c,h,o<h?a:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),Ga(i,t)&&(l<p||l===p&&(i.x>n.x||i.x===n.x&&Oa(n,i)))&&(n=i,p=l)),i=i.next}while(i!==u);return n}(t,e)){var n=Ha(e,t);Sa(e,e.next),Sa(n,n.next)}}function Oa(t,e){return Ba(t.prev,t,e.prev)<0&&Ba(e.next,t,t.next)<0}function Da(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Na(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Fa(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function za(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Ua(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Ga(t,e)&&Ga(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(Ba(t.prev,t,e.prev)||Ba(t,e.prev,e))||Va(t,e)&&Ba(t.prev,t,t.next)>0&&Ba(e.prev,e,e.next)>0)}function Ba(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Va(t,e){return t.x===e.x&&t.y===e.y}function Ua(t,e,n,i){var r=qa(Ba(t,e,n)),o=qa(Ba(t,e,i)),a=qa(Ba(n,i,t)),s=qa(Ba(n,i,e));return r!==o&&a!==s||!(0!==r||!ja(t,n,e))||!(0!==o||!ja(t,i,e))||!(0!==a||!ja(n,t,i))||!(0!==s||!ja(n,e,i))}function ja(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function qa(t){return t>0?1:t<0?-1:0}function Ga(t,e){return Ba(t.prev,t,t.next)<0?Ba(t,e,t.next)>=0&&Ba(t,t.prev,e)>=0:Ba(t,e,t.prev)<0||Ba(t,t.next,e)<0}function Ha(t,e){var n=new Wa(t.i,t.x,t.y),i=new Wa(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function Xa(t,e,n,i){var r=new Wa(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Za(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Wa(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ya(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}function Ka(t,e,n,i,r){!function t(e,n,i,r,o){for(;r>i;){if(r-i>600){var a=r-i+1,s=n-i+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(i,Math.floor(n-s*u/a+c)),Math.min(r,Math.floor(n+(a-s)*u/a+c)),o)}var h=e[n],p=i,f=r;for(Ja(e,i,n),o(e[r],h)>0&&Ja(e,i,r);p<f;){for(Ja(e,p,f),p++,f--;o(e[p],h)<0;)p++;for(;o(e[f],h)>0;)f--}0===o(e[i],h)?Ja(e,i,f):Ja(e,++f,r),f<=n&&(i=f+1),n<=f&&(r=f-1)}}(t,e,n||0,i||t.length-1,r||Qa)}function Ja(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Qa(t,e){return t<e?-1:t>e?1:0}function $a(t,e){var n=t.length;if(n<=1)return[t];for(var i,r,o=[],a=0;a<n;a++){var s=k(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===r&&(r=s<0),r===s<0?(i&&o.push(i),i=[t[a]]):i.push(t[a]))}if(i&&o.push(i),e>1)for(var l=0;l<o.length;l++)o[l].length<=e||(Ka(o[l],e,1,o[l].length-1,ts),o[l]=o[l].slice(0,e));return o}function ts(t,e){return e.area-t.area}function es(t,e,n){for(var i=n.patternDependencies,r=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(r=!0);var l=s.constantOr(null);l&&(r=!0,i[l.to]=!0,i[l.from]=!0)}return r}function ns(t,e,n,i,r){for(var o=r.patternDependencies,a=0,s=e;a<s.length;a+=1){var l=s[a],u=l.paint.get(t+"-pattern").value;if("constant"!==u.kind){var c=u.evaluate({zoom:i-1},n,{},r.availableImages),h=u.evaluate({zoom:i},n,{},r.availableImages),p=u.evaluate({zoom:i+1},n,{},r.availableImages);h=h&&h.name?h.name:h,p=p&&p.name?p.name:p,o[c=c&&c.name?c.name:c]=!0,o[h]=!0,o[p]=!0,n.patterns[l.id]={min:c,mid:h,max:p}}}return n}ka.deviation=function(t,e,n,i){var r=e&&e.length,o=Math.abs(Ya(t,0,r?e[0]*n:t.length,n));if(r)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(Ya(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var l=0;for(a=0;a<i.length;a+=3){var u=i[a]*n,c=i[a+1]*n,h=i[a+2]*n;l+=Math.abs((t[u]-t[h])*(t[c+1]-t[u+1])-(t[u]-t[c])*(t[h+1]-t[u+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},ka.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);r>0&&n.holes.push(i+=t[r-1].length)}return n},wa.default=Ca;var is=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Er,this.indexArray=new Fr,this.indexArray2=new qr,this.programConfigurations=new Mo(t.layers,t.zoom),this.segments=new ro,this.segments2=new ro,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};is.prototype.populate=function(t,e,n){this.hasPattern=es("fill",this.layers,e);for(var i=this.layers[0].layout.get("fill-sort-key"),r=[],o=0,a=t;o<a.length;o+=1){var s=a[o],l=s.feature,u=s.id,c=s.index,h=s.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,f={type:l.type,id:u,properties:l.properties,geometry:p?Fo(l):[]};if(this.layers[0]._featureFilter.filter(new rr(this.zoom),f,n)){p||(f.geometry=Fo(l));var d=i?i.evaluate(f,{},n,e.availableImages):void 0;r.push({id:u,properties:l.properties,type:l.type,sourceLayerIndex:h,index:c,geometry:f.geometry,patterns:{},sortKey:d})}}i&&r.sort((function(t,e){return t.sortKey-e.sortKey}));for(var m=0,g=r;m<g.length;m+=1){var y=g[m],v=y.geometry,_=y.index,b=y.sourceLayerIndex;if(this.hasPattern){var x=ns("fill",this.layers,y,this.zoom,e);this.patternFeatures.push(x)}else this.addFeature(y,v,_,n,{});e.featureIndex.insert(t[_].feature,v,_,b,this.index)}},is.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},is.prototype.addFeatures=function(t,e,n){for(var i=0,r=this.patternFeatures;i<r.length;i+=1){var o=r[i];this.addFeature(o,o.geometry,o.index,e,n)}},is.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},is.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},is.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,xa),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},is.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},is.prototype.addFeature=function(t,e,n,i,r){for(var o=0,a=$a(e,500);o<a.length;o+=1){for(var s=a[o],l=0,u=0,c=s;u<c.length;u+=1)l+=c[u].length;for(var h=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray),p=h.vertexLength,f=[],d=[],m=0,g=s;m<g.length;m+=1){var y=g[m];if(0!==y.length){y!==s[0]&&d.push(f.length/2);var v=this.segments2.prepareSegment(y.length,this.layoutVertexArray,this.indexArray2),_=v.vertexLength;this.layoutVertexArray.emplaceBack(y[0].x,y[0].y),this.indexArray2.emplaceBack(_+y.length-1,_),f.push(y[0].x),f.push(y[0].y);for(var b=1;b<y.length;b++)this.layoutVertexArray.emplaceBack(y[b].x,y[b].y),this.indexArray2.emplaceBack(_+b-1,_+b),f.push(y[b].x),f.push(y[b].y);v.vertexLength+=y.length,v.primitiveLength+=y.length}}for(var x=wa(f,d),w=0;w<x.length;w+=3)this.indexArray.emplaceBack(p+x[w],p+x[w+1],p+x[w+2]);h.vertexLength+=l,h.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,i)},Di("FillBucket",is,{omit:["layers","patternFeatures"]});var rs=new vr({"fill-sort-key":new dr(St.layout_fill["fill-sort-key"])}),os={paint:new vr({"fill-antialias":new fr(St.paint_fill["fill-antialias"]),"fill-opacity":new dr(St.paint_fill["fill-opacity"]),"fill-color":new dr(St.paint_fill["fill-color"]),"fill-outline-color":new dr(St.paint_fill["fill-outline-color"]),"fill-translate":new fr(St.paint_fill["fill-translate"]),"fill-translate-anchor":new fr(St.paint_fill["fill-translate-anchor"]),"fill-pattern":new mr(St.paint_fill["fill-pattern"])}),layout:rs},as=function(t){function e(e){t.call(this,e,os)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,n){t.prototype.recalculate.call(this,e,n);var i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new is(t)},e.prototype.queryRadius=function(){return Qo(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,r,o,a){return jo($o(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),i)},e.prototype.isTileClipped=function(){return!0},e}(_r),ss=Cr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,ls=us;function us(t,e,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=r,t.readFields(cs,this,e)}function cs(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[i]=r}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function hs(t){for(var e,n,i=0,r=0,o=t.length,a=o-1;r<o;a=r++)i+=((n=t[a]).x-(e=t[r]).x)*(e.y+n.y);return i}us.types=["Unknown","Point","LineString","Polygon"],us.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,o=0,a=0,s=0,l=[];t.pos<n;){if(o<=0){var u=t.readVarint();i=7&u,o=u>>3}if(o--,1===i||2===i)a+=t.readSVarint(),s+=t.readSVarint(),1===i&&(e&&l.push(e),e=[]),e.push(new r(a,s));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&l.push(e),l},us.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,i=0,r=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(i<=0){var c=t.readVarint();n=7&c,i=c>>3}if(i--,1===n||2===n)(r+=t.readSVarint())<a&&(a=r),r>s&&(s=r),(o+=t.readSVarint())<l&&(l=o),o>u&&(u=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,u]},us.prototype.toGeoJSON=function(t,e,n){var i,r,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),u=us.types[this.type];function c(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(i=0;i<l.length;i++)h[i]=l[i][0];c(l=h);break;case 2:for(i=0;i<l.length;i++)c(l[i]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,i,r=[],o=0;o<e;o++){var a=hs(t[o]);0!==a&&(void 0===i&&(i=a<0),i===a<0?(n&&r.push(n),n=[t[o]]):n.push(t[o]))}return n&&r.push(n),r}(l),i=0;i<l.length;i++)for(r=0;r<l[i].length;r++)c(l[i][r])}1===l.length?l=l[0]:u="Multi"+u;var p={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p};var ps=fs;function fs(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(ds,this,e),this.length=this._features.length}function ds(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}(n))}function ms(t,e,n){if(3===t){var i=new ps(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}fs.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new ls(this._pbf,e,this.extent,this._keys,this._values)};var gs={VectorTile:function(t,e){this.layers=t.readFields(ms,{},e)},VectorTileFeature:ls,VectorTileLayer:ps},ys=gs.VectorTileFeature.types,vs=Math.pow(2,13);function _s(t,e,n,i,r,o,a,s){t.emplaceBack(e,n,2*Math.floor(i*vs)+a,r*vs*2,o*vs*2,Math.round(s))}var bs=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ir,this.indexArray=new Fr,this.programConfigurations=new Mo(t.layers,t.zoom),this.segments=new ro,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function xs(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)}bs.prototype.populate=function(t,e,n){this.features=[],this.hasPattern=es("fill-extrusion",this.layers,e);for(var i=0,r=t;i<r.length;i+=1){var o=r[i],a=o.feature,s=o.id,l=o.index,u=o.sourceLayerIndex,c=this.layers[0]._featureFilter.needGeometry,h={type:a.type,id:s,properties:a.properties,geometry:c?Fo(a):[]};if(this.layers[0]._featureFilter.filter(new rr(this.zoom),h,n)){var p={id:s,sourceLayerIndex:u,index:l,geometry:c?h.geometry:Fo(a),properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(p.id=a.id),this.hasPattern?this.features.push(ns("fill-extrusion",this.layers,p,this.zoom,e)):this.addFeature(p,p.geometry,l,n,{}),e.featureIndex.insert(a,p.geometry,l,u,this.index,!0)}}},bs.prototype.addFeatures=function(t,e,n){for(var i=0,r=this.features;i<r.length;i+=1){var o=r[i];this.addFeature(o,o.geometry,o.index,e,n)}},bs.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},bs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},bs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bs.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ss),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},bs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},bs.prototype.addFeature=function(t,e,n,i,r){for(var o=0,a=$a(e,500);o<a.length;o+=1){for(var s=a[o],l=0,u=0,c=s;u<c.length;u+=1)l+=c[u].length;for(var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=0,f=s;p<f.length;p+=1){var d=f[p];if(0!==d.length&&!((M=d).every((function(t){return t.x<0}))||M.every((function(t){return t.x>8192}))||M.every((function(t){return t.y<0}))||M.every((function(t){return t.y>8192}))))for(var m=0,g=0;g<d.length;g++){var y=d[g];if(g>=1){var v=d[g-1];if(!xs(y,v)){h.vertexLength+4>ro.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var _=y.sub(v)._perp()._unit(),b=v.dist(y);m+b>32768&&(m=0),_s(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,0,m),_s(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,1,m),_s(this.layoutVertexArray,v.x,v.y,_.x,_.y,0,0,m+=b),_s(this.layoutVertexArray,v.x,v.y,_.x,_.y,0,1,m);var x=h.vertexLength;this.indexArray.emplaceBack(x,x+2,x+1),this.indexArray.emplaceBack(x+1,x+2,x+3),h.vertexLength+=4,h.primitiveLength+=2}}}}if(h.vertexLength+l>ro.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray)),"Polygon"===ys[t.type]){for(var w=[],C=[],k=h.vertexLength,E=0,S=s;E<S.length;E+=1){var I=S[E];if(0!==I.length){I!==s[0]&&C.push(w.length/2);for(var T=0;T<I.length;T++){var P=I[T];_s(this.layoutVertexArray,P.x,P.y,0,0,1,1,0),w.push(P.x),w.push(P.y)}}}for(var A=wa(w,C),L=0;L<A.length;L+=3)this.indexArray.emplaceBack(k+A[L],k+A[L+2],k+A[L+1]);h.primitiveLength+=A.length/3,h.vertexLength+=l}}var M;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,i)},Di("FillExtrusionBucket",bs,{omit:["layers","features"]});var ws={paint:new vr({"fill-extrusion-opacity":new fr(St["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new dr(St["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new fr(St["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new fr(St["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new mr(St["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new dr(St["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new dr(St["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new fr(St["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Cs=function(t){function e(e){t.call(this,e,ws)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new bs(t)},e.prototype.queryRadius=function(){return Qo(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,n,i,o,a,s,l){var u=$o(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),c=this.paint.get("fill-extrusion-height").evaluate(e,n),h=this.paint.get("fill-extrusion-base").evaluate(e,n),p=function(t,e,n,i){for(var o=[],a=0,s=t;a<s.length;a+=1){var l=s[a],u=[l.x,l.y,0,1];sa(u,u,e),o.push(new r(u[0]/u[3],u[1]/u[3]))}return o}(u,l),f=function(t,e,n,i){for(var o=[],a=[],s=i[8]*e,l=i[9]*e,u=i[10]*e,c=i[11]*e,h=i[8]*n,p=i[9]*n,f=i[10]*n,d=i[11]*n,m=0,g=t;m<g.length;m+=1){for(var y=[],v=[],_=0,b=g[m];_<b.length;_+=1){var x=b[_],w=x.x,C=x.y,k=i[0]*w+i[4]*C+i[12],E=i[1]*w+i[5]*C+i[13],S=i[2]*w+i[6]*C+i[14],I=i[3]*w+i[7]*C+i[15],T=S+u,P=I+c,A=k+h,L=E+p,M=S+f,R=I+d,O=new r((k+s)/P,(E+l)/P);O.z=T/P,y.push(O);var D=new r(A/R,L/R);D.z=M/R,v.push(D)}o.push(y),a.push(v)}return[o,a]}(i,h,c,l);return function(t,e,n){var i=1/0;jo(n,e)&&(i=Es(n,e[0]));for(var r=0;r<e.length;r++)for(var o=e[r],a=t[r],s=0;s<o.length-1;s++){var l=o[s],u=[l,o[s+1],a[s+1],a[s],l];Vo(n,u)&&(i=Math.min(i,Es(n,u)))}return i!==1/0&&i}(f[0],f[1],p)},e}(_r);function ks(t,e){return t.x*e.x+t.y*e.y}function Es(t,e){if(1===t.length){for(var n,i=0,r=e[i++];!n||r.equals(n);)if(!(n=e[i++]))return 1/0;for(;i<e.length;i++){var o=e[i],a=t[0],s=n.sub(r),l=o.sub(r),u=a.sub(r),c=ks(s,s),h=ks(s,l),p=ks(l,l),f=ks(u,s),d=ks(u,l),m=c*p-h*h,g=(p*f-h*d)/m,y=(c*d-h*f)/m,v=r.z*(1-g-y)+n.z*g+o.z*y;if(isFinite(v))return v}return 1/0}for(var _=1/0,b=0,x=e;b<x.length;b+=1)_=Math.min(_,x[b].z);return _}var Ss=Cr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Is=gs.VectorTileFeature.types,Ts=Math.cos(Math.PI/180*37.5),Ps=Math.pow(2,14)/.5,As=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Tr,this.indexArray=new Fr,this.programConfigurations=new Mo(t.layers,t.zoom),this.segments=new ro,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};As.prototype.populate=function(t,e,n){this.hasPattern=es("line",this.layers,e);for(var i=this.layers[0].layout.get("line-sort-key"),r=[],o=0,a=t;o<a.length;o+=1){var s=a[o],l=s.feature,u=s.id,c=s.index,h=s.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,f={type:l.type,id:u,properties:l.properties,geometry:p?Fo(l):[]};if(this.layers[0]._featureFilter.filter(new rr(this.zoom),f,n)){p||(f.geometry=Fo(l));var d=i?i.evaluate(f,{},n):void 0;r.push({id:u,properties:l.properties,type:l.type,sourceLayerIndex:h,index:c,geometry:f.geometry,patterns:{},sortKey:d})}}i&&r.sort((function(t,e){return t.sortKey-e.sortKey}));for(var m=0,g=r;m<g.length;m+=1){var y=g[m],v=y.geometry,_=y.index,b=y.sourceLayerIndex;if(this.hasPattern){var x=ns("line",this.layers,y,this.zoom,e);this.patternFeatures.push(x)}else this.addFeature(y,v,_,n,{});e.featureIndex.insert(t[_].feature,v,_,b,this.index)}},As.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},As.prototype.addFeatures=function(t,e,n){for(var i=0,r=this.patternFeatures;i<r.length;i+=1){var o=r[i];this.addFeature(o,o.geometry,o.index,e,n)}},As.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},As.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},As.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ss),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},As.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},As.prototype.addFeature=function(t,e,n,i,r){for(var o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),l=o.get("line-miter-limit"),u=o.get("line-round-limit"),c=0,h=e;c<h.length;c+=1)this.addLine(h[c],t,a,s,l,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,i)},As.prototype.addLine=function(t,e,n,i,r,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+e.properties.mapbox_clip_start,this.clipEnd=+e.properties.mapbox_clip_end;for(var a=0;a<t.length-1;a++)this.totalDistance+=t[a].dist(t[a+1]);this.updateScaledDistance()}for(var s="Polygon"===Is[e.type],l=t.length;l>=2&&t[l-1].equals(t[l-2]);)l--;for(var u=0;u<l-1&&t[u].equals(t[u+1]);)u++;if(!(l<(s?3:2))){"bevel"===n&&(r=1.05);var c,h=this.overscaling<=16?122880/(512*this.overscaling):0,p=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray),f=void 0,d=void 0,m=void 0,g=void 0;this.e1=this.e2=-1,s&&(g=t[u].sub(c=t[l-2])._unit()._perp());for(var y=u;y<l;y++)if(!(d=y===l-1?s?t[u+1]:void 0:t[y+1])||!t[y].equals(d)){g&&(m=g),c&&(f=c),c=t[y],g=d?d.sub(c)._unit()._perp():m;var v=(m=m||g).add(g);0===v.x&&0===v.y||v._unit();var _=m.x*g.x+m.y*g.y,b=v.x*g.x+v.y*g.y,x=0!==b?1/b:1/0,w=2*Math.sqrt(2-2*b),C=b<Ts&&f&&d,k=m.x*g.y-m.y*g.x>0;if(C&&y>u){var E=c.dist(f);if(E>2*h){var S=c.sub(c.sub(f)._mult(h/E)._round());this.updateDistance(f,S),this.addCurrentVertex(S,m,0,0,p),f=S}}var I=f&&d,T=I?n:s?"butt":i;if(I&&"round"===T&&(x<o?T="miter":x<=2&&(T="fakeround")),"miter"===T&&x>r&&(T="bevel"),"bevel"===T&&(x>2&&(T="flipbevel"),x<r&&(T="miter")),f&&this.updateDistance(f,c),"miter"===T)v._mult(x),this.addCurrentVertex(c,v,0,0,p);else if("flipbevel"===T){if(x>100)v=g.mult(-1);else{var P=x*m.add(g).mag()/m.sub(g).mag();v._perp()._mult(P*(k?-1:1))}this.addCurrentVertex(c,v,0,0,p),this.addCurrentVertex(c,v.mult(-1),0,0,p)}else if("bevel"===T||"fakeround"===T){var A=-Math.sqrt(x*x-1),L=k?A:0,M=k?0:A;if(f&&this.addCurrentVertex(c,m,L,M,p),"fakeround"===T)for(var R=Math.round(180*w/Math.PI/20),O=1;O<R;O++){var D=O/R;if(.5!==D){var N=D-.5;D+=D*N*(D-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*N*N+(.848013+_*(.215638*_-1.06021)))}var F=g.sub(m)._mult(D)._add(m)._unit()._mult(k?-1:1);this.addHalfVertex(c,F.x,F.y,!1,k,0,p)}d&&this.addCurrentVertex(c,g,-L,-M,p)}else if("butt"===T)this.addCurrentVertex(c,v,0,0,p);else if("square"===T){var z=f?1:-1;this.addCurrentVertex(c,v,z,z,p)}else"round"===T&&(f&&(this.addCurrentVertex(c,m,0,0,p),this.addCurrentVertex(c,m,1,1,p,!0)),d&&(this.addCurrentVertex(c,g,-1,-1,p,!0),this.addCurrentVertex(c,g,0,0,p)));if(C&&y<l-1){var B=c.dist(d);if(B>2*h){var V=c.add(d.sub(c)._mult(h/B)._round());this.updateDistance(c,V),this.addCurrentVertex(V,g,0,0,p),c=V}}}}},As.prototype.addCurrentVertex=function(t,e,n,i,r,o){void 0===o&&(o=!1);var a=e.y*i-e.x,s=-e.y-e.x*i;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,o,!1,n,r),this.addHalfVertex(t,a,s,o,!0,-i,r),this.distance>Ps/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,n,i,r,o))},As.prototype.addHalfVertex=function(t,e,n,i,r,o,a){var s=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((t.x<<1)+(i?1:0),(t.y<<1)+(r?1:0),Math.round(63*e)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1)|(63&s)<<2,s>>6);var l=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),a.primitiveLength++),r?this.e2=l:this.e1=l},As.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Ps-1):this.distance},As.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},Di("LineBucket",As,{omit:["layers","patternFeatures"]});var Ls=new vr({"line-cap":new fr(St.layout_line["line-cap"]),"line-join":new dr(St.layout_line["line-join"]),"line-miter-limit":new fr(St.layout_line["line-miter-limit"]),"line-round-limit":new fr(St.layout_line["line-round-limit"]),"line-sort-key":new dr(St.layout_line["line-sort-key"])}),Ms={paint:new vr({"line-opacity":new dr(St.paint_line["line-opacity"]),"line-color":new dr(St.paint_line["line-color"]),"line-translate":new fr(St.paint_line["line-translate"]),"line-translate-anchor":new fr(St.paint_line["line-translate-anchor"]),"line-width":new dr(St.paint_line["line-width"]),"line-gap-width":new dr(St.paint_line["line-gap-width"]),"line-offset":new dr(St.paint_line["line-offset"]),"line-blur":new dr(St.paint_line["line-blur"]),"line-dasharray":new gr(St.paint_line["line-dasharray"]),"line-pattern":new mr(St.paint_line["line-pattern"]),"line-gradient":new yr(St.paint_line["line-gradient"])}),layout:Ls},Rs=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new rr(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,i,r){return n=h({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,i,r)},e}(dr))(Ms.paint.properties["line-width"].specification);Rs.useIntegerZoom=!0;var Os=function(t){function e(e){t.call(this,e,Ms)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){this.gradient=ya(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e,n){t.prototype.recalculate.call(this,e,n),this.paint._values["line-floorwidth"]=Rs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new As(t)},e.prototype.queryRadius=function(t){var e=t,n=Ds(Jo("line-width",this,e),Jo("line-gap-width",this,e)),i=Jo("line-offset",this,e);return n/2+Math.abs(i)+Qo(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,o,a,s){var l=$o(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),u=s/2*Ds(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),c=this.paint.get("line-offset").evaluate(e,n);return c&&(i=function(t,e){for(var n=[],i=new r(0,0),o=0;o<t.length;o++){for(var a=t[o],s=[],l=0;l<a.length;l++){var u=a[l],c=a[l+1],h=0===l?i:u.sub(a[l-1])._unit()._perp(),p=l===a.length-1?i:c.sub(u)._unit()._perp(),f=h._add(p)._unit();f._mult(1/(f.x*p.x+f.y*p.y)),s.push(f._mult(e)._add(u))}n.push(s)}return n}(i,c*s)),function(t,e,n){for(var i=0;i<e.length;i++){var r=e[i];if(t.length>=3)for(var o=0;o<r.length;o++)if(Yo(t,r[o]))return!0;if(qo(t,r,n))return!0}return!1}(l,i,u)},e.prototype.isTileClipped=function(){return!0},e}(_r);function Ds(t,e){return e>0?e+2*t:t}var Ns=Cr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Fs=Cr([{name:"a_projected_pos",components:3,type:"Float32"}],4),zs=(Cr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Cr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Bs=(Cr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Cr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Vs=Cr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Us(t,e,n){return t.sections.forEach((function(t){t.text=function(t,e,n){var i=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===i?t=t.toLocaleUpperCase():"lowercase"===i&&(t=t.toLocaleLowerCase()),ir.applyArabicShaping&&(t=ir.applyArabicShaping(t)),t}(t.text,e,n)})),t}Cr([{name:"triangle",components:3,type:"Uint16"}]),Cr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Cr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Cr([{type:"Float32",name:"offsetX"}]),Cr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var js={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},qs=function(t,e,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?r-1:0,p=n?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+t[e+h],h+=p,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),o-=u}return(f?-1:1)*a*Math.pow(2,o-i)},Gs=function(t,e,n,i,r,o){var a,s,l,u=8*o-r-1,c=(1<<u)-1,h=c>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,d=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*l-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[n+f]=255&s,f+=d,s/=256,r-=8);for(a=a<<r|s,u+=r;u>0;t[n+f]=255&a,f+=d,a/=256,u-=8);t[n+f-d]|=128*m},Hs=Xs;function Xs(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Xs.Varint=0,Xs.Fixed64=1,Xs.Bytes=2,Xs.Fixed32=5;var Zs="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Ws(t){return t.type===Xs.Bytes?t.readVarint()+t.pos:t.pos+1}function Ys(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Ks(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=t;r--)n.buf[r+i]=n.buf[r]}function Js(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function Qs(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function $s(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function tl(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function el(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function nl(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function il(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function rl(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function ol(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function al(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function sl(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function ll(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function ul(t,e,n){1===t&&n.readMessage(cl,e)}function cl(t,e,n){if(3===t){var i=n.readMessage(hl,{}),r=i.width,o=i.height,a=i.left,s=i.top,l=i.advance;e.push({id:i.id,bitmap:new da({width:r+6,height:o+6},i.bitmap),metrics:{width:r,height:o,left:a,top:s,advance:l}})}}function hl(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function pl(t){for(var e=0,n=0,i=0,r=t;i<r.length;i+=1){var o=r[i];e+=o.w*o.h,n=Math.max(n,o.w)}t.sort((function(t,e){return e.h-t.h}));for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}],s=0,l=0,u=0,c=t;u<c.length;u+=1)for(var h=c[u],p=a.length-1;p>=0;p--){var f=a[p];if(!(h.w>f.w||h.h>f.h)){if(h.x=f.x,h.y=f.y,l=Math.max(l,h.y+h.h),s=Math.max(s,h.x+h.w),h.w===f.w&&h.h===f.h){var d=a.pop();p<a.length&&(a[p]=d)}else h.h===f.h?(f.x+=h.w,f.w-=h.w):h.w===f.w?(f.y+=h.h,f.h-=h.h):(a.push({x:f.x+h.w,y:f.y,w:f.w-h.w,h:h.h}),f.y+=h.h,f.h-=h.h);break}}return{w:s,h:l,fill:e/(s*l)||0}}Xs.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,o=this.pos;this.type=7&i,t(r,e,this),this.pos===o&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=al(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=ll(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=al(this.buf,this.pos)+4294967296*al(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=al(this.buf,this.pos)+4294967296*ll(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=qs(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=qs(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,i=this.buf;return e=127&(n=i[this.pos++]),n<128?e:(e|=(127&(n=i[this.pos++]))<<7,n<128?e:(e|=(127&(n=i[this.pos++]))<<14,n<128?e:(e|=(127&(n=i[this.pos++]))<<21,n<128?e:function(t,e,n){var i,r,o=n.buf;if(i=(112&(r=o[n.pos++]))>>4,r<128)return Ys(t,i,e);if(i|=(127&(r=o[n.pos++]))<<3,r<128)return Ys(t,i,e);if(i|=(127&(r=o[n.pos++]))<<10,r<128)return Ys(t,i,e);if(i|=(127&(r=o[n.pos++]))<<17,r<128)return Ys(t,i,e);if(i|=(127&(r=o[n.pos++]))<<24,r<128)return Ys(t,i,e);if(i|=(1&(r=o[n.pos++]))<<31,r<128)return Ys(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Zs?function(t,e,n){return Zs.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var i="",r=e;r<n;){var o,a,s,l=t[r],u=null,c=l>239?4:l>223?3:l>191?2:1;if(r+c>n)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[r+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(a=t[r+2],128==(192&(o=t[r+1]))&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(a=t[r+2],s=t[r+3],128==(192&(o=t[r+1]))&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,i+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),i+=String.fromCharCode(u),r+=c}return i}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Xs.Bytes)return t.push(this.readVarint(e));var n=Ws(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Xs.Bytes)return t.push(this.readSVarint());var e=Ws(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Xs.Bytes)return t.push(this.readBoolean());var e=Ws(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Xs.Bytes)return t.push(this.readFloat());var e=Ws(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Xs.Bytes)return t.push(this.readDouble());var e=Ws(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Xs.Bytes)return t.push(this.readFixed32());var e=Ws(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Xs.Bytes)return t.push(this.readSFixed32());var e=Ws(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Xs.Bytes)return t.push(this.readFixed64());var e=Ws(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Xs.Bytes)return t.push(this.readSFixed64());var e=Ws(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Xs.Varint)for(;this.buf[this.pos++]>127;);else if(e===Xs.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Xs.Fixed32)this.pos+=4;else{if(e!==Xs.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),sl(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),sl(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),sl(this.buf,-1&t,this.pos),sl(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),sl(this.buf,-1&t,this.pos),sl(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,i;if(t>=0?(n=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var i,r,o=0;o<e.length;o++){if((i=e.charCodeAt(o))>55295&&i<57344){if(!r){i>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):r=i;continue}if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(t[n++]=239,t[n++]=191,t[n++]=189,r=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Ks(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Gs(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Gs(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n;i>=128&&Ks(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,Xs.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Js,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Qs,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,el,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,$s,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,tl,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,nl,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,il,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,rl,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,ol,e)},writeBytesField:function(t,e){this.writeTag(t,Xs.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Xs.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Xs.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Xs.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Xs.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Xs.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Xs.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Xs.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Xs.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Xs.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var fl=function(t,e){var n=e.pixelRatio,i=e.version,r=e.stretchX,o=e.stretchY,a=e.content;this.paddedRect=t,this.pixelRatio=n,this.stretchX=r,this.stretchY=o,this.content=a,this.version=i},dl={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};dl.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},dl.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},dl.tlbr.get=function(){return this.tl.concat(this.br)},dl.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(fl.prototype,dl);var ml=function(t,e){var n={},i={};this.haveRenderCallbacks=[];var r=[];this.addImages(t,n,r),this.addImages(e,i,r);var o=pl(r),a=new ma({width:o.w||1,height:o.h||1});for(var s in t){var l=t[s],u=n[s].paddedRect;ma.copy(l.data,a,{x:0,y:0},{x:u.x+1,y:u.y+1},l.data)}for(var c in e){var h=e[c],p=i[c].paddedRect,f=p.x+1,d=p.y+1,m=h.data.width,g=h.data.height;ma.copy(h.data,a,{x:0,y:0},{x:f,y:d},h.data),ma.copy(h.data,a,{x:0,y:g-1},{x:f,y:d-1},{width:m,height:1}),ma.copy(h.data,a,{x:0,y:0},{x:f,y:d+g},{width:m,height:1}),ma.copy(h.data,a,{x:m-1,y:0},{x:f-1,y:d},{width:1,height:g}),ma.copy(h.data,a,{x:0,y:0},{x:f+m,y:d},{width:1,height:g})}this.image=a,this.iconPositions=n,this.patternPositions=i};ml.prototype.addImages=function(t,e,n){for(var i in t){var r=t[i],o={x:0,y:0,w:r.data.width+2,h:r.data.height+2};n.push(o),e[i]=new fl(o,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(i)}},ml.prototype.patchUpdatedImages=function(t,e){for(var n in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)},ml.prototype.patchUpdatedImage=function(t,e,n){if(t&&e&&t.version!==e.version){t.version=e.version;var i=t.tl;n.update(e.data,void 0,{x:i[0],y:i[1]})}},Di("ImagePosition",fl),Di("ImageAtlas",ml);var gl={horizontal:1,vertical:2,horizontalOnly:3},yl=function(){this.scale=1,this.fontStack="",this.imageName=null};yl.forText=function(t,e){var n=new yl;return n.scale=t||1,n.fontStack=e,n},yl.forImage=function(t){var e=new yl;return e.imageName=t,e};var vl=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function _l(t,e,n,i,r,o,a,s,l,u,c,h,p,f,d,m){var g,y=vl.fromFeature(t,r);h===gl.vertical&&y.verticalizePunctuation();var v=ir.processBidirectionalText,_=ir.processStyledBidirectionalText;if(v&&1===y.sections.length){g=[];for(var b=0,x=v(y.toString(),Sl(y,u,o,e,i,f,d));b<x.length;b+=1){var w=x[b],C=new vl;C.text=w,C.sections=y.sections;for(var k=0;k<w.length;k++)C.sectionIndex.push(0);g.push(C)}}else if(_){g=[];for(var E=0,S=_(y.text,y.sectionIndex,Sl(y,u,o,e,i,f,d));E<S.length;E+=1){var I=S[E],T=new vl;T.text=I[0],T.sectionIndex=I[1],T.sections=y.sections,g.push(T)}}else g=function(t,e){for(var n=[],i=t.text,r=0,o=0,a=e;o<a.length;o+=1){var s=a[o];n.push(t.substring(r,s)),r=s}return r<i.length&&n.push(t.substring(r,i.length)),n}(y,Sl(y,u,o,e,i,f,d));var P=[],A={positionedLines:P,text:y.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:h,iconsInText:!1,verticalizable:!1};return function(t,e,n,i,r,o,a,s,l,u,c,h){for(var p=0,f=-17,d=0,m=0,g="right"===s?1:"left"===s?0:.5,y=0,v=0,_=r;v<_.length;v+=1){var b=_[v];b.trim();var x=b.getMaxScale(),w=24*(x-1),C={positionedGlyphs:[],lineOffset:0};t.positionedLines[y]=C;var k=C.positionedGlyphs,E=0;if(b.length()){for(var S=0;S<b.length();S++){var I=b.getSection(S),T=b.getSectionIndex(S),P=b.getCharCode(S),A=0,L=null,M=null,R=null,O=24,D=!(l===gl.horizontal||!c&&!Gi(P)||c&&(bl[P]||(G=P,ji.Arabic(G)||ji["Arabic Supplement"](G)||ji["Arabic Extended-A"](G)||ji["Arabic Presentation Forms-A"](G)||ji["Arabic Presentation Forms-B"](G))));if(I.imageName){var N=i[I.imageName];if(!N)continue;R=I.imageName,t.iconsInText=t.iconsInText||!0,M=N.paddedRect;var F=N.displaySize;I.scale=24*I.scale/h,A=w+(24-F[1]*I.scale),O=(L={width:F[0],height:F[1],left:1,top:-3,advance:D?F[1]:F[0]}).advance;var z=D?F[0]*I.scale-24*x:F[1]*I.scale-24*x;z>0&&z>E&&(E=z)}else{var B=n[I.fontStack],V=B&&B[P];if(V&&V.rect)M=V.rect,L=V.metrics;else{var U=e[I.fontStack],j=U&&U[P];if(!j)continue;L=j.metrics}A=24*(x-I.scale)}D?(t.verticalizable=!0,k.push({glyph:P,imageName:R,x:p,y:f+A,vertical:D,scale:I.scale,fontStack:I.fontStack,sectionIndex:T,metrics:L,rect:M}),p+=O*I.scale+u):(k.push({glyph:P,imageName:R,x:p,y:f+A,vertical:D,scale:I.scale,fontStack:I.fontStack,sectionIndex:T,metrics:L,rect:M}),p+=L.advance*I.scale+u)}0!==k.length&&(d=Math.max(p-u,d),Tl(k,0,k.length-1,g,E)),p=0;var q=o*x+E;C.lineOffset=Math.max(E,w),f+=q,m=Math.max(q,m),++y}else f+=o,++y}var G,H=f- -17,X=Il(a),Z=X.horizontalAlign,W=X.verticalAlign;(function(t,e,n,i,r,o,a,s,l){var u,c=(e-n)*r;u=o!==a?-s*i- -17:(-i*l+.5)*a;for(var h=0,p=t;h<p.length;h+=1)for(var f=0,d=p[h].positionedGlyphs;f<d.length;f+=1){var m=d[f];m.x+=c,m.y+=u}})(t.positionedLines,g,Z,W,d,m,o,H,r.length),t.top+=-W*H,t.bottom=t.top+H,t.left+=-Z*d,t.right=t.left+d}(A,e,n,i,g,a,s,l,h,u,p,m),!function(t){for(var e=0,n=t;e<n.length;e+=1)if(0!==n[e].positionedGlyphs.length)return!1;return!0}(P)&&A}vl.fromFeature=function(t,e){for(var n=new vl,i=0;i<t.sections.length;i++){var r=t.sections[i];r.image?n.addImageSection(r):n.addTextSection(r,e)}return n},vl.prototype.length=function(){return this.text.length},vl.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},vl.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},vl.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},vl.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n+1)||null,r=t.charCodeAt(n-1)||null;e+=i&&Hi(i)&&!js[t[n+1]]||r&&Hi(r)&&!js[t[n-1]]||!js[t[n]]?t[n]:js[t[n]]}return e}(this.text)},vl.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&bl[this.text.charCodeAt(e)];e++)t++;for(var n=this.text.length,i=this.text.length-1;i>=0&&i>=t&&bl[this.text.charCodeAt(i)];i--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)},vl.prototype.substring=function(t,e){var n=new vl;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n},vl.prototype.toString=function(){return this.text},vl.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce((function(e,n){return Math.max(e,t.sections[n].scale)}),0)},vl.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(yl.forText(t.scale,t.fontStack||e));for(var n=this.sections.length-1,i=0;i<t.text.length;++i)this.sectionIndex.push(n)},vl.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(yl.forImage(e)),this.sectionIndex.push(this.sections.length-1)):w("Reached maximum number of images 6401")}else w("Can't add FormattedSection with an empty image.")},vl.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var bl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},xl={};function wl(t,e,n,i,r,o){if(e.imageName){var a=i[e.imageName];return a?a.displaySize[0]*e.scale*24/o+r:0}var s=n[e.fontStack],l=s&&s[t];return l?l.metrics.advance*e.scale+r:0}function Cl(t,e,n,i){var r=Math.pow(t-e,2);return i?t<e?r/2:2*r:r+Math.abs(n)*n}function kl(t,e,n){var i=0;return 10===t&&(i-=1e4),n&&(i+=150),40!==t&&65288!==t||(i+=50),41!==e&&65289!==e||(i+=50),i}function El(t,e,n,i,r,o){for(var a=null,s=Cl(e,n,r,o),l=0,u=i;l<u.length;l+=1){var c=u[l],h=Cl(e-c.x,n,r,o)+c.badness;h<=s&&(a=c,s=h)}return{index:t,x:e,priorBreak:a,badness:s}}function Sl(t,e,n,i,r,o,a){if("point"!==o)return[];if(!t)return[];for(var s,l=[],u=function(t,e,n,i,r,o){for(var a=0,s=0;s<t.length();s++){var l=t.getSection(s);a+=wl(t.getCharCode(s),l,i,r,e,o)}return a/Math.max(1,Math.ceil(a/n))}(t,e,n,i,r,a),c=t.text.indexOf("\u200b")>=0,h=0,p=0;p<t.length();p++){var f=t.getSection(p),d=t.getCharCode(p);if(bl[d]||(h+=wl(d,f,i,r,e,a)),p<t.length()-1){var m=!((s=d)<11904||!(ji["Bopomofo Extended"](s)||ji.Bopomofo(s)||ji["CJK Compatibility Forms"](s)||ji["CJK Compatibility Ideographs"](s)||ji["CJK Compatibility"](s)||ji["CJK Radicals Supplement"](s)||ji["CJK Strokes"](s)||ji["CJK Symbols and Punctuation"](s)||ji["CJK Unified Ideographs Extension A"](s)||ji["CJK Unified Ideographs"](s)||ji["Enclosed CJK Letters and Months"](s)||ji["Halfwidth and Fullwidth Forms"](s)||ji.Hiragana(s)||ji["Ideographic Description Characters"](s)||ji["Kangxi Radicals"](s)||ji["Katakana Phonetic Extensions"](s)||ji.Katakana(s)||ji["Vertical Forms"](s)||ji["Yi Radicals"](s)||ji["Yi Syllables"](s)));(xl[d]||m||f.imageName)&&l.push(El(p+1,h,u,l,kl(d,t.getCharCode(p+1),m&&c),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(El(t.length(),h,u,l,0,!0))}function Il(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Tl(t,e,n,i,r){if(i||r)for(var o=t[n],a=(t[n].x+o.metrics.advance*o.scale)*i,s=e;s<=n;s++)t[s].x-=a,t[s].y+=r}function Pl(t,e,n,i,r,o){var a,s=t.image;if(s.content){var l=s.content,u=s.pixelRatio||1;a=[l[0]/u,l[1]/u,s.displaySize[0]-l[2]/u,s.displaySize[1]-l[3]/u]}var c,h,p,f,d=e.left*o,m=e.right*o;"width"===n||"both"===n?(f=r[0]+d-i[3],h=r[0]+m+i[1]):h=(f=r[0]+(d+m-s.displaySize[0])/2)+s.displaySize[0];var g=e.top*o,y=e.bottom*o;return"height"===n||"both"===n?(c=r[1]+g-i[0],p=r[1]+y+i[2]):p=(c=r[1]+(g+y-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:h,bottom:p,left:f,collisionPadding:a}}xl[10]=!0,xl[32]=!0,xl[38]=!0,xl[40]=!0,xl[41]=!0,xl[43]=!0,xl[45]=!0,xl[47]=!0,xl[173]=!0,xl[183]=!0,xl[8203]=!0,xl[8208]=!0,xl[8211]=!0,xl[8231]=!0;var Al=function(t){function e(e,n,i,r){t.call(this,e,n),this.angle=i,void 0!==r&&(this.segment=r)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(r);function Ll(t,e){var n=e.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new rr(t+1))};if("source"===n.kind)return{kind:"source"};for(var i=n.zoomStops,r=n.interpolationType,o=0;o<i.length&&i[o]<=t;)o++;for(var a=o=Math.max(0,o-1);a<i.length&&i[a]<t+1;)a++;a=Math.min(i.length-1,a);var s=i[o],l=i[a];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:r}:{kind:"camera",minZoom:s,maxZoom:l,minSize:n.evaluate(new rr(s)),maxSize:n.evaluate(new rr(l)),interpolationType:r}}function Ml(t,e,n){var i=e.uSize,r=n.lowerSize;return"source"===t.kind?r/128:"composite"===t.kind?Ue(r/128,n.upperSize/128,e.uSizeT):i}function Rl(t,e){var n=0,i=0;if("constant"===t.kind)i=t.layoutSize;else if("source"!==t.kind){var r=t.interpolationType,o=r?u(nn.interpolationFactor(r,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?i=Ue(t.minSize,t.maxSize,o):n=o}return{uSizeT:n,uSize:i}}Di("Anchor",Al);var Ol=Object.freeze({__proto__:null,getSizeData:Ll,evaluateSizeForFeature:Ml,evaluateSizeForZoom:Rl,SIZE_PACK_FACTOR:128});function Dl(t,e,n,i,r){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var l=[],u=0;s<n/2;){var c=t[a],h=t[a+1];if(!h)return!1;var p=t[a-1].angleTo(c)-c.angleTo(h);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:p}),u+=p;s-l[0].distance>i;)u-=l.shift().angleDelta;if(u>r)return!1;a++,s+=c.dist(h)}return!0}function Nl(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function Fl(t,e,n){return t?.6*e*n:0}function zl(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Bl(t,e,n,i,r,o){for(var a=Fl(n,r,o),s=zl(n,i)*o,l=0,u=Nl(t)/2,c=0;c<t.length-1;c++){var h=t[c],p=t[c+1],f=h.dist(p);if(l+f>u){var d=(u-l)/f,m=Ue(h.x,p.x,d),g=Ue(h.y,p.y,d),y=new Al(m,g,p.angleTo(h),c);return y._round(),!a||Dl(t,y,s,a,e)?y:void 0}l+=f}}function Vl(t,e,n,i,r,o,a,s,l){var u=Fl(i,o,a),c=zl(i,r),h=c*a,p=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),function t(e,n,i,r,o,a,s,l,u){for(var c=a/2,h=Nl(e),p=0,f=n-i,d=[],m=0;m<e.length-1;m++){for(var g=e[m],y=e[m+1],v=g.dist(y),_=y.angleTo(g);f+i<p+v;){var b=((f+=i)-p)/v,x=Ue(g.x,y.x,b),w=Ue(g.y,y.y,b);if(x>=0&&x<u&&w>=0&&w<u&&f-c>=0&&f+c<=h){var C=new Al(x,w,_,m);C._round(),r&&!Dl(e,C,a,r,o)||d.push(C)}}p+=v}return l||d.length||s||(d=t(e,p/2,i,r,o,a,s,!0,u)),d}(t,p?e/2*s%e:(c/2+2*o)*a*s%e,e,u,n,h,p,!1,l)}function Ul(t,e,n,i,o){for(var a=[],s=0;s<t.length;s++)for(var l=t[s],u=void 0,c=0;c<l.length-1;c++){var h=l[c],p=l[c+1];h.x<e&&p.x<e||(h.x<e?h=new r(e,h.y+(e-h.x)/(p.x-h.x)*(p.y-h.y))._round():p.x<e&&(p=new r(e,h.y+(e-h.x)/(p.x-h.x)*(p.y-h.y))._round()),h.y<n&&p.y<n||(h.y<n?h=new r(h.x+(n-h.y)/(p.y-h.y)*(p.x-h.x),n)._round():p.y<n&&(p=new r(h.x+(n-h.y)/(p.y-h.y)*(p.x-h.x),n)._round()),h.x>=i&&p.x>=i||(h.x>=i?h=new r(i,h.y+(i-h.x)/(p.x-h.x)*(p.y-h.y))._round():p.x>=i&&(p=new r(i,h.y+(i-h.x)/(p.x-h.x)*(p.y-h.y))._round()),h.y>=o&&p.y>=o||(h.y>=o?h=new r(h.x+(o-h.y)/(p.y-h.y)*(p.x-h.x),o)._round():p.y>=o&&(p=new r(h.x+(o-h.y)/(p.y-h.y)*(p.x-h.x),o)._round()),u&&h.equals(u[u.length-1])||a.push(u=[h]),u.push(p)))))}return a}function jl(t,e,n,i){var o=[],a=t.image,s=a.pixelRatio,l=a.paddedRect.w-2,u=a.paddedRect.h-2,c=t.right-t.left,h=t.bottom-t.top,p=a.stretchX||[[0,l]],f=a.stretchY||[[0,u]],d=function(t,e){return t+e[1]-e[0]},m=p.reduce(d,0),g=f.reduce(d,0),y=l-m,v=u-g,_=0,b=m,x=0,w=g,C=0,k=y,E=0,S=v;if(a.content&&i){var I=a.content;_=ql(p,0,I[0]),x=ql(f,0,I[1]),b=ql(p,I[0],I[2]),w=ql(f,I[1],I[3]),C=I[0]-_,E=I[1]-x,k=I[2]-I[0]-b,S=I[3]-I[1]-w}var T=function(i,o,l,u){var p=Hl(i.stretch-_,b,c,t.left),f=Xl(i.fixed-C,k,i.stretch,m),d=Hl(o.stretch-x,w,h,t.top),y=Xl(o.fixed-E,S,o.stretch,g),v=Hl(l.stretch-_,b,c,t.left),I=Xl(l.fixed-C,k,l.stretch,m),T=Hl(u.stretch-x,w,h,t.top),P=Xl(u.fixed-E,S,u.stretch,g),A=new r(p,d),L=new r(v,d),M=new r(v,T),R=new r(p,T),O=new r(f/s,y/s),D=new r(I/s,P/s),N=e*Math.PI/180;if(N){var F=Math.sin(N),z=Math.cos(N),B=[z,-F,F,z];A._matMult(B),L._matMult(B),R._matMult(B),M._matMult(B)}var V=i.stretch+i.fixed,U=o.stretch+o.fixed;return{tl:A,tr:L,bl:R,br:M,tex:{x:a.paddedRect.x+1+V,y:a.paddedRect.y+1+U,w:l.stretch+l.fixed-V,h:u.stretch+u.fixed-U},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:O,pixelOffsetBR:D,minFontScaleX:k/s/c,minFontScaleY:S/s/h,isSDF:n}};if(i&&(a.stretchX||a.stretchY))for(var P=Gl(p,y,m),A=Gl(f,v,g),L=0;L<P.length-1;L++)for(var M=P[L],R=P[L+1],O=0;O<A.length-1;O++)o.push(T(M,A[O],R,A[O+1]));else o.push(T({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:u+1}));return o}function ql(t,e,n){for(var i=0,r=0,o=t;r<o.length;r+=1){var a=o[r];i+=Math.max(e,Math.min(n,a[1]))-Math.max(e,Math.min(n,a[0]))}return i}function Gl(t,e,n){for(var i=[{fixed:-1,stretch:0}],r=0,o=t;r<o.length;r+=1){var a=o[r],s=a[0],l=a[1],u=i[i.length-1];i.push({fixed:s-u.stretch,stretch:u.stretch}),i.push({fixed:s-u.stretch,stretch:u.stretch+(l-s)})}return i.push({fixed:e+1,stretch:n}),i}function Hl(t,e,n,i){return t/e*n+i}function Xl(t,e,n,i){return t-e*n/i}var Zl=function(t,e,n,i,o,a,s,l,u,c){if(this.boxStartIndex=t.length,u){var h=a.top,p=a.bottom,f=a.collisionPadding;f&&(h-=f[1],p+=f[3]);var d=p-h;d>0&&(d=Math.max(10,d),this.circleDiameter=d)}else{var m=a.top*s-l,g=a.bottom*s+l,y=a.left*s-l,v=a.right*s+l,_=a.collisionPadding;if(_&&(y-=_[0]*s,m-=_[1]*s,v+=_[2]*s,g+=_[3]*s),c){var b=new r(y,m),x=new r(v,m),w=new r(y,g),C=new r(v,g),k=c*Math.PI/180;b._rotate(k),x._rotate(k),w._rotate(k),C._rotate(k),y=Math.min(b.x,x.x,w.x,C.x),v=Math.max(b.x,x.x,w.x,C.x),m=Math.min(b.y,x.y,w.y,C.y),g=Math.max(b.y,x.y,w.y,C.y)}t.emplaceBack(e.x,e.y,y,m,v,g,n,i,o)}this.boxEndIndex=t.length},Wl=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=Yl),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function Yl(t,e){return t<e?-1:t>e?1:0}function Kl(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);for(var i=1/0,o=1/0,a=-1/0,s=-1/0,l=t[0],u=0;u<l.length;u++){var c=l[u];(!u||c.x<i)&&(i=c.x),(!u||c.y<o)&&(o=c.y),(!u||c.x>a)&&(a=c.x),(!u||c.y>s)&&(s=c.y)}var h=Math.min(a-i,s-o),p=h/2,f=new Wl([],Jl);if(0===h)return new r(i,o);for(var d=i;d<a;d+=h)for(var m=o;m<s;m+=h)f.push(new Ql(d+p,m+p,p,t));for(var g=function(t){for(var e=0,n=0,i=0,r=t[0],o=0,a=r.length,s=a-1;o<a;s=o++){var l=r[o],u=r[s],c=l.x*u.y-u.x*l.y;n+=(l.x+u.x)*c,i+=(l.y+u.y)*c,e+=3*c}return new Ql(n/e,i/e,0,t)}(t),y=f.length;f.length;){var v=f.pop();(v.d>g.d||!g.d)&&(g=v,n&&console.log("found best %d after %d probes",Math.round(1e4*v.d)/1e4,y)),v.max-g.d<=e||(f.push(new Ql(v.p.x-(p=v.h/2),v.p.y-p,p,t)),f.push(new Ql(v.p.x+p,v.p.y-p,p,t)),f.push(new Ql(v.p.x-p,v.p.y+p,p,t)),f.push(new Ql(v.p.x+p,v.p.y+p,p,t)),y+=4)}return n&&(console.log("num probes: "+y),console.log("best distance: "+g.d)),g.p}function Jl(t,e){return e.max-t.max}function Ql(t,e,n,i){this.p=new r(t,e),this.h=n,this.d=function(t,e){for(var n=!1,i=1/0,r=0;r<e.length;r++)for(var o=e[r],a=0,s=o.length,l=s-1;a<s;l=a++){var u=o[a],c=o[l];u.y>t.y!=c.y>t.y&&t.x<(c.x-u.x)*(t.y-u.y)/(c.y-u.y)+u.x&&(n=!n),i=Math.min(i,Zo(t,u,c))}return(n?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}Wl.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},Wl.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},Wl.prototype.peek=function(){return this.data[0]},Wl.prototype._up=function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i},Wl.prototype._down=function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,r)>=0)break;e[t]=a,t=o}e[t]=r};var $l=Number.POSITIVE_INFINITY;function tu(t,e){return e[1]!==$l?function(t,e,n){var i=0,r=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":r=n-7;break;case"bottom-right":case"bottom-left":case"bottom":r=7-n}switch(t){case"top-right":case"bottom-right":case"right":i=-e;break;case"top-left":case"bottom-left":case"left":i=e}return[i,r]}(t,e[0],e[1]):function(t,e){var n=0,i=0;e<0&&(e=0);var r=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":i=r-7;break;case"bottom-right":case"bottom-left":i=7-r;break;case"bottom":i=7-e;break;case"top":i=e-7}switch(t){case"top-right":case"bottom-right":n=-r;break;case"top-left":case"bottom-left":n=r;break;case"left":n=e;break;case"right":n=-e}return[n,i]}(t,e[0])}function eu(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function nu(t,e,n,i,o,a,s,l,u,c,h,p,f,d,m){var g=function(t,e,n,i,o,a,s,l){for(var u=i.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,c=[],h=0,p=e.positionedLines;h<p.length;h+=1)for(var f=p[h],d=0,m=f.positionedGlyphs;d<m.length;d+=1){var g=m[d];if(g.rect){var y=g.rect||{},v=4,_=!0,b=1,x=0,w=(o||l)&&g.vertical,C=g.metrics.advance*g.scale/2;if(l&&e.verticalizable&&(x=f.lineOffset/2-(g.imageName?-(24-g.metrics.width*g.scale)/2:24*(g.scale-1))),g.imageName){var k=s[g.imageName];_=k.sdf,v=1/(b=k.pixelRatio)}var E=o?[g.x+C,g.y]:[0,0],S=o?[0,0]:[g.x+C+n[0],g.y+n[1]-x],I=[0,0];w&&(I=S,S=[0,0]);var T=(g.metrics.left-v)*g.scale-C+S[0],P=(-g.metrics.top-v)*g.scale+S[1],A=T+y.w*g.scale/b,L=P+y.h*g.scale/b,M=new r(T,P),R=new r(A,P),O=new r(T,L),D=new r(A,L);if(w){var N=new r(-C,C- -17),F=-Math.PI/2,z=12-C,B=new r(22-z,-(g.imageName?z:0)),V=new(Function.prototype.bind.apply(r,[null].concat(I)));M._rotateAround(F,N)._add(B)._add(V),R._rotateAround(F,N)._add(B)._add(V),O._rotateAround(F,N)._add(B)._add(V),D._rotateAround(F,N)._add(B)._add(V)}if(u){var U=Math.sin(u),j=Math.cos(u),q=[j,-U,U,j];M._matMult(q),R._matMult(q),O._matMult(q),D._matMult(q)}var G=new r(0,0),H=new r(0,0);c.push({tl:M,tr:R,bl:O,br:D,tex:y,writingMode:e.writingMode,glyphOffset:E,sectionIndex:g.sectionIndex,isSDF:_,pixelOffsetTL:G,pixelOffsetBR:H,minFontScaleX:0,minFontScaleY:0})}}return c}(0,n,l,o,a,s,i,t.allowVerticalPlacement),y=t.textSizeData,v=null;"source"===y.kind?(v=[128*o.layout.get("text-size").evaluate(s,{})])[0]>32640&&w(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===y.kind&&((v=[128*d.compositeTextSizes[0].evaluate(s,{},m),128*d.compositeTextSizes[1].evaluate(s,{},m)])[0]>32640||v[1]>32640)&&w(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,g,v,l,a,s,c,e,u.lineStartIndex,u.lineLength,f,m);for(var _=0,b=h;_<b.length;_+=1)p[b[_]]=t.text.placedSymbolArray.length-1;return 4*g.length}function iu(t){for(var e in t)return t[e];return null}function ru(t,e,n,i){var r=t.compareText;if(e in r){for(var o=r[e],a=o.length-1;a>=0;a--)if(i.dist(o[a])<n)return!0}else r[e]=[];return r[e].push(i),!1}var ou=gs.VectorTileFeature.types,au=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function su(t,e,n,i,r,o,a,s,l,u,c,h,p){var f=s?Math.min(32640,Math.round(s[0])):0,d=s?Math.min(32640,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*i),Math.round(32*r),o,a,(f<<1)+(l?1:0),d,16*u,16*c,256*h,256*p)}function lu(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function uu(t){for(var e=0,n=t.sections;e<n.length;e+=1)if(Wi(n[e].text))return!0;return!1}var cu=function(t){this.layoutVertexArray=new Ar,this.indexArray=new Fr,this.programConfigurations=t,this.segments=new ro,this.dynamicLayoutVertexArray=new Lr,this.opacityVertexArray=new Mr,this.placedSymbolArray=new Kr};cu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},cu.prototype.upload=function(t,e,n,i){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ns.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Fs.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,au,!0),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(t))},cu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Di("SymbolBuffers",cu);var hu=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new ro,this.collisionVertexArray=new Nr};hu.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,zs.members,!0)},hu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Di("CollisionBuffers",hu);var pu=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ia([]),this.placementViewportMatrix=ia([]);var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ll(this.zoom,e["text-size"]),this.iconSizeData=Ll(this.zoom,e["icon-size"]);var n=this.layers[0].layout,i=n.get("symbol-sort-key"),r=n.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==r&&void 0!==i.constantOr(1),this.sortFeaturesByY=("viewport-y"===r||"auto"===r&&!this.sortFeaturesByKey)&&(n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")),"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map((function(t){return gl[t]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=t.sourceID};pu.prototype.createArrays=function(){this.text=new cu(new Mo(this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new cu(new Mo(this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.glyphOffsetArray=new $r,this.lineVertexArray=new to,this.symbolInstances=new Qr},pu.prototype.calculateGlyphDependencies=function(t,e,n,i,r){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(n||i)&&r){var a=js[t.charAt(o)];a&&(e[a.charCodeAt(0)]=!0)}},pu.prototype.populate=function(t,e,n){var i=this.layers[0],r=i.layout,o=r.get("text-font"),a=r.get("text-field"),s=r.get("icon-image"),l=("constant"!==a.value.kind||a.value.value instanceof te&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),u="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,c=r.get("symbol-sort-key");if(this.features=[],l||u){for(var h=e.iconDependencies,p=e.glyphDependencies,f=e.availableImages,d=new rr(this.zoom),m=0,g=t;m<g.length;m+=1){var y=g[m],v=y.feature,_=y.id,b=y.index,x=y.sourceLayerIndex,w=i._featureFilter.needGeometry,C={type:v.type,id:_,properties:v.properties,geometry:w?Fo(v):[]};if(i._featureFilter.filter(d,C,n)){w||(C.geometry=Fo(v));var k=void 0;if(l){var E=i.getValueAndResolveTokens("text-field",C,n,f),S=te.factory(E);uu(S)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===er()||this.hasRTLText&&ir.isParsed())&&(k=Us(S,i,C))}var I=void 0;if(u){var T=i.getValueAndResolveTokens("icon-image",C,n,f);I=T instanceof ee?T:ee.fromString(T)}if(k||I){var P=this.sortFeaturesByKey?c.evaluate(C,{},n):void 0,A={id:_,text:k,icon:I,index:b,sourceLayerIndex:x,geometry:Fo(v),properties:v.properties,type:ou[v.type],sortKey:P};if(this.features.push(A),I&&(h[I.name]=!0),k){var L=o.evaluate(C,{},n).join(","),M="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(gl.vertical)>=0;for(var R=0,O=k.sections;R<O.length;R+=1){var D=O[R];if(D.image)h[D.image.name]=!0;else{var N=qi(k.toString()),F=D.fontStack||L,z=p[F]=p[F]||{};this.calculateGlyphDependencies(D.text,z,M,this.allowVerticalPlacement,N)}}}}}}"line"===r.get("symbol-placement")&&(this.features=function(t){var e={},n={},i=[],r=0;function o(e){i.push(t[e]),r++}function a(t,e,r){var o=n[t];return delete n[t],n[e]=o,i[o].geometry[0].pop(),i[o].geometry[0]=i[o].geometry[0].concat(r[0]),o}function s(t,n,r){var o=e[n];return delete e[n],e[t]=o,i[o].geometry[0].shift(),i[o].geometry[0]=r[0].concat(i[o].geometry[0]),o}function l(t,e,n){var i=n?e[0][e[0].length-1]:e[0][0];return t+":"+i.x+":"+i.y}for(var u=0;u<t.length;u++){var c=t[u],h=c.geometry,p=c.text?c.text.toString():null;if(p){var f=l(p,h),d=l(p,h,!0);if(f in n&&d in e&&n[f]!==e[d]){var m=s(f,d,h),g=a(f,d,i[m].geometry);delete e[f],delete n[d],n[l(p,i[g].geometry,!0)]=g,i[m].geometry=null}else f in n?a(f,d,h):d in e?s(f,d,h):(o(u),e[f]=r-1,n[d]=r-1)}else o(u)}return i.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}},pu.prototype.update=function(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))},pu.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},pu.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},pu.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},pu.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},pu.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},pu.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var i=t.dist(e[t.segment+1]),r=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:i},a<e.length-1&&(i+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:r},s>0&&(r+=e[s-1].dist(e[s]));for(var l=0;l<e.length;l++){var u=o[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},pu.prototype.addSymbols=function(t,e,n,i,r,o,a,s,l,u,c,h){for(var p=t.indexArray,f=t.layoutVertexArray,d=t.segments.prepareSegment(4*e.length,f,p,o.sortKey),m=this.glyphOffsetArray.length,g=d.vertexLength,y=this.allowVerticalPlacement&&a===gl.vertical?Math.PI/2:0,v=o.text&&o.text.sections,_=0;_<e.length;_++){var b=e[_],x=b.tl,w=b.tr,C=b.bl,k=b.br,E=b.tex,S=b.pixelOffsetTL,I=b.pixelOffsetBR,T=b.minFontScaleX,P=b.minFontScaleY,A=b.glyphOffset,L=b.isSDF,M=b.sectionIndex,R=d.vertexLength,O=A[1];su(f,s.x,s.y,x.x,O+x.y,E.x,E.y,n,L,S.x,S.y,T,P),su(f,s.x,s.y,w.x,O+w.y,E.x+E.w,E.y,n,L,I.x,S.y,T,P),su(f,s.x,s.y,C.x,O+C.y,E.x,E.y+E.h,n,L,S.x,I.y,T,P),su(f,s.x,s.y,k.x,O+k.y,E.x+E.w,E.y+E.h,n,L,I.x,I.y,T,P),lu(t.dynamicLayoutVertexArray,s,y),p.emplaceBack(R,R+1,R+2),p.emplaceBack(R+1,R+2,R+3),d.vertexLength+=4,d.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(A[0]),_!==e.length-1&&M===e[_+1].sectionIndex||t.programConfigurations.populatePaintArrays(f.length,o,o.index,{},h,v&&v[M])}t.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,g,l,u,s.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],a,0,!1,0,c)},pu.prototype._addCollisionDebugVertex=function(t,e,n,i,r,o){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,i,r,Math.round(o.x),Math.round(o.y))},pu.prototype.addCollisionDebugVertices=function(t,e,n,i,o,a,s){var l=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),u=l.vertexLength,c=o.layoutVertexArray,h=o.collisionVertexArray,p=s.anchorX,f=s.anchorY;this._addCollisionDebugVertex(c,h,a,p,f,new r(t,e)),this._addCollisionDebugVertex(c,h,a,p,f,new r(n,e)),this._addCollisionDebugVertex(c,h,a,p,f,new r(n,i)),this._addCollisionDebugVertex(c,h,a,p,f,new r(t,i)),l.vertexLength+=4;var d=o.indexArray;d.emplaceBack(u,u+1),d.emplaceBack(u+1,u+2),d.emplaceBack(u+2,u+3),d.emplaceBack(u+3,u),l.primitiveLength+=4},pu.prototype.addDebugCollisionBoxes=function(t,e,n,i){for(var r=t;r<e;r++){var o=this.collisionBoxArray.get(r);this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,i?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,n)}},pu.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new hu(Or,Bs.members,qr),this.iconCollisionBox=new hu(Or,Bs.members,qr);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},pu.prototype._deserializeCollisionBoxesForSymbol=function(t,e,n,i,r,o,a,s,l){for(var u={},c=e;c<n;c++){var h=t.get(c);u.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},u.textFeatureIndex=h.featureIndex;break}for(var p=i;p<r;p++){var f=t.get(p);u.verticalTextBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},u.verticalTextFeatureIndex=f.featureIndex;break}for(var d=o;d<a;d++){var m=t.get(d);u.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},u.iconFeatureIndex=m.featureIndex;break}for(var g=s;g<l;g++){var y=t.get(g);u.verticalIconBox={x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,anchorPointX:y.anchorPointX,anchorPointY:y.anchorPointY},u.verticalIconFeatureIndex=y.featureIndex;break}return u},pu.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}},pu.prototype.hasTextData=function(){return this.text.segments.get().length>0},pu.prototype.hasIconData=function(){return this.icon.segments.get().length>0},pu.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},pu.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},pu.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},pu.prototype.addIndicesForPlacedSymbol=function(t,e){for(var n=t.placedSymbolArray.get(e),i=n.vertexStartIndex+4*n.numGlyphs,r=n.vertexStartIndex;r<i;r+=4)t.indexArray.emplaceBack(r,r+1,r+2),t.indexArray.emplaceBack(r+1,r+2,r+3)},pu.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),n=Math.cos(t),i=[],r=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);i.push(0|Math.round(e*s.anchorX+n*s.anchorY)),r.push(s.featureIndex)}return o.sort((function(t,e){return i[t]-i[e]||r[e]-r[t]})),o},pu.prototype.addToSortKeyRanges=function(t,e){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},pu.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var n=0,i=this.symbolInstanceIndexes;n<i.length;n+=1){var r=this.symbolInstances.get(i[n]);this.featureSortOrder.push(r.featureIndex),[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((function(t,n,i){t>=0&&i.indexOf(t)===n&&e.addIndicesForPlacedSymbol(e.text,t)})),r.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,r.verticalPlacedTextSymbolIndex),r.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,r.placedIconSymbolIndex),r.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,r.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Di("SymbolBucket",pu,{omit:["layers","collisionBoxArray","features","compareText"]}),pu.MAX_GLYPHS=65535,pu.addDynamicAttributes=lu;var fu=new vr({"symbol-placement":new fr(St.layout_symbol["symbol-placement"]),"symbol-spacing":new fr(St.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new fr(St.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new dr(St.layout_symbol["symbol-sort-key"]),"symbol-z-order":new fr(St.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new fr(St.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new fr(St.layout_symbol["icon-ignore-placement"]),"icon-optional":new fr(St.layout_symbol["icon-optional"]),"icon-rotation-alignment":new fr(St.layout_symbol["icon-rotation-alignment"]),"icon-size":new dr(St.layout_symbol["icon-size"]),"icon-text-fit":new fr(St.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new fr(St.layout_symbol["icon-text-fit-padding"]),"icon-image":new dr(St.layout_symbol["icon-image"]),"icon-rotate":new dr(St.layout_symbol["icon-rotate"]),"icon-padding":new fr(St.layout_symbol["icon-padding"]),"icon-keep-upright":new fr(St.layout_symbol["icon-keep-upright"]),"icon-offset":new dr(St.layout_symbol["icon-offset"]),"icon-anchor":new dr(St.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new fr(St.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new fr(St.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new fr(St.layout_symbol["text-rotation-alignment"]),"text-field":new dr(St.layout_symbol["text-field"]),"text-font":new dr(St.layout_symbol["text-font"]),"text-size":new dr(St.layout_symbol["text-size"]),"text-max-width":new dr(St.layout_symbol["text-max-width"]),"text-line-height":new fr(St.layout_symbol["text-line-height"]),"text-letter-spacing":new dr(St.layout_symbol["text-letter-spacing"]),"text-justify":new dr(St.layout_symbol["text-justify"]),"text-radial-offset":new dr(St.layout_symbol["text-radial-offset"]),"text-variable-anchor":new fr(St.layout_symbol["text-variable-anchor"]),"text-anchor":new dr(St.layout_symbol["text-anchor"]),"text-max-angle":new fr(St.layout_symbol["text-max-angle"]),"text-writing-mode":new fr(St.layout_symbol["text-writing-mode"]),"text-rotate":new dr(St.layout_symbol["text-rotate"]),"text-padding":new fr(St.layout_symbol["text-padding"]),"text-keep-upright":new fr(St.layout_symbol["text-keep-upright"]),"text-transform":new dr(St.layout_symbol["text-transform"]),"text-offset":new dr(St.layout_symbol["text-offset"]),"text-allow-overlap":new fr(St.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new fr(St.layout_symbol["text-ignore-placement"]),"text-optional":new fr(St.layout_symbol["text-optional"])}),du={paint:new vr({"icon-opacity":new dr(St.paint_symbol["icon-opacity"]),"icon-color":new dr(St.paint_symbol["icon-color"]),"icon-halo-color":new dr(St.paint_symbol["icon-halo-color"]),"icon-halo-width":new dr(St.paint_symbol["icon-halo-width"]),"icon-halo-blur":new dr(St.paint_symbol["icon-halo-blur"]),"icon-translate":new fr(St.paint_symbol["icon-translate"]),"icon-translate-anchor":new fr(St.paint_symbol["icon-translate-anchor"]),"text-opacity":new dr(St.paint_symbol["text-opacity"]),"text-color":new dr(St.paint_symbol["text-color"],{runtimeType:zt,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new dr(St.paint_symbol["text-halo-color"]),"text-halo-width":new dr(St.paint_symbol["text-halo-width"]),"text-halo-blur":new dr(St.paint_symbol["text-halo-blur"]),"text-translate":new fr(St.paint_symbol["text-translate"]),"text-translate-anchor":new fr(St.paint_symbol["text-translate-anchor"])}),layout:fu},mu=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Ot,this.defaultValue=t};mu.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},mu.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},mu.prototype.outputDefined=function(){return!1},mu.prototype.serialize=function(){return null},Di("FormatSectionOverride",mu,{omit:["defaultValue"]});var gu=function(t){function e(e){t.call(this,e,du)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,n){if(t.prototype.recalculate.call(this,e,n),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var i=this.layout.get("text-writing-mode");if(i){for(var r=[],o=0,a=i;o<a.length;o+=1){var s=a[o];r.indexOf(s)<0&&r.push(s)}this.layout._values["text-writing-mode"]=r}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,n,i){var r=this.layout.get(t).evaluate(e,{},n,i),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||qn(o.value)||!r?r:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,n){return n in t?String(t[n]):""}))}(e.properties,r)},e.prototype.createBucket=function(t){return new pu(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,n=du.paint.overridableProperties;t<n.length;t+=1){var i=n[t];if(e.hasPaintOverride(this.layout,i)){var r,o=this.paint.get(i),a=new mu(o),s=new jn(a,o.property.specification);r="constant"===o.value.kind||"source"===o.value.kind?new Hn("source",s):new Xn("composite",s,o.value.zoomStops,o.value._interpolationType),this.paint._values[i]=new hr(o.property,r,o.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,n,i){return!(!this.layout||n.isDataDriven()||i.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var n=t.get("text-field"),i=du.paint.properties[e],r=!1,o=function(t){for(var e=0,n=t;e<n.length;e+=1)if(i.overrides&&i.overrides.hasOverride(n[e]))return void(r=!0)};if("constant"===n.value.kind&&n.value.value instanceof te)o(n.value.value.sections);else if("source"===n.value.kind){var a=n.value;a._styleExpression&&function t(e){r||(e instanceof ae&&re(e.value)===jt?o(e.value.sections):e instanceof ce?o(e.sections):e.eachChild(t))}(a._styleExpression.expression)}return r},e}(_r),yu={paint:new vr({"background-color":new fr(St.paint_background["background-color"]),"background-pattern":new gr(St.paint_background["background-pattern"]),"background-opacity":new fr(St.paint_background["background-opacity"])})},vu=function(t){function e(e){t.call(this,e,yu)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(_r),_u={paint:new vr({"raster-opacity":new fr(St.paint_raster["raster-opacity"]),"raster-hue-rotate":new fr(St.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new fr(St.paint_raster["raster-brightness-min"]),"raster-brightness-max":new fr(St.paint_raster["raster-brightness-max"]),"raster-saturation":new fr(St.paint_raster["raster-saturation"]),"raster-contrast":new fr(St.paint_raster["raster-contrast"]),"raster-resampling":new fr(St.paint_raster["raster-resampling"]),"raster-fade-duration":new fr(St.paint_raster["raster-fade-duration"])})},bu=function(t){function e(e){t.call(this,e,_u)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(_r),xu=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(_r),wu={circle:la,heatmap:va,hillshade:ba,fill:as,"fill-extrusion":Cs,line:Os,symbol:gu,background:vu,raster:bu},Cu=a.HTMLImageElement,ku=a.HTMLCanvasElement,Eu=a.HTMLVideoElement,Su=a.ImageData,Iu=a.ImageBitmap,Tu=function(t,e,n,i){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,i)};Tu.prototype.update=function(t,e,n){var i=t.width,r=t.height,o=!(this.size&&this.size[0]===i&&this.size[1]===r||n),a=this.context,s=a.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[i,r],t instanceof Cu||t instanceof ku||t instanceof Eu||t instanceof Su||Iu&&t instanceof Iu?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,i,r,0,this.format,s.UNSIGNED_BYTE,t.data);else{var l=n||{x:0,y:0},u=l.x,c=l.y;t instanceof Cu||t instanceof ku||t instanceof Eu||t instanceof Su||Iu&&t instanceof Iu?s.texSubImage2D(s.TEXTURE_2D,0,u,c,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,u,c,i,r,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Tu.prototype.bind=function(t,e,n){var i=this.context.gl;i.bindTexture(i.TEXTURE_2D,this.texture),n!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=i.LINEAR),t!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e),this.wrap=e)},Tu.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Tu.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Pu=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Pu.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))},Pu.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Au=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},g(["receive","process"],this),this.invoker=new Pu(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=E()?t:a};function Lu(t,e,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[t*i-2*Math.PI*6378137/2,e*i-2*Math.PI*6378137/2]}Au.prototype.send=function(t,e,n,i,r){var o=this;void 0===r&&(r=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[a]=n);var s=T(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!n,targetMapId:i,mustQueue:r,sourceMapId:this.mapId,data:Bi(e,s)},s),{cancel:function(){n&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:i,sourceMapId:o.mapId})}}},Au.prototype.receive=function(t){var e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[n];var i=this.cancelCallbacks[n];delete this.cancelCallbacks[n],i&&i()}else E()||e.mustQueue?(this.tasks[n]=e,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,e)},Au.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},Au.prototype.processTask=function(t,e){var n=this;if("<response>"===e.type){var i=this.callbacks[t];delete this.callbacks[t],i&&(e.error?i(Vi(e.error)):i(null,Vi(e.data)))}else{var r=!1,o=T(this.globalScope)?void 0:[],a=e.hasCallback?function(e,i){r=!0,delete n.cancelCallbacks[t],n.target.postMessage({id:t,type:"<response>",sourceMapId:n.mapId,error:e?Bi(e):null,data:Bi(i,o)},o)}:function(t){r=!0},s=null,l=Vi(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,l,a);else if(this.parent.getWorkerSource){var u=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,u[0],l.source)[u[1]](l,a)}else a(new Error("Could not find function "+e.type));!r&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},Au.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Mu=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Mu.prototype.setNorthEast=function(t){return this._ne=t instanceof Ru?new Ru(t.lng,t.lat):Ru.convert(t),this},Mu.prototype.setSouthWest=function(t){return this._sw=t instanceof Ru?new Ru(t.lng,t.lat):Ru.convert(t),this},Mu.prototype.extend=function(t){var e,n,i=this._sw,r=this._ne;if(t instanceof Ru)e=t,n=t;else{if(!(t instanceof Mu))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Mu.convert(t)):this.extend(Ru.convert(t)):this;if(n=t._ne,!(e=t._sw)||!n)return this}return i||r?(i.lng=Math.min(e.lng,i.lng),i.lat=Math.min(e.lat,i.lat),r.lng=Math.max(n.lng,r.lng),r.lat=Math.max(n.lat,r.lat)):(this._sw=new Ru(e.lng,e.lat),this._ne=new Ru(n.lng,n.lat)),this},Mu.prototype.getCenter=function(){return new Ru((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Mu.prototype.getSouthWest=function(){return this._sw},Mu.prototype.getNorthEast=function(){return this._ne},Mu.prototype.getNorthWest=function(){return new Ru(this.getWest(),this.getNorth())},Mu.prototype.getSouthEast=function(){return new Ru(this.getEast(),this.getSouth())},Mu.prototype.getWest=function(){return this._sw.lng},Mu.prototype.getSouth=function(){return this._sw.lat},Mu.prototype.getEast=function(){return this._ne.lng},Mu.prototype.getNorth=function(){return this._ne.lat},Mu.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Mu.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Mu.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Mu.prototype.contains=function(t){var e=Ru.convert(t),n=e.lng,i=e.lat,r=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&r},Mu.convert=function(t){return!t||t instanceof Mu?t:new Mu(t)};var Ru=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ru.prototype.wrap=function(){return new Ru(c(this.lng,-180,180),this.lat)},Ru.prototype.toArray=function(){return[this.lng,this.lat]},Ru.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ru.prototype.distanceTo=function(t){var e=Math.PI/180,n=this.lat*e,i=t.lat*e,r=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(r,1))},Ru.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new Mu(new Ru(this.lng-n,this.lat-e),new Ru(this.lng+n,this.lat+e))},Ru.convert=function(t){if(t instanceof Ru)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Ru(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Ru(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Ou=2*Math.PI*6371008.8;function Du(t){return Ou*Math.cos(t*Math.PI/180)}function Nu(t){return(180+t)/360}function Fu(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function zu(t,e){return t/Du(e)}function Bu(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var Vu=function(t,e,n){void 0===n&&(n=0),this.x=+t,this.y=+e,this.z=+n};Vu.fromLngLat=function(t,e){void 0===e&&(e=0);var n=Ru.convert(t);return new Vu(Nu(n.lng),Fu(n.lat),zu(e,n.lat))},Vu.prototype.toLngLat=function(){return new Ru(360*this.x-180,Bu(this.y))},Vu.prototype.toAltitude=function(){return this.z*Du(Bu(this.y))},Vu.prototype.meterInMercatorCoordinateUnits=function(){return 1/Ou*(t=Bu(this.y),1/Math.cos(t*Math.PI/180));var t};var Uu=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=Gu(0,t,t,e,n)};Uu.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Uu.prototype.url=function(t,e){var n,i,r,o,a,s=(i=this.y,r=this.z,o=Lu(256*(n=this.x),256*(i=Math.pow(2,r)-i-1),r),a=Lu(256*(n+1),256*(i+1),r),o[0]+","+o[1]+","+a[0]+","+a[1]),l=function(t,e,n){for(var i,r="",o=t;o>0;o--)r+=(e&(i=1<<o-1)?1:0)+(n&i?2:0);return r}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",s)},Uu.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new r(8192*(t.x*e-this.x),8192*(t.y*e-this.y))},Uu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var ju=function(t,e){this.wrap=t,this.canonical=e,this.key=Gu(t,e.z,e.z,e.x,e.y)},qu=function(t,e,n,i,r){this.overscaledZ=t,this.wrap=e,this.canonical=new Uu(n,+i,+r),this.key=Gu(e,t,n,i,r)};function Gu(t,e,n,i,r){(t*=2)<0&&(t=-1*t-1);var o=1<<n;return(o*o*t+o*r+i).toString(36)+n.toString(36)+e.toString(36)}qu.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},qu.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new qu(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new qu(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},qu.prototype.calculateScaledKey=function(t,e){var n=this.canonical.z-t;return t>this.canonical.z?Gu(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Gu(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)},qu.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},qu.prototype.children=function(t){if(this.overscaledZ>=t)return[new qu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,i=2*this.canonical.y;return[new qu(e,this.wrap,e,n,i),new qu(e,this.wrap,e,n+1,i),new qu(e,this.wrap,e,n,i+1),new qu(e,this.wrap,e,n+1,i+1)]},qu.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},qu.prototype.wrapped=function(){return new qu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},qu.prototype.unwrapTo=function(t){return new qu(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},qu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},qu.prototype.toUnwrapped=function(){return new ju(this.wrap,this.canonical)},qu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},qu.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Vu(t.x-this.wrap,t.y))},Di("CanonicalTileID",Uu),Di("OverscaledTileID",qu,{omit:["posMatrix"]});var Hu=function(t,e,n){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return w('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var i=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=n||"mapbox";for(var r=0;r<i;r++)this.data[this._idx(-1,r)]=this.data[this._idx(0,r)],this.data[this._idx(i,r)]=this.data[this._idx(i-1,r)],this.data[this._idx(r,-1)]=this.data[this._idx(r,0)],this.data[this._idx(r,i)]=this.data[this._idx(r,i-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(i,-1)]=this.data[this._idx(i-1,0)],this.data[this._idx(-1,i)]=this.data[this._idx(0,i-1)],this.data[this._idx(i,i)]=this.data[this._idx(i-1,i-1)]};Hu.prototype.get=function(t,e){var n=new Uint8Array(this.data.buffer),i=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[i],n[i+1],n[i+2])},Hu.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Hu.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Hu.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},Hu.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},Hu.prototype.getPixels=function(){return new ma({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Hu.prototype.backfillBorder=function(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var i=e*this.dim,r=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:i=r-1;break;case 1:r=i+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,l=-n*this.dim,u=o;u<a;u++)for(var c=i;c<r;c++)this.data[this._idx(c,u)]=t.data[this._idx(c+s,u+l)]},Di("DEMData",Hu);var Xu=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};Xu.prototype.encode=function(t){return this._stringToNumber[t]},Xu.prototype.decode=function(t){return this._numberToString[t]};var Zu=function(t,e,n,i,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=i,this.properties=t.properties,this.id=r},Wu={geometry:{configurable:!0}};Wu.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Wu.geometry.set=function(t){this._geometry=t},Zu.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Zu.prototype,Wu);var Yu=function(){this.state={},this.stateChanges={},this.deletedStates={}};Yu.prototype.updateState=function(t,e,n){var i=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][i]=this.stateChanges[t][i]||{},h(this.stateChanges[t][i],n),null===this.deletedStates[t])for(var r in this.deletedStates[t]={},this.state[t])r!==i&&(this.deletedStates[t][r]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][i])for(var o in this.deletedStates[t][i]={},this.state[t][i])n[o]||(this.deletedStates[t][i][o]=null);else for(var a in n)this.deletedStates[t]&&this.deletedStates[t][i]&&null===this.deletedStates[t][i][a]&&delete this.deletedStates[t][i][a]},Yu.prototype.removeFeatureState=function(t,e,n){if(null!==this.deletedStates[t]){var i=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][i]&&(this.deletedStates[t][i]=this.deletedStates[t][i]||{},this.deletedStates[t][i][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][i])for(n in this.deletedStates[t][i]={},this.stateChanges[t][i])this.deletedStates[t][i][n]=null;else this.deletedStates[t][i]=null;else this.deletedStates[t]=null}},Yu.prototype.getState=function(t,e){var n=String(e),i=h({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var r=this.deletedStates[t][e];if(null===r)return{};for(var o in r)delete i[o]}return i},Yu.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},Yu.prototype.coalesceChanges=function(t,e){var n={};for(var i in this.stateChanges){this.state[i]=this.state[i]||{};var r={};for(var o in this.stateChanges[i])this.state[i][o]||(this.state[i][o]={}),h(this.state[i][o],this.stateChanges[i][o]),r[o]=this.state[i][o];n[i]=r}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var l in this.state[a])s[l]={},this.state[a][l]={};else for(var u in this.deletedStates[a]){if(null===this.deletedStates[a][u])this.state[a][u]={};else for(var c=0,p=Object.keys(this.deletedStates[a][u]);c<p.length;c+=1)delete this.state[a][u][p[c]];s[u]=this.state[a][u]}n[a]=n[a]||{},h(n[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var f in t)t[f].setFeatureState(n,e)};var Ku=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Ai(8192,16,0),this.grid3D=new Ai(8192,16,0),this.featureIndexArray=new no,this.promoteId=e};function Ju(t,e,n,i,r){return v(t,(function(t,o){var a=e instanceof pr?e.get(o):null;return a&&a.evaluate?a.evaluate(n,i,r):a}))}function Qu(t){for(var e=1/0,n=1/0,i=-1/0,r=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),n=Math.min(n,s.y),i=Math.max(i,s.x),r=Math.max(r,s.y)}return{minX:e,minY:n,maxX:i,maxY:r}}function $u(t,e){return e-t}Ku.prototype.insert=function(t,e,n,i,r,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,r);for(var s=o?this.grid3D:this.grid,l=0;l<e.length;l++){for(var u=e[l],c=[1/0,1/0,-1/0,-1/0],h=0;h<u.length;h++){var p=u[h];c[0]=Math.min(c[0],p.x),c[1]=Math.min(c[1],p.y),c[2]=Math.max(c[2],p.x),c[3]=Math.max(c[3],p.y)}c[0]<8192&&c[1]<8192&&c[2]>=0&&c[3]>=0&&s.insert(a,c[0],c[1],c[2],c[3])}},Ku.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new gs.VectorTile(new Hs(this.rawTileData)).layers,this.sourceLayerCoder=new Xu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ku.prototype.query=function(t,e,n,i){var o=this;this.loadVTLayers();for(var a=t.params||{},s=8192/t.tileSize/t.scale,l=ii(a.filter),u=t.queryGeometry,c=t.queryPadding*s,h=Qu(u),p=this.grid.query(h.minX-c,h.minY-c,h.maxX+c,h.maxY+c),f=Qu(t.cameraQueryGeometry),d=0,m=this.grid3D.query(f.minX-c,f.minY-c,f.maxX+c,f.maxY+c,(function(e,n,i,o){return function(t,e,n,i,o){for(var a=0,s=t;a<s.length;a+=1){var l=s[a];if(e<=l.x&&n<=l.y&&i>=l.x&&o>=l.y)return!0}var u=[new r(e,n),new r(e,o),new r(i,o),new r(i,n)];if(t.length>2)for(var c=0,h=u;c<h.length;c+=1)if(Yo(t,h[c]))return!0;for(var p=0;p<t.length-1;p++)if(Ko(t[p],t[p+1],u))return!0;return!1}(t.cameraQueryGeometry,e-c,n-c,i+c,o+c)}));d<m.length;d+=1)p.push(m[d]);p.sort($u);for(var g,y={},v=function(r){var c=p[r];if(c!==g){g=c;var h=o.featureIndexArray.get(c),f=null;o.loadMatchingFeature(y,h.bucketIndex,h.sourceLayerIndex,h.featureIndex,l,a.layers,a.availableImages,e,n,i,(function(e,n,i){return f||(f=Fo(e)),n.queryIntersectsFeature(u,e,i,f,o.z,t.transform,s,t.pixelPosMatrix)}))}},_=0;_<p.length;_++)v(_);return y},Ku.prototype.loadMatchingFeature=function(t,e,n,i,r,o,a,s,l,u,c){var h=this.bucketLayerIDs[e];if(!o||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,h)){var p=this.sourceLayerCoder.decode(n),f=this.vtLayers[p].feature(i);if(r.filter(new rr(this.tileID.overscaledZ),f))for(var d=this.getId(f,p),m=0;m<h.length;m++){var g=h[m];if(!(o&&o.indexOf(g)<0)){var y=s[g];if(y){var v={};void 0!==d&&u&&(v=u.getState(y.sourceLayer||"_geojsonTileLayer",d));var _=l[g];_.paint=Ju(_.paint,y.paint,f,v,a),_.layout=Ju(_.layout,y.layout,f,v,a);var b=!c||c(f,y,v);if(b){var x=new Zu(f,this.z,this.x,this.y,d);x.layer=_;var w=t[g];void 0===w&&(w=t[g]=[]),w.push({featureIndex:i,feature:x,intersectionZ:b})}}}}}},Ku.prototype.lookupSymbolFeatures=function(t,e,n,i,r,o,a,s){var l={};this.loadVTLayers();for(var u=ii(r),c=0,h=t;c<h.length;c+=1)this.loadMatchingFeature(l,n,i,h[c],u,o,a,s,e);return l},Ku.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var i=0,r=n[e];i<r.length;i+=1)if(t===r[i])return!0;return!1},Ku.prototype.getId=function(t,e){var n=t.id;return this.promoteId&&"boolean"==typeof(n=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(n=Number(n)),n},Di("FeatureIndex",Ku,{omit:["rawTileData","sourceLayerCoder"]});var tc=function(t,e){this.tileID=t,this.uid=f(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};tc.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<F.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},tc.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},tc.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var i in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var i=function(){var t=o[r],i=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==i.length){t.layers=i,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return i.filter((function(e){return e.id===t}))[0]})));for(var a=0,s=i;a<s.length;a+=1)n[s[a].id]=t}},r=0,o=t;r<o.length;r+=1)i();return n}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var r=this.buckets[i];if(r instanceof pu){if(this.hasSymbolBuckets=!0,!n)break;r.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof pu&&a.hasRTLText){this.hasRTLText=!0,ir.isLoading()||ir.isLoaded()||"deferred"!==er()||nr();break}}for(var s in this.queryPadding=0,this.buckets){var l=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(l))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new Wr},tc.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},tc.prototype.getBucket=function(t){return this.buckets[t.id]},tc.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var i=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Tu(t,this.imageAtlas.image,i.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Tu(t,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null)},tc.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},tc.prototype.queryRenderedFeatures=function(t,e,n,i,r,o,a,s,l,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:i,cameraQueryGeometry:r,scale:o,tileSize:this.tileSize,pixelPosMatrix:u,transform:s,params:a,queryPadding:this.queryPadding*l},t,e,n):{}},tc.prototype.querySourceFeatures=function(t,e){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var i=n.loadVTLayers(),r=e?e.sourceLayer:"",o=i._geojsonTileLayer||i[r];if(o)for(var a=ii(e&&e.filter),s=this.tileID.canonical,l=s.z,u=s.x,c=s.y,h={z:l,x:u,y:c},p=0;p<o.length;p++){var f=o.feature(p);if(a.filter(new rr(this.tileID.overscaledZ),f)){var d=n.getId(f,r),m=new Zu(f,l,u,c,d);m.tile=h,t.push(m)}}}},tc.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},tc.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},tc.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=S(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var i=Date.now(),r=!1;if(this.expirationTime>i)r=!1;else if(e)if(this.expirationTime<e)r=!0;else{var o=this.expirationTime-e;o?this.expirationTime=i+Math.max(o,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},tc.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},tc.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var i in this.buckets)if(e.style.hasLayer(i)){var r=this.buckets[i],o=r.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=t[o];if(a&&s&&0!==Object.keys(s).length){r.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});var l=e&&e.style&&e.style.getLayer(i);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(r)))}}}},tc.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},tc.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<F.now()},tc.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},tc.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=F.now()+t},tc.prototype.setDependencies=function(t,e){for(var n={},i=0,r=e;i<r.length;i+=1)n[r[i]]=!0;this.dependencies[t]=n},tc.prototype.hasDependency=function(t,e){for(var n=0,i=t;n<i.length;n+=1){var r=this.dependencies[i[n]];if(r)for(var o=0,a=e;o<a.length;o+=1)if(r[a[o]])return!0}return!1};var ec=a.performance,nc=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},ec.mark(this._marks.start)};nc.prototype.finish=function(){ec.mark(this._marks.end);var t=ec.getEntriesByName(this._marks.measure);return 0===t.length&&(ec.measure(this._marks.measure,this._marks.start,this._marks.end),t=ec.getEntriesByName(this._marks.measure),ec.clearMarks(this._marks.start),ec.clearMarks(this._marks.end),ec.clearMeasures(this._marks.measure)),t},t.Actor=Au,t.AlphaImage=da,t.CanonicalTileID=Uu,t.CollisionBoxArray=Wr,t.Color=Jt,t.DEMData=Hu,t.DataConstantProperty=fr,t.DictionaryCoder=Xu,t.EXTENT=8192,t.ErrorEvent=kt,t.EvaluationParameters=rr,t.Event=Ct,t.Evented=Et,t.FeatureIndex=Ku,t.FillBucket=is,t.FillExtrusionBucket=bs,t.ImageAtlas=ml,t.ImagePosition=fl,t.LineBucket=As,t.LngLat=Ru,t.LngLatBounds=Mu,t.MercatorCoordinate=Vu,t.ONE_EM=24,t.OverscaledTileID=qu,t.Point=r,t.Point$1=r,t.Properties=vr,t.Protobuf=Hs,t.RGBAImage=ma,t.RequestManager=G,t.RequestPerformance=nc,t.ResourceType=ft,t.SegmentVector=ro,t.SourceFeatureState=Yu,t.StructArrayLayout1ui2=Gr,t.StructArrayLayout2f1f2i16=Dr,t.StructArrayLayout2i4=Er,t.StructArrayLayout3ui6=Fr,t.StructArrayLayout4i8=Sr,t.SymbolBucket=pu,t.Texture=Tu,t.Tile=tc,t.Transitionable=sr,t.Uniform1f=vo,t.Uniform1i=yo,t.Uniform2f=_o,t.Uniform3f=bo,t.Uniform4f=xo,t.UniformColor=wo,t.UniformMatrix4f=ko,t.UnwrappedTileID=ju,t.ValidationError=It,t.WritingMode=gl,t.ZoomHistory=Ui,t.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},t.addDynamicAttributes=lu,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var i=t.length,r=new Array(t.length),o=null;t.forEach((function(t,a){e(t,(function(t,e){t&&(o=t),r[a]=e,0==--i&&n(o,r)}))}))},t.bezier=s,t.bindAll=g,t.browser=F,t.cacheEntryPossiblyAdded=function(t){++ht>st&&(t.getActor().send("enforceCacheSizeLimit",at),ht=0)},t.clamp=u,t.clearTileCache=function(t){var e=a.caches.delete("mapbox-tiles");t&&e.catch(t).then((function(){return t()}))},t.clipLine=Ul,t.clone=function(t){var e=new na(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=b,t.clone$2=function(t){var e=new na(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.collisionCircleLayout=Vs,t.config=z,t.create=function(){var t=new na(16);return na!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new na(9);return na!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new na(4);return na!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Gn,t.createLayout=Cr,t.createStyleLayer=function(t){return"custom"===t.type?new xu(t):new wu[t.type](t)},t.cross=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],l=n[2];return t[0]=r*l-o*s,t[1]=o*a-i*l,t[2]=i*s-r*a,t},t.deepEqual=function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(!t(e[i],n[i]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var r in e)if(!t(e[r],n[r]))return!1;return!0}return e===n},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=l,t.emitValidationErrors=Pi,t.endsWith=y,t.enforceCacheSizeLimit=function(t){lt(),$&&$.then((function(e){e.keys().then((function(n){for(var i=0;i<n.length-t;i++)e.delete(n[i])}))}))},t.evaluateSizeForFeature=Ml,t.evaluateSizeForZoom=Rl,t.evaluateVariableOffset=tu,t.evented=tr,t.extend=h,t.featureFilter=ii,t.filterObject=_,t.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=Il,t.getAnchorJustification=eu,t.getArrayBuffer=_t,t.getImage=function t(e,n){if(B.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),mt>=z.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:n,cancelled:!1,cancel:function(){this.cancelled=!0}};return dt.push(i),i}mt++;var r=!1,o=function(){if(!r)for(r=!0,mt--;dt.length&&mt<z.MAX_PARALLEL_IMAGE_REQUESTS;){var e=dt.shift();e.cancelled||(e.cancel=t(e.requestParameters,e.callback).cancel)}},s=_t(e,(function(t,e,i,r){o(),t?n(t):e&&(pt()?function(t,e){var n=new a.Blob([new Uint8Array(t)],{type:"image/png"});a.createImageBitmap(n).then((function(t){e(null,t)})).catch((function(t){e(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(e,n):function(t,e,n,i){var r=new a.Image,o=a.URL;r.onload=function(){e(null,r),o.revokeObjectURL(r.src)},r.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var s=new a.Blob([new Uint8Array(t)],{type:"image/png"});r.cacheControl=n,r.expires=i,r.src=t.byteLength?o.createObjectURL(s):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(e,n,i,r))}));return{cancel:function(){s.cancel(),o()}}},t.getJSON=function(t,e){return vt(h(t,{type:"json"}),e)},t.getRTLTextPluginStatus=er,t.getReferrer=yt,t.getVideo=function(t,e){var n,i,r=a.document.createElement("video");r.muted=!0,r.onloadstart=function(){e(null,r)};for(var o=0;o<t.length;o++){var s=a.document.createElement("source");n=t[o],i=void 0,(i=a.document.createElement("a")).href=n,(i.protocol!==a.document.location.protocol||i.host!==a.document.location.host)&&(r.crossOrigin="Anonymous"),s.src=t[o],r.appendChild(s)}return{cancel:function(){}}},t.identity=ia,t.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],f=e[11],d=e[12],m=e[13],g=e[14],y=e[15],v=n*s-i*a,_=n*l-r*a,b=n*u-o*a,x=i*l-r*s,w=i*u-o*s,C=r*u-o*l,k=c*m-h*d,E=c*g-p*d,S=c*y-f*d,I=h*g-p*m,T=h*y-f*m,P=p*y-f*g,A=v*P-_*T+b*I+x*S-w*E+C*k;return A?(t[0]=(s*P-l*T+u*I)*(A=1/A),t[1]=(r*T-i*P-o*I)*A,t[2]=(m*C-g*w+y*x)*A,t[3]=(p*w-h*C-f*x)*A,t[4]=(l*S-a*P-u*E)*A,t[5]=(n*P-r*S+o*E)*A,t[6]=(g*b-d*C-y*_)*A,t[7]=(c*C-p*b+f*_)*A,t[8]=(a*T-s*S+u*k)*A,t[9]=(i*S-n*T-o*k)*A,t[10]=(d*w-m*b+y*v)*A,t[11]=(h*b-c*w-f*v)*A,t[12]=(s*E-a*I-l*k)*A,t[13]=(n*I-i*E+r*k)*A,t[14]=(m*_-d*x-g*v)*A,t[15]=(c*x-h*_+p*v)*A,t):null},t.isChar=ji,t.isMapboxURL=H,t.keysDifference=function(t,e){var n=[];for(var i in t)i in e||n.push(i);return n},t.makeRequest=vt,t.mapObject=v,t.mercatorXfromLng=Nu,t.mercatorYfromLat=Fu,t.mercatorZfromAltitude=zu,t.mul=aa,t.multiply=ra,t.mvt=gs,t.normalize=function(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},t.number=Ue,t.offscreenCanvasSupported=pt,t.ortho=function(t,e,n,i,r,o,a){var s=1/(e-n),l=1/(i-r),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*l,t[14]=(a+o)*u,t[15]=1,t},t.parseGlyphPBF=function(t){return new Hs(t).readFields(ul,[])},t.pbf=Hs,t.performSymbolLayout=function(t,e,n,i,r,o,a){t.createArrays(),t.tilePixelRatio=8192/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,l=t.layers[0]._unevaluatedLayout._values,u={};if("composite"===t.textSizeData.kind){var c=t.textSizeData,h=c.maxZoom;u.compositeTextSizes=[l["text-size"].possiblyEvaluate(new rr(c.minZoom),a),l["text-size"].possiblyEvaluate(new rr(h),a)]}if("composite"===t.iconSizeData.kind){var p=t.iconSizeData,f=p.maxZoom;u.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new rr(p.minZoom),a),l["icon-size"].possiblyEvaluate(new rr(f),a)]}u.layoutTextSize=l["text-size"].possiblyEvaluate(new rr(t.zoom+1),a),u.layoutIconSize=l["icon-size"].possiblyEvaluate(new rr(t.zoom+1),a),u.textMaxSize=l["text-size"].possiblyEvaluate(new rr(18));for(var d=24*s.get("text-line-height"),m="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),g=s.get("text-keep-upright"),y=s.get("text-size"),v=function(){var o=b[_],l=s.get("text-font").evaluate(o,{},a).join(","),c=y.evaluate(o,{},a),h=u.layoutTextSize.evaluate(o,{},a),p=u.layoutIconSize.evaluate(o,{},a),f={horizontal:{},vertical:void 0},v=o.text,x=[0,0];if(v){var C=v.toString(),k=24*s.get("text-letter-spacing").evaluate(o,{},a),E=function(t){for(var e=0,n=t;e<n.length;e+=1)if(i=n[e].charCodeAt(0),ji.Arabic(i)||ji["Arabic Supplement"](i)||ji["Arabic Extended-A"](i)||ji["Arabic Presentation Forms-A"](i)||ji["Arabic Presentation Forms-B"](i))return!1;var i;return!0}(C)?k:0,S=s.get("text-anchor").evaluate(o,{},a),I=s.get("text-variable-anchor");if(!I){var T=s.get("text-radial-offset").evaluate(o,{},a);x=T?tu(S,[24*T,$l]):s.get("text-offset").evaluate(o,{},a).map((function(t){return 24*t}))}var P=m?"center":s.get("text-justify").evaluate(o,{},a),A=s.get("symbol-placement"),L="point"===A?24*s.get("text-max-width").evaluate(o,{},a):0,M=function(){t.allowVerticalPlacement&&qi(C)&&(f.vertical=_l(v,e,n,r,l,L,d,S,"left",E,x,gl.vertical,!0,A,h,c))};if(!m&&I){for(var R="auto"===P?I.map((function(t){return eu(t)})):[P],O=!1,D=0;D<R.length;D++){var N=R[D];if(!f.horizontal[N])if(O)f.horizontal[N]=f.horizontal[0];else{var F=_l(v,e,n,r,l,L,d,"center",N,E,x,gl.horizontal,!1,A,h,c);F&&(f.horizontal[N]=F,O=1===F.positionedLines.length)}}M()}else{"auto"===P&&(P=eu(S));var z=_l(v,e,n,r,l,L,d,S,P,E,x,gl.horizontal,!1,A,h,c);z&&(f.horizontal[P]=z),M(),qi(C)&&m&&g&&(f.vertical=_l(v,e,n,r,l,L,d,S,P,E,x,gl.vertical,!1,A,h,c))}}var B=void 0,V=!1;if(o.icon&&o.icon.name){var U=i[o.icon.name];U&&(B=function(t,e,n){var i=Il(n),r=e[0]-t.displaySize[0]*i.horizontalAlign,o=e[1]-t.displaySize[1]*i.verticalAlign;return{image:t,top:o,bottom:o+t.displaySize[1],left:r,right:r+t.displaySize[0]}}(r[o.icon.name],s.get("icon-offset").evaluate(o,{},a),s.get("icon-anchor").evaluate(o,{},a)),V=U.sdf,void 0===t.sdfIcons?t.sdfIcons=U.sdf:t.sdfIcons!==U.sdf&&w("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(U.pixelRatio!==t.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}var j=iu(f.horizontal)||f.vertical;t.iconsInText=!!j&&j.iconsInText,(j||B)&&function(t,e,n,i,r,o,a,s,l,u,c){var h=o.textMaxSize.evaluate(e,{});void 0===h&&(h=a);var p,f=t.layers[0].layout,d=f.get("icon-offset").evaluate(e,{},c),m=iu(n.horizontal),g=a/24,y=t.tilePixelRatio*g,v=t.tilePixelRatio*h/24,_=t.tilePixelRatio*s,b=t.tilePixelRatio*f.get("symbol-spacing"),x=f.get("text-padding")*t.tilePixelRatio,C=f.get("icon-padding")*t.tilePixelRatio,k=f.get("text-max-angle")/180*Math.PI,E="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),S="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),I=f.get("symbol-placement"),T=b/2,P=f.get("icon-text-fit");i&&"none"!==P&&(t.allowVerticalPlacement&&n.vertical&&(p=Pl(i,n.vertical,P,f.get("icon-text-fit-padding"),d,g)),m&&(i=Pl(i,m,P,f.get("icon-text-fit-padding"),d,g)));var A=function(s,h){h.x<0||h.x>=8192||h.y<0||h.y>=8192||function(t,e,n,i,r,o,a,s,l,u,c,h,p,f,d,m,g,y,v,_,b,x,C,k,E){var S,I,T,P,A,L=t.addToLineVertexArray(e,n),M=0,R=0,O=0,D=0,N=-1,F=-1,z={},B=uo(""),V=0,U=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(V=(S=s.layout.get("text-offset").evaluate(b,{},k).map((function(t){return 24*t})))[0],U=S[1]):(V=24*s.layout.get("text-radial-offset").evaluate(b,{},k),U=$l),t.allowVerticalPlacement&&i.vertical){var j=s.layout.get("text-rotate").evaluate(b,{},k)+90;P=new Zl(l,e,u,c,h,i.vertical,p,f,d,j),a&&(A=new Zl(l,e,u,c,h,a,g,y,d,j))}if(r){var q=s.layout.get("icon-rotate").evaluate(b,{}),G="none"!==s.layout.get("icon-text-fit"),H=jl(r,q,C,G),X=a?jl(a,q,C,G):void 0;T=new Zl(l,e,u,c,h,r,g,y,!1,q),M=4*H.length;var Z=t.iconSizeData,W=null;"source"===Z.kind?(W=[128*s.layout.get("icon-size").evaluate(b,{})])[0]>32640&&w(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===Z.kind&&((W=[128*x.compositeIconSizes[0].evaluate(b,{},k),128*x.compositeIconSizes[1].evaluate(b,{},k)])[0]>32640||W[1]>32640)&&w(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),t.addSymbols(t.icon,H,W,_,v,b,!1,e,L.lineStartIndex,L.lineLength,-1,k),N=t.icon.placedSymbolArray.length-1,X&&(R=4*X.length,t.addSymbols(t.icon,X,W,_,v,b,gl.vertical,e,L.lineStartIndex,L.lineLength,-1,k),F=t.icon.placedSymbolArray.length-1)}for(var Y in i.horizontal){var K=i.horizontal[Y];if(!I){B=uo(K.text);var J=s.layout.get("text-rotate").evaluate(b,{},k);I=new Zl(l,e,u,c,h,K,p,f,d,J)}var Q=1===K.positionedLines.length;if(O+=nu(t,e,K,o,s,d,b,m,L,i.vertical?gl.horizontal:gl.horizontalOnly,Q?Object.keys(i.horizontal):[Y],z,N,x,k),Q)break}i.vertical&&(D+=nu(t,e,i.vertical,o,s,d,b,m,L,gl.vertical,["vertical"],z,F,x,k));var $=I?I.boxStartIndex:t.collisionBoxArray.length,tt=I?I.boxEndIndex:t.collisionBoxArray.length,et=P?P.boxStartIndex:t.collisionBoxArray.length,nt=P?P.boxEndIndex:t.collisionBoxArray.length,it=T?T.boxStartIndex:t.collisionBoxArray.length,rt=T?T.boxEndIndex:t.collisionBoxArray.length,ot=A?A.boxStartIndex:t.collisionBoxArray.length,at=A?A.boxEndIndex:t.collisionBoxArray.length,st=-1,lt=function(t,e){return t&&t.circleDiameter?Math.max(t.circleDiameter,e):e};st=lt(I,st),st=lt(P,st),st=lt(T,st);var ut=(st=lt(A,st))>-1?1:0;ut&&(st*=E/24),t.glyphOffsetArray.length>=pu.MAX_GLYPHS&&w("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,z.right>=0?z.right:-1,z.center>=0?z.center:-1,z.left>=0?z.left:-1,z.vertical||-1,N,F,B,$,tt,et,nt,it,rt,ot,at,u,O,D,M,R,ut,0,p,V,U,st)}(t,h,s,n,i,r,p,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,y,x,E,l,_,C,S,d,e,o,u,c,a)};if("line"===I)for(var L=0,M=Ul(e.geometry,0,0,8192,8192);L<M.length;L+=1)for(var R=M[L],O=0,D=Vl(R,b,k,n.vertical||m,i,24,v,t.overscaling,8192);O<D.length;O+=1){var N=D[O];m&&ru(t,m.text,T,N)||A(R,N)}else if("line-center"===I)for(var F=0,z=e.geometry;F<z.length;F+=1){var B=z[F];if(B.length>1){var V=Bl(B,k,n.vertical||m,i,24,v);V&&A(B,V)}}else if("Polygon"===e.type)for(var U=0,j=$a(e.geometry,0);U<j.length;U+=1){var q=j[U],G=Kl(q,16);A(q[0],new Al(G.x,G.y,0))}else if("LineString"===e.type)for(var H=0,X=e.geometry;H<X.length;H+=1){var Z=X[H];A(Z,new Al(Z[0].x,Z[0].y,0))}else if("Point"===e.type)for(var W=0,Y=e.geometry;W<Y.length;W+=1)for(var K=0,J=Y[W];K<J.length;K+=1){var Q=J[K];A([Q],new Al(Q.x,Q.y,0))}}(t,o,f,B,i,u,h,p,x,V,a)},_=0,b=t.features;_<b.length;_+=1)v();o&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,n,i,r){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+i)*(o=1/(i-r)),t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i),t},t.pick=function(t,e){for(var n={},i=0;i<e.length;i++){var r=e[i];r in t&&(n[r]=t[r])}return n},t.plugin=ir,t.polygonIntersectsPolygon=Vo,t.postMapLoadEvent=ot,t.postTurnstileEvent=it,t.potpack=pl,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Di,t.registerForPluginStateChange=function(t){return t({pluginStatus:Ki,pluginURL:Ji}),tr.on("pluginStateChange",t),t},t.rotate=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l+o*s,t[1]=r*l+a*s,t[2]=i*-s+o*l,t[3]=r*-s+a*l,t},t.rotateX=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+u*i,t[5]=a*r+c*i,t[6]=s*r+h*i,t[7]=l*r+p*i,t[8]=u*r-o*i,t[9]=c*r-a*i,t[10]=h*r-s*i,t[11]=p*r-l*i,t},t.rotateZ=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+u*i,t[1]=a*r+c*i,t[2]=s*r+h*i,t[3]=l*r+p*i,t[4]=u*r-o*i,t[5]=c*r-a*i,t[6]=h*r-s*i,t[7]=p*r-l*i,t},t.scale=function(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},t.scale$2=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},t.setCacheLimits=function(t,e){at=t,st=e},t.setRTLTextPlugin=function(t,e,n){if(void 0===n&&(n=!1),"deferred"===Ki||"loading"===Ki||"loaded"===Ki)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ji=F.resolveURL(t),Ki="deferred",Yi=e,$i(),n||nr()},t.sphericalToCartesian=function(t){var e=t[0],n=t[1],i=t[2];return n+=90,n*=Math.PI/180,i*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(i),y:e*Math.sin(n)*Math.sin(i),z:e*Math.cos(i)}},t.sqrLen=function(t){var e=t[0],n=t[1];return e*e+n*n},t.styleSpec=St,t.sub=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},t.symbolSize=Ol,t.transformMat3=function(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t},t.transformMat4=sa,t.translate=function(t,e,n){var i,r,o,a,s,l,u,c,h,p,f,d,m=n[0],g=n[1],y=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],t[0]=i=e[0],t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=p,t[10]=f,t[11]=d,t[12]=i*m+s*g+h*y+e[12],t[13]=r*m+l*g+p*y+e[13],t[14]=o*m+u*g+f*y+e[14],t[15]=a*m+c*g+d*y+e[15]),t},t.triggerPluginCompletionEvent=Qi,t.uniqueId=f,t.validateCustomStyleLayer=function(t){var e=[],n=t.id;return void 0===n&&e.push({message:"layers."+n+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+n+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=Si,t.validateStyle=Ei,t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.vectorTile=gs,t.version="1.11.0",t.warnOnce=w,t.webpSupported=B,t.window=a,t.wrap=c})),i(0,(function(t){function e(t){var n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var i="[",r=0,o=t;r<o.length;r+=1)i+=e(o[r])+",";return i+"]"}for(var a=Object.keys(t).sort(),s="{",l=0;l<a.length;l++)s+=JSON.stringify(a[l])+":"+e(t[a[l]])+",";return s+"}"}function n(n){for(var i="",r=0,o=t.refProperties;r<o.length;r+=1)i+="/"+e(n[o[r]]);return i}var i=function(t){this.keyCache={},t&&this.replace(t)};i.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},i.prototype.update=function(e,i){for(var r=this,o=0,a=e;o<a.length;o+=1){var s=a[o];this._layerConfigs[s.id]=s;var l=this._layers[s.id]=t.createStyleLayer(s);l._featureFilter=t.featureFilter(l.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var u=0,c=i;u<c.length;u+=1){var h=c[u];delete this.keyCache[h],delete this._layerConfigs[h],delete this._layers[h]}this.familiesBySource={};for(var p=0,f=function(t,e){for(var i={},r=0;r<t.length;r++){var o=e&&e[t[r].id]||n(t[r]);e&&(e[t[r].id]=o);var a=i[o];a||(a=i[o]=[]),a.push(t[r])}var s=[];for(var l in i)s.push(i[l]);return s}(t.values(this._layerConfigs),this.keyCache);p<f.length;p+=1){var d=f[p].map((function(t){return r._layers[t.id]})),m=d[0];if("none"!==m.visibility){var g=m.source||"",y=this.familiesBySource[g];y||(y=this.familiesBySource[g]={});var v=m.sourceLayer||"_geojsonTileLayer",_=y[v];_||(_=y[v]=[]),_.push(d)}}};var r=function(e){var n={},i=[];for(var r in e){var o=e[r],a=n[r]={};for(var s in o){var l=o[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u={x:0,y:0,w:l.bitmap.width+2,h:l.bitmap.height+2};i.push(u),a[s]={rect:u,metrics:l.metrics}}}}var c=t.potpack(i),h=new t.AlphaImage({width:c.w||1,height:c.h||1});for(var p in e){var f=e[p];for(var d in f){var m=f[+d];if(m&&0!==m.bitmap.width&&0!==m.bitmap.height){var g=n[p][d].rect;t.AlphaImage.copy(m.bitmap,h,{x:0,y:0},{x:g.x+1,y:g.y+1},m.bitmap)}}}this.image=h,this.positions=n};t.register("GlyphAtlas",r);var o=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId};function a(e,n,i){for(var r=new t.EvaluationParameters(n),o=0,a=e;o<a.length;o+=1)a[o].recalculate(r,i)}function s(e,n){var i=t.getArrayBuffer(e.request,(function(e,i,r,o){e?n(e):i&&n(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(i)),rawData:i,cacheControl:r,expires:o})}));return function(){i.cancel(),n()}}o.prototype.parse=function(e,n,i,o,s){var l=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var u=new t.DictionaryCoder(Object.keys(e.layers).sort()),c=new t.FeatureIndex(this.tileID,this.promoteId);c.bucketLayerIDs=[];var h,p,f,d,m={},g={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:i},y=n.familiesBySource[this.source];for(var v in y){var _=e.layers[v];if(_){1===_.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+v+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var b=u.encode(v),x=[],w=0;w<_.length;w++){var C=_.feature(w),k=c.getId(C,v);x.push({feature:C,id:k,index:w,sourceLayerIndex:b})}for(var E=0,S=y[v];E<S.length;E+=1){var I=S[E],T=I[0];T.minzoom&&this.zoom<Math.floor(T.minzoom)||T.maxzoom&&this.zoom>=T.maxzoom||"none"!==T.visibility&&(a(I,this.zoom,i),(m[T.id]=T.createBucket({index:c.bucketLayerIDs.length,layers:I,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:b,sourceID:this.source})).populate(x,g,this.tileID.canonical),c.bucketLayerIDs.push(I.map((function(t){return t.id}))))}}}var P=t.mapObject(g.glyphDependencies,(function(t){return Object.keys(t).map(Number)}));Object.keys(P).length?o.send("getGlyphs",{uid:this.uid,stacks:P},(function(t,e){h||(h=t,p=e,M.call(l))})):p={};var A=Object.keys(g.iconDependencies);A.length?o.send("getImages",{icons:A,source:this.source,tileID:this.tileID,type:"icons"},(function(t,e){h||(h=t,f=e,M.call(l))})):f={};var L=Object.keys(g.patternDependencies);function M(){if(h)return s(h);if(p&&f&&d){var e=new r(p),n=new t.ImageAtlas(f,d);for(var o in m){var l=m[o];l instanceof t.SymbolBucket?(a(l.layers,this.zoom,i),t.performSymbolLayout(l,p,e.positions,f,n.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):l.hasPattern&&(l instanceof t.LineBucket||l instanceof t.FillBucket||l instanceof t.FillExtrusionBucket)&&(a(l.layers,this.zoom,i),l.addFeatures(g,this.tileID.canonical,n.patternPositions))}this.status="done",s(null,{buckets:t.values(m).filter((function(t){return!t.isEmpty()})),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:n,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?f:null,glyphPositions:this.returnDependencies?e.positions:null})}}L.length?o.send("getImages",{icons:L,source:this.source,tileID:this.tileID,type:"patterns"},(function(t,e){h||(h=t,d=e,M.call(l))})):d={},M.call(this)};var l=function(t,e,n,i){this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=i||s,this.loading={},this.loaded={}};l.prototype.loadTile=function(e,n){var i=this,r=e.uid;this.loading||(this.loading={});var a=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),s=this.loading[r]=new o(e);s.abort=this.loadVectorData(e,(function(e,o){if(delete i.loading[r],e||!o)return s.status="done",i.loaded[r]=s,n(e);var l=o.rawData,u={};o.expires&&(u.expires=o.expires),o.cacheControl&&(u.cacheControl=o.cacheControl);var c={};if(a){var h=a.finish();h&&(c.resourceTiming=JSON.parse(JSON.stringify(h)))}s.vectorTile=o.vectorTile,s.parse(o.vectorTile,i.layerIndex,i.availableImages,i.actor,(function(e,i){if(e||!i)return n(e);n(null,t.extend({rawTileData:l.slice(0)},i,u,c))})),i.loaded=i.loaded||{},i.loaded[r]=s}))},l.prototype.reloadTile=function(t,e){var n=this,i=this.loaded,r=t.uid,o=this;if(i&&i[r]){var a=i[r];a.showCollisionBoxes=t.showCollisionBoxes;var s=function(t,i){var r=a.reloadCallback;r&&(delete a.reloadCallback,a.parse(a.vectorTile,o.layerIndex,n.availableImages,o.actor,r)),e(t,i)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},l.prototype.abortTile=function(t,e){var n=this.loading,i=t.uid;n&&n[i]&&n[i].abort&&(n[i].abort(),delete n[i]),e()},l.prototype.removeTile=function(t,e){var n=this.loaded,i=t.uid;n&&n[i]&&delete n[i],e()};var u=t.window.ImageBitmap,c=function(){this.loaded={}};function h(t,e){if(0!==t.length){p(t[0],e);for(var n=1;n<t.length;n++)p(t[n],!e)}}function p(t,e){for(var n=0,i=0,r=t.length,o=r-1;i<r;o=i++)n+=(t[i][0]-t[o][0])*(t[o][1]+t[i][1]);n>=0!=!!e&&t.reverse()}c.prototype.loadTile=function(e,n){var i=e.uid,r=e.encoding,o=e.rawImageData,a=u&&o instanceof u?this.getImageData(o):o,s=new t.DEMData(i,a,r);this.loaded=this.loaded||{},this.loaded[i]=s,n(null,s)},c.prototype.getImageData=function(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var n=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:n.width,height:n.height},n.data)},c.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var f=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,d=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};d.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],n=0,i=this._feature.geometry;n<i.length;n+=1){var r=i[n];e.push([new t.Point$1(r[0],r[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var l=[],u=0,c=s[a];u<c.length;u+=1){var h=c[u];l.push(new t.Point$1(h[0],h[1]))}o.push(l)}return o},d.prototype.toGeoJSON=function(t,e,n){return f.call(this,t,e,n)};var m=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};m.prototype.feature=function(t){return new d(this._features[t])};var g=t.vectorTile.VectorTileFeature,y=v;function v(t,e){this.options=e||{},this.features=t,this.length=t.length}function _(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}v.prototype.feature=function(t){return new _(this.features[t],this.options.extent)},_.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var i=e[n],r=[],o=0;o<i.length;o++)r.push(new t.Point$1(i[o][0],i[o][1]));this.geometry.push(r)}return this.geometry},_.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,i=1/0,r=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),n=Math.max(n,l.x),i=Math.min(i,l.y),r=Math.max(r,l.y)}return[e,i,n,r]},_.prototype.toGeoJSON=g.prototype.toGeoJSON;var b=w,x=y;function w(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,C,t.layers[n])}(e,n),n.finish()}function C(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)i.feature=t.feature(n),e.writeMessage(2,k,i);var r=i.keys;for(n=0;n<r.length;n++)e.writeStringField(3,r[n]);var o=i.values;for(n=0;n<o.length;n++)e.writeMessage(4,P,o[n])}function k(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,E,t),e.writeVarintField(3,n.type),e.writeMessage(4,T,n)}function E(t,e){var n=t.feature,i=t.keys,r=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var l=o[s];void 0===l&&(i.push(s),o[s]=l=i.length-1),e.writeVarint(l);var u=n.properties[s],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var h=c+":"+u,p=a[h];void 0===p&&(r.push(u),a[h]=p=r.length-1),e.writeVarint(p)}}function S(t,e){return(e<<3)+(7&t)}function I(t){return t<<1^t>>31}function T(t,e){for(var n=t.loadGeometry(),i=t.type,r=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],u=1;1===i&&(u=l.length),e.writeVarint(S(1,u));for(var c=3===i?l.length-1:l.length,h=0;h<c;h++){1===h&&1!==i&&e.writeVarint(S(2,c-1));var p=l[h].x-r,f=l[h].y-o;e.writeVarint(I(p)),e.writeVarint(I(f)),r+=p,o+=f}3===i&&e.writeVarint(S(7,1))}}function P(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function A(t,e,n,i){L(t,n,i),L(e,2*n,2*i),L(e,2*n+1,2*i+1)}function L(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function M(t,e,n,i){var r=t-n,o=e-i;return r*r+o*o}b.fromVectorTileJs=w,b.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var i in t)n[i]=new y(t[i].features,e),n[i].name=i,n[i].version=e.version,n[i].extent=e.extent;return w({layers:n})},b.GeoJSONWrapper=x;var R=function(t){return t[0]},O=function(t){return t[1]},D=function(t,e,n,i,r){void 0===e&&(e=R),void 0===n&&(n=O),void 0===i&&(i=64),void 0===r&&(r=Float64Array),this.nodeSize=i,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new r(2*t.length),l=0;l<t.length;l++)a[l]=l,s[2*l]=e(t[l]),s[2*l+1]=n(t[l]);!function t(e,n,i,r,o,a){if(!(o-r<=i)){var s=r+o>>1;!function t(e,n,i,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,l=i-r+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);t(e,n,i,Math.max(r,Math.floor(i-l*c/s+h)),Math.min(o,Math.floor(i+(s-l)*c/s+h)),a)}var p=n[2*i+a],f=r,d=o;for(A(e,n,r,i),n[2*o+a]>p&&A(e,n,r,o);f<d;){for(A(e,n,f,d),f++,d--;n[2*f+a]<p;)f++;for(;n[2*d+a]>p;)d--}n[2*r+a]===p?A(e,n,r,d):A(e,n,++d,o),d<=i&&(r=d+1),i<=d&&(o=d-1)}}(e,n,s,r,o,a%2),t(e,n,i,r,s-1,a+1),t(e,n,i,s+1,o,a+1)}}(a,s,i,0,a.length-1,0)};D.prototype.range=function(t,e,n,i){return function(t,e,n,i,r,o,a){for(var s,l,u=[0,t.length-1,0],c=[];u.length;){var h=u.pop(),p=u.pop(),f=u.pop();if(p-f<=a)for(var d=f;d<=p;d++)l=e[2*d+1],(s=e[2*d])>=n&&s<=r&&l>=i&&l<=o&&c.push(t[d]);else{var m=Math.floor((f+p)/2);l=e[2*m+1],(s=e[2*m])>=n&&s<=r&&l>=i&&l<=o&&c.push(t[m]);var g=(h+1)%2;(0===h?n<=s:i<=l)&&(u.push(f),u.push(m-1),u.push(g)),(0===h?r>=s:o>=l)&&(u.push(m+1),u.push(p),u.push(g))}}return c}(this.ids,this.coords,t,e,n,i,this.nodeSize)},D.prototype.within=function(t,e,n){return function(t,e,n,i,r,o){for(var a=[0,t.length-1,0],s=[],l=r*r;a.length;){var u=a.pop(),c=a.pop(),h=a.pop();if(c-h<=o)for(var p=h;p<=c;p++)M(e[2*p],e[2*p+1],n,i)<=l&&s.push(t[p]);else{var f=Math.floor((h+c)/2),d=e[2*f],m=e[2*f+1];M(d,m,n,i)<=l&&s.push(t[f]);var g=(u+1)%2;(0===u?n-r<=d:i-r<=m)&&(a.push(h),a.push(f-1),a.push(g)),(0===u?n+r>=d:i+r>=m)&&(a.push(f+1),a.push(c),a.push(g))}}return s}(this.ids,this.coords,t,e,n,this.nodeSize)};var N={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},F=function(t){this.options=G(Object.create(N),t),this.trees=new Array(this.options.maxZoom+1)};function z(t,e,n,i,r){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:i,properties:r}}function B(t,e){var n=t.geometry.coordinates,i=n[1];return{x:j(n[0]),y:q(i),zoom:1/0,index:e,parentId:-1}}function V(t){return{type:"Feature",id:t.id,properties:U(t),geometry:{type:"Point",coordinates:[(i=t.x,360*(i-.5)),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n,i}function U(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return G(G({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function j(t){return t/360+.5}function q(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function G(t,e){for(var n in e)t[n]=e[n];return t}function H(t){return t.x}function X(t){return t.y}function Z(t,e,n,i,r,o){var a=r-n,s=o-i;if(0!==a||0!==s){var l=((t-n)*a+(e-i)*s)/(a*a+s*s);l>1?(n=r,i=o):l>0&&(n+=a*l,i+=s*l)}return(a=t-n)*a+(s=e-i)*s}function W(t,e,n,i){var r={id:void 0===t?null:t,type:e,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)Y(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var i=0;i<e.length;i++)Y(t,e[i]);else if("MultiPolygon"===n)for(i=0;i<e.length;i++)for(var r=0;r<e[i].length;r++)Y(t,e[i][r])}(r),r}function Y(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function K(t,e,n,i){if(e.geometry){var r=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=i||0),"Point"===o)J(r,s);else if("MultiPoint"===o)for(var u=0;u<r.length;u++)J(r[u],s);else if("LineString"===o)Q(r,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(u=0;u<r.length;u++)Q(r[u],s=[],a,!1),t.push(W(l,"LineString",s,e.properties));return}$(r,s,a,!1)}else if("Polygon"===o)$(r,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(u=0;u<e.geometry.geometries.length;u++)K(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},n,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<r.length;u++){var c=[];$(r[u],c,a,!0),s.push(c)}}t.push(W(l,o,s,e.properties))}}function J(t,e){e.push(tt(t[0])),e.push(et(t[1])),e.push(0)}function Q(t,e,n,i){for(var r,o,a=0,s=0;s<t.length;s++){var l=tt(t[s][0]),u=et(t[s][1]);e.push(l),e.push(u),e.push(0),s>0&&(a+=i?(r*u-l*o)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(u-o,2))),r=l,o=u}var c=e.length-3;e[2]=1,function t(e,n,i,r){for(var o,a=r,s=i-n>>1,l=i-n,u=e[n],c=e[n+1],h=e[i],p=e[i+1],f=n+3;f<i;f+=3){var d=Z(e[f],e[f+1],u,c,h,p);if(d>a)o=f,a=d;else if(d===a){var m=Math.abs(f-s);m<l&&(o=f,l=m)}}a>r&&(o-n>3&&t(e,n,o,r),e[o+2]=a,i-o>3&&t(e,o,i,r))}(e,0,c,n),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function $(t,e,n,i){for(var r=0;r<t.length;r++){var o=[];Q(t[r],o,n,i),e.push(o)}}function tt(t){return t/360+.5}function et(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function nt(t,e,n,i,r,o,a,s){if(i/=e,o>=(n/=e)&&a<i)return t;if(a<n||o>=i)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],h=c.geometry,p=c.type,f=0===r?c.minX:c.minY,d=0===r?c.maxX:c.maxY;if(f>=n&&d<i)l.push(c);else if(!(d<n||f>=i)){var m=[];if("Point"===p||"MultiPoint"===p)it(h,m,n,i,r);else if("LineString"===p)rt(h,m,n,i,r,!1,s.lineMetrics);else if("MultiLineString"===p)at(h,m,n,i,r,!1);else if("Polygon"===p)at(h,m,n,i,r,!0);else if("MultiPolygon"===p)for(var g=0;g<h.length;g++){var y=[];at(h[g],y,n,i,r,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===p){for(g=0;g<m.length;g++)l.push(W(c.id,p,m[g],c.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===m.length?(p="LineString",m=m[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===m.length?"Point":"MultiPoint"),l.push(W(c.id,p,m,c.tags))}}}return l.length?l:null}function it(t,e,n,i,r){for(var o=0;o<t.length;o+=3){var a=t[o+r];a>=n&&a<=i&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function rt(t,e,n,i,r,o,a){for(var s,l,u=ot(t),c=0===r?lt:ut,h=t.start,p=0;p<t.length-3;p+=3){var f=t[p],d=t[p+1],m=t[p+2],g=t[p+3],y=t[p+4],v=0===r?f:d,_=0===r?g:y,b=!1;a&&(s=Math.sqrt(Math.pow(f-g,2)+Math.pow(d-y,2))),v<n?_>n&&(l=c(u,f,d,g,y,n),a&&(u.start=h+s*l)):v>i?_<i&&(l=c(u,f,d,g,y,i),a&&(u.start=h+s*l)):st(u,f,d,m),_<n&&v>=n&&(l=c(u,f,d,g,y,n),b=!0),_>i&&v<=i&&(l=c(u,f,d,g,y,i),b=!0),!o&&b&&(a&&(u.end=h+s*l),e.push(u),u=ot(t)),a&&(h+=s)}var x=t.length-3;f=t[x],d=t[x+1],m=t[x+2],(v=0===r?f:d)>=n&&v<=i&&st(u,f,d,m),x=u.length-3,o&&x>=3&&(u[x]!==u[0]||u[x+1]!==u[1])&&st(u,u[0],u[1],u[2]),u.length&&e.push(u)}function ot(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function at(t,e,n,i,r,o){for(var a=0;a<t.length;a++)rt(t[a],e,n,i,r,o,!1)}function st(t,e,n,i){t.push(e),t.push(n),t.push(i)}function lt(t,e,n,i,r,o){var a=(o-e)/(i-e);return t.push(o),t.push(n+(r-n)*a),t.push(1),a}function ut(t,e,n,i,r,o){var a=(o-n)/(r-n);return t.push(e+(i-e)*a),t.push(o),t.push(1),a}function ct(t,e){for(var n=[],i=0;i<t.length;i++){var r,o=t[i],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)r=ht(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){r=[];for(var s=0;s<o.geometry.length;s++)r.push(ht(o.geometry[s],e))}else if("MultiPolygon"===a)for(r=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(ht(o.geometry[s][u],e));r.push(l)}n.push(W(o.id,a,r,o.tags))}return n}function ht(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var i=0;i<t.length;i+=3)n.push(t[i]+e,t[i+1],t[i+2]);return n}function pt(t,e){if(t.transformed)return t;var n,i,r,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(i=0;i<u.length;i+=2)l.geometry.push(ft(u[i],u[i+1],e,o,a,s));else for(i=0;i<u.length;i++){var h=[];for(r=0;r<u[i].length;r+=2)h.push(ft(u[i][r],u[i][r+1],e,o,a,s));l.geometry.push(h)}}return t.transformed=!0,t}function ft(t,e,n,i,r,o){return[Math.round(n*(t*i-r)),Math.round(n*(e*i-o))]}function dt(t,e,n,i,r){for(var o=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,mt(a,t[s],o,r);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),h>a.maxY&&(a.maxY=h)}return a}function mt(t,e,n,i){var r=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<r.length;s+=3)a.push(r[s]),a.push(r[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)gt(a,r,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<r.length;s++)gt(a,r[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<r.length;l++){var u=r[l];for(s=0;s<u.length;s++)gt(a,u[s],t,n,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&i.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=r.start/r.size,c.mapbox_clip_end=r.end/r.size}var p={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(p.id=e.id),t.features.push(p)}}function gt(t,e,n,i,r,o){var a=i*i;if(i>0&&e.size<(r?a:i))n.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===i||e[l+2]>a)&&(n.numSimplified++,s.push(e[l]),s.push(e[l+1])),n.numPoints++;r&&function(t,e){for(var n=0,i=0,r=t.length,o=r-2;i<r;o=i,i+=2)n+=(t[i]-t[o])*(t[i+1]+t[o+1]);if(n>0===e)for(i=0,r=t.length;i<r/2;i+=2){var a=t[i],s=t[i+1];t[i]=t[r-2-i],t[i+1]=t[r-1-i],t[r-2-i]=a,t[r-1-i]=s}}(s,o),t.push(s)}}function yt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)K(n,t.features[i],e,i);else K(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=function(t,e){var n=e.buffer/e.extent,i=t,r=nt(t,1,-1-n,n,0,-1,2,e),o=nt(t,1,1-n,2+n,0,-1,2,e);return(r||o)&&(i=nt(t,1,-n,1+n,0,-1,2,e)||[],r&&(i=ct(r,1).concat(i)),o&&(i=i.concat(ct(o,-1)))),i}(i,e)).length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function vt(t,e,n){return 32*((1<<t)*n+e)+t}function _t(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var i=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!i)return e(null,null);var r=new m(i.features),o=b(r);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:r,rawData:o.buffer})}F.prototype.load=function(t){var e=this.options,n=e.log,i=e.minZoom,r=e.maxZoom,o=e.nodeSize;n&&console.time("total time");var a="prepare "+t.length+" points";n&&console.time(a),this.points=t;for(var s=[],l=0;l<t.length;l++)t[l].geometry&&s.push(B(t[l],l));this.trees[r+1]=new D(s,H,X,o,Float32Array),n&&console.timeEnd(a);for(var u=r;u>=i;u--){var c=+Date.now();s=this._cluster(s,u),this.trees[u]=new D(s,H,X,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",u,s.length,+Date.now()-c)}return n&&console.timeEnd("total time"),this},F.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,t[1])),r=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,r=180;else if(n>r){var a=this.getClusters([n,i,180,o],e),s=this.getClusters([-180,i,r,o],e);return a.concat(s)}for(var l=this.trees[this._limitZoom(e)],u=[],c=0,h=l.range(j(n),q(o),j(r),q(i));c<h.length;c+=1){var p=l.points[h[c]];u.push(p.numPoints?V(p):this.points[p.index])}return u},F.prototype.getChildren=function(t){var e=this._getOriginId(t),n=this._getOriginZoom(t),i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);var o=r.points[e];if(!o)throw new Error(i);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=[],l=0,u=r.within(o.x,o.y,a);l<u.length;l+=1){var c=r.points[u[l]];c.parentId===t&&s.push(c.numPoints?V(c):this.points[c.index])}if(0===s.length)throw new Error(i);return s},F.prototype.getLeaves=function(t,e,n){var i=[];return this._appendLeaves(i,t,e=e||10,n=n||0,0),i},F.prototype.getTile=function(t,e,n){var i=this.trees[this._limitZoom(t)],r=Math.pow(2,t),o=this.options,a=o.radius/o.extent,s=(n-a)/r,l=(n+1+a)/r,u={features:[]};return this._addTileFeatures(i.range((e-a)/r,s,(e+1+a)/r,l),i.points,e,n,r,u),0===e&&this._addTileFeatures(i.range(1-a/r,s,1,l),i.points,r,n,r,u),e===r-1&&this._addTileFeatures(i.range(0,s,a/r,l),i.points,-1,n,r,u),u.features.length?u:null},F.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},F.prototype._appendLeaves=function(t,e,n,i,r){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var s=a[o],l=s.properties;if(l&&l.cluster?r+l.point_count<=i?r+=l.point_count:r=this._appendLeaves(t,l.cluster_id,n,i,r):r<i?r++:t.push(s),t.length===n)break}return r},F.prototype._addTileFeatures=function(t,e,n,i,r,o){for(var a=0,s=t;a<s.length;a+=1){var l=e[s[a]],u=l.numPoints,c={type:1,geometry:[[Math.round(this.options.extent*(l.x*r-n)),Math.round(this.options.extent*(l.y*r-i))]],tags:u?U(l):this.points[l.index].properties},h=void 0;u?h=l.id:this.options.generateId?h=l.index:this.points[l.index].id&&(h=this.points[l.index].id),void 0!==h&&(c.id=h),o.features.push(c)}},F.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))},F.prototype._cluster=function(t,e){for(var n=[],i=this.options,r=i.reduce,o=i.minPoints,a=i.radius/(i.extent*Math.pow(2,e)),s=0;s<t.length;s++){var l=t[s];if(!(l.zoom<=e)){l.zoom=e;for(var u=this.trees[e+1],c=u.within(l.x,l.y,a),h=l.numPoints||1,p=h,f=0,d=c;f<d.length;f+=1){var m=u.points[d[f]];m.zoom>e&&(p+=m.numPoints||1)}if(p>=o){for(var g=l.x*h,y=l.y*h,v=r&&h>1?this._map(l,!0):null,_=(s<<5)+(e+1)+this.points.length,b=0,x=c;b<x.length;b+=1){var w=u.points[x[b]];if(!(w.zoom<=e)){w.zoom=e;var C=w.numPoints||1;g+=w.x*C,y+=w.y*C,w.parentId=_,r&&(v||(v=this._map(l,!0)),r(v,this._map(w)))}}l.parentId=_,n.push(z(g/p,y/p,_,p,v))}else if(n.push(l),p>1)for(var k=0,E=c;k<E.length;k+=1){var S=u.points[E[k]];S.zoom<=e||(S.zoom=e,n.push(S))}}}return n},F.prototype._getOriginId=function(t){return t-this.points.length>>5},F.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},F.prototype._map=function(t,e){if(t.numPoints)return e?G({},t.properties):t.properties;var n=this.points[t.index].properties,i=this.options.map(n);return e&&i===n?G({},i):i},yt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},yt.prototype.splitTile=function(t,e,n,i,r,o,a){for(var s=[t,e,n,i],l=this.options,u=l.debug;s.length;){i=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,h=vt(e,n,i),p=this.tiles[h];if(!p&&(u>1&&console.time("creation"),p=this.tiles[h]=dt(t,e,n,i,l),this.tileCoords.push({z:e,x:n,y:i}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,i,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var f="z"+e;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(p.source=t,r){if(e===l.maxZoom||e===r)continue;var d=1<<r-e;if(n!==Math.floor(o/d)||i!==Math.floor(a/d))continue}else if(e===l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==t.length){u>1&&console.time("clipping");var m,g,y,v,_,b,x=.5*l.buffer/l.extent,w=.5-x,C=.5+x,k=1+x;m=g=y=v=null,_=nt(t,c,n-x,n+C,0,p.minX,p.maxX,l),b=nt(t,c,n+w,n+k,0,p.minX,p.maxX,l),t=null,_&&(m=nt(_,c,i-x,i+C,1,p.minY,p.maxY,l),g=nt(_,c,i+w,i+k,1,p.minY,p.maxY,l),_=null),b&&(y=nt(b,c,i-x,i+C,1,p.minY,p.maxY,l),v=nt(b,c,i+w,i+k,1,p.minY,p.maxY,l),b=null),u>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*n,2*i),s.push(g||[],e+1,2*n,2*i+1),s.push(y||[],e+1,2*n+1,2*i),s.push(v||[],e+1,2*n+1,2*i+1)}}},yt.prototype.getTile=function(t,e,n){var i=this.options,r=i.extent,o=i.debug;if(t<0||t>24)return null;var a=1<<t,s=vt(t,e=(e%a+a)%a,n);if(this.tiles[s])return pt(this.tiles[s],r);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,u=t,c=e,h=n;!l&&u>0;)u--,c=Math.floor(c/2),h=Math.floor(h/2),l=this.tiles[vt(u,c,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",u,c,h),o>1&&console.time("drilling down"),this.splitTile(l.source,u,c,h,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?pt(this.tiles[s],r):null):null};var bt=function(e){function n(t,n,i,r){e.call(this,t,n,i,_t),r&&(this.loadGeoJSON=r)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var n=this._pendingCallback,i=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var r=!!(i&&i.request&&i.request.collectResourceTiming)&&new t.RequestPerformance(i.request);this.loadGeoJSON(i,(function(o,a){if(o||!a)return n(o);if("object"!=typeof a)return n(new Error("Input data given to '"+i.source+"' is not a valid GeoJSON object."));!function t(e,n){var i,r=e&&e.type;if("FeatureCollection"===r)for(i=0;i<e.features.length;i++)t(e.features[i],n);else if("GeometryCollection"===r)for(i=0;i<e.geometries.length;i++)t(e.geometries[i],n);else if("Feature"===r)t(e.geometry,n);else if("Polygon"===r)h(e.coordinates,n);else if("MultiPolygon"===r)for(i=0;i<e.coordinates.length;i++)h(e.coordinates[i],n);return e}(a,!0);try{e._geoJSONIndex=i.cluster?new F(function(e){var n=e.superclusterOptions,i=e.clusterProperties;if(!i||!n)return n;for(var r={},o={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(i),u=0,c=l;u<c.length;u+=1){var h=c[u],p=i[h],f=p[0],d=t.createExpression(p[1]),m=t.createExpression("string"==typeof f?[f,["accumulated"],["get",h]]:f);r[h]=d.value,o[h]=m.value}return n.map=function(t){s.properties=t;for(var e={},n=0,i=l;n<i.length;n+=1){var o=i[n];e[o]=r[o].evaluate(a,s)}return e},n.reduce=function(t,e){s.properties=e;for(var n=0,i=l;n<i.length;n+=1){var r=i[n];a.accumulated=t[r],t[r]=o[r].evaluate(a,s)}},n}(i)).load(a.features):function(t,e){return new yt(t,e)}(a,i.geojsonVtOptions)}catch(o){return n(o)}e.loaded={};var s={};if(r){var l=r.finish();l&&(s.resourceTiming={},s.resourceTiming[i.source]=JSON.parse(JSON.stringify(l)))}n(null,s)}))}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(t,n){var i=this.loaded;return i&&i[t.uid]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},n.prototype.loadGeoJSON=function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},n.prototype.getClusterExpansionZoom=function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}},n.prototype.getClusterChildren=function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}},n.prototype.getClusterLeaves=function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}},n}(l),xt=function(e){var n=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:bt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return xt.prototype.setReferrer=function(t,e){this.referrer=e},xt.prototype.setImages=function(t,e,n){for(var i in this.availableImages[t]=e,this.workerSources[t]){var r=this.workerSources[t][i];for(var o in r)r[o].availableImages=e}n()},xt.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},xt.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},xt.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},xt.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},xt.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},xt.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},xt.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},xt.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},xt.prototype.removeSource=function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var i=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==i.removeSource?i.removeSource(e,n):n()}},xt.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},xt.prototype.syncRTLPluginState=function(e,n,i){try{t.plugin.setState(n);var r=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=r){this.self.importScripts(r);var o=t.plugin.isParsed();i(o?void 0:new Error("RTL Text Plugin failed to import scripts from "+r),o)}}catch(t){i(t.toString())}},xt.prototype.getAvailableImages=function(t){var e=this.availableImages[t];return e||(e=[]),e},xt.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new i),e},xt.prototype.getWorkerSource=function(t,e,n){var i=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][n]||(this.workerSources[t][e][n]=new this.workerSourceTypes[e]({send:function(e,n,r){i.actor.send(e,n,r,t)}},this.getLayerIndex(t),this.getAvailableImages(t))),this.workerSources[t][e][n]},xt.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new c),this.demWorkerSources[t][e]},xt.prototype.enforceCacheSizeLimit=function(e,n){t.enforceCacheSizeLimit(n)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new xt(self)),xt})),i(0,(function(t){var e=t.createCommonjsModule((function(t){function e(t){return!n(t)}function n(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(n);try{e=new Worker(i),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(i),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(void 0===i[n=t&&t.failIfMajorPerformanceCaveat]&&(i[n]=function(t){var n=function(t){var n=document.createElement("canvas"),i=Object.create(e.webGLContextAttributes);return i.failIfMajorPerformanceCaveat=t,n.probablySupportsContext?n.probablySupportsContext("webgl",i)||n.probablySupportsContext("experimental-webgl",i):n.supportsContext?n.supportsContext("webgl",i)||n.supportsContext("experimental-webgl",i):n.getContext("webgl",i)||n.getContext("experimental-webgl",i)}(t);if(!n)return!1;var i=n.createShader(n.VERTEX_SHADER);return!(!i||n.isContextLost())&&(n.shaderSource(i,"void main() {}"),n.compileShader(i),!0===n.getShaderParameter(i,n.COMPILE_STATUS))}(n)),i[n]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var n}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e,window.mapboxgl.notSupportedReason=n);var i={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),n={create:function(e,n,i){var r=t.window.document.createElement(e);return void 0!==n&&(r.className=n),i&&i.appendChild(r),r},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},i=t.window.document&&t.window.document.documentElement.style;function r(t){if(!i)return t[0];for(var e=0;e<t.length;e++)if(t[e]in i)return t[e];return t[0]}var o,a=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){i&&a&&(o=i[a],i[a]="none")},n.enableDrag=function(){i&&a&&(i[a]=o)};var s=r(["transform","WebkitTransform"]);n.setTransform=function(t,e){t.style[s]=e};var l=!1;try{var u=Object.defineProperty({},"passive",{get:function(){l=!0}});t.window.addEventListener("test",u,u),t.window.removeEventListener("test",u,u)}catch(t){l=!1}n.addEventListener=function(t,e,n,i){void 0===i&&(i={}),t.addEventListener(e,n,"passive"in i&&l?i:i.capture)},n.removeEventListener=function(t,e,n,i){void 0===i&&(i={}),t.removeEventListener(e,n,"passive"in i&&l?i:i.capture)};var c=function e(n){n.preventDefault(),n.stopPropagation(),t.window.removeEventListener("click",e,!0)};function h(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}n.suppressClick=function(){t.window.addEventListener("click",c,!0),t.window.setTimeout((function(){t.window.removeEventListener("click",c,!0)}),0)},n.mousePos=function(e,n){var i=e.getBoundingClientRect();return new t.Point(n.clientX-i.left-e.clientLeft,n.clientY-i.top-e.clientTop)},n.touchPos=function(e,n){for(var i=e.getBoundingClientRect(),r=[],o=0;o<n.length;o++)r.push(new t.Point(n[o].clientX-i.left-e.clientLeft,n[o].clientY-i.top-e.clientTop));return r},n.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},n.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var p=function(e){function n(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.isLoaded=function(){return this.loaded},n.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var i=n[e];this._notify(i.ids,i.callback)}this.requestors=[]}},n.prototype.getImage=function(t){return this.images[t]},n.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},n.prototype._validate=function(e,n){var i=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchX" value'))),i=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchY" value'))),i=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "content" value'))),i=!1),i},n.prototype._validateStretch=function(t,e){if(!t)return!0;for(var n=0,i=0,r=t;i<r.length;i+=1){var o=r[i];if(o[0]<n||o[1]<o[0]||e<o[1])return!1;n=o[1]}return!0},n.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},n.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},n.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},n.prototype.listImages=function(){return Object.keys(this.images)},n.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var i=0,r=t;i<r.length;i+=1)this.images[r[i]]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},n.prototype._notify=function(e,n){for(var i={},r=0,o=e;r<o.length;r+=1){var a=o[r];this.images[a]||this.fire(new t.Event("styleimagemissing",{id:a}));var s=this.images[a];s?i[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+a+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}n(null,i)},n.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},n.prototype.getPattern=function(e){var n=this.patterns[e],i=this.getImage(e);if(!i)return null;if(n&&n.position.version===i.version)return n.position;if(n)n.position.version=i.version;else{var r={w:i.data.width+2,h:i.data.height+2,x:0,y:0},o=new t.ImagePosition(r,i);this.patterns[e]={bin:r,position:o}}return this._updatePatternAtlas(),this.patterns[e].position},n.prototype.bind=function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},n.prototype._updatePatternAtlas=function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var i=t.potpack(e),r=i.w,o=i.h,a=this.atlasImage;for(var s in a.resize({width:r||1,height:o||1}),this.patterns){var l=this.patterns[s].bin,u=l.x+1,c=l.y+1,h=this.images[s].data,p=h.width,f=h.height;t.RGBAImage.copy(h,a,{x:0,y:0},{x:u,y:c},{width:p,height:f}),t.RGBAImage.copy(h,a,{x:0,y:f-1},{x:u,y:c-1},{width:p,height:1}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:u,y:c+f},{width:p,height:1}),t.RGBAImage.copy(h,a,{x:p-1,y:0},{x:u-1,y:c},{width:1,height:f}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:u+p,y:c},{width:1,height:f})}this.dirty=!0},n.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},n.prototype.dispatchRenderCallbacks=function(t){for(var e=0,n=t;e<n.length;e+=1){var i=n[e];if(!this.callbackDispatchedThisFrame[i]){this.callbackDispatchedThisFrame[i]=!0;var r=this.images[i];h(r)&&this.updateImage(i,r)}}},n}(t.Evented),f=g,d=g,m=1e20;function g(t,e,n,i,r,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=r||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function y(t,e,n,i,r,o,a){for(var s=0;s<e;s++){for(var l=0;l<n;l++)i[l]=t[l*e+s];for(v(i,r,o,a,n),l=0;l<n;l++)t[l*e+s]=r[l]}for(l=0;l<n;l++){for(s=0;s<e;s++)i[s]=t[l*e+s];for(v(i,r,o,a,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(r[s])}}function v(t,e,n,i,r){n[0]=0,i[0]=-m,i[1]=+m;for(var o=1,a=0;o<r;o++){for(var s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=i[a];)a--,s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,i[a]=s,i[a+1]=+m}for(o=0,a=0;o<r;o++){for(;i[a+1]<o;)a++;e[o]=(o-n[a])*(o-n[a])+t[n[a]]}}g.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var r=e.data[4*i+3]/255;this.gridOuter[i]=1===r?0:0===r?m:Math.pow(Math.max(0,.5-r),2),this.gridInner[i]=1===r?m:0===r?0:Math.pow(Math.max(0,r-.5),2)}for(y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),i=0;i<this.size*this.size;i++)n[i]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[i]-this.gridInner[i])/this.radius+this.cutoff))));return n},f.default=d;var _=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};_.prototype.setURL=function(t){this.url=t},_.prototype.getGlyphs=function(e,n){var i=this,r=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1)r.push({stack:o,id:s[a]});t.asyncAll(r,(function(t,e){var n=t.stack,r=t.id,o=i.entries[n];o||(o=i.entries[n]={glyphs:{},requests:{},ranges:{}});var a=o.glyphs[r];if(void 0===a){if(a=i._tinySDF(o,n,r))return o.glyphs[r]=a,void e(null,{stack:n,id:r,glyph:a});var s=Math.floor(r/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else if(o.ranges[s])e(null,{stack:n,id:r,glyph:a});else{var l=o.requests[s];l||(l=o.requests[s]=[],_.loadGlyphRange(n,s,i.url,i.requestManager,(function(t,e){if(e){for(var n in e)i._doesCharSupportLocalGlyph(+n)||(o.glyphs[+n]=e[+n]);o.ranges[s]=!0}for(var r=0,a=l;r<a.length;r+=1)(0,a[r])(t,e);delete o.requests[s]}))),l.push((function(t,i){t?e(t):i&&e(null,{stack:n,id:r,glyph:i[r]||null})}))}}else e(null,{stack:n,id:r,glyph:a})}),(function(t,e){if(t)n(t);else if(e){for(var i={},r=0,o=e;r<o.length;r+=1){var a=o[r],s=a.stack,l=a.id,u=a.glyph;(i[s]||(i[s]={}))[l]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}n(null,i)}}))},_.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))},_.prototype._tinySDF=function(e,n,i){var r=this.localIdeographFontFamily;if(r&&this._doesCharSupportLocalGlyph(i)){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),o=e.tinySDF=new _.TinySDF(24,3,8,.25,r,a)}return{id:i,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(i))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},_.loadGlyphRange=function(e,n,i,r,o){var a=256*n,s=a+255,l=r.transformRequest(r.normalizeGlyphsURL(i).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(l,(function(e,n){if(e)o(e);else if(n){for(var i={},r=0,a=t.parseGlyphPBF(n);r<a.length;r+=1){var s=a[r];i[s.id]=s}o(null,i)}}))},_.TinySDF=f;var b=function(){this.specification=t.styleSpec.light.position};b.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},b.prototype.interpolate=function(e,n,i){return{x:t.number(e.x,n.x,i),y:t.number(e.y,n.y,i),z:t.number(e.z,n.z,i)}};var x=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new b,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),w=function(e){function n(n){e.call(this),this._transitionable=new t.Transitionable(x),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(e,n){if(void 0===n&&(n={}),!this._validate(t.validateLight,e,n))for(var i in e){var r=e[i];t.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-"-transition".length),r):this._transitionable.setValue(i,r)}},n.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},n.prototype._validate=function(e,n,i){return(!i||!1!==i.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},n}(t.Evented),C=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};C.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(t,e)),this.dashEntry[n]},C.prototype.getDashRanges=function(t,e,n){var i=[],r=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,a=!0;i.push({left:r,right:o,isDash:a,zeroLength:0===t[0]});for(var s=t[0],l=1;l<t.length;l++){var u=t[l];i.push({left:r=s*n,right:o=(s+=u)*n,isDash:a=!a,zeroLength:0===u})}return i},C.prototype.addRoundDash=function(t,e,n){for(var i=e/2,r=-n;r<=n;r++)for(var o=this.width*(this.nextRow+n+r),a=0,s=t[a],l=0;l<this.width;l++){l/s.right>1&&(s=t[++a]);var u=Math.abs(l-s.left),c=Math.abs(l-s.right),h=Math.min(u,c),p=void 0,f=r/n*(i+1);if(s.isDash){var d=i-Math.abs(f);p=Math.sqrt(h*h+d*d)}else p=i-Math.sqrt(h*h+f*f);this.data[o+l]=Math.max(0,Math.min(255,p+128))}},C.prototype.addRegularDash=function(t){for(var e=t.length-1;e>=0;--e){var n=t[e],i=t[e+1];n.zeroLength?t.splice(e,1):i&&i.isDash===n.isDash&&(i.left=n.left,t.splice(e,1))}var r=t[0],o=t[t.length-1];r.isDash===o.isDash&&(r.left=o.left-this.width,o.right=r.right+this.width);for(var a=this.width*this.nextRow,s=0,l=t[s],u=0;u<this.width;u++){u/l.right>1&&(l=t[++s]);var c=Math.abs(u-l.left),h=Math.abs(u-l.right),p=Math.min(c,h);this.data[a+u]=Math.max(0,Math.min(255,(l.isDash?p:-p)+128))}},C.prototype.addDash=function(e,n){var i=n?7:0,r=2*i+1;if(this.nextRow+r>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];if(0!==o){var s=this.width/o,l=this.getDashRanges(e,this.width,s);n?this.addRoundDash(l,s,i):this.addRegularDash(l)}var u={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:o};return this.nextRow+=r,this.dirty=!0,u},C.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var k=function e(n,i){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var r=this.workerPool.acquire(this.id),o=0;o<r.length;o++){var a=new e.Actor(r[o],i,this.id);a.name="Worker "+o,this.actors.push(a)}};function E(e,n,i){var r=function(r,o){if(r)return i(r);if(o){var a=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(a.vectorLayers=o.vector_layers,a.vectorLayerIds=a.vectorLayers.map((function(t){return t.id}))),a.tiles=n.canonicalizeTileset(a,e.url),i(null,a)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url),t.ResourceType.Source),r):t.browser.frame((function(){return r(null,e)}))}k.prototype.broadcast=function(e,n,i){t.asyncAll(this.actors,(function(t,i){t.send(e,n,i)}),i=i||function(){})},k.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},k.prototype.remove=function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)},k.Actor=t.Actor;var S=function(e,n,i){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=i||24};S.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},S.prototype.contains=function(e){var n=Math.pow(2,e.z),i=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),r=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=i&&e.x<o&&e.y>=r&&e.y<a};var I=function(e){function n(n,i,r,o){if(e.call(this),this.id=n,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(i,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._requestManager,(function(n,i){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):i&&(t.extend(e,i),i.bounds&&(e.tileBounds=new S(i.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(i.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(i.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.loadTile=function(e,n){var i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),r={request:this.map._requestManager.transformRequest(i,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function o(i,r){return delete e.request,e.aborted?n(null):i&&404!==i.status?n(i):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}r.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",r,o.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",r,o.bind(this)))},n.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},n.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},n.prototype.hasTransition=function(){return!1},n}(t.Evented),T=function(e){function n(n,i,r,o){e.call(this),this.id=n,this.dispatcher=r,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},i),t.extend(this,t.pick(i,["url","scheme","tileSize"]))}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._requestManager,(function(n,i){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):i&&(t.extend(e,i),i.bounds&&(e.tileBounds=new S(i.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(i.tiles),t.postMapLoadEvent(i.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.loadTile=function(e,n){var i=this,r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),(function(r,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(o){i.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=i.map.painter.context,s=a.gl;e.texture=i.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(i.dispatcher),n(null)}}))},n.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},n.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},n.prototype.hasTransition=function(){return!1},n}(t.Evented),P=function(e){function n(n,i,r,o){e.call(this,n,i,r,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(e,n){var i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function r(t,i){t&&(e.state="errored",n(t)),i&&(e.dem=i,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),(function(i,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?o:t.browser.getImageData(o,1),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:a,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",s,r.bind(this)))}}).bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},n.prototype._getNeighboringTiles=function(e){var n=e.canonical,i=Math.pow(2,n.z),r=(n.x-1+i)%i,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+i)%i,s=n.x+1===i?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,n.z,r,n.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,r,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<i&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,r,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l},n.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},n}(T),A=function(e){function n(n,i,r,o){e.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(o),this._data=i.data,this._options=t.extend({},i),this._collectResourceTiming=i.collectResourceTiming,this._resourceTiming=[],void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*a,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?Math.min(i.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:t.EXTENT,radius:(i.clusterRadius||50)*a,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties},i.workerOptions)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(n){if(n)e.fire(new t.ErrorEvent(n));else{var i={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(i.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",i))}}))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)n.fire(new t.ErrorEvent(e));else{var i={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(i.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",i))}})),this},n.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},n.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},n.prototype.getClusterLeaves=function(t,e,n,i){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},i),this},n.prototype._updateWorkerData=function(e){var n=this;this._loaded=!1;var i=t.extend({},this.workerOptions),r=this._data;"string"==typeof r?(i.request=this.map._requestManager.transformRequest(t.browser.resolveURL(r),t.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(r),this.actor.send(this.type+".loadData",i,(function(t,r){n._removed||r&&r.abandoned||(n._loaded=!0,r&&r.resourceTiming&&r.resourceTiming[n.id]&&(n._resourceTiming=r.resourceTiming[n.id].slice(0)),n.actor.send(n.type+".coalesce",{source:i.source},null),e(t))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.loadTile=function(e,n){var i=this,r=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(r,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(t,o){return delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(o,i.map.painter,"reloadTile"===r),n(null))}))},n.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},n.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},n.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(t.Evented),L=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),M=function(e){function n(t,n,i,r){e.call(this),this.id=t,this.dispatcher=i,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(e,n){var i=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(function(r,o){i._loaded=!0,r?i.fire(new t.ErrorEvent(r)):o&&(i.image=o,e&&(i.coordinates=e),n&&n(),i._finishLoading())}))},n.prototype.loaded=function(){return this._loaded},n.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setCoordinates=function(e){var n=this;this.coordinates=e;var i=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var n=1/0,i=1/0,r=-1/0,o=-1/0,a=0,s=e;a<s.length;a+=1){var l=s[a];n=Math.min(n,l.x),i=Math.min(i,l.y),r=Math.max(r,l.x),o=Math.max(o,l.y)}var u=Math.max(r-n,o-i),c=Math.max(0,Math.floor(-Math.log(u)/Math.LN2)),h=Math.pow(2,c);return new t.CanonicalTileID(c,Math.floor((n+r)/2*h),Math.floor((i+o)/2*h))}(i),this.minzoom=this.maxzoom=this.tileID.z;var r=i.map((function(t){return n.tileID.getTilePoint(t)._round()}));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(r[2].x,r[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},n.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(t.Evented),R=function(e){function n(t,n,i,r){e.call(this,t,n,i,r),this.roundZoom=!0,this.type="video",this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1;var n=this.options;this.urls=[];for(var i=0,r=n.urls;i<r.length;i+=1)this.urls.push(this.map._requestManager.transformRequest(r[i],t.ResourceType.Source).url);t.getVideo(this.urls,(function(n,i){e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):i&&(e.video=i,e.video.loop=!0,e.video.addEventListener("playing",(function(){e.map.triggerRepaint()})),e.map&&e.video.play(),e._finishLoading())}))},n.prototype.pause=function(){this.video&&this.video.pause()},n.prototype.play=function(){this.video&&this.video.play()},n.prototype.seek=function(e){if(this.video){var n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+n.start(0)+" and "+n.end(0)+"-second mark."))):this.video.currentTime=e}},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(M),O=function(e){function n(n,i,r,o){e.call(this,n,i,r,o),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,i=n.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,i.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[r];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},n}(M),D={vector:I,raster:T,"raster-dem":P,geojson:A,video:R,image:M,canvas:O};function N(e,n){var i=t.identity([]);return t.translate(i,i,[1,1,0]),t.scale(i,i,[.5*e.width,.5*e.height,1]),t.multiply(i,i,e.calculatePosMatrix(n.toUnwrapped()))}function F(t,e,n,i,r,o){var a=function(t,e,n){if(t)for(var i=0,r=t;i<r.length;i+=1){var o=e[r[i]];if(o&&o.source===n&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===n&&"fill-extrusion"===s.type)return!0}return!1}(r&&r.layers,e,t.id),s=o.maxPitchScaleFactor(),l=t.tilesIn(i,s,a);l.sort(z);for(var u=[],c=0,h=l;c<h.length;c+=1){var p=h[c];u.push({wrappedTileID:p.tileID.wrapped().key,queryResults:p.tile.queryRenderedFeatures(e,n,t._state,p.queryGeometry,p.cameraQueryGeometry,p.scale,r,o,s,N(t.transform,p.tileID))})}var f=function(t){for(var e={},n={},i=0,r=t;i<r.length;i+=1){var o=r[i],a=o.queryResults,s=o.wrappedTileID,l=n[s]=n[s]||{};for(var u in a)for(var c=a[u],h=l[u]=l[u]||{},p=e[u]=e[u]||[],f=0,d=c;f<d.length;f+=1){var m=d[f];h[m.featureIndex]||(h[m.featureIndex]=!0,p.push(m))}}return e}(u);for(var d in f)f[d].forEach((function(e){var n=e.feature,i=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=i}));return f}function z(t,e){var n=t.tileID,i=e.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}var B=function(t,e){this.max=t,this.onRemove=e,this.reset()};B.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var i=n[e];i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value)}return this.data={},this.order=[],this},B.prototype.add=function(t,e,n){var i=this,r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);var o={value:e,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout((function(){i.remove(t,o)}),n)),this.data[r].push(o),this.order.push(r),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},B.prototype.has=function(t){return t.wrapped().key in this.data},B.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},B.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},B.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},B.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},B.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,i=void 0===e?0:this.data[n].indexOf(e),r=this.data[n][i];return this.data[n].splice(i,1),r.timeout&&clearTimeout(r.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(r.value),this.order.splice(this.order.indexOf(n),1),this},B.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},B.prototype.filter=function(t){var e=[];for(var n in this.data)for(var i=0,r=this.data[n];i<r.length;i+=1){var o=r[i];t(o.value)||e.push(o)}for(var a=0,s=e;a<s.length;a+=1){var l=s[a];this.remove(l.value.tileID,l)}};var V=function(t,e,n){this.context=t;var i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};V.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},V.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},V.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var U={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},j=function(t,e,n,i){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=i,this.context=t;var r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};j.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},j.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},j.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var i=e.attributes[this.attributes[n].name];void 0!==i&&t.enableVertexAttribArray(i)}},j.prototype.setVertexAttribPointers=function(t,e,n){for(var i=0;i<this.attributes.length;i++){var r=this.attributes[i],o=e.attributes[r.name];void 0!==o&&t.vertexAttribPointer(o,r.components,t[U[r.type]],!1,this.itemSize,r.offset+this.itemSize*(n||0))}},j.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var q=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};q.prototype.get=function(){return this.current},q.prototype.set=function(t){},q.prototype.getDefault=function(){return this.default},q.prototype.setDefault=function(){this.set(this.default)};var G=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(q),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(q),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(q),Z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(q),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(q),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(q),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(q),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(q),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(q),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(q),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(q),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(q),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(q),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(q),rt=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(q),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(q),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(q),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(q),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(q),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(q),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(q),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(q),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(q),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(q),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(q),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(q),gt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(q),yt=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(q),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(q),_t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(q),bt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(q),xt=function(t){function e(e,n){t.call(this,e),this.context=e,this.parent=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(q),wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(xt),Ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(xt),kt=function(t,e,n,i){this.context=t,this.width=e,this.height=n;var r=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new wt(t,r),i&&(this.depthAttachment=new Ct(t,r))};kt.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n)}t.deleteFramebuffer(this.framebuffer)};var Et=function(t,e,n){this.func=t,this.mask=e,this.range=n};Et.ReadOnly=!1,Et.ReadWrite=!0,Et.disabled=new Et(519,Et.ReadOnly,[0,1]);var St=function(t,e,n,i,r,o){this.test=t,this.ref=e,this.mask=n,this.fail=i,this.depthFail=r,this.pass=o};St.disabled=new St({func:519,mask:0},0,0,7680,7680,7680);var It=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};It.disabled=new It(It.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),It.unblended=new It(It.Replace,t.Color.transparent,[!0,!0,!0,!0]),It.alphaBlended=new It([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Tt=function(t,e,n){this.enable=t,this.mode=e,this.frontFace=n};Tt.disabled=new Tt(!1,1029,2305),Tt.backCCW=new Tt(!0,1029,2305);var Pt=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new G(this),this.clearDepth=new H(this),this.clearStencil=new X(this),this.colorMask=new Z(this),this.depthMask=new W(this),this.stencilMask=new Y(this),this.stencilFunc=new K(this),this.stencilOp=new J(this),this.stencilTest=new Q(this),this.depthRange=new $(this),this.depthTest=new tt(this),this.depthFunc=new et(this),this.blend=new nt(this),this.blendFunc=new it(this),this.blendColor=new rt(this),this.blendEquation=new ot(this),this.cullFace=new at(this),this.cullFaceSide=new st(this),this.frontFace=new lt(this),this.program=new ut(this),this.activeTexture=new ct(this),this.viewport=new ht(this),this.bindFramebuffer=new pt(this),this.bindRenderbuffer=new ft(this),this.bindTexture=new dt(this),this.bindVertexBuffer=new mt(this),this.bindElementBuffer=new gt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new yt(this),this.pixelStoreUnpack=new vt(this),this.pixelStoreUnpackPremultiplyAlpha=new _t(this),this.pixelStoreUnpackFlipY=new bt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query")};Pt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Pt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Pt.prototype.createIndexBuffer=function(t,e){return new V(this,t,e)},Pt.prototype.createVertexBuffer=function(t,e,n){return new j(this,t,e,n)},Pt.prototype.createRenderbuffer=function(t,e,n){var i=this.gl,r=i.createRenderbuffer();return this.bindRenderbuffer.set(r),i.renderbufferStorage(i.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),r},Pt.prototype.createFramebuffer=function(t,e,n){return new kt(this,t,e,n)},Pt.prototype.clear=function(t){var e=t.color,n=t.depth,i=this.gl,r=0;e&&(r|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(r|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),i.clear(r)},Pt.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},Pt.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},Pt.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},Pt.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,It.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},Pt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var At=function(e){function n(n,i,r){var o=this;e.call(this),this.id=n,this.dispatcher=r,this.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))})),this.on("error",(function(){o._sourceErrored=!0})),this._source=function(e,n,i,r){var o=new D[n.type](e,n,i,r);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o}(n,i,r,this),this._tiles={},this._cache=new B(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},n.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},n.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))},n.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,(function(){}))},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}},n.prototype.getIds=function(){return t.values(this._tiles).map((function(t){return t.tileID})).sort(Lt).map((function(t){return t.key}))},n.prototype.getRenderableIds=function(e){var n=this,i=[];for(var r in this._tiles)this._isIdRenderable(r,e)&&i.push(this._tiles[r]);return e?i.sort((function(e,i){var r=e.tileID,o=i.tileID,a=new t.Point(r.canonical.x,r.canonical.y)._rotate(n.transform.angle),s=new t.Point(o.canonical.x,o.canonical.y)._rotate(n.transform.angle);return r.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x})).map((function(t){return t.tileID.key})):i.map((function(t){return t.tileID})).sort(Lt).map((function(t){return t.key}))},n.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},n.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},n.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},n.prototype._tileLoaded=function(e,n,i,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire(new t.ErrorEvent(r,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===i&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},n.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),n=0;n<e.length;n++){var i=e[n];if(t.neighboringTiles&&t.neighboringTiles[i]){var r=this.getTileByID(i);o(t,r),o(r,t)}}function o(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,i=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===i||Math.abs(i)>1||(Math.abs(n)>1&&(1===Math.abs(n+r)?n+=r:1===Math.abs(n-r)&&(n-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,i),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},n.prototype.getTile=function(t){return this.getTileByID(t.key)},n.prototype.getTileByID=function(t){return this._tiles[t]},n.prototype._retainLoadedChildren=function(t,e,n,i){for(var r in this._tiles){var o=this._tiles[r];if(!(i[r]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var l=a;l.overscaledZ>e;)if(t[(l=l.scaledTo(l.overscaledZ-1)).key]){i[a.key]=a;break}}}},n.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(var i=t.overscaledZ-1;i>=e;i--){var r=t.scaledTo(i),o=this._getLoadedTile(r);if(o)return o}},n.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},n.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,n=Math.ceil(t.height/this._source.tileSize)+1,i=Math.floor(e*n*5),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(r)},n.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var n={};for(var i in this._tiles){var r=this._tiles[i];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),n[r.tileID.key]=r}for(var o in this._tiles=n,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},n.prototype.update=function(e){var i=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter((function(t){return i._source.hasTile(t)})))):r=[];var o=e.coveringZoomLevel(this._source),a=Math.max(o-n.maxOverzooming,this._source.minzoom),s=Math.max(o+n.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(r,o);if(Mt(this._source.type)){for(var u={},c={},h=0,p=Object.keys(l);h<p.length;h+=1){var f=p[h],d=l[f],m=this._tiles[f];if(m&&!(m.fadeEndTime&&m.fadeEndTime<=t.browser.now())){var g=this.findLoadedParent(d,a);g&&(this._addTile(g.tileID),u[g.tileID.key]=g.tileID),c[f]=d}}for(var y in this._retainLoadedChildren(c,o,s,l),u)l[y]||(this._coveredTiles[y]=!0,l[y]=u[y])}for(var v in l)this._tiles[v].clearFadeHold();for(var _=0,b=t.keysDifference(this._tiles,l);_<b.length;_+=1){var x=b[_],w=this._tiles[x];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(x)}this._updateLoadedParentTileCache()}},n.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},n.prototype._updateRetainedTiles=function(t,e){for(var i={},r={},o=Math.max(e-n.maxOverzooming,this._source.minzoom),a=Math.max(e+n.maxUnderzooming,this._source.minzoom),s={},l=0,u=t;l<u.length;l+=1){var c=u[l],h=this._addTile(c);i[c.key]=c,h.hasData()||e<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,e,a,i);for(var p=0,f=t;p<f.length;p+=1){var d=f[p],m=this._tiles[d.key];if(!m.hasData()){if(e+1>this._source.maxzoom){var g=d.children(this._source.maxzoom)[0],y=this.getTile(g);if(y&&y.hasData()){i[g.key]=g;continue}}else{var v=d.children(this._source.maxzoom);if(i[v[0].key]&&i[v[1].key]&&i[v[2].key]&&i[v[3].key])continue}for(var _=m.wasRequested(),b=d.overscaledZ-1;b>=o;--b){var x=d.scaledTo(b);if(r[x.key])break;if(r[x.key]=!0,!(m=this.getTile(x))&&_&&(m=this._addTile(x)),m&&(i[x.key]=x,_=m.wasRequested(),m.hasData()))break}}}return i},n.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],n=void 0,i=this._tiles[t].tileID;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){n=this._loadedParentTiles[i.key];break}e.push(i.key);var r=i.scaledTo(i.overscaledZ-1);if(n=this._getLoadedTile(r))break;i=r}for(var o=0,a=e;o<a.length;o+=1)this._loadedParentTiles[a[o]]=n}},n.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var i=Boolean(n);return i||(n=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,i||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var i=e.getExpiryTimeout();i&&(this._timers[t]=setTimeout((function(){n._reloadTile(t,"expired"),delete n._timers[t]}),i))},n.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},n.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},n.prototype.tilesIn=function(e,n,i){var r=this,o=[],a=this.transform;if(!a)return o;for(var s=i?a.getCameraQueryGeometry(e):e,l=e.map((function(t){return a.pointCoordinate(t)})),u=s.map((function(t){return a.pointCoordinate(t)})),c=this.getIds(),h=1/0,p=1/0,f=-1/0,d=-1/0,m=0,g=u;m<g.length;m+=1){var y=g[m];h=Math.min(h,y.x),p=Math.min(p,y.y),f=Math.max(f,y.x),d=Math.max(d,y.y)}for(var v=function(e){var i=r._tiles[c[e]];if(!i.holdingForFade()){var s=i.tileID,m=Math.pow(2,a.zoom-i.tileID.overscaledZ),g=n*i.queryPadding*t.EXTENT/i.tileSize/m,y=[s.getTilePoint(new t.MercatorCoordinate(h,p)),s.getTilePoint(new t.MercatorCoordinate(f,d))];if(y[0].x-g<t.EXTENT&&y[0].y-g<t.EXTENT&&y[1].x+g>=0&&y[1].y+g>=0){var v=l.map((function(t){return s.getTilePoint(t)})),_=u.map((function(t){return s.getTilePoint(t)}));o.push({tile:i,tileID:s,queryGeometry:v,cameraQueryGeometry:_,scale:m})}}},_=0;_<c.length;_++)v(_);return o},n.prototype.getVisibleCoordinates=function(t){for(var e=this,n=this.getRenderableIds(t).map((function(t){return e._tiles[t].tileID})),i=0,r=n;i<r.length;i+=1){var o=r[i];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return n},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Mt(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.browser.now())return!0}return!1},n.prototype.setFeatureState=function(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)},n.prototype.removeFeatureState=function(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)},n.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},n.prototype.setDependencies=function(t,e,n){var i=this._tiles[t];i&&i.setDependencies(e,n)},n.prototype.reloadTilesForDependencies=function(t,e){for(var n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(n,"reloading");this._cache.filter((function(n){return!n.hasDependency(t,e)}))},n}(t.Evented);function Lt(t,e){var n=Math.abs(2*t.wrap)-+(t.wrap<0),i=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||i-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Mt(t){return"raster"===t||"image"===t||"video"===t}function Rt(){return new t.window.Worker(Wr.workerUrl)}At.maxOverzooming=10,At.maxUnderzooming=3;var Ot="mapboxgl_preloaded_worker_pool",Dt=function(){this.active={}};Dt.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Dt.workerCount;)this.workers.push(new Rt);return this.active[t]=!0,this.workers.slice()},Dt.prototype.release=function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)},Dt.prototype.isPreloaded=function(){return!!this.active[Ot]},Dt.prototype.numActive=function(){return Object.keys(this.active).length};var Nt,Ft=Math.floor(t.browser.hardwareConcurrency/2);function zt(){return Nt||(Nt=new Dt),Nt}function Bt(e,n){var i={};for(var r in e)"ref"!==r&&(i[r]=e[r]);return t.refProperties.forEach((function(t){t in n&&(i[t]=n[t])})),i}function Vt(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=Bt(t[i],e[t[i].ref]));return t}Dt.workerCount=Math.max(Math.min(Ft,6),1);var Ut={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function jt(t,e,n){n.push({command:Ut.addSource,args:[t,e[t]]})}function qt(t,e,n){e.push({command:Ut.removeSource,args:[t]}),n[t]=!0}function Gt(t,e,n,i){qt(t,n,i),jt(t,e,n)}function Ht(e,n,i){var r;for(r in e[i])if(e[i].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[i][r],n[i][r]))return!1;for(r in n[i])if(n[i].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[i][r],n[i][r]))return!1;return!0}function Xt(e,n,i,r,o,a){var s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||i.push({command:a,args:[r,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||i.push({command:a,args:[r,s,n[s],o]}))}function Zt(t){return t.id}function Wt(t,e){return t[e.id]=e,t}var Yt=function(t,e){this.reset(t,e)};Yt.prototype.reset=function(t,e){this.points=t||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Yt.prototype.lerp=function(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);for(var n=1,i=this._distances[n],r=e*this.paddedLength+this.padding;i<r&&n<this._distances.length;)i=this._distances[++n];var o=n-1,a=this._distances[o],s=i-a,l=s>0?(r-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))};var Kt=function(t,e,n){var i=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function Jt(e,n,i,r,o){var a=t.create();return n?(t.scale(a,a,[1/o,1/o,1]),i||t.rotateZ(a,a,r.angle)):t.multiply(a,r.labelPlaneMatrix,e),a}function Qt(e,n,i,r,o){if(n){var a=t.clone(e);return t.scale(a,a,[o,o,1]),i||t.rotateZ(a,a,-r.angle),a}return r.glCoordMatrix}function $t(e,n){var i=[e.x,e.y,0,1];ce(i,i,n);var r=i[3];return{point:new t.Point(i[0]/r,i[1]/r),signedDistanceFromCamera:r}}function te(t,e){return.5+t/e*.5}function ee(t,e){var n=t[0]/t[3],i=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&i>=-e[1]&&i<=e[1]}function ne(e,n,i,r,o,a,s,l){var u=r?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(u,i.transform.zoom),h=[256/i.width*2+1,256/i.height*2+1],p=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();for(var f=e.lineVertexArray,d=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,m=i.transform.width/i.transform.height,g=!1,y=0;y<d.length;y++){var v=d.get(y);if(v.hidden||v.writingMode===t.WritingMode.vertical&&!g)ue(v.numGlyphs,p);else{g=!1;var _=[v.anchorX,v.anchorY,0,1];if(t.transformMat4(_,_,n),ee(_,h)){var b=te(i.transform.cameraToCenterDistance,_[3]),x=t.evaluateSizeForFeature(u,c,v),w=s?x/b:x*b,C=new t.Point(v.anchorX,v.anchorY),k=$t(C,o).point,E={},S=oe(v,w,!1,l,n,o,a,e.glyphOffsetArray,f,p,k,C,E,m);g=S.useVertical,(S.notEnoughRoom||g||S.needsFlipping&&oe(v,w,!0,l,n,o,a,e.glyphOffsetArray,f,p,k,C,E,m).notEnoughRoom)&&ue(v.numGlyphs,p)}else ue(v.numGlyphs,p)}}r?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function ie(t,e,n,i,r,o,a,s,l,u,c){var h=s.glyphStartIndex+s.numGlyphs,p=s.lineStartIndex,f=s.lineStartIndex+s.lineLength,d=e.getoffsetX(s.glyphStartIndex),m=e.getoffsetX(h-1),g=se(t*d,n,i,r,o,a,s.segment,p,f,l,u,c);if(!g)return null;var y=se(t*m,n,i,r,o,a,s.segment,p,f,l,u,c);return y?{first:g,last:y}:null}function re(e,n,i,r){return e===t.WritingMode.horizontal&&Math.abs(i.y-n.y)>Math.abs(i.x-n.x)*r?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<i.y:n.x>i.x)?{needsFlipping:!0}:null}function oe(e,n,i,r,o,a,s,l,u,c,h,p,f,d){var m,g=n/24,y=e.lineOffsetX*g,v=e.lineOffsetY*g;if(e.numGlyphs>1){var _=e.glyphStartIndex+e.numGlyphs,b=e.lineStartIndex,x=e.lineStartIndex+e.lineLength,w=ie(g,l,y,v,i,h,p,e,u,a,f);if(!w)return{notEnoughRoom:!0};var C=$t(w.first.point,s).point,k=$t(w.last.point,s).point;if(r&&!i){var E=re(e.writingMode,C,k,d);if(E)return E}m=[w.first];for(var S=e.glyphStartIndex+1;S<_-1;S++)m.push(se(g*l.getoffsetX(S),y,v,i,h,p,e.segment,b,x,u,a,f));m.push(w.last)}else{if(r&&!i){var I=$t(p,o).point,T=e.lineStartIndex+e.segment+1,P=new t.Point(u.getx(T),u.gety(T)),A=$t(P,o),L=A.signedDistanceFromCamera>0?A.point:ae(p,P,I,1,o),M=re(e.writingMode,I,L,d);if(M)return M}var R=se(g*l.getoffsetX(e.glyphStartIndex),y,v,i,h,p,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,a,f);if(!R)return{notEnoughRoom:!0};m=[R]}for(var O=0,D=m;O<D.length;O+=1){var N=D[O];t.addDynamicAttributes(c,N.point,N.angle)}return{}}function ae(t,e,n,i,r){var o=$t(t.add(t.sub(e)._unit()),r).point,a=n.sub(o);return n.add(a._mult(i/a.mag()))}function se(e,n,i,r,o,a,s,l,u,c,h,p){var f=r?e-n:e+n,d=f>0?1:-1,m=0;r&&(d*=-1,m=Math.PI),d<0&&(m+=Math.PI);for(var g=d>0?l+s:l+s+1,y=o,v=o,_=0,b=0,x=Math.abs(f),w=[];_+b<=x;){if((g+=d)<l||g>=u)return null;if(v=y,w.push(y),void 0===(y=p[g])){var C=new t.Point(c.getx(g),c.gety(g)),k=$t(C,h);if(k.signedDistanceFromCamera>0)y=p[g]=k.point;else{var E=g-d;y=ae(0===_?a:new t.Point(c.getx(E),c.gety(E)),C,v,x-_+1,h)}}_+=b,b=v.dist(y)}var S=(x-_)/b,I=y.sub(v),T=I.mult(S)._add(v);T._add(I._unit()._perp()._mult(i*d));var P=m+Math.atan2(y.y-v.y,y.x-v.x);return w.push(T),{point:T,angle:P,path:w}}Kt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Kt.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},Kt.prototype.insertCircle=function(t,e,n,i){this._forEachCell(e-i,n-i,e+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(i)},Kt.prototype._insertBoxCell=function(t,e,n,i,r,o){this.boxCells[r].push(o)},Kt.prototype._insertCircleCell=function(t,e,n,i,r,o){this.circleCells[r].push(o)},Kt.prototype._query=function(t,e,n,i,r,o){if(n<0||t>this.width||i<0||e>this.height)return!r&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=i){if(r)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],h=this.circles[3*l+2];a.push({key:this.circleKeys[l],x1:u-h,y1:c-h,x2:u+h,y2:c+h})}return o?a.filter(o):a}return this._forEachCell(t,e,n,i,this._queryCell,a,{hitTest:r,seenUids:{box:{},circle:{}}},o),r?a.length>0:a},Kt.prototype._queryCircle=function(t,e,n,i,r){var o=t-n,a=t+n,s=e-n,l=e+n;if(a<0||o>this.width||l<0||s>this.height)return!i&&[];var u=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,u,{hitTest:i,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},r),i?u.length>0:u},Kt.prototype.query=function(t,e,n,i,r){return this._query(t,e,n,i,!1,r)},Kt.prototype.hitTest=function(t,e,n,i,r){return this._query(t,e,n,i,!0,r)},Kt.prototype.hitTestCircle=function(t,e,n,i){return this._queryCircle(t,e,n,!0,i)},Kt.prototype._queryCell=function(t,e,n,i,r,o,a,s){var l=a.seenUids,u=this.boxCells[r];if(null!==u)for(var c=this.bboxes,h=0,p=u;h<p.length;h+=1){var f=p[h];if(!l.box[f]){l.box[f]=!0;var d=4*f;if(t<=c[d+2]&&e<=c[d+3]&&n>=c[d+0]&&i>=c[d+1]&&(!s||s(this.boxKeys[f]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[f],x1:c[d],y1:c[d+1],x2:c[d+2],y2:c[d+3]})}}}var m=this.circleCells[r];if(null!==m)for(var g=this.circles,y=0,v=m;y<v.length;y+=1){var _=v[y];if(!l.circle[_]){l.circle[_]=!0;var b=3*_;if(this._circleAndRectCollide(g[b],g[b+1],g[b+2],t,e,n,i)&&(!s||s(this.circleKeys[_]))){if(a.hitTest)return o.push(!0),!0;var x=g[b],w=g[b+1],C=g[b+2];o.push({key:this.circleKeys[_],x1:x-C,y1:w-C,x2:x+C,y2:w+C})}}}},Kt.prototype._queryCellCircle=function(t,e,n,i,r,o,a,s){var l=a.circle,u=a.seenUids,c=this.boxCells[r];if(null!==c)for(var h=this.bboxes,p=0,f=c;p<f.length;p+=1){var d=f[p];if(!u.box[d]){u.box[d]=!0;var m=4*d;if(this._circleAndRectCollide(l.x,l.y,l.radius,h[m+0],h[m+1],h[m+2],h[m+3])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var g=this.circleCells[r];if(null!==g)for(var y=this.circles,v=0,_=g;v<_.length;v+=1){var b=_[v];if(!u.circle[b]){u.circle[b]=!0;var x=3*b;if(this._circlesCollide(y[x],y[x+1],y[x+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[b])))return o.push(!0),!0}}},Kt.prototype._forEachCell=function(t,e,n,i,r,o,a,s){for(var l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(i),p=l;p<=c;p++)for(var f=u;f<=h;f++)if(r.call(this,t,e,n,i,this.xCellCount*f+p,o,a,s))return},Kt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Kt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Kt.prototype._circlesCollide=function(t,e,n,i,r,o){var a=i-t,s=r-e,l=n+o;return l*l>a*a+s*s},Kt.prototype._circleAndRectCollide=function(t,e,n,i,r,o,a){var s=(o-i)/2,l=Math.abs(t-(i+s));if(l>s+n)return!1;var u=(a-r)/2,c=Math.abs(e-(r+u));if(c>u+n)return!1;if(l<=s||c<=u)return!0;var h=l-s,p=c-u;return h*h+p*p<=n*n};var le=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ue(t,e){for(var n=0;n<t;n++){var i=e.length;e.resize(i+4),e.float32.set(le,3*i)}}function ce(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t[3]=n[3]*i+n[7]*r+n[15],t}var he=function(t,e,n){void 0===e&&(e=new Kt(t.width+200,t.height+200,25)),void 0===n&&(n=new Kt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function pe(e,n,i){return n*(t.EXTENT/(e.tileSize*Math.pow(2,i-e.tileID.overscaledZ)))}he.prototype.placeCollisionBox=function(t,e,n,i,r){var o=this.projectAndGetPerspectiveRatio(i,t.anchorPointX,t.anchorPointY),a=n*o.perspectiveRatio,s=t.x1*a+o.point.x,l=t.y1*a+o.point.y,u=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,l,u,c)||!e&&this.grid.hitTest(s,l,u,c,r)?{box:[],offscreen:!1}:{box:[s,l,u,c],offscreen:this.isOffscreen(s,l,u,c)}},he.prototype.placeCollisionCircles=function(e,n,i,r,o,a,s,l,u,c,h,p,f){var d=[],m=new t.Point(n.anchorX,n.anchorY),g=$t(m,a),y=te(this.transform.cameraToCenterDistance,g.signedDistanceFromCamera),v=(c?o/y:o*y)/t.ONE_EM,_=$t(m,s).point,b=ie(v,r,n.lineOffsetX*v,n.lineOffsetY*v,!1,_,m,n,i,s,{}),x=!1,w=!1,C=!0;if(b){for(var k=.5*p*y+f,E=new t.Point(-100,-100),S=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),I=new Yt,T=b.first,P=b.last,A=[],L=T.path.length-1;L>=1;L--)A.push(T.path[L]);for(var M=1;M<P.path.length;M++)A.push(P.path[M]);var R=2.5*k;if(l){var O=A.map((function(t){return $t(t,l)}));A=O.some((function(t){return t.signedDistanceFromCamera<=0}))?[]:O.map((function(t){return t.point}))}var D=[];if(A.length>0){for(var N=A[0].clone(),F=A[0].clone(),z=1;z<A.length;z++)N.x=Math.min(N.x,A[z].x),N.y=Math.min(N.y,A[z].y),F.x=Math.max(F.x,A[z].x),F.y=Math.max(F.y,A[z].y);D=N.x>=E.x&&F.x<=S.x&&N.y>=E.y&&F.y<=S.y?[A]:F.x<E.x||N.x>S.x||F.y<E.y||N.y>S.y?[]:t.clipLine([A],E.x,E.y,S.x,S.y)}for(var B=0,V=D;B<V.length;B+=1){var U;I.reset(V[B],.25*k),U=I.length<=.5*k?1:Math.ceil(I.paddedLength/R)+1;for(var j=0;j<U;j++){var q=j/Math.max(U-1,1),G=I.lerp(q),H=G.x+100,X=G.y+100;d.push(H,X,k,0);var Z=H-k,W=X-k,Y=H+k,K=X+k;if(C=C&&this.isOffscreen(Z,W,Y,K),w=w||this.isInsideGrid(Z,W,Y,K),!e&&this.grid.hitTestCircle(H,X,k,h)&&(x=!0,!u))return{circles:[],offscreen:!1,collisionDetected:x}}}}return{circles:!u&&x||!w?[]:d,offscreen:C,collisionDetected:x}},he.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],i=1/0,r=1/0,o=-1/0,a=-1/0,s=0,l=e;s<l.length;s+=1){var u=l[s],c=new t.Point(u.x+100,u.y+100);i=Math.min(i,c.x),r=Math.min(r,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),n.push(c)}for(var h={},p={},f=0,d=this.grid.query(i,r,o,a).concat(this.ignoredGrid.query(i,r,o,a));f<d.length;f+=1){var m=d[f],g=m.key;if(void 0===h[g.bucketInstanceId]&&(h[g.bucketInstanceId]={}),!h[g.bucketInstanceId][g.featureIndex]){var y=[new t.Point(m.x1,m.y1),new t.Point(m.x2,m.y1),new t.Point(m.x2,m.y2),new t.Point(m.x1,m.y2)];t.polygonIntersectsPolygon(n,y)&&(h[g.bucketInstanceId][g.featureIndex]=!0,void 0===p[g.bucketInstanceId]&&(p[g.bucketInstanceId]=[]),p[g.bucketInstanceId].push(g.featureIndex))}}return p},he.prototype.insertCollisionBox=function(t,e,n,i,r){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:i,collisionGroupID:r},t[0],t[1],t[2],t[3])},he.prototype.insertCollisionCircles=function(t,e,n,i,r){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:i,collisionGroupID:r},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},he.prototype.projectAndGetPerspectiveRatio=function(e,n,i){var r=[n,i,0,1];return ce(r,r,e),{point:new t.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},he.prototype.isOffscreen=function(t,e,n,i){return n<100||t>=this.screenRightBoundary||i<100||e>this.screenBottomBoundary},he.prototype.isInsideGrid=function(t,e,n,i){return n>=0&&t<this.gridRightBoundary&&i>=0&&e<this.gridBottomBoundary},he.prototype.getViewportMatrix=function(){var e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e};var fe=function(t,e,n,i){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):i&&n?1:0,this.placed=n};fe.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var de=function(t,e,n,i,r){this.text=new fe(t?t.text:null,e,n,r),this.icon=new fe(t?t.icon:null,e,i,r)};de.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var me=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},ge=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},ye=function(t,e,n,i,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=i,this.tileID=r},ve=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function _e(e,n,i,r,o){var a=t.getAnchorAlignment(e),s=-(a.horizontalAlign-.5)*n,l=-(a.verticalAlign-.5)*i,u=t.evaluateVariableOffset(e,r);return new t.Point(s+u[0]*o,l+u[1]*o)}function be(e,n,i,r,o,a){var s=e.x1,l=e.x2,u=e.y1,c=e.y2,h=e.anchorPointX,p=e.anchorPointY,f=new t.Point(n,i);return r&&f._rotate(o?a:-a),{x1:s+f.x,y1:u+f.y,x2:l+f.x,y2:c+f.y,anchorPointX:h,anchorPointY:p}}ve.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var xe=function(t,e,n,i){this.transform=t.clone(),this.collisionIndex=new he(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new ve(n),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}};function we(t,e,n,i,r){t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0)}xe.prototype.getBucketParts=function(e,n,i,r){var o=i.getBucket(n),a=i.latestFeatureIndex;if(o&&a&&n.id===o.layerIds[0]){var s=i.collisionBoxArray,l=o.layers[0].layout,u=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),c=i.tileSize/t.EXTENT,h=this.transform.calculatePosMatrix(i.tileID.toUnwrapped()),p="map"===l.get("text-pitch-alignment"),f="map"===l.get("text-rotation-alignment"),d=pe(i,1,this.transform.zoom),m=Jt(h,p,f,this.transform,d),g=null;if(p){var y=Qt(h,p,f,this.transform,d);g=t.multiply([],this.transform.labelPlaneMatrix,y)}this.retainedQueryData[o.bucketInstanceId]=new ye(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,i.tileID);var v={bucket:o,layout:l,posMatrix:h,textLabelPlaneMatrix:m,labelToScreenMatrix:g,scale:u,textPixelRatio:c,holdingForFade:i.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(r)for(var _=0,b=o.sortKeyRanges;_<b.length;_+=1){var x=b[_];e.push({sortKey:x.sortKey,symbolInstanceStart:x.symbolInstanceStart,symbolInstanceEnd:x.symbolInstanceEnd,parameters:v})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:v})}},xe.prototype.attemptAnchorPlacement=function(t,e,n,i,r,o,a,s,l,u,c,h,p,f,d){var m,g=[h.textOffset0,h.textOffset1],y=_e(t,n,i,g,r),v=this.collisionIndex.placeCollisionBox(be(e,y.x,y.y,o,a,this.transform.angle),c,s,l,u.predicate);if(!d||0!==this.collisionIndex.placeCollisionBox(be(d,y.x,y.y,o,a,this.transform.angle),c,s,l,u.predicate).box.length)return v.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(m=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:g,width:n,height:i,anchor:t,textBoxScale:r,prevAnchor:m},this.markUsedJustification(p,t,h,f),p.allowVerticalPlacement&&(this.markUsedOrientation(p,f,h),this.placedOrientations[h.crossTileID]=f),{shift:y,placedGlyphBoxes:v}):void 0},xe.prototype.placeLayerBucketPart=function(e,n,i){var r=this,o=e.parameters,a=o.bucket,s=o.layout,l=o.posMatrix,u=o.textLabelPlaneMatrix,c=o.labelToScreenMatrix,h=o.textPixelRatio,p=o.holdingForFade,f=o.collisionBoxArray,d=o.partiallyEvaluatedTextSize,m=o.collisionGroup,g=s.get("text-optional"),y=s.get("icon-optional"),v=s.get("text-allow-overlap"),_=s.get("icon-allow-overlap"),b="map"===s.get("text-rotation-alignment"),x="map"===s.get("text-pitch-alignment"),w="none"!==s.get("icon-text-fit"),C="viewport-y"===s.get("symbol-z-order"),k=v&&(_||!a.hasIconData()||y),E=_&&(v||!a.hasTextData()||g);!a.collisionArrays&&f&&a.deserializeCollisionBoxes(f);var S=function(e,o){if(!n[e.crossTileID])if(p)r.placements[e.crossTileID]=new me(!1,!1,!1);else{var f,C=!1,S=!1,I=!0,T=null,P={box:null,offscreen:null},A={box:null,offscreen:null},L=null,M=null,R=0,O=0,D=0;o.textFeatureIndex?R=o.textFeatureIndex:e.useRuntimeCollisionCircles&&(R=e.featureIndex),o.verticalTextFeatureIndex&&(O=o.verticalTextFeatureIndex);var N=o.textBox;if(N){var F=function(n){var i=t.WritingMode.horizontal;if(a.allowVerticalPlacement&&!n&&r.prevPlacement){var o=r.prevPlacement.placedOrientations[e.crossTileID];o&&(r.placedOrientations[e.crossTileID]=o,r.markUsedOrientation(a,i=o,e))}return i},z=function(n,i){if(a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&o.verticalTextBox)for(var r=0,s=a.writingModes;r<s.length&&(s[r]===t.WritingMode.vertical?(P=i(),A=P):P=n(),!(P&&P.box&&P.box.length));r+=1);else P=n()};if(s.get("text-variable-anchor")){var B=s.get("text-variable-anchor");if(r.prevPlacement&&r.prevPlacement.variableOffsets[e.crossTileID]){var V=r.prevPlacement.variableOffsets[e.crossTileID];B.indexOf(V.anchor)>0&&(B=B.filter((function(t){return t!==V.anchor}))).unshift(V.anchor)}var U=function(t,n,i){for(var o=t.x2-t.x1,s=t.y2-t.y1,u=e.textBoxScale,c=w&&!_?n:null,p={box:[],offscreen:!1},f=v?2*B.length:B.length,d=0;d<f;++d){var g=r.attemptAnchorPlacement(B[d%B.length],t,o,s,u,b,x,h,l,m,d>=B.length,e,a,i,c);if(g&&(p=g.placedGlyphBoxes)&&p.box&&p.box.length){C=!0,T=g.shift;break}}return p};z((function(){return U(N,o.iconBox,t.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&!(P&&P.box&&P.box.length)&&e.numVerticalGlyphVertices>0&&n?U(n,o.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),P&&(C=P.box,I=P.offscreen);var j=F(P&&P.box);if(!C&&r.prevPlacement){var q=r.prevPlacement.variableOffsets[e.crossTileID];q&&(r.variableOffsets[e.crossTileID]=q,r.markUsedJustification(a,q.anchor,e,j))}}else{var G=function(t,n){var i=r.collisionIndex.placeCollisionBox(t,v,h,l,m.predicate);return i&&i.box&&i.box.length&&(r.markUsedOrientation(a,n,e),r.placedOrientations[e.crossTileID]=n),i};z((function(){return G(N,t.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?G(n,t.WritingMode.vertical):{box:null,offscreen:null}})),F(P&&P.box&&P.box.length)}}if(C=(f=P)&&f.box&&f.box.length>0,I=f&&f.offscreen,e.useRuntimeCollisionCircles){var H=a.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),X=t.evaluateSizeForFeature(a.textSizeData,d,H),Z=s.get("text-padding");L=r.collisionIndex.placeCollisionCircles(v,H,a.lineVertexArray,a.glyphOffsetArray,X,l,u,c,i,x,m.predicate,e.collisionCircleDiameter,Z),C=v||L.circles.length>0&&!L.collisionDetected,I=I&&L.offscreen}if(o.iconFeatureIndex&&(D=o.iconFeatureIndex),o.iconBox){var W=function(t){var e=w&&T?be(t,T.x,T.y,b,x,r.transform.angle):t;return r.collisionIndex.placeCollisionBox(e,_,h,l,m.predicate)};S=A&&A.box&&A.box.length&&o.verticalIconBox?(M=W(o.verticalIconBox)).box.length>0:(M=W(o.iconBox)).box.length>0,I=I&&M.offscreen}var Y=g||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,K=y||0===e.numIconVertices;if(Y||K?K?Y||(S=S&&C):C=S&&C:S=C=S&&C,C&&f&&f.box&&r.collisionIndex.insertCollisionBox(f.box,s.get("text-ignore-placement"),a.bucketInstanceId,A&&A.box&&O?O:R,m.ID),S&&M&&r.collisionIndex.insertCollisionBox(M.box,s.get("icon-ignore-placement"),a.bucketInstanceId,D,m.ID),L&&(C&&r.collisionIndex.insertCollisionCircles(L.circles,s.get("text-ignore-placement"),a.bucketInstanceId,R,m.ID),i)){var J=a.bucketInstanceId,Q=r.collisionCircleArrays[J];void 0===Q&&(Q=r.collisionCircleArrays[J]=new ge);for(var $=0;$<L.circles.length;$+=4)Q.circles.push(L.circles[$+0]),Q.circles.push(L.circles[$+1]),Q.circles.push(L.circles[$+2]),Q.circles.push(L.collisionDetected?1:0)}r.placements[e.crossTileID]=new me(C||k,S||E,I||a.justReloaded),n[e.crossTileID]=!0}};if(C)for(var I=a.getSortedSymbolIndexes(this.transform.angle),T=I.length-1;T>=0;--T){var P=I[T];S(a.symbolInstances.get(P),a.collisionArrays[P])}else for(var A=e.symbolInstanceStart;A<e.symbolInstanceEnd;A++)S(a.symbolInstances.get(A),a.collisionArrays[A]);if(i&&a.bucketInstanceId in this.collisionCircleArrays){var L=this.collisionCircleArrays[a.bucketInstanceId];t.invert(L.invProjMatrix,l),L.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1},xe.prototype.markUsedJustification=function(e,n,i,r){var o;o=r===t.WritingMode.vertical?i.verticalPlacedTextSymbolIndex:{left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(n)];for(var a=0,s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];a<s.length;a+=1){var l=s[a];l>=0&&(e.text.placedSymbolArray.get(l).crossTileID=o>=0&&l!==o?0:i.crossTileID)}},xe.prototype.markUsedOrientation=function(e,n,i){for(var r=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,a=0,s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];a<s.length;a+=1)e.text.placedSymbolArray.get(s[a]).placedOrientation=r;i.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=o)},xe.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var i=e?e.symbolFadeChange(t):1,r=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],u=r[s];u?(this.opacities[s]=new de(u,i,l.text,l.icon),n=n||l.text!==u.text.placed||l.icon!==u.icon.placed):(this.opacities[s]=new de(null,i,l.text,l.icon,l.skipFade),n=n||l.text||l.icon)}for(var c in r){var h=r[c];if(!this.opacities[c]){var p=new de(h,i,!1,!1);p.isHidden()||(this.opacities[c]=p,n=n||h.text.placed||h.icon.placed)}}for(var f in o)this.variableOffsets[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.variableOffsets[f]=o[f]);for(var d in a)this.placedOrientations[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.placedOrientations[d]=a[d]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},xe.prototype.updateLayerOpacities=function(t,e){for(var n={},i=0,r=e;i<r.length;i+=1){var o=r[i],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},xe.prototype.updateBucketOpacities=function(e,n,i){var r=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();var o=e.layers[0].layout,a=new de(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),l=o.get("icon-allow-overlap"),u=o.get("text-variable-anchor"),c="map"===o.get("text-rotation-alignment"),h="map"===o.get("text-pitch-alignment"),p="none"!==o.get("icon-text-fit"),f=new de(null,0,s&&(l||!e.hasIconData()||o.get("icon-optional")),l&&(s||!e.hasTextData()||o.get("text-optional")),!0);!e.collisionArrays&&i&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(i);for(var d=function(t,e,n){for(var i=0;i<e/4;i++)t.opacityVertexArray.emplaceBack(n)},m=function(i){var o=e.symbolInstances.get(i),s=o.numHorizontalGlyphVertices,l=o.numVerticalGlyphVertices,m=o.crossTileID,g=r.opacities[m];n[m]?g=a:g||(r.opacities[m]=g=f),n[m]=!0;var y=o.numIconVertices>0,v=r.placedOrientations[o.crossTileID],_=v===t.WritingMode.vertical,b=v===t.WritingMode.horizontal||v===t.WritingMode.horizontalOnly;if(s>0||l>0){var x=Ae(g.text);d(e.text,s,_?Le:x),d(e.text,l,b?Le:x);var w=g.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=w||_?1:0)})),o.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=w||b?1:0);var C=r.variableOffsets[o.crossTileID];C&&r.markUsedJustification(e,C.anchor,o,v);var k=r.placedOrientations[o.crossTileID];k&&(r.markUsedJustification(e,"left",o,k),r.markUsedOrientation(e,k,o))}if(y){var E=Ae(g.icon),S=!(p&&o.verticalPlacedIconSymbolIndex&&_);o.placedIconSymbolIndex>=0&&(d(e.icon,o.numIconVertices,S?E:Le),e.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=g.icon.isHidden()),o.verticalPlacedIconSymbolIndex>=0&&(d(e.icon,o.numVerticalIconVertices,S?Le:E),e.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=g.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){var I=e.collisionArrays[i];if(I){var T=new t.Point(0,0);if(I.textBox||I.verticalTextBox){var P=!0;if(u){var A=r.variableOffsets[m];A?(T=_e(A.anchor,A.width,A.height,A.textOffset,A.textBoxScale),c&&T._rotate(h?r.transform.angle:-r.transform.angle)):P=!1}I.textBox&&we(e.textCollisionBox.collisionVertexArray,g.text.placed,!P||_,T.x,T.y),I.verticalTextBox&&we(e.textCollisionBox.collisionVertexArray,g.text.placed,!P||b,T.x,T.y)}var L=Boolean(!b&&I.verticalIconBox);I.iconBox&&we(e.iconCollisionBox.collisionVertexArray,g.icon.placed,L,p?T.x:0,p?T.y:0),I.verticalIconBox&&we(e.iconCollisionBox.collisionVertexArray,g.icon.placed,!L,p?T.x:0,p?T.y:0)}}},g=0;g<e.symbolInstances.length;g++)m(g);if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){var y=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=y.invProjMatrix,e.placementViewportMatrix=y.viewportMatrix,e.collisionCircleArray=y.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}},xe.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},xe.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},xe.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},xe.prototype.stillRecent=function(t,e){var n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t},xe.prototype.setStale=function(){this.stale=!0};var Ce=Math.pow(2,25),ke=Math.pow(2,24),Ee=Math.pow(2,17),Se=Math.pow(2,16),Ie=Math.pow(2,9),Te=Math.pow(2,8),Pe=Math.pow(2,1);function Ae(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*Ce+e*ke+n*Ee+e*Se+n*Ie+e*Te+n*Pe+e}var Le=0,Me=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Me.prototype.continuePlacement=function(t,e,n,i,r){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,i,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((function(t,e){return t.sortKey-e.sortKey})));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,r())return!0;return!1};var Re=function(t,e,n,i,r,o,a){this.placement=new xe(t,r,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=i,this._done=!1};Re.prototype.isDone=function(){return this._done},Re.prototype.continuePlacement=function(e,n,i){for(var r=this,o=t.browser.now(),a=function(){var e=t.browser.now()-o;return!r._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=n[e[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new Me(s)),this._inProgressLayer.continuePlacement(i[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Re.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Oe=512/t.EXTENT/2,De=function(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var i=0;i<e.length;i++){var r=e.get(i),o=r.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,t)})}};De.prototype.getScaledCoordinates=function(e,n){var i=Oe/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*i),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*i)}},De.prototype.findMatches=function(t,e,n){for(var i=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),r=0;r<t.length;r++){var o=t.get(r);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),l=0,u=a;l<u.length;l+=1){var c=u[l];if(Math.abs(c.coord.x-s.x)<=i&&Math.abs(c.coord.y-s.y)<=i&&!n[c.crossTileID]){n[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var Ne=function(){this.maxCrossTileID=0};Ne.prototype.generate=function(){return++this.maxCrossTileID};var Fe=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Fe.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var i=this.indexes[n],r={};for(var o in i){var a=i[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),r[a.tileID.key]=a}this.indexes[n]=r}this.lng=t},Fe.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var i=0;i<e.symbolInstances.length;i++)e.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var r=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var l=a[s];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,r)}else{var u=a[t.scaledTo(Number(o)).key];u&&u.findMatches(e.symbolInstances,t,r)}}for(var c=0;c<e.symbolInstances.length;c++){var h=e.symbolInstances.get(c);h.crossTileID||(h.crossTileID=n.generate(),r[h.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new De(t,e.symbolInstances,e.bucketInstanceId),!0},Fe.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var i=0,r=e.indexedSymbolInstances[n];i<r.length;i+=1)delete this.usedCrossTileIDs[t][r[i].crossTileID]},Fe.prototype.removeStaleBuckets=function(t){var e=!1;for(var n in this.indexes){var i=this.indexes[n];for(var r in i)t[i[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,i[r]),delete i[r],e=!0)}return e};var ze=function(){this.layerIndexes={},this.crossTileIDs=new Ne,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ze.prototype.addLayer=function(t,e,n){var i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new Fe);var r=!1,o={};i.handleWrapJump(n);for(var a=0,s=e;a<s.length;a+=1){var l=s[a],u=l.getBucket(t);u&&t.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(l.tileID,u,this.crossTileIDs)&&(r=!0),o[u.bucketInstanceId]=!0)}return i.removeStaleBuckets(o)&&(r=!0),r},ze.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[n]||delete this.layerIndexes[n]};var Be=function(e,n){return t.emitValidationErrors(e,n&&n.filter((function(t){return"source.canvas"!==t.identifier})))},Ve=t.pick(Ut,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ue=t.pick(Ut,["setCenter","setZoom","setBearing","setPitch"]),je=function(){var e={},n=t.styleSpec.$version;for(var i in t.styleSpec.$root){var r,o=t.styleSpec.$root[i];o.required&&null!=(r="version"===i?n:"array"===o.type?[]:{})&&(e[i]=r)}return e}(),qe=function(e){function n(i,r){var o=this;void 0===r&&(r={}),e.call(this),this.map=i,this.dispatcher=new k(zt(),this),this.imageManager=new p,this.imageManager.setEventedParent(this),this.glyphManager=new _(i._requestManager,r.localIdeographFontFamily),this.lineAtlas=new C(256,512),this.crossTileSymbolIndex=new ze,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=n.registerForPluginStateChange((function(e){a.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(function(e,n){if(t.triggerPluginCompletionEvent(e),n&&n.every((function(t){return t})))for(var i in a.sourceCaches)a.sourceCaches[i].reload()}))})),this.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var i in o._layers){var r=o._layers[i];r.source===n.id&&o._validateLayer(r)}}}}))}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadURL=function(e,n){var i=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var r="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);var o=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,(function(e,n){i._request=null,e?i.fire(new t.ErrorEvent(e)):n&&i._load(n,r)}))},n.prototype.loadJSON=function(e,n){var i=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame((function(){i._request=null,i._load(e,!1!==n.validate)}))},n.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(je,!1)},n.prototype._load=function(e,n){if(!n||!Be(this,t.validateStyle(e))){for(var i in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(i,e.sources[i],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var r=Vt(this.stylesheet.layers);this._order=r.map((function(t){return t.id})),this._layers={},this._serializedLayers={};for(var o=0,a=r;o<a.length;o+=1){var s=a[o];(s=t.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},n.prototype._loadSprite=function(e){var n=this;this._spriteRequest=function(e,n,i){var r,o,a,s=t.browser.devicePixelRatio>1?"@2x":"",l=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),(function(t,e){l=null,a||(a=t,r=e,c())})),u=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),(function(t,e){u=null,a||(a=t,o=e,c())}));function c(){if(a)i(a);else if(r&&o){var e=t.browser.getImageData(o),n={};for(var s in r){var l=r[s],u=l.width,c=l.height,h=l.x,p=l.y,f=l.sdf,d=l.pixelRatio,m=l.stretchX,g=l.stretchY,y=l.content,v=new t.RGBAImage({width:u,height:c});t.RGBAImage.copy(e,v,{x:h,y:p},{x:0,y:0},{width:u,height:c}),n[s]={data:v,pixelRatio:d,sdf:f,stretchX:m,stretchY:g,content:y}}i(null,n)}}return{cancel:function(){l&&(l.cancel(),l=null),u&&(u.cancel(),u=null)}}}(e,this.map._requestManager,(function(e,i){if(n._spriteRequest=null,e)n.fire(new t.ErrorEvent(e));else if(i)for(var r in i)n.imageManager.addImage(r,i[r]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.fire(new t.Event("data",{dataType:"style"}))}))},n.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var i=e.sourceLayer;if(i){var r=n.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(i))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+i+'" does not exist on source "'+r.id+'" as specified by style layer "'+e.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(t){for(var e=[],n=0,i=t;n<i.length;n+=1){var r=this._layers[i[n]];"custom"!==r.type&&e.push(r.serialize())}return e},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(e){if(this._loaded){var n=this._changed;if(this._changed){var i=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var o in(i.length||r.length)&&this._updateWorkerLayers(i,r),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var l in this.sourceCaches)this.sourceCaches[l].used=!1;for(var u=0,c=this._order;u<c.length;u+=1){var h=this._layers[c[u]];h.recalculate(e,this._availableImages),!h.isHidden(e.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.Event("data",{dataType:"style"}))}},n.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},n.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},n.prototype.setState=function(e){var n=this;if(this._checkLoaded(),Be(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=Vt(e.layers);var i=function(e,n){if(!e)return[{command:Ut.setStyle,args:[n]}];var i=[];try{if(!t.deepEqual(e.version,n.version))return[{command:Ut.setStyle,args:[n]}];t.deepEqual(e.center,n.center)||i.push({command:Ut.setCenter,args:[n.center]}),t.deepEqual(e.zoom,n.zoom)||i.push({command:Ut.setZoom,args:[n.zoom]}),t.deepEqual(e.bearing,n.bearing)||i.push({command:Ut.setBearing,args:[n.bearing]}),t.deepEqual(e.pitch,n.pitch)||i.push({command:Ut.setPitch,args:[n.pitch]}),t.deepEqual(e.sprite,n.sprite)||i.push({command:Ut.setSprite,args:[n.sprite]}),t.deepEqual(e.glyphs,n.glyphs)||i.push({command:Ut.setGlyphs,args:[n.glyphs]}),t.deepEqual(e.transition,n.transition)||i.push({command:Ut.setTransition,args:[n.transition]}),t.deepEqual(e.light,n.light)||i.push({command:Ut.setLight,args:[n.light]});var r={},o=[];!function(e,n,i,r){var o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||qt(o,i,r));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.deepEqual(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&Ht(e,n,o)?i.push({command:Ut.setGeoJSONSourceData,args:[o,n[o].data]}):Gt(o,n,i,r)):jt(o,n,i))}(e.sources,n.sources,o,r);var a=[];e.layers&&e.layers.forEach((function(t){r[t.source]?i.push({command:Ut.removeLayer,args:[t.id]}):a.push(t)})),i=i.concat(o),function(e,n,i){n=n||[];var r,o,a,s,l,u,c,h=(e=e||[]).map(Zt),p=n.map(Zt),f=e.reduce(Wt,{}),d=n.reduce(Wt,{}),m=h.slice(),g=Object.create(null);for(r=0,o=0;r<h.length;r++)d.hasOwnProperty(a=h[r])?o++:(i.push({command:Ut.removeLayer,args:[a]}),m.splice(m.indexOf(a,o),1));for(r=0,o=0;r<p.length;r++)m[m.length-1-r]!==(a=p[p.length-1-r])&&(f.hasOwnProperty(a)?(i.push({command:Ut.removeLayer,args:[a]}),m.splice(m.lastIndexOf(a,m.length-o),1)):o++,i.push({command:Ut.addLayer,args:[d[a],u=m[m.length-r]]}),m.splice(m.length-r,0,a),g[a]=!0);for(r=0;r<p.length;r++)if(s=f[a=p[r]],l=d[a],!g[a]&&!t.deepEqual(s,l))if(t.deepEqual(s.source,l.source)&&t.deepEqual(s["source-layer"],l["source-layer"])&&t.deepEqual(s.type,l.type)){for(c in Xt(s.layout,l.layout,i,a,null,Ut.setLayoutProperty),Xt(s.paint,l.paint,i,a,null,Ut.setPaintProperty),t.deepEqual(s.filter,l.filter)||i.push({command:Ut.setFilter,args:[a,l.filter]}),t.deepEqual(s.minzoom,l.minzoom)&&t.deepEqual(s.maxzoom,l.maxzoom)||i.push({command:Ut.setLayerZoomRange,args:[a,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Xt(s[c],l[c],i,a,c.slice(6),Ut.setPaintProperty):t.deepEqual(s[c],l[c])||i.push({command:Ut.setLayerProperty,args:[a,c,l[c]]}));for(c in l)l.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Xt(s[c],l[c],i,a,c.slice(6),Ut.setPaintProperty):t.deepEqual(s[c],l[c])||i.push({command:Ut.setLayerProperty,args:[a,c,l[c]]}))}else i.push({command:Ut.removeLayer,args:[a]}),u=m[m.lastIndexOf(a)+1],i.push({command:Ut.addLayer,args:[l,u]})}(a,n.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:Ut.setStyle,args:[n]}]}return i}(this.serialize(),e).filter((function(t){return!(t.command in Ue)}));if(0===i.length)return!1;var r=i.filter((function(t){return!(t.command in Ve)}));if(r.length>0)throw new Error("Unimplemented: "+r.map((function(t){return t.command})).join(", ")+".");return i.forEach((function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)})),this.stylesheet=e,!0},n.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},n.prototype.getImage=function(t){return this.imageManager.getImage(t)},n.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(e,n,i){var r=this;if(void 0===i&&(i={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,n,null,i))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[e]=new At(e,n,this.dispatcher);o.style=this,o.setEventedParent(this,(function(){return{isSourceLoaded:r.loaded(),source:o.serialize(),sourceId:e}})),o.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var i=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],i.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),i.setEventedParent(null),i.clearTiles(),i.onRemove&&i.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},n.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},n.prototype.addLayer=function(e,n,i){void 0===i&&(i={}),this._checkLoaded();var r=e.id;if(this.getLayer(r))this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" already exists on this map')));else{var o;if("custom"===e.type){if(Be(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=t.clone$1(e),e=t.extend(e,{source:r})),this._validate(t.validateStyle.layer,"layers."+r,e,{arrayIndex:-1},i))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[o.id]=o.serialize()}var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(a,0,r),this._layerOrderChanged=!0,this._layers[r]=o,this._removedLayers[r]&&o.source&&"custom"!==o.type){var s=this._removedLayers[r];delete this._removedLayers[r],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},n.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var i=this._order.indexOf(e);this._order.splice(i,1);var r=n?this._order.indexOf(n):this._order.length;n&&-1===r?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(r,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var i=this._order.indexOf(e);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(t){return this._layers[t]},n.prototype.hasLayer=function(t){return t in this._layers},n.prototype.setLayerZoomRange=function(e,n,i){this._checkLoaded();var r=this.getLayer(e);r?r.minzoom===n&&r.maxzoom===i||(null!=n&&(r.minzoom=n),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(e,n,i){void 0===i&&(i={}),this._checkLoaded();var r=this.getLayer(e);if(r){if(!t.deepEqual(r.filter,n))return null==n?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(t.validateStyle.filter,"layers."+r.id+".filter",n,null,i)||(r.filter=t.clone$1(n),this._updateLayer(r)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},n.prototype.setLayoutProperty=function(e,n,i,r){void 0===r&&(r={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getLayoutProperty(n),i)||(o.setLayoutProperty(n,i,r),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(e,n){var i=this.getLayer(e);if(i)return i.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},n.prototype.setPaintProperty=function(e,n,i,r){void 0===r&&(r={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getPaintProperty(n),i)||(o.setPaintProperty(n,i,r)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},n.prototype.setFeatureState=function(e,n){this._checkLoaded();var i=e.source,r=e.sourceLayer,o=this.sourceCaches[i];if(void 0!==o){var a=o.getSource().type;"geojson"===a&&r?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||r?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(r,e.id,n)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},n.prototype.removeFeatureState=function(e,n){this._checkLoaded();var i=e.source,r=this.sourceCaches[i];if(void 0!==r){var o=r.getSource().type,a="vector"===o?e.sourceLayer:void 0;"vector"!==o||a?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):r.removeFeatureState(a,e.id,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(e){this._checkLoaded();var n=e.source,i=e.sourceLayer,r=this.sourceCaches[n];if(void 0!==r){if("vector"!==r.getSource().type||i)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),r.getFeatureState(i,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(function(t){return t.serialize()})),layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))},n.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},n.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,n=function(t){return"fill-extrusion"===e._layers[t].type},i={},r=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(n(a)){i[a]=o;for(var s=0,l=t;s<l.length;s+=1){var u=l[s][a];if(u)for(var c=0,h=u;c<h.length;c+=1)r.push(h[c])}}}r.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var p=[],f=this._order.length-1;f>=0;f--){var d=this._order[f];if(n(d))for(var m=r.length-1;m>=0;m--){var g=r[m].feature;if(i[g.layer.id]<f)break;p.push(g),r.pop()}else for(var y=0,v=t;y<v.length;y+=1){var _=v[y][d];if(_)for(var b=0,x=_;b<x.length;b+=1)p.push(x[b].feature)}}return p},n.prototype.queryRenderedFeatures=function(e,n,i){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);var r={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=n.layers;o<a.length;o+=1){var s=a[o],l=this._layers[s];if(!l)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];r[l.source]=!0}}var u=[];for(var c in n.availableImages=this._availableImages,this.sourceCaches)n.layers&&!r[c]||u.push(F(this.sourceCaches[c],this._layers,this._serializedLayers,e,n,i));return this.placement&&u.push(function(t,e,n,i,r,o,a){for(var s={},l=o.queryRenderedSymbols(i),u=[],c=0,h=Object.keys(l).map(Number);c<h.length;c+=1)u.push(a[h[c]]);u.sort(z);for(var p=function(){var n=d[f],i=n.featureIndex.lookupSymbolFeatures(l[n.bucketInstanceId],e,n.bucketIndex,n.sourceLayerIndex,r.filter,r.layers,r.availableImages,t);for(var o in i){var a=s[o]=s[o]||[],u=i[o];u.sort((function(t,e){var i=n.featureSortOrder;if(i){var r=i.indexOf(t.featureIndex);return i.indexOf(e.featureIndex)-r}return e.featureIndex-t.featureIndex}));for(var c=0,h=u;c<h.length;c+=1)a.push(h[c])}},f=0,d=u;f<d.length;f+=1)p();var m=function(e){s[e].forEach((function(i){var r=i.feature,o=n[t[e].source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=o}))};for(var g in s)m(g);return s}(this._layers,this._serializedLayers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(u)},n.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);var i=this.sourceCaches[e];return i?function(t,e){for(var n=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),i=[],r={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;r[s]||(r[s]=!0,a.querySourceFeatures(i,e))}return i}(i,n):[]},n.prototype.addSourceType=function(t,e,i){return n.getSourceType(t)?i(new Error('A source type called "'+t+'" already exists.')):(n.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},i):i(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(e,n){void 0===n&&(n={}),this._checkLoaded();var i=this.light.getLight(),r=!1;for(var o in e)if(!t.deepEqual(e[o],i[o])){r=!0;break}if(r){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(a)}},n.prototype._validate=function(e,n,i,r,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&Be(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:i,styleSpec:t.styleSpec},r)))},n.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var n in this.sourceCaches)this.sourceCaches[n].clearTiles(),this.sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},n.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},n.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},n.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},n.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},n.prototype._updatePlacement=function(e,n,i,r,o){void 0===o&&(o=!1);for(var a=!1,s=!1,l={},u=0,c=this._order;u<c.length;u+=1){var h=this._layers[c[u]];if("symbol"===h.type){if(!l[h.source]){var p=this.sourceCaches[h.source];l[h.source]=p.getRenderableIds(!0).map((function(t){return p.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var f=this.crossTileSymbolIndex.addLayer(h,l[h.source],e.center.lng);a=a||f}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===i)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new Re(e,this._order,o,n,i,r,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(var d=0,m=this._order;d<m.length;d+=1){var g=this._layers[m[d]];"symbol"===g.type&&this.placement.updateLayerOpacities(g,l[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},n.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();var i=this.sourceCaches[e.source];i&&i.setDependencies(e.tileID.key,e.type,e.icons)},n.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},n.prototype.getResource=function(e,n,i){return t.makeRequest(n,i)},n}(t.Evented);qe.getSourceType=function(t){return D[t]},qe.setSourceType=function(t,e){D[t]=e},qe.registerForPluginStateChange=t.registerForPluginStateChange;var Ge=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),He=vn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Xe=vn("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ze=vn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),We=vn("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Ye=vn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ke=vn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Je=vn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Qe=vn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),$e=vn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),tn=vn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),en=vn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),nn=vn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),rn=vn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),on=vn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),an=vn("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),sn=vn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),ln=vn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),un=vn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),cn=vn("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),hn=vn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),pn=vn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),fn=vn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),dn=vn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),mn=vn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),gn=vn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),yn=vn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function vn(t,e){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=e.match(/attribute ([\w]+) ([\w]+)/g),r=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(r):r,s={};return{fragmentSource:t=t.replace(n,(function(t,e,n,i,r){return s[r]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nvarying "+n+" "+i+" "+r+";\n#else\nuniform "+n+" "+i+" u_"+r+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+r+"\n    "+n+" "+i+" "+r+" = u_"+r+";\n#endif\n"})),vertexSource:e=e.replace(n,(function(t,e,n,i,r){var o="float"===i?"vec2":"vec4",a=r.match(/color/)?"color":o;return s[r]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nuniform lowp float u_"+r+"_t;\nattribute "+n+" "+o+" a_"+r+";\nvarying "+n+" "+i+" "+r+";\n#else\nuniform "+n+" "+i+" u_"+r+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+r+" = a_"+r+";\n#else\n    "+n+" "+i+" "+r+" = u_"+r+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+r+" = unpack_mix_"+a+"(a_"+r+", u_"+r+"_t);\n#else\n    "+n+" "+i+" "+r+" = u_"+r+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nuniform lowp float u_"+r+"_t;\nattribute "+n+" "+o+" a_"+r+";\n#else\nuniform "+n+" "+i+" u_"+r+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+n+" "+i+" "+r+" = a_"+r+";\n#else\n    "+n+" "+i+" "+r+" = u_"+r+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+n+" "+i+" "+r+" = unpack_mix_"+a+"(a_"+r+", u_"+r+"_t);\n#else\n    "+n+" "+i+" "+r+" = u_"+r+";\n#endif\n"})),staticAttributes:i,staticUniforms:a}}var _n=Object.freeze({__proto__:null,prelude:He,background:Xe,backgroundPattern:Ze,circle:We,clippingMask:Ye,heatmap:Ke,heatmapTexture:Je,collisionBox:Qe,collisionCircle:$e,debug:tn,fill:en,fillOutline:nn,fillOutlinePattern:rn,fillPattern:on,fillExtrusion:an,fillExtrusionPattern:sn,hillshadePrepare:ln,hillshade:un,line:cn,lineGradient:hn,linePattern:pn,lineSDF:fn,raster:dn,symbolIcon:mn,symbolSDF:gn,symbolTextAndIcon:yn}),bn=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function xn(t){for(var e=[],n=0;n<t.length;n++)if(null!==t[n]){var i=t[n].split(" ");e.push(i.pop())}return e}bn.prototype.bind=function(t,e,n,i,r,o,a,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==i.length,u=0;!l&&u<i.length;u++)this.boundPaintVertexBuffers[u]!==i[u]&&(l=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!l&&this.boundIndexBuffer===r&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind()):this.freshBind(e,n,i,r,o,a,s)},bn.prototype.freshBind=function(t,e,n,i,r,o,a){var s,l=t.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=u.currentNumAttributes||0;for(var h=l;h<s;h++)c.disableVertexAttribArray(h)}e.enableAttributes(c,t);for(var p=0,f=n;p<f.length;p+=1)f[p].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,r);for(var d=0,m=n;d<m.length;d+=1){var g=m[d];g.bind(),g.setVertexAttribPointers(c,t,r)}o&&(o.bind(),o.setVertexAttribPointers(c,t,r)),i&&i.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,r)),u.currentNumAttributes=l},bn.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var wn=function(t,e,n,i,r,o){var a=t.gl;this.program=a.createProgram();for(var s=xn(n.staticAttributes),l=i?i.getBinderAttributes():[],u=s.concat(l),c=n.staticUniforms?xn(n.staticUniforms):[],h=i?i.getBinderUniforms():[],p=[],f=0,d=c.concat(h);f<d.length;f+=1){var m=d[f];p.indexOf(m)<0&&p.push(m)}var g=i?i.defines():[];o&&g.push("#define OVERDRAW_INSPECTOR;");var y=g.concat(He.fragmentSource,n.fragmentSource).join("\n"),v=g.concat(He.vertexSource,n.vertexSource).join("\n"),_=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(_,y),a.compileShader(_),a.attachShader(this.program,_);var b=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(b,v),a.compileShader(b),a.attachShader(this.program,b),this.attributes={};var x={};this.numAttributes=u.length;for(var w=0;w<this.numAttributes;w++)u[w]&&(a.bindAttribLocation(this.program,w,u[w]),this.attributes[u[w]]=w);a.linkProgram(this.program),a.deleteShader(b),a.deleteShader(_);for(var C=0;C<p.length;C++){var k=p[C];if(k&&!x[k]){var E=a.getUniformLocation(this.program,k);E&&(x[k]=E)}}this.fixedUniforms=r(t,x),this.binderUniforms=i?i.getUniforms(t,x):[]}}};function Cn(t,e,n){var i=1/pe(n,1,e.transform.tileZoom),r=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,e.transform.tileZoom)/r,a=o*(n.tileID.canonical.x+n.tileID.wrap*r),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[i,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}wn.prototype.draw=function(t,e,n,i,r,o,a,s,l,u,c,h,p,f,d,m){var g,y=t.gl;if(!this.failedToCreate){for(var v in t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(i),t.setColorMode(r),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[v].set(a[v]);f&&f.setUniforms(t,this.binderUniforms,h,{zoom:p});for(var _=(g={},g[y.LINES]=2,g[y.TRIANGLES]=3,g[y.LINE_STRIP]=1,g)[e],b=0,x=c.get();b<x.length;b+=1){var w=x[b],C=w.vaos||(w.vaos={});(C[s]||(C[s]=new bn)).bind(t,this,l,f?f.getPaintVertexBuffers():[],u,w.vertexOffset,d,m),y.drawElements(e,w.primitiveLength*_,y.UNSIGNED_SHORT,w.primitiveOffset*_*2)}}};var kn=function(e,n,i,r){var o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=t.create$1();"viewport"===o.properties.get("anchor")&&t.fromRotation(l,-n.transform.angle),t.transformMat3(s,s,l);var u=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+i,u_opacity:r}},En=function(e,n,i,r,o,a,s){return t.extend(kn(e,n,i,r),Cn(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8})},Sn=function(t){return{u_matrix:t}},In=function(e,n,i,r){return t.extend(Sn(e),Cn(i,n,r))},Tn=function(t,e){return{u_matrix:t,u_world:e}},Pn=function(e,n,i,r,o){return t.extend(In(e,n,i,r),{u_world:o})},An=function(e,n,i,r){var o,a,s=e.transform;if("map"===r.paint.get("circle-pitch-alignment")){var l=pe(i,1,s.zoom);o=!0,a=[l,l]}else o=!1,a=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(n.posMatrix,i,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:a}},Ln=function(t,e,n){var i=pe(n,1,e.zoom),r=Math.pow(2,e.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:i,u_extrude_scale:[e.pixelsToGLUnits[0]/(i*r),e.pixelsToGLUnits[1]/(i*r)],u_overscale_factor:o}},Mn=function(t,e,n){return{u_matrix:t,u_inv_matrix:e,u_camera_to_center_distance:n.cameraToCenterDistance,u_viewport_size:[n.width,n.height]}},Rn=function(t,e,n){return void 0===n&&(n=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:n}},On=function(t){return{u_matrix:t}},Dn=function(t,e,n,i){return{u_matrix:t,u_extrude_scale:pe(e,1,n),u_intensity:i}},Nn=function(e,n,i){var r=e.transform;return{u_matrix:Un(e,n,i),u_ratio:1/pe(n,1,r.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},Fn=function(e,n,i){return t.extend(Nn(e,n,i),{u_image:0})},zn=function(e,n,i,r){var o=e.transform,a=Vn(n,o);return{u_matrix:Un(e,n,i),u_texsize:n.imageAtlasTexture.size,u_ratio:1/pe(n,1,o.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[a,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Bn=function(e,n,i,r,o){var a=e.lineAtlas,s=Vn(n,e.transform),l="round"===i.layout.get("line-cap"),u=a.getDash(r.from,l),c=a.getDash(r.to,l),h=u.width*o.fromScale,p=c.width*o.toScale;return t.extend(Nn(e,n,i),{u_patternscale_a:[s/h,-u.height/2],u_patternscale_b:[s/p,-c.height/2],u_sdfgamma:a.width/(256*Math.min(h,p)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:c.y,u_mix:o.t})};function Vn(t,e){return 1/pe(t,1,e.tileZoom)}function Un(t,e,n){return t.translatePosMatrix(e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var jn=function(t,e,n,i,r){return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(a=r.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=r.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:qn(r.paint.get("raster-hue-rotate"))};var o,a};function qn(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}var Gn,Hn=function(t,e,n,i,r,o,a,s,l,u){var c=r.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+i,u_texsize:u,u_texture:0}},Xn=function(e,n,i,r,o,a,s,l,u,c,h){var p=o.transform;return t.extend(Hn(e,n,i,r,o,a,s,l,u,c),{u_gamma_scale:r?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+h})},Zn=function(e,n,i,r,o,a,s,l,u,c){return t.extend(Xn(e,n,i,r,o,a,s,l,!0,u,!0),{u_texsize_icon:c,u_texture_icon:1})},Wn=function(t,e,n){return{u_matrix:t,u_opacity:e,u_color:n}},Yn=function(e,n,i,r,o,a){return t.extend(function(t,e,n,i){var r=n.imageManager.getPattern(t.from.toString()),o=n.imageManager.getPattern(t.to.toString()),a=n.imageManager.getPixelSize(),s=a.width,l=a.height,u=Math.pow(2,i.tileID.overscaledZ),c=i.tileSize*Math.pow(2,n.transform.tileZoom)/u,h=c*(i.tileID.canonical.x+i.tileID.wrap*u),p=c*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,l],u_mix:e.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/pe(i,1,n.transform.tileZoom),u_pixel_coord_upper:[h>>16,p>>16],u_pixel_coord_lower:[65535&h,65535&p]}}(r,a,i,o),{u_matrix:e,u_opacity:n})},Kn={fillExtrusion:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fillExtrusionPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fill:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},fillPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},fillOutline:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}},fillOutlinePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},circle:function(e,n){return{u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},collisionBox:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}},collisionCircle:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,n.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,n.u_viewport_size)}},debug:function(e,n){return{u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_overlay:new t.Uniform1i(e,n.u_overlay),u_overlay_scale:new t.Uniform1f(e,n.u_overlay_scale)}},clippingMask:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmap:function(e,n){return{u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmapTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}},hillshade:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}},hillshadePrepare:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_maxzoom:new t.Uniform1f(e,n.u_maxzoom),u_unpack:new t.Uniform4f(e,n.u_unpack)}},line:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels)}},lineGradient:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image)}},linePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_image:new t.Uniform1i(e,n.u_image),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},lineSDF:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}},raster:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}},symbolIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}},symbolSDF:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},symbolTextAndIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texsize_icon:new t.Uniform2f(e,n.u_texsize_icon),u_texture:new t.Uniform1i(e,n.u_texture),u_texture_icon:new t.Uniform1i(e,n.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},background:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}},backgroundPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}}};function Jn(e,n,i,r,o,a,s){for(var l=e.context,u=l.gl,c=e.useProgram("collisionBox"),h=[],p=0,f=0,d=0;d<r.length;d++){var m=r[d],g=n.getTile(m),y=g.getBucket(i);if(y){var v=m.posMatrix;0===o[0]&&0===o[1]||(v=e.translatePosMatrix(m.posMatrix,g,o,a));var _=s?y.textCollisionBox:y.iconCollisionBox,b=y.collisionCircleArray;if(b.length>0){var x=t.create(),w=v;t.mul(x,y.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(x,x,y.placementViewportMatrix),h.push({circleArray:b,circleOffset:f,transform:w,invTransform:x}),f=p+=b.length/4}_&&c.draw(l,u.LINES,Et.disabled,St.disabled,e.colorModeForRenderPass(),Tt.disabled,Ln(v,e.transform,g),i.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,null,e.transform.zoom,null,null,_.collisionVertexBuffer)}}if(s&&h.length){var C=e.useProgram("collisionCircle"),k=new t.StructArrayLayout2f1f2i16;k.resize(4*p),k._trim();for(var E=0,S=0,I=h;S<I.length;S+=1)for(var T=I[S],P=0;P<T.circleArray.length/4;P++){var A=4*P,L=T.circleArray[A+0],M=T.circleArray[A+1],R=T.circleArray[A+2],O=T.circleArray[A+3];k.emplace(E++,L,M,R,O,0),k.emplace(E++,L,M,R,O,1),k.emplace(E++,L,M,R,O,2),k.emplace(E++,L,M,R,O,3)}(!Gn||Gn.length<2*p)&&(Gn=function(e){var n=2*e,i=new t.StructArrayLayout3ui6;i.resize(n),i._trim();for(var r=0;r<n;r++){var o=6*r;i.uint16[o+0]=4*r+0,i.uint16[o+1]=4*r+1,i.uint16[o+2]=4*r+2,i.uint16[o+3]=4*r+2,i.uint16[o+4]=4*r+3,i.uint16[o+5]=4*r+0}return i}(p));for(var D=l.createIndexBuffer(Gn,!0),N=l.createVertexBuffer(k,t.collisionCircleLayout.members,!0),F=0,z=h;F<z.length;F+=1){var B=z[F],V=Mn(B.transform,B.invTransform,e.transform);C.draw(l,u.TRIANGLES,Et.disabled,St.disabled,e.colorModeForRenderPass(),Tt.disabled,V,i.id,N,D,t.SegmentVector.simpleSegment(0,2*B.circleOffset,B.circleArray.length,B.circleArray.length/2),null,e.transform.zoom,null,null,null)}N.destroy(),D.destroy()}}var Qn=t.identity(new Float32Array(16));function $n(e,n,i,r,o,a){var s=t.getAnchorAlignment(e),l=-(s.horizontalAlign-.5)*n,u=-(s.verticalAlign-.5)*i,c=t.evaluateVariableOffset(e,r);return new t.Point((l/o+c[0])*a,(u/o+c[1])*a)}function ti(e,n,i,r,o,a,s,l,u,c,h){var p=e.text.placedSymbolArray,f=e.text.dynamicLayoutVertexArray,d=e.icon.dynamicLayoutVertexArray,m={};f.clear();for(var g=0;g<p.length;g++){var y=p.get(g),v=y.hidden||!y.crossTileID||e.allowVerticalPlacement&&!y.placedOrientation?null:r[y.crossTileID];if(v){var _=new t.Point(y.anchorX,y.anchorY),b=$t(_,i?l:s),x=te(a.cameraToCenterDistance,b.signedDistanceFromCamera),w=o.evaluateSizeForFeature(e.textSizeData,c,y)*x/t.ONE_EM;i&&(w*=e.tilePixelRatio/u);for(var C=$n(v.anchor,v.width,v.height,v.textOffset,v.textBoxScale,w),k=i?$t(_.add(C),s).point:b.point.add(n?C.rotate(-a.angle):C),E=e.allowVerticalPlacement&&y.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,S=0;S<y.numGlyphs;S++)t.addDynamicAttributes(f,k,E);h&&y.associatedIconIndex>=0&&(m[y.associatedIconIndex]={shiftedAnchor:k,angle:E})}else ue(y.numGlyphs,f)}if(h){d.clear();for(var I=e.icon.placedSymbolArray,T=0;T<I.length;T++){var P=I.get(T);if(P.hidden)ue(P.numGlyphs,d);else{var A=m[T];if(A)for(var L=0;L<P.numGlyphs;L++)t.addDynamicAttributes(d,A.shiftedAnchor,A.angle);else ue(P.numGlyphs,d)}}e.icon.dynamicLayoutVertexBuffer.updateData(d)}e.text.dynamicLayoutVertexBuffer.updateData(f)}function ei(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function ni(e,n,i,r,o,a,s,l,u,c,h,p){for(var f=e.context,d=f.gl,m=e.transform,g="map"===l,y="map"===u,v=g&&"point"!==i.layout.get("symbol-placement"),_=g&&!y&&!v,b=void 0!==i.layout.get("symbol-sort-key").constantOr(1),x=e.depthModeForSublayer(0,Et.ReadOnly),w=i.layout.get("text-variable-anchor"),C=[],k=0,E=r;k<E.length;k+=1){var S=E[k],I=n.getTile(S),T=I.getBucket(i);if(T){var P=o?T.text:T.icon;if(P&&P.segments.get().length){var A=P.programConfigurations.get(i.id),L=o||T.sdfIcons,M=o?T.textSizeData:T.iconSizeData,R=y||0!==m.pitch,O=e.useProgram(ei(L,o,T),A),D=t.evaluateSizeForZoom(M,m.zoom),N=void 0,F=[0,0],z=void 0,B=void 0,V=null,U=void 0;if(o)z=I.glyphAtlasTexture,B=d.LINEAR,N=I.glyphAtlasTexture.size,T.iconsInText&&(F=I.imageAtlasTexture.size,V=I.imageAtlasTexture,U=R||e.options.rotating||e.options.zooming||"composite"===M.kind||"camera"===M.kind?d.LINEAR:d.NEAREST);else{var j=1!==i.layout.get("icon-size").constantOr(0)||T.iconsNeedLinear;z=I.imageAtlasTexture,B=L||e.options.rotating||e.options.zooming||j||R?d.LINEAR:d.NEAREST,N=I.imageAtlasTexture.size}var q=pe(I,1,e.transform.zoom),G=Jt(S.posMatrix,y,g,e.transform,q),H=Qt(S.posMatrix,y,g,e.transform,q),X=w&&T.hasTextData(),Z="none"!==i.layout.get("icon-text-fit")&&X&&T.hasIconData();v&&ne(T,S.posMatrix,e,o,G,H,y,c);var W=e.translatePosMatrix(S.posMatrix,I,a,s),Y=v||o&&w||Z?Qn:G,K=e.translatePosMatrix(H,I,a,s,!0),J=L&&0!==i.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),Q={program:O,buffers:P,uniformValues:L?T.iconsInText?Zn(M.kind,D,_,y,e,W,Y,K,N,F):Xn(M.kind,D,_,y,e,W,Y,K,o,N,!0):Hn(M.kind,D,_,y,e,W,Y,K,o,N),atlasTexture:z,atlasTextureIcon:V,atlasInterpolation:B,atlasInterpolationIcon:U,isSDF:L,hasHalo:J};if(b)for(var $=0,tt=P.segments.get();$<tt.length;$+=1){var et=tt[$];C.push({segments:new t.SegmentVector([et]),sortKey:et.sortKey,state:Q})}else C.push({segments:P.segments,sortKey:0,state:Q})}}}b&&C.sort((function(t,e){return t.sortKey-e.sortKey}));for(var nt=0,it=C;nt<it.length;nt+=1){var rt=it[nt],ot=rt.state;if(f.activeTexture.set(d.TEXTURE0),ot.atlasTexture.bind(ot.atlasInterpolation,d.CLAMP_TO_EDGE),ot.atlasTextureIcon&&(f.activeTexture.set(d.TEXTURE1),ot.atlasTextureIcon&&ot.atlasTextureIcon.bind(ot.atlasInterpolationIcon,d.CLAMP_TO_EDGE)),ot.isSDF){var at=ot.uniformValues;ot.hasHalo&&(at.u_is_halo=1,ii(ot.buffers,rt.segments,i,e,ot.program,x,h,p,at)),at.u_is_halo=0}ii(ot.buffers,rt.segments,i,e,ot.program,x,h,p,ot.uniformValues)}}function ii(t,e,n,i,r,o,a,s,l){var u=i.context;r.draw(u,u.gl.TRIANGLES,o,a,s,Tt.disabled,l,n.id,t.layoutVertexBuffer,t.indexBuffer,e,n.paint,i.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function ri(t,e,n,i,r,o,a){var s,l,u,c,h,p=t.context.gl,f=n.paint.get("fill-pattern"),d=f&&f.constantOr(1),m=n.getCrossfadeParameters();a?(l=d&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=p.LINES):(l=d?"fillPattern":"fill",s=p.TRIANGLES);for(var g=0,y=i;g<y.length;g+=1){var v=y[g],_=e.getTile(v);if(!d||_.patternsLoaded()){var b=_.getBucket(n);if(b){var x=b.programConfigurations.get(n.id),w=t.useProgram(l,x);d&&(t.context.activeTexture.set(p.TEXTURE0),_.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),x.updatePaintBuffers(m));var C=f.constantOr(null);if(C&&_.imageAtlas){var k=_.imageAtlas,E=k.patternPositions[C.to.toString()],S=k.patternPositions[C.from.toString()];E&&S&&x.setConstantPatternPositions(E,S)}var I=t.translatePosMatrix(v.posMatrix,_,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){c=b.indexBuffer2,h=b.segments2;var T=[p.drawingBufferWidth,p.drawingBufferHeight];u="fillOutlinePattern"===l&&d?Pn(I,t,m,_,T):Tn(I,T)}else c=b.indexBuffer,h=b.segments,u=d?In(I,t,m,_):Sn(I);w.draw(t.context,s,r,t.stencilModeForClipping(v),o,Tt.disabled,u,n.id,b.layoutVertexBuffer,c,h,n.paint,t.transform.zoom,x)}}}}function oi(t,e,n,i,r,o,a){for(var s=t.context,l=s.gl,u=n.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),h=n.getCrossfadeParameters(),p=n.paint.get("fill-extrusion-opacity"),f=0,d=i;f<d.length;f+=1){var m=d[f],g=e.getTile(m),y=g.getBucket(n);if(y){var v=y.programConfigurations.get(n.id),_=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",v);c&&(t.context.activeTexture.set(l.TEXTURE0),g.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers(h));var b=u.constantOr(null);if(b&&g.imageAtlas){var x=g.imageAtlas,w=x.patternPositions[b.to.toString()],C=x.patternPositions[b.from.toString()];w&&C&&v.setConstantPatternPositions(w,C)}var k=t.translatePosMatrix(m.posMatrix,g,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),E=n.paint.get("fill-extrusion-vertical-gradient"),S=c?En(k,t,E,p,m,h,g):kn(k,t,E,p);_.draw(s,s.gl.TRIANGLES,r,o,a,Tt.backCCW,S,n.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,n.paint,t.transform.zoom,v)}}}function ai(e,n,i,r,o,a){var s=e.context,l=s.gl,u=n.fbo;if(u){var c=e.useProgram("hillshade");s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,u.colorAttachment.get());var h=function(e,n,i){var r=i.paint.get("hillshade-shadow-color"),o=i.paint.get("hillshade-highlight-color"),a=i.paint.get("hillshade-accent-color"),s=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var l,u,c,h=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(n.tileID.toUnwrapped(),h),u_image:0,u_latrange:(l=n.tileID,u=Math.pow(2,l.canonical.z),c=l.canonical.y,[new t.MercatorCoordinate(0,c/u).toLngLat().lat,new t.MercatorCoordinate(0,(c+1)/u).toLngLat().lat]),u_light:[i.paint.get("hillshade-exaggeration"),s],u_shadow:r,u_highlight:o,u_accent:a}}(e,n,i);c.draw(s,l.TRIANGLES,r,o,a,Tt.disabled,h,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function si(e,n,i,r,o,a,s){var l=e.context,u=l.gl,c=n.dem;if(c&&c.data){var h=c.dim,p=c.stride,f=c.getPixels();if(l.activeTexture.set(u.TEXTURE1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(p),n.demTexture){var d=n.demTexture;d.update(f,{premultiply:!1}),d.bind(u.NEAREST,u.CLAMP_TO_EDGE)}else n.demTexture=new t.Texture(l,f,u.RGBA,{premultiply:!1}),n.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);l.activeTexture.set(u.TEXTURE0);var m=n.fbo;if(!m){var g=new t.Texture(l,{width:h,height:h,data:null},u.RGBA);g.bind(u.LINEAR,u.CLAMP_TO_EDGE),(m=n.fbo=l.createFramebuffer(h,h,!0)).colorAttachment.set(g.texture)}l.bindFramebuffer.set(m.framebuffer),l.viewport.set([0,0,h,h]),e.useProgram("hillshadePrepare").draw(l,u.TRIANGLES,o,a,s,Tt.disabled,function(e,n,i){var r=n.stride,o=t.create();return t.ortho(o,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(o,o,[0,-t.EXTENT,0]),{u_matrix:o,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_maxzoom:i,u_unpack:n.getUnpackVector()}}(n.tileID,c,r),i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function li(e,n,i,r,o){var a=r.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),l=(s-e.timeAdded)/a,u=n?(s-n.timeAdded)/a:-1,c=i.getSource(),h=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),p=!n||Math.abs(n.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),f=p&&e.refreshedUponExpiration?1:t.clamp(p?l:1-u,0,1);return e.refreshedUponExpiration&&l>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}var ui=new t.Color(1,0,0,1),ci=new t.Color(0,1,0,1),hi=new t.Color(0,0,1,1),pi=new t.Color(1,0,1,1),fi=new t.Color(0,1,1,1);function di(t,e,n,i){gi(t,0,e+n/2,t.transform.width,n,i)}function mi(t,e,n,i){gi(t,e-n/2,0,n,t.transform.height,i)}function gi(e,n,i,r,o,a){var s=e.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*t.browser.devicePixelRatio,i*t.browser.devicePixelRatio,r*t.browser.devicePixelRatio,o*t.browser.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}function yi(e,n,i){var r=e.context,o=r.gl,a=i.posMatrix,s=e.useProgram("debug"),l=Et.disabled,u=St.disabled,c=e.colorModeForRenderPass();r.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(r,o.LINE_STRIP,l,u,c,Tt.disabled,Rn(a,t.Color.red),"$debug",e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var h=n.getTileByID(i.key).latestRawTileData,p=Math.floor((h&&h.byteLength||0)/1024),f=n.getTile(i).tileSize,d=512/Math.min(f,512)*(i.overscaledZ/e.transform.zoom)*.5,m=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(m+=" => "+i.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var n=t.debugOverlayCanvas,i=t.context.gl,r=t.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,n.width,n.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(e,5,5),r.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}(e,m+" "+p+"kb"),s.draw(r,o.TRIANGLES,l,u,It.alphaBlended,Tt.disabled,Rn(a,t.Color.transparent,d),"$debug",e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}var vi={symbol:function(e,n,i,r,o){if("translucent"===e.renderPass){var a=St.disabled,s=e.colorModeForRenderPass();i.layout.get("text-variable-anchor")&&function(e,n,i,r,o,a,s){for(var l=n.transform,u="map"===o,c="map"===a,h=0,p=e;h<p.length;h+=1){var f=p[h],d=r.getTile(f),m=d.getBucket(i);if(m&&m.text&&m.text.segments.get().length){var g=t.evaluateSizeForZoom(m.textSizeData,l.zoom),y=pe(d,1,n.transform.zoom),v=Jt(f.posMatrix,c,u,n.transform,y),_="none"!==i.layout.get("icon-text-fit")&&m.hasIconData();if(g){var b=Math.pow(2,l.zoom-d.tileID.overscaledZ);ti(m,u,c,s,t.symbolSize,l,v,f.posMatrix,b,g,_)}}}}(r,e,i,n,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),o),0!==i.paint.get("icon-opacity").constantOr(1)&&ni(e,n,i,r,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),a,s),0!==i.paint.get("text-opacity").constantOr(1)&&ni(e,n,i,r,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(Jn(e,n,i,r,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),Jn(e,n,i,r,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))}},circle:function(e,n,i,r){if("translucent"===e.renderPass){var o=i.paint.get("circle-opacity"),a=i.paint.get("circle-stroke-width"),s=i.paint.get("circle-stroke-opacity"),l=void 0!==i.layout.get("circle-sort-key").constantOr(1);if(0!==o.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){for(var u=e.context,c=u.gl,h=e.depthModeForSublayer(0,Et.ReadOnly),p=St.disabled,f=e.colorModeForRenderPass(),d=[],m=0;m<r.length;m++){var g=r[m],y=n.getTile(g),v=y.getBucket(i);if(v){var _=v.programConfigurations.get(i.id),b={programConfiguration:_,program:e.useProgram("circle",_),layoutVertexBuffer:v.layoutVertexBuffer,indexBuffer:v.indexBuffer,uniformValues:An(e,g,y,i)};if(l)for(var x=0,w=v.segments.get();x<w.length;x+=1){var C=w[x];d.push({segments:new t.SegmentVector([C]),sortKey:C.sortKey,state:b})}else d.push({segments:v.segments,sortKey:0,state:b})}}l&&d.sort((function(t,e){return t.sortKey-e.sortKey}));for(var k=0,E=d;k<E.length;k+=1){var S=E[k],I=S.state;I.program.draw(u,c.TRIANGLES,h,p,f,Tt.disabled,I.uniformValues,i.id,I.layoutVertexBuffer,I.indexBuffer,S.segments,i.paint,e.transform.zoom,I.programConfiguration)}}}},heatmap:function(e,n,i,r){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=St.disabled,l=new It([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){var i=t.gl;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var r=n.heatmapFbo;if(r)i.bindTexture(i.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{var o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),r=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,n,i){var r=t.gl;r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e.width/4,e.height/4,0,r.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:r.UNSIGNED_BYTE,null),i.colorAttachment.set(n)}(t,e,o,r)}}(o,e,i),o.clear({color:t.Color.transparent});for(var u=0;u<r.length;u++){var c=r[u];if(!n.hasRenderableParent(c)){var h=n.getTile(c),p=h.getBucket(i);if(p){var f=p.programConfigurations.get(i.id);e.useProgram("heatmap",f).draw(o,a.TRIANGLES,Et.disabled,s,l,Tt.disabled,Dn(c.posMatrix,h,e.transform.zoom,i.paint.get("heatmap-intensity")),i.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,i.paint,e.transform.zoom,f)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var i=e.context,r=i.gl,o=n.heatmapFbo;if(o){i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,o.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(i,n.colorRamp,r.RGBA)),a.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,r.TRIANGLES,Et.disabled,St.disabled,e.colorModeForRenderPass(),Tt.disabled,function(e,n,i,r){var o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}}(e,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,i))},line:function(e,n,i,r){if("translucent"===e.renderPass){var o=i.paint.get("line-opacity"),a=i.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1)){var s=e.depthModeForSublayer(0,Et.ReadOnly),l=e.colorModeForRenderPass(),u=i.paint.get("line-dasharray"),c=i.paint.get("line-pattern"),h=c.constantOr(1),p=i.paint.get("line-gradient"),f=i.getCrossfadeParameters(),d=h?"linePattern":u?"lineSDF":p?"lineGradient":"line",m=e.context,g=m.gl,y=!0;if(p){m.activeTexture.set(g.TEXTURE0);var v=i.gradientTexture;if(!i.gradient)return;v||(v=i.gradientTexture=new t.Texture(m,i.gradient,g.RGBA)),v.bind(g.LINEAR,g.CLAMP_TO_EDGE)}for(var _=0,b=r;_<b.length;_+=1){var x=b[_],w=n.getTile(x);if(!h||w.patternsLoaded()){var C=w.getBucket(i);if(C){var k=C.programConfigurations.get(i.id),E=e.context.program.get(),S=e.useProgram(d,k),I=y||S.program!==E,T=c.constantOr(null);if(T&&w.imageAtlas){var P=w.imageAtlas,A=P.patternPositions[T.to.toString()],L=P.patternPositions[T.from.toString()];A&&L&&k.setConstantPatternPositions(A,L)}var M=h?zn(e,w,i,f):u?Bn(e,w,i,u,f):p?Fn(e,w,i):Nn(e,w,i);h?(m.activeTexture.set(g.TEXTURE0),w.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),k.updatePaintBuffers(f)):u&&(I||e.lineAtlas.dirty)&&(m.activeTexture.set(g.TEXTURE0),e.lineAtlas.bind(m)),S.draw(m,g.TRIANGLES,s,e.stencilModeForClipping(x),l,Tt.disabled,M,i.id,C.layoutVertexBuffer,C.indexBuffer,C.segments,i.paint,e.transform.zoom,k),y=!1}}}}}},fill:function(e,n,i,r){var o=i.paint.get("fill-color"),a=i.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),l=i.paint.get("fill-pattern"),u=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===u){var c=e.depthModeForSublayer(1,"opaque"===e.renderPass?Et.ReadWrite:Et.ReadOnly);ri(e,n,i,r,c,s,!1)}if("translucent"===e.renderPass&&i.paint.get("fill-antialias")){var h=e.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,Et.ReadOnly);ri(e,n,i,r,h,s,!0)}}},"fill-extrusion":function(t,e,n,i){var r=n.paint.get("fill-extrusion-opacity");if(0!==r&&"translucent"===t.renderPass){var o=new Et(t.context.gl.LEQUAL,Et.ReadWrite,t.depthRangeFor3D);if(1!==r||n.paint.get("fill-extrusion-pattern").constantOr(1))oi(t,e,n,i,o,St.disabled,It.disabled),oi(t,e,n,i,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();oi(t,e,n,i,o,St.disabled,a)}}},hillshade:function(t,e,n,i){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var r=t.context,o=e.getSource().maxzoom,a=t.depthModeForSublayer(0,Et.ReadOnly),s=t.colorModeForRenderPass(),l="translucent"===t.renderPass?t.stencilConfigForOverlap(i):[{},i],u=l[0],c=0,h=l[1];c<h.length;c+=1){var p=h[c],f=e.getTile(p);f.needsHillshadePrepare&&"offscreen"===t.renderPass?si(t,f,n,o,a,St.disabled,s):"translucent"===t.renderPass&&ai(t,f,n,a,u[p.overscaledZ],s)}r.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,i){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")&&i.length)for(var r=t.context,o=r.gl,a=e.getSource(),s=t.useProgram("raster"),l=t.colorModeForRenderPass(),u=a instanceof M?[{},i]:t.stencilConfigForOverlap(i),c=u[0],h=u[1],p=h[h.length-1].overscaledZ,f=!t.options.moving,d=0,m=h;d<m.length;d+=1){var g=m[d],y=t.depthModeForSublayer(g.overscaledZ-p,1===n.paint.get("raster-opacity")?Et.ReadWrite:Et.ReadOnly,o.LESS),v=e.getTile(g),_=t.transform.calculatePosMatrix(g.toUnwrapped(),f);v.registerFadeDuration(n.paint.get("raster-fade-duration"));var b=e.findLoadedParent(g,0),x=li(v,b,e,n,t.transform),w=void 0,C=void 0,k="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;r.activeTexture.set(o.TEXTURE0),v.texture.bind(k,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),r.activeTexture.set(o.TEXTURE1),b?(b.texture.bind(k,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,b.tileID.overscaledZ-v.tileID.overscaledZ),C=[v.tileID.canonical.x*w%1,v.tileID.canonical.y*w%1]):v.texture.bind(k,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var E=jn(_,C||[0,0],w||1,x,n);a instanceof M?s.draw(r,o.TRIANGLES,y,St.disabled,l,Tt.disabled,E,n.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(r,o.TRIANGLES,y,c[g.overscaledZ],l,Tt.disabled,E,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,n){var i=n.paint.get("background-color"),r=n.paint.get("background-opacity");if(0!==r){var o=t.context,a=o.gl,s=t.transform,l=s.tileSize,u=n.paint.get("background-pattern");if(!t.isPatternMissing(u)){var c=!u&&1===i.a&&1===r&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===c){var h=St.disabled,p=t.depthModeForSublayer(0,"opaque"===c?Et.ReadWrite:Et.ReadOnly),f=t.colorModeForRenderPass(),d=t.useProgram(u?"backgroundPattern":"background"),m=s.coveringTiles({tileSize:l});u&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var g=n.getCrossfadeParameters(),y=0,v=m;y<v.length;y+=1){var _=v[y],b=t.transform.calculatePosMatrix(_.toUnwrapped()),x=u?Yn(b,r,t,u,{tileID:_,tileSize:l},g):Wn(b,r,i);d.draw(o,a.TRIANGLES,p,h,f,Tt.disabled,x,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,n){for(var i=0;i<n.length;i++)yi(t,e,n[i])},custom:function(t,e,n){var i=t.context,r=n.implementation;if("offscreen"===t.renderPass){var o=r.prerender;o&&(t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),o.call(r,i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),i.setStencilMode(St.disabled);var a="3d"===r.renderingMode?new Et(t.context.gl.LEQUAL,Et.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Et.ReadOnly);i.setDepthMode(a),r.render(i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState(),i.bindFramebuffer.set(null)}}},_i=function(t,e){this.context=new Pt(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=At.maxUnderzooming+At.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ze,this.gpuTimers={}};_i.prototype.resize=function(e,n){if(this.width=e*t.browser.devicePixelRatio,this.height=n*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,r=this.style._order;i<r.length;i+=1)this.style._layers[r[i]].resize()},_i.prototype.setup=function(){var e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,Ge.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(i,Ge.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var r=new t.StructArrayLayout4i8;r.emplaceBack(0,0,0,0),r.emplaceBack(t.EXTENT,0,t.EXTENT,0),r.emplaceBack(0,t.EXTENT,0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(r,L.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,Ge.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);var l=this.context.gl;this.stencilClearMode=new St({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)},_i.prototype.clearStencil=function(){var e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var i=t.create();t.ortho(i,0,this.width,this.height,0,0,1),t.scale(i,i,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,Et.disabled,this.stencilClearMode,It.disabled,Tt.disabled,On(i),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},_i.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var n=this.context,i=n.gl;this.nextStencilID+e.length>256&&this.clearStencil(),n.setColorMode(It.disabled),n.setDepthMode(Et.disabled);var r=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],l=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;r.draw(n,i.TRIANGLES,Et.disabled,new St({func:i.ALWAYS,mask:0},l,255,i.KEEP,i.KEEP,i.REPLACE),It.disabled,Tt.disabled,On(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},_i.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new St({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},_i.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new St({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},_i.prototype.stencilConfigForOverlap=function(t){var e,n=this.context.gl,i=t.sort((function(t,e){return e.overscaledZ-t.overscaledZ})),r=i[i.length-1].overscaledZ,o=i[0].overscaledZ-r+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var a={},s=0;s<o;s++)a[s+r]=new St({func:n.GEQUAL,mask:255},s+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[a,i]}return[(e={},e[r]=St.disabled,e),i]},_i.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new It([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?It.unblended:It.alphaBlended},_i.prototype.depthModeForSublayer=function(t,e,n){if(!this.opaquePassEnabledForLayer())return Et.disabled;var i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Et(n||this.context.gl.LEQUAL,e,[i,i])},_i.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},_i.prototype.render=function(e,n){var i=this;this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var r=this.style._order,o=this.style.sourceCaches;for(var a in o){var s=o[a];s.used&&s.prepare(this.context)}var l,u,c={},h={},p={};for(var f in o){var d=o[f];c[f]=d.getVisibleCoordinates(),h[f]=c[f].slice().reverse(),p[f]=d.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var m=0;m<r.length;m++)if(this.style._layers[r[m]].is3D()){this.opaquePassCutoff=m;break}this.renderPass="offscreen";for(var g=0,y=r;g<y.length;g+=1){var v=this.style._layers[y[g]];if(v.hasOffscreenPass()&&!v.isHidden(this.transform.zoom)){var _=h[v.source];("custom"===v.type||_.length)&&this.renderLayer(this,o[v.source],v,_)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){var b=this.style._layers[r[this.currentLayer]],x=o[b.source],w=c[b.source];this._renderTileClippingMasks(b,w),this.renderLayer(this,x,b,w)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){var C=this.style._layers[r[this.currentLayer]],k=o[C.source],E=("symbol"===C.type?p:h)[C.source];this._renderTileClippingMasks(C,c[C.source]),this.renderLayer(this,k,C,E)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach((function(t){t.source&&!t.isHidden(i.transform.zoom)&&(t.source!==(u&&u.id)&&(u=i.style.sourceCaches[t.source]),(!l||l.getSource().maxzoom<u.getSource().maxzoom)&&(l=u))})),l&&vi.debug(this,l,l.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;di(t,t.transform.height-(e.top||0),3,ui),di(t,e.bottom||0,3,ci),mi(t,e.left||0,3,hi),mi(t,t.transform.width-(e.right||0),3,pi);var n=t.transform.centerPoint;!function(t,e,n,i){gi(t,e-1,n-10,2,20,i),gi(t,e-10,n-1,20,2,i)}(t,n.x,t.transform.height-n.y,fi)}(this),this.context.setDefault()},_i.prototype.renderLayer=function(t,e,n,i){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||i.length)&&(this.id=n.id,this.gpuTimingStart(n),vi[n.type](t,e,n,i,this.style.placement.variableOffsets),this.gpuTimingEnd())},_i.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}},_i.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},_i.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},_i.prototype.queryGpuTimers=function(t){var e={};for(var n in t){var i=t[n],r=this.context.extTimerQuery,o=r.getQueryObjectEXT(i.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(i.query),e[n]=o}return e},_i.prototype.translatePosMatrix=function(e,n,i,r,o){if(!i[0]&&!i[1])return e;var a=o?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(a){var s=Math.sin(a),l=Math.cos(a);i=[i[0]*l-i[1]*s,i[0]*s+i[1]*l]}var u=[o?i[0]:pe(n,i[0],this.transform.zoom),o?i[1]:pe(n,i[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,u),c},_i.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},_i.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},_i.prototype.isPatternMissing=function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n},_i.prototype.useProgram=function(t,e){this.cache=this.cache||{};var n=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new wn(this.context,t,_n[t],e,Kn[t],this._showOverdrawInspector)),this.cache[n]},_i.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},_i.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},_i.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},_i.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var bi=function(t,e){this.points=t,this.planes=e};bi.fromInvProjectionMatrix=function(e,n,i){var r=Math.pow(2,i),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(n){return t.transformMat4([],n,e)})).map((function(e){return t.scale$1([],e,1/e[3]/n*r)})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var n=t.sub([],o[e[0]],o[e[1]]),i=t.sub([],o[e[2]],o[e[1]]),r=t.normalize([],t.cross([],n,i)),a=-t.dot(r,o[e[1]]);return r.concat(a)}));return new bi(o,a)};var xi=function(e,n){this.min=e,this.max=n,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};xi.prototype.quadrant=function(e){for(var n=[e%2==0,e<2],i=t.clone$2(this.min),r=t.clone$2(this.max),o=0;o<n.length;o++)i[o]=n[o]?this.min[o]:this.center[o],r[o]=n[o]?this.center[o]:this.max[o];return r[2]=this.max[2],new xi(i,r)},xi.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},xi.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},xi.prototype.intersects=function(e){for(var n=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],i=!0,r=0;r<e.planes.length;r++){for(var o=e.planes[r],a=0,s=0;s<n.length;s++)a+=t.dot$1(o,n[s])>=0;if(0===a)return 0;a!==n.length&&(i=!1)}if(i)return 2;for(var l=0;l<3;l++){for(var u=Number.MAX_VALUE,c=-Number.MAX_VALUE,h=0;h<e.points.length;h++){var p=e.points[h][l]-this.min[l];u=Math.min(u,p),c=Math.max(c,p)}if(c<0||u>this.max[l]-this.min[l])return 0}return 1};var wi=function(t,e,n,i){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=i};wi.prototype.interpolate=function(e,n,i){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,i)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,i)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,i)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,i)),this},wi.prototype.getCenter=function(e,n){var i=t.clamp((this.left+e-this.right)/2,0,e),r=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.Point(i,r)},wi.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},wi.prototype.clone=function(){return new wi(this.top,this.bottom,this.left,this.right)},wi.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Ci=function(e,n,i,r,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==i?0:i,this._maxPitch=null==r?60:r,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new wi,this._posMatrixCache={},this._alignedPosMatrixCache={}},ki={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Ci.prototype.clone=function(){var t=new Ci(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},ki.minZoom.get=function(){return this._minZoom},ki.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},ki.maxZoom.get=function(){return this._maxZoom},ki.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},ki.minPitch.get=function(){return this._minPitch},ki.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},ki.maxPitch.get=function(){return this._maxPitch},ki.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},ki.renderWorldCopies.get=function(){return this._renderWorldCopies},ki.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},ki.worldSize.get=function(){return this.tileSize*this.scale},ki.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},ki.size.get=function(){return new t.Point(this.width,this.height)},ki.bearing.get=function(){return-this.angle/Math.PI*180},ki.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ki.pitch.get=function(){return this._pitch/Math.PI*180},ki.pitch.set=function(e){var n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},ki.fov.get=function(){return this._fov/Math.PI*180},ki.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},ki.zoom.get=function(){return this._zoom},ki.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},ki.center.get=function(){return this._center},ki.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},ki.padding.get=function(){return this._edgeInsets.toJSON()},ki.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},ki.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Ci.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},Ci.prototype.interpolatePadding=function(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()},Ci.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},Ci.prototype.getVisibleUnwrappedCoordinates=function(e){var n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var i=this.pointCoordinate(new t.Point(0,0)),r=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(i.x,r.x,o.x,a.x)),l=Math.floor(Math.max(i.x,r.x,o.x,a.x)),u=s-1;u<=l+1;u++)0!==u&&n.push(new t.UnwrappedTileID(u,e));return n},Ci.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),i=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var r=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,n),a=[o*r.x,o*r.y,0],s=bi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),l=e.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(l=n);var u=function(t){return{aabb:new xi([t*o,0,0],[(t+1)*o,o,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},c=[],h=[],p=n,f=e.reparseOverscaled?i:n;if(this._renderWorldCopies)for(var d=1;d<=3;d++)c.push(u(-d)),c.push(u(d));for(c.push(u(0));c.length>0;){var m=c.pop(),g=m.x,y=m.y,v=m.fullyVisible;if(!v){var _=m.aabb.intersects(s);if(0===_)continue;v=2===_}var b=m.aabb.distanceX(a),x=m.aabb.distanceY(a),w=Math.max(Math.abs(b),Math.abs(x));if(m.zoom===p||w>3+(1<<p-m.zoom)-2&&m.zoom>=l)h.push({tileID:new t.OverscaledTileID(m.zoom===p?f:m.zoom,m.wrap,m.zoom,g,y),distanceSq:t.sqrLen([a[0]-.5-g,a[1]-.5-y])});else for(var C=0;C<4;C++){var k=(g<<1)+C%2,E=(y<<1)+(C>>1);c.push({aabb:m.aabb.quadrant(C),zoom:m.zoom+1,x:k,y:E,wrap:m.wrap,fullyVisible:v})}}return h.sort((function(t,e){return t.distanceSq-e.distanceSq})).map((function(t){return t.tileID}))},Ci.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},ki.unmodified.get=function(){return this._unmodified},Ci.prototype.zoomScale=function(t){return Math.pow(2,t)},Ci.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},Ci.prototype.project=function(e){var n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)},Ci.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},ki.point.get=function(){return this.project(this.center)},Ci.prototype.setLocationAtPoint=function(e,n){var i=this.pointCoordinate(n),r=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(i.x-r.x),o.y-(i.y-r.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},Ci.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},Ci.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},Ci.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},Ci.prototype.coordinateLocation=function(t){return t.toLngLat()},Ci.prototype.pointCoordinate=function(e){var n=[e.x,e.y,0,1],i=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(i,i,this.pixelMatrixInverse);var r=n[3],o=i[3],a=n[1]/r,s=i[1]/o,l=n[2]/r,u=i[2]/o,c=l===u?0:(0-l)/(u-l);return new t.MercatorCoordinate(t.number(n[0]/r,i[0]/o,c)/this.worldSize,t.number(a,s,c)/this.worldSize)},Ci.prototype.coordinatePoint=function(e){var n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix),new t.Point(n[0]/n[3],n[1]/n[3])},Ci.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Ci.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Ci.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Ci.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var i=e.key,r=n?this._alignedPosMatrixCache:this._posMatrixCache;if(r[i])return r[i];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*a,o.y*a,0]),t.scale(l,l,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(l,n?this.alignedProjMatrix:this.projMatrix,l),r[i]=new Float32Array(l),r[i]},Ci.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Ci.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,i,r,o=-90,a=90,s=-180,l=180,u=this.size,c=this._unmodified;if(this.latRange){var h=this.latRange;o=t.mercatorYfromLat(h[1])*this.worldSize,e=(a=t.mercatorYfromLat(h[0])*this.worldSize)-o<u.y?u.y/(a-o):0}if(this.lngRange){var p=this.lngRange;s=t.mercatorXfromLng(p[0])*this.worldSize,n=(l=t.mercatorXfromLng(p[1])*this.worldSize)-s<u.x?u.x/(l-s):0}var f=this.point,d=Math.max(n||0,e||0);if(d)return this.center=this.unproject(new t.Point(n?(l+s)/2:f.x,e?(a+o)/2:f.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var m=f.y,g=u.y/2;m-g<o&&(r=o+g),m+g>a&&(r=a-g)}if(this.lngRange){var y=f.x,v=u.x/2;y-v<s&&(i=s+v),y+v>l&&(i=l-v)}void 0===i&&void 0===r||(this.center=this.unproject(new t.Point(void 0!==i?i:f.x,void 0!==r?r:f.y))),this._unmodified=c,this._constraining=!1}},Ci.prototype._calcMatrices=function(){if(this.height){var e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var n=Math.PI/2+this._pitch,i=this._fov*(.5+e.y/this.height),r=Math.sin(i)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-n-i,.01,Math.PI-.01)),o=this.point,a=o.x,s=o.y,l=1.01*(Math.cos(Math.PI/2-this._pitch)*r+this.cameraToCenterDistance),u=this.height/50,c=new Float64Array(16);t.perspective(c,this._fov,this.width/this.height,u,l),c[8]=2*-e.x/this.width,c[9]=2*e.y/this.height,t.scale(c,c,[1,-1,1]),t.translate(c,c,[0,0,-this.cameraToCenterDistance]),t.rotateX(c,c,this._pitch),t.rotateZ(c,c,this.angle),t.translate(c,c,[-a,-s,0]),this.mercatorMatrix=t.scale([],c,[this.worldSize,this.worldSize,this.worldSize]),t.scale(c,c,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=c,this.invProjMatrix=t.invert([],this.projMatrix);var h=this.width%2/2,p=this.height%2/2,f=Math.cos(this.angle),d=Math.sin(this.angle),m=a-Math.round(a)+f*h+d*p,g=s-Math.round(s)+f*p+d*h,y=new Float64Array(c);if(t.translate(y,y,[m>.5?m-1:m,g>.5?g-1:g,0]),this.alignedProjMatrix=y,c=t.create(),t.scale(c,c,[this.width/2,-this.height/2,1]),t.translate(c,c,[1,-1,0]),this.labelPlaneMatrix=c,c=t.create(),t.scale(c,c,[1,-1,1]),t.translate(c,c,[-1,-1,0]),t.scale(c,c,[2/this.width,2/this.height,1]),this.glCoordMatrix=c,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(c=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=c,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Ci.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},Ci.prototype.getCameraPoint=function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))},Ci.prototype.getCameraQueryGeometry=function(e){var n=this.getCameraPoint();if(1===e.length)return[e[0],n];for(var i=n.x,r=n.y,o=n.x,a=n.y,s=0,l=e;s<l.length;s+=1){var u=l[s];i=Math.min(i,u.x),r=Math.min(r,u.y),o=Math.max(o,u.x),a=Math.max(a,u.y)}return[new t.Point(i,r),new t.Point(o,r),new t.Point(o,a),new t.Point(i,a),new t.Point(i,r)]},Object.defineProperties(Ci.prototype,ki);var Ei=function(e){var n,i,r,o;this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(n=this._updateHashUnthrottled.bind(this),i=!1,r=null,o=function(){r=null,i&&(n(),r=setTimeout(o,300),i=!1)},function(){return i=!0,r||o(),r})};Ei.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ei.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ei.prototype.getHashString=function(e){var n=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,r=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,r),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,l=this._map.getBearing(),u=this._map.getPitch(),c="";if(c+=e?"/"+a+"/"+s+"/"+i:i+"/"+s+"/"+a,(l||u)&&(c+="/"+Math.round(10*l)/10),u&&(c+="/"+Math.round(u)),this._hashName){var h=this._hashName,p=!1,f=t.window.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===h?(p=!0,e+"="+c):t})).filter((function(t){return t}));return p||f.push(h+"="+c),"#"+f.join("&")}return"#"+c},Ei.prototype._getCurrentHash=function(){var e,n=this,i=t.window.location.hash.replace("#","");return this._hashName?(i.split("&").map((function(t){return t.split("=")})).forEach((function(t){t[0]===n._hashName&&(e=t)})),(e&&e[1]||"").split("/")):i.split("/")},Ei.prototype._onHashChange=function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(t){return isNaN(t)}))){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},Ei.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(t){}};var Si={linearity:.3,easing:t.bezier(0,0,.3,1)},Ii=t.extend({deceleration:2500,maxSpeed:1400},Si),Ti=t.extend({deceleration:20,maxSpeed:1400},Si),Pi=t.extend({deceleration:1e3,maxSpeed:360},Si),Ai=t.extend({deceleration:1e3,maxSpeed:90},Si),Li=function(t){this._map=t,this.clear()};function Mi(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function Ri(e,n,i){var r=i.maxSpeed,o=i.linearity,a=i.deceleration,s=t.clamp(e*o/(n/1e3),-r,r),l=Math.abs(s)/(a*o);return{easing:i.easing,duration:1e3*l,amount:s*(l/2)}}Li.prototype.clear=function(){this._inertiaBuffer=[]},Li.prototype.record=function(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:e})},Li.prototype._drainInertiaBuffer=function(){for(var e=this._inertiaBuffer,n=t.browser.now();e.length>0&&n-e[0].time>160;)e.shift()},Li.prototype._onMoveEnd=function(e){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var n={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},i=0,r=this._inertiaBuffer;i<r.length;i+=1){var o=r[i].settings;n.zoom+=o.zoomDelta||0,n.bearing+=o.bearingDelta||0,n.pitch+=o.pitchDelta||0,o.panDelta&&n.pan._add(o.panDelta),o.around&&(n.around=o.around),o.pinchAround&&(n.pinchAround=o.pinchAround)}var a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(n.pan.mag()){var l=Ri(n.pan.mag(),a,t.extend({},Ii,e||{}));s.offset=n.pan.mult(l.amount/n.pan.mag()),s.center=this._map.transform.center,Mi(s,l)}if(n.zoom){var u=Ri(n.zoom,a,Ti);s.zoom=this._map.transform.zoom+u.amount,Mi(s,u)}if(n.bearing){var c=Ri(n.bearing,a,Pi);s.bearing=this._map.transform.bearing+t.clamp(c.amount,-179,179),Mi(s,c)}if(n.pitch){var h=Ri(n.pitch,a,Ai);s.pitch=this._map.transform.pitch+h.amount,Mi(s,h)}if(s.zoom||s.bearing){var p=void 0===n.pinchAround?n.around:n.pinchAround;s.around=p?this._map.unproject(p):this._map.getCenter()}return this.clear(),t.extend(s,{noMoveStart:!0})}};var Oi=function(e){function i(i,r,o,a){void 0===a&&(a={});var s=n.mousePos(r.getCanvasContainer(),o),l=r.unproject(s);e.call(this,i,t.extend({point:s,lngLat:l,originalEvent:o},a)),this._defaultPrevented=!1,this.target=r}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var r={defaultPrevented:{configurable:!0}};return i.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(i.prototype,r),i}(t.Event),Di=function(e){function i(i,r,o){var a="touchend"===i?o.changedTouches:o.touches,s=n.touchPos(r.getCanvasContainer(),a),l=s.map((function(t){return r.unproject(t)})),u=s.reduce((function(t,e,n,i){return t.add(e.div(i.length))}),new t.Point(0,0)),c=r.unproject(u);e.call(this,i,{points:s,point:u,lngLats:l,lngLat:c,originalEvent:o}),this._defaultPrevented=!1}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var r={defaultPrevented:{configurable:!0}};return i.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(i.prototype,r),i}(t.Event),Ni=function(t){function e(e,n,i){t.call(this,e,{originalEvent:i}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),Fi=function(t,e){this._map=t,this._clickTolerance=e.clickTolerance};Fi.prototype.reset=function(){delete this._mousedownPos},Fi.prototype.wheel=function(t){return this._firePreventable(new Ni(t.type,this._map,t))},Fi.prototype.mousedown=function(t,e){return this._mousedownPos=e,this._firePreventable(new Oi(t.type,this._map,t))},Fi.prototype.mouseup=function(t){this._map.fire(new Oi(t.type,this._map,t))},Fi.prototype.click=function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new Oi(t.type,this._map,t))},Fi.prototype.dblclick=function(t){return this._firePreventable(new Oi(t.type,this._map,t))},Fi.prototype.mouseover=function(t){this._map.fire(new Oi(t.type,this._map,t))},Fi.prototype.mouseout=function(t){this._map.fire(new Oi(t.type,this._map,t))},Fi.prototype.touchstart=function(t){return this._firePreventable(new Di(t.type,this._map,t))},Fi.prototype.touchmove=function(t){this._map.fire(new Di(t.type,this._map,t))},Fi.prototype.touchend=function(t){this._map.fire(new Di(t.type,this._map,t))},Fi.prototype.touchcancel=function(t){this._map.fire(new Di(t.type,this._map,t))},Fi.prototype._firePreventable=function(t){if(this._map.fire(t),t.defaultPrevented)return{}},Fi.prototype.isEnabled=function(){return!0},Fi.prototype.isActive=function(){return!1},Fi.prototype.enable=function(){},Fi.prototype.disable=function(){};var zi=function(t){this._map=t};zi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},zi.prototype.mousemove=function(t){this._map.fire(new Oi(t.type,this._map,t))},zi.prototype.mousedown=function(){this._delayContextMenu=!0},zi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Oi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},zi.prototype.contextmenu=function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Oi(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()},zi.prototype.isEnabled=function(){return!0},zi.prototype.isActive=function(){return!1},zi.prototype.enable=function(){},zi.prototype.disable=function(){};var Bi=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1};function Vi(t,e){for(var n={},i=0;i<t.length;i++)n[t[i].identifier]=e[i];return n}Bi.prototype.isEnabled=function(){return!!this._enabled},Bi.prototype.isActive=function(){return!!this._active},Bi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Bi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Bi.prototype.mousedown=function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(n.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)},Bi.prototype.mousemoveWindow=function(t,e){if(this._active){var i=e;if(!(this._lastPos.equals(i)||!this._box&&i.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=i,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var o=Math.min(r.x,i.x),a=Math.max(r.x,i.x),s=Math.min(r.y,i.y),l=Math.max(r.y,i.y);n.setTransform(this._box,"translate("+o+"px,"+s+"px)"),this._box.style.width=a-o+"px",this._box.style.height=l-s+"px"}}},Bi.prototype.mouseupWindow=function(e,i){var r=this;if(this._active&&0===e.button){var o=this._startPos,a=i;if(this.reset(),n.suppressClick(),o.x!==a.x||o.y!==a.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:function(t){return t.fitScreenCoordinates(o,a,r._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",e)}},Bi.prototype.keydown=function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))},Bi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},Bi.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var Ui=function(t){this.reset(),this.numTouches=t.numTouches};Ui.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Ui.prototype.touchstart=function(e,n,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),i.length===this.numTouches&&(this.centroid=function(e){for(var n=new t.Point(0,0),i=0,r=e;i<r.length;i+=1)n._add(r[i]);return n.div(e.length)}(n),this.touches=Vi(i,n)))},Ui.prototype.touchmove=function(t,e,n){if(!this.aborted&&this.centroid){var i=Vi(n,e);for(var r in this.touches){var o=i[r];(!o||o.dist(this.touches[r])>30)&&(this.aborted=!0)}}},Ui.prototype.touchend=function(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var i=!this.aborted&&this.centroid;if(this.reset(),i)return i}};var ji=function(t){this.singleTap=new Ui(t),this.numTaps=t.numTaps,this.reset()};ji.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},ji.prototype.touchstart=function(t,e,n){this.singleTap.touchstart(t,e,n)},ji.prototype.touchmove=function(t,e,n){this.singleTap.touchmove(t,e,n)},ji.prototype.touchend=function(t,e,n){var i=this.singleTap.touchend(t,e,n);if(i){var r=t.timeStamp-this.lastTime<500,o=!this.lastTap||this.lastTap.dist(i)<30;if(r&&o||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}};var qi=function(){this._zoomIn=new ji({numTouches:1,numTaps:2}),this._zoomOut=new ji({numTouches:2,numTaps:1}),this.reset()};qi.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},qi.prototype.touchstart=function(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)},qi.prototype.touchmove=function(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)},qi.prototype.touchend=function(t,e,n){var i=this,r=this._zoomIn.touchend(t,e,n),o=this._zoomOut.touchend(t,e,n);return r?(this._active=!0,t.preventDefault(),setTimeout((function(){return i.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(r)},{originalEvent:t})}}):o?(this._active=!0,t.preventDefault(),setTimeout((function(){return i.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(o)},{originalEvent:t})}}):void 0},qi.prototype.touchcancel=function(){this.reset()},qi.prototype.enable=function(){this._enabled=!0},qi.prototype.disable=function(){this._enabled=!1,this.reset()},qi.prototype.isEnabled=function(){return this._enabled},qi.prototype.isActive=function(){return this._active};var Gi={0:1,2:2},Hi=function(t){this.reset(),this._clickTolerance=t.clickTolerance||1};Hi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Hi.prototype._correctButton=function(t,e){return!1},Hi.prototype._move=function(t,e){return{}},Hi.prototype.mousedown=function(t,e){if(!this._lastPoint){var i=n.mouseButton(t);this._correctButton(t,i)&&(this._lastPoint=e,this._eventButton=i)}},Hi.prototype.mousemoveWindow=function(t,e){var n=this._lastPoint;if(n)if(t.preventDefault(),function(t,e){var n=Gi[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)},Hi.prototype.mouseupWindow=function(t){this._lastPoint&&n.mouseButton(t)===this._eventButton&&(this._moved&&n.suppressClick(),this.reset())},Hi.prototype.enable=function(){this._enabled=!0},Hi.prototype.disable=function(){this._enabled=!1,this.reset()},Hi.prototype.isEnabled=function(){return this._enabled},Hi.prototype.isActive=function(){return this._active};var Xi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.mousedown=function(e,n){t.prototype.mousedown.call(this,e,n),this._lastPoint&&(this._active=!0)},e.prototype._correctButton=function(t,e){return 0===e&&!t.ctrlKey},e.prototype._move=function(t,e){return{around:e,panDelta:e.sub(t)}},e}(Hi),Zi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Hi),Wi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Hi),Yi=function(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()};Yi.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},Yi.prototype.touchstart=function(t,e,n){return this._calculateTransform(t,e,n)},Yi.prototype.touchmove=function(t,e,n){if(this._active)return t.preventDefault(),this._calculateTransform(t,e,n)},Yi.prototype.touchend=function(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()},Yi.prototype.touchcancel=function(){this.reset()},Yi.prototype._calculateTransform=function(e,n,i){i.length>0&&(this._active=!0);var r=Vi(i,n),o=new t.Point(0,0),a=new t.Point(0,0),s=0;for(var l in r){var u=r[l],c=this._touches[l];c&&(o._add(u),a._add(u.sub(c)),s++,r[l]=u)}if(this._touches=r,!(s<this._minTouches)&&a.mag()){var h=a.div(s);if(this._sum._add(h),!(this._sum.mag()<this._clickTolerance))return{around:o.div(s),panDelta:h}}},Yi.prototype.enable=function(){this._enabled=!0},Yi.prototype.disable=function(){this._enabled=!1,this.reset()},Yi.prototype.isEnabled=function(){return this._enabled},Yi.prototype.isActive=function(){return this._active};var Ki=function(){this.reset()};function Ji(t,e,n){for(var i=0;i<t.length;i++)if(t[i].identifier===n)return e[i]}function Qi(t,e){return Math.log(t/e)/Math.LN2}Ki.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ki.prototype._start=function(t){},Ki.prototype._move=function(t,e,n){return{}},Ki.prototype.touchstart=function(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))},Ki.prototype.touchmove=function(t,e,n){if(this._firstTwoTouches){t.preventDefault();var i=this._firstTwoTouches,r=i[1],o=Ji(n,e,i[0]),a=Ji(n,e,r);if(o&&a){var s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}}},Ki.prototype.touchend=function(t,e,i){if(this._firstTwoTouches){var r=this._firstTwoTouches,o=r[1],a=Ji(i,e,r[0]),s=Ji(i,e,o);a&&s||(this._active&&n.suppressClick(),this.reset())}},Ki.prototype.touchcancel=function(){this.reset()},Ki.prototype.enable=function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around},Ki.prototype.disable=function(){this._enabled=!1,this.reset()},Ki.prototype.isEnabled=function(){return this._enabled},Ki.prototype.isActive=function(){return this._active};var $i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._distance,delete this._startDistance},e.prototype._start=function(t){this._startDistance=this._distance=t[0].dist(t[1])},e.prototype._move=function(t,e){var n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Qi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Qi(this._distance,n),pinchAround:e}},e}(Ki);function tr(t,e){return 180*t.angleWith(e)/Math.PI}var er=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},e.prototype._start=function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])},e.prototype._move=function(t,e){var n=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:tr(this._vector,n),pinchAround:e}},e.prototype._isBelowThreshold=function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,n=tr(t,this._startVector);return Math.abs(n)<e},e}(Ki);function nr(t){return Math.abs(t.y)>Math.abs(t.x)}var ir=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},e.prototype._start=function(t){this._lastPoints=t,nr(t[0].sub(t[1]))&&(this._valid=!1)},e.prototype._move=function(t,e,n){var i=t[0].sub(this._lastPoints[0]),r=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(i,r,n.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(i.y+r.y)/2*-.5}},e.prototype.gestureBeginsVertically=function(t,e,n){if(void 0!==this._valid)return this._valid;var i=t.mag()>=2,r=e.mag()>=2;if(i||r){if(!i||!r)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var o=t.y>0==e.y>0;return nr(t)&&nr(e)&&o}},e}(Ki),rr={panStep:100,bearingStep:15,pitchStep:10},or=function(){var t=rr;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep};function ar(t){return t*(2-t)}or.prototype.reset=function(){this._active=!1},or.prototype.keydown=function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var n=0,i=0,r=0,o=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?r=-1:(t.preventDefault(),a=1);break;default:return}return{cameraAnimation:function(s){var l=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:ar,zoom:n?Math.round(l)+n*(t.shiftKey?2:1):l,bearing:s.getBearing()+i*e._bearingStep,pitch:s.getPitch()+r*e._pitchStep,offset:[-o*e._panStep,-a*e._panStep],center:s.getCenter()},{originalEvent:t})}}}},or.prototype.enable=function(){this._enabled=!0},or.prototype.disable=function(){this._enabled=!1,this.reset()},or.prototype.isEnabled=function(){return this._enabled},or.prototype.isActive=function(){return this._active};var sr=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};sr.prototype.setZoomRate=function(t){this._defaultZoomRate=t},sr.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},sr.prototype.isEnabled=function(){return!!this._enabled},sr.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},sr.prototype.isZooming=function(){return!!this._zooming},sr.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},sr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},sr.prototype.wheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,i=t.browser.now(),r=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}},sr.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},sr.prototype._start=function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var i=n.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(i)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},sr.prototype.renderFrame=function(){return this._onScrollFrame()},sr.prototype._onScrollFrame=function(){var e=this;if(this._frameId&&(this._frameId=null,this.isActive())){var n=this._map.transform;if(0!==this._delta){var i="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,r=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==r&&(r=1/r);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*r))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a,s="number"==typeof this._targetZoom?this._targetZoom:n.zoom,l=this._startZoom,u=this._easing,c=!1;if("wheel"===this._type&&l&&u){var h=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),p=u(h);a=t.number(l,s,p),h<1?this._frameId||(this._frameId=!0):c=!0}else a=s,c=!0;return this._active=!0,c&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._handler._triggerRenderFrame(),delete e._targetZoom,delete e._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!c,zoomDelta:a-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},sr.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var i=this._prevEase,r=(t.browser.now()-i.start)/i.duration,o=i.easing(r+.01)-i.easing(r),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:n},n},sr.prototype.reset=function(){this._active=!1};var lr=function(t,e){this._clickZoom=t,this._tapZoom=e};lr.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},lr.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},lr.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},lr.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ur=function(){this.reset()};ur.prototype.reset=function(){this._active=!1},ur.prototype.dblclick=function(t,e){return t.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}},ur.prototype.enable=function(){this._enabled=!0},ur.prototype.disable=function(){this._enabled=!1,this.reset()},ur.prototype.isEnabled=function(){return this._enabled},ur.prototype.isActive=function(){return this._active};var cr=function(){this._tap=new ji({numTouches:1,numTaps:1}),this.reset()};cr.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},cr.prototype.touchstart=function(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))},cr.prototype.touchmove=function(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var i=e[0],r=i.y-this._swipePoint.y;return this._swipePoint=i,t.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(t,e,n)},cr.prototype.touchend=function(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)},cr.prototype.touchcancel=function(){this.reset()},cr.prototype.enable=function(){this._enabled=!0},cr.prototype.disable=function(){this._enabled=!1,this.reset()},cr.prototype.isEnabled=function(){return this._enabled},cr.prototype.isActive=function(){return this._active};var hr=function(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n};hr.prototype.enable=function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},hr.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},hr.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},hr.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var pr=function(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n};pr.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},pr.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},pr.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},pr.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var fr=function(t,e,n,i){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0};fr.prototype.enable=function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},fr.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},fr.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},fr.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},fr.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},fr.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var dr=function(t){return t.zoom||t.drag||t.pitch||t.rotate},mr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(t.Event);function gr(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var yr=function(e,i){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Li(e),this._bearingSnap=i.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(i),t.bindAll(["handleEvent","handleWindowEvent"],this);var r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[t.window,"blur",void 0]];for(var o=0,a=this._listeners;o<a.length;o+=1){var s=a[o],l=s[0];n.addEventListener(l,s[1],l===t.window.document?this.handleWindowEvent:this.handleEvent,s[2])}};yr.prototype.destroy=function(){for(var e=0,i=this._listeners;e<i.length;e+=1){var r=i[e],o=r[0];n.removeEventListener(o,r[1],o===t.window.document?this.handleWindowEvent:this.handleEvent,r[2])}},yr.prototype._addDefaultHandlers=function(t){var e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new Fi(e,t));var i=e.boxZoom=new Bi(e,t);this._add("boxZoom",i);var r=new qi,o=new ur;e.doubleClickZoom=new lr(o,r),this._add("tapZoom",r),this._add("clickZoom",o);var a=new cr;this._add("tapDragZoom",a);var s=e.touchPitch=new ir;this._add("touchPitch",s);var l=new Zi(t),u=new Wi(t);e.dragRotate=new pr(t,l,u),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]);var c=new Xi(t),h=new Yi(t);e.dragPan=new hr(n,c,h),this._add("mousePan",c),this._add("touchPan",h,["touchZoom","touchRotate"]);var p=new er,f=new $i;e.touchZoomRotate=new fr(n,f,p,a),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",f,["touchPan","touchRotate"]);var d=e.scrollZoom=new sr(e,this);this._add("scrollZoom",d,["mousePan"]);var m=e.keyboard=new or;this._add("keyboard",m),this._add("blockableMapEvent",new zi(e));for(var g=0,y=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];g<y.length;g+=1){var v=y[g];t.interactive&&t[v]&&e[v].enable(t[v])}},yr.prototype._add=function(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e},yr.prototype.stop=function(){if(!this._updatingCamera){for(var t=0,e=this._handlers;t<e.length;t+=1)e[t].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},yr.prototype.isActive=function(){for(var t=0,e=this._handlers;t<e.length;t+=1)if(e[t].handler.isActive())return!0;return!1},yr.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},yr.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},yr.prototype.isMoving=function(){return Boolean(dr(this._eventsInProgress))||this.isZooming()},yr.prototype._blockedByActive=function(t,e,n){for(var i in t)if(i!==n&&(!e||e.indexOf(i)<0))return!0;return!1},yr.prototype.handleWindowEvent=function(t){this.handleEvent(t,t.type+"Window")},yr.prototype._getMapTouches=function(t){for(var e=[],n=0,i=t;n<i.length;n+=1){var r=i[n];this._el.contains(r.target)&&e.push(r)}return e},yr.prototype.handleEvent=function(t,e){if("blur"!==t.type){this._updatingCamera=!0;for(var i="renderFrame"===t.type?void 0:t,r={needsRenderFrame:!1},o={},a={},s=t.touches?this._getMapTouches(t.touches):void 0,l=s?n.touchPos(this._el,s):n.mousePos(this._el,t),u=0,c=this._handlers;u<c.length;u+=1){var h=c[u],p=h.handlerName,f=h.handler,d=h.allowed;if(f.isEnabled()){var m=void 0;this._blockedByActive(a,d,p)?f.reset():f[e||t.type]&&(m=f[e||t.type](t,l,s),this.mergeHandlerResult(r,o,m,p,i),m&&m.needsRenderFrame&&this._triggerRenderFrame()),(m||f.isActive())&&(a[p]=f)}}var g={};for(var y in this._previousActiveHandlers)a[y]||(g[y]=i);this._previousActiveHandlers=a,(Object.keys(g).length||gr(r))&&(this._changes.push([r,o,g]),this._triggerRenderFrame()),(Object.keys(a).length||gr(r))&&this._map._stop(!0),this._updatingCamera=!1;var v=r.cameraAnimation;v&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],v(this._map))}else this.stop()},yr.prototype.mergeHandlerResult=function(e,n,i,r,o){if(i){t.extend(e,i);var a={handlerName:r,originalEvent:i.originalEvent||o};void 0!==i.zoomDelta&&(n.zoom=a),void 0!==i.panDelta&&(n.drag=a),void 0!==i.pitchDelta&&(n.pitch=a),void 0!==i.bearingDelta&&(n.rotate=a)}},yr.prototype._applyChanges=function(){for(var e={},n={},i={},r=0,o=this._changes;r<o.length;r+=1){var a=o[r],s=a[0],l=a[1],u=a[2];s.panDelta&&(e.panDelta=(e.panDelta||new t.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(e.around=s.around),void 0!==s.pinchAround&&(e.pinchAround=s.pinchAround),s.noInertia&&(e.noInertia=s.noInertia),t.extend(n,l),t.extend(i,u)}this._updateMapTransform(e,n,i),this._changes=[]},yr.prototype._updateMapTransform=function(t,e,n){var i=this._map,r=i.transform;if(!gr(t))return this._fireEvents(e,n);var o=t.panDelta,a=t.zoomDelta,s=t.bearingDelta,l=t.pitchDelta,u=t.around,c=t.pinchAround;void 0!==c&&(u=c),i._stop(!0),u=u||i.transform.centerPoint;var h=r.pointLocation(o?u.sub(o):u);s&&(r.bearing+=s),l&&(r.pitch+=l),a&&(r.zoom+=a),r.setLocationAtPoint(h,u),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,n)},yr.prototype._fireEvents=function(e,n){var i=this,r=dr(this._eventsInProgress),o=dr(e),a={};for(var s in e)this._eventsInProgress[s]||(a[s+"start"]=e[s].originalEvent),this._eventsInProgress[s]=e[s];for(var l in!r&&o&&this._fireEvent("movestart",o.originalEvent),a)this._fireEvent(l,a[l]);for(var u in e.rotate&&(this._bearingChanged=!0),o&&this._fireEvent("move",o.originalEvent),e)this._fireEvent(u,e[u].originalEvent);var c,h={};for(var p in this._eventsInProgress){var f=this._eventsInProgress[p],d=f.handlerName,m=f.originalEvent;this._handlersById[d].isActive()||(delete this._eventsInProgress[p],h[p+"end"]=c=n[d]||m)}for(var g in h)this._fireEvent(g,h[g]);var y=dr(this._eventsInProgress);if((r||o)&&!y){this._updatingCamera=!0;var v=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),_=function(t){return 0!==t&&-i._bearingSnap<t&&t<i._bearingSnap};v?(_(v.bearing||this._map.getBearing())&&(v.bearing=0),this._map.easeTo(v,{originalEvent:c})):(this._map.fire(new t.Event("moveend",{originalEvent:c})),_(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},yr.prototype._fireEvent=function(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},yr.prototype._triggerRenderFrame=function(){var t=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame((function(e){delete t._frameId,t.handleEvent(new mr("renderFrame",{timeStamp:e})),t._applyChanges()})))};var vr=function(e){function n(n,i){e.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=i.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},n.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},n.prototype.panBy=function(e,n,i){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),i)},n.prototype.panTo=function(e,n,i){return this.easeTo(t.extend({center:e},n),i)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},n.prototype.zoomTo=function(e,n,i){return this.easeTo(t.extend({zoom:e},n),i)},n.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},n.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},n.prototype.getPadding=function(){return this.transform.padding},n.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},n.prototype.rotateTo=function(e,n,i){return this.easeTo(t.extend({bearing:e},n),i)},n.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},n.prototype.resetNorthPitch=function(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this},n.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},n.prototype.cameraForBounds=function(e,n){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,n)},n.prototype._cameraForBoxAndBearing=function(e,n,i,r){var o={top:0,bottom:0,right:0,left:0};if("number"==typeof(r=t.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){var a=r.padding;r.padding={top:a,bottom:a,right:a,left:a}}r.padding=t.extend(o,r.padding);var s=this.transform,l=s.padding,u=s.project(t.LngLat.convert(e)),c=s.project(t.LngLat.convert(n)),h=u.rotate(-i*Math.PI/180),p=c.rotate(-i*Math.PI/180),f=new t.Point(Math.max(h.x,p.x),Math.max(h.y,p.y)),d=new t.Point(Math.min(h.x,p.x),Math.min(h.y,p.y)),m=f.sub(d),g=(s.width-(l.left+l.right+r.padding.left+r.padding.right))/m.x,y=(s.height-(l.top+l.bottom+r.padding.top+r.padding.bottom))/m.y;if(!(y<0||g<0)){var v=Math.min(s.scaleZoom(s.scale*Math.min(g,y)),r.maxZoom),_=t.Point.convert(r.offset),b=new t.Point(_.x+(r.padding.left-r.padding.right)/2,_.y+(r.padding.top-r.padding.bottom)/2).mult(s.scale/s.zoomScale(v));return{center:s.unproject(u.add(c).div(2).sub(b)),zoom:v,bearing:i}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},n.prototype.fitBounds=function(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)},n.prototype.fitScreenCoordinates=function(e,n,i,r,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(n)),i,r),r,o)},n.prototype._fitInternal=function(e,n,i){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,i):this.flyTo(n,i)):this},n.prototype.jumpTo=function(e,n){this.stop();var i=this.transform,r=!1,o=!1,a=!1;return"zoom"in e&&i.zoom!==+e.zoom&&(r=!0,i.zoom=+e.zoom),void 0!==e.center&&(i.center=t.LngLat.convert(e.center)),"bearing"in e&&i.bearing!==+e.bearing&&(o=!0,i.bearing=+e.bearing),"pitch"in e&&i.pitch!==+e.pitch&&(a=!0,i.pitch=+e.pitch),null==e.padding||i.isPaddingEqual(e.padding)||(i.padding=e.padding),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),r&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},n.prototype.easeTo=function(e,n){var i=this;this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);var r=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),l=this.getPadding(),u="zoom"in e?+e.zoom:o,c="bearing"in e?this._normalizeBearing(e.bearing,a):a,h="pitch"in e?+e.pitch:s,p="padding"in e?e.padding:r.padding,f=t.Point.convert(e.offset),d=r.centerPoint.add(f),m=r.pointLocation(d),g=t.LngLat.convert(e.center||m);this._normalizeCenter(g);var y,v,_=r.project(m),b=r.project(g).sub(_),x=r.zoomScale(u-o);e.around&&(y=t.LngLat.convert(e.around),v=r.locationPoint(y));var w={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||u!==o,this._rotating=this._rotating||a!==c,this._pitching=this._pitching||h!==s,this._padding=!r.isPaddingEqual(p),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,w),clearTimeout(this._easeEndTimeoutID),this._ease((function(e){if(i._zooming&&(r.zoom=t.number(o,u,e)),i._rotating&&(r.bearing=t.number(a,c,e)),i._pitching&&(r.pitch=t.number(s,h,e)),i._padding&&(r.interpolatePadding(l,p,e),d=r.centerPoint.add(f)),y)r.setLocationAtPoint(y,v);else{var m=r.zoomScale(r.zoom-o),g=u>o?Math.min(2,x):Math.max(.5,x),w=Math.pow(g,1-e),C=r.unproject(_.add(b.mult(e*w)).mult(m));r.setLocationAtPoint(r.renderWorldCopies?C.wrap():C,d)}i._fireMoveEvents(n)}),(function(t){i._afterEase(n,t)}),e),this},n.prototype._prepareEase=function(e,n,i){void 0===i&&(i={}),this._moving=!0,n||i.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!i.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!i.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!i.pitching&&this.fire(new t.Event("pitchstart",e))},n.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},n.prototype._afterEase=function(e,n){if(!this._easeId||!n||this._easeId!==n){delete this._easeId;var i=this._zooming,r=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}},n.prototype.flyTo=function(e,n){var i=this;if(!e.essential&&t.browser.prefersReducedMotion){var r=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var o=this.transform,a=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u=this.getPadding(),c="zoom"in e?t.clamp(+e.zoom,o.minZoom,o.maxZoom):a,h="bearing"in e?this._normalizeBearing(e.bearing,s):s,p="pitch"in e?+e.pitch:l,f="padding"in e?e.padding:o.padding,d=o.zoomScale(c-a),m=t.Point.convert(e.offset),g=o.centerPoint.add(m),y=o.pointLocation(g),v=t.LngLat.convert(e.center||y);this._normalizeCenter(v);var _=o.project(y),b=o.project(v).sub(_),x=e.curve,w=Math.max(o.width,o.height),C=w/d,k=b.mag();if("minZoom"in e){var E=t.clamp(Math.min(e.minZoom,a,c),o.minZoom,o.maxZoom),S=w/o.zoomScale(E-a);x=Math.sqrt(S/k*2)}var I=x*x;function T(t){var e=(C*C-w*w+(t?-1:1)*I*I*k*k)/(2*(t?C:w)*I*k);return Math.log(Math.sqrt(e*e+1)-e)}function P(t){return(Math.exp(t)-Math.exp(-t))/2}function A(t){return(Math.exp(t)+Math.exp(-t))/2}var L=T(0),M=function(t){return A(L)/A(L+x*t)},R=function(t){return w*((A(L)*(P(e=L+x*t)/A(e))-P(L))/I)/k;var e},O=(T(1)-L)/x;if(Math.abs(k)<1e-6||!isFinite(O)){if(Math.abs(w-C)<1e-6)return this.easeTo(e,n);var D=C<w?-1:1;O=Math.abs(Math.log(C/w))/x,R=function(){return 0},M=function(t){return Math.exp(D*x*t)}}return e.duration="duration"in e?+e.duration:1e3*O/("screenSpeed"in e?+e.screenSpeed/x:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==h,this._pitching=p!==l,this._padding=!o.isPaddingEqual(f),this._prepareEase(n,!1),this._ease((function(e){var r=e*O,d=1/M(r);o.zoom=1===e?c:a+o.scaleZoom(d),i._rotating&&(o.bearing=t.number(s,h,e)),i._pitching&&(o.pitch=t.number(l,p,e)),i._padding&&(o.interpolatePadding(u,f,e),g=o.centerPoint.add(m));var y=1===e?v:o.unproject(_.add(b.mult(R(r))).mult(d));o.setLocationAtPoint(o.renderWorldCopies?y.wrap():y,g),i._fireMoveEvents(n)}),(function(){return i._afterEase(n)}),e),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){return this._stop()},n.prototype._stop=function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var n=this._onEaseEnd;delete this._onEaseEnd,n.call(this,e)}if(!t){var i=this.handlers;i&&i.stop()}return this},n.prototype._ease=function(e,n,i){!1===i.animate||0===i.duration?(e(1),n()):(this._easeStart=t.browser.now(),this._easeOptions=i,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var i=Math.abs(e-n);return Math.abs(e-360-n)<i&&(e-=360),Math.abs(e+360-n)<i&&(e+=360),e},n.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},n}(t.Evented),_r=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};_r.prototype.getDefaultPosition=function(){return"bottom-right"},_r.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},_r.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},_r.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var i=n.reduce((function(t,e,i){return e.value&&(t+=e.key+"="+e.value+(i<n.length-1?"&":"")),t}),"?");e.href=t.config.FEEDBACK_URL+"/"+i+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow"}},_r.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},_r.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var i in n){var r=n[i];if(r.used){var o=r.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort((function(t,e){return t.length-e.length}));var a=(t=t.filter((function(e,n){for(var i=n+1;i<t.length;i++)if(t[i].indexOf(e)>=0)return!1;return!0}))).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},_r.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var br=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};br.prototype.onAdd=function(t){this._map=t,this._container=n.create("div","mapboxgl-ctrl");var e=n.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},br.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},br.prototype.getDefaultPosition=function(){return"bottom-left"},br.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},br.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},br.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var xr=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};xr.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},xr.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,i=e?this._queue.concat(e):this._queue;n<i.length;n+=1){var r=i[n];if(r.id===t)return void(r.cancelled=!0)}},xr.prototype.run=function(t){void 0===t&&(t=0);var e=this._currentlyRunning=this._queue;this._queue=[];for(var n=0,i=e;n<i.length;n+=1){var r=i[n];if(!r.cancelled&&(r.callback(t),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},xr.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var wr={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Cr=t.window.HTMLImageElement,kr=t.window.HTMLElement,Er=t.window.ImageBitmap,Sr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Ir=function(i){function r(e){var n=this;if(null!=(e=t.extend({},Sr,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var r=new Ci(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies);if(i.call(this,r,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new xr,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},wr,e.locale),this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof kr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return n._update(!1)})),this.on("moveend",(function(){return n._update(!1)})),this.on("zoom",(function(){return n._update(!0)})),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new yr(this,e),this._hash=e.hash&&new Ei("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new _r({customAttribution:e.customAttribution})),this.addControl(new br,e.logoPosition),this.on("style.load",(function(){n.transform.unmodified&&n.jumpTo(n.style.stylesheet)})),this.on("data",(function(e){n._update("style"===e.dataType),n.fire(new t.Event(e.dataType+"data",e))})),this.on("dataloading",(function(e){n.fire(new t.Event(e.dataType+"dataloading",e))}))}i&&(r.__proto__=i),(r.prototype=Object.create(i&&i.prototype)).constructor=r;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return r.prototype._getMapId=function(){return this._mapId},r.prototype.addControl=function(e,n){if(void 0===n&&e.getDefaultPosition&&(n=e.getDefaultPosition()),void 0===n&&(n="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var i=e.onAdd(this);this._controls.push(e);var r=this._controlPositions[n];return-1!==n.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this},r.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this},r.prototype.resize=function(e){var n=this._containerDimensions(),i=n[0],r=n[1];this._resizeCanvas(i,r),this.transform.resize(i,r),this.painter.resize(i,r);var o=!this._moving;return o&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),o&&this.fire(new t.Event("moveend",e)),this},r.prototype.getBounds=function(){return this.transform.getBounds()},r.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},r.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},r.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},r.prototype.getMinZoom=function(){return this.transform.minZoom},r.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},r.prototype.getMaxZoom=function(){return this.transform.maxZoom},r.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},r.prototype.getMinPitch=function(){return this.transform.minPitch},r.prototype.setMaxPitch=function(t){if((t=null==t?60:t)>60)throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},r.prototype.getMaxPitch=function(){return this.transform.maxPitch},r.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},r.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},r.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},r.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},r.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},r.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},r.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},r.prototype._createDelegatedListener=function(t,e,n){var i,r=this;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:n,delegates:{mousemove:function(i){var a=r.getLayer(e)?r.queryRenderedFeatures(i.point,{layers:[e]}):[];a.length?o||(o=!0,n.call(r,new Oi(t,r,i.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:n,delegates:{mousemove:function(i){(r.getLayer(e)?r.queryRenderedFeatures(i.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,n.call(r,new Oi(t,r,i.originalEvent)))},mouseout:function(e){a&&(a=!1,n.call(r,new Oi(t,r,e.originalEvent)))}}}}return{layer:e,listener:n,delegates:(i={},i[t]=function(t){var i=r.getLayer(e)?r.queryRenderedFeatures(t.point,{layers:[e]}):[];i.length&&(t.features=i,n.call(r,t),delete t.features)},i)}},r.prototype.on=function(t,e,n){if(void 0===n)return i.prototype.on.call(this,t,e);var r=this._createDelegatedListener(t,e,n);for(var o in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(r),r.delegates)this.on(o,r.delegates[o]);return this},r.prototype.once=function(t,e,n){if(void 0===n)return i.prototype.once.call(this,t,e);var r=this._createDelegatedListener(t,e,n);for(var o in r.delegates)this.once(o,r.delegates[o]);return this},r.prototype.off=function(t,e,n){var r=this;return void 0===n?i.prototype.off.call(this,t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&function(i){for(var o=i[t],a=0;a<o.length;a++){var s=o[a];if(s.layer===e&&s.listener===n){for(var l in s.delegates)r.off(l,s.delegates[l]);return o.splice(a,1),r}}}(this._delegatedListeners),this)},r.prototype.queryRenderedFeatures=function(e,n){if(!this.style)return[];var i;if(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])i=[t.Point.convert(e)];else{var r=t.Point.convert(e[0]),o=t.Point.convert(e[1]);i=[r,new t.Point(o.x,r.y),o,new t.Point(r.x,o.y),r]}return this.style.queryRenderedFeatures(i,n,this.transform)},r.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},r.prototype.setStyle=function(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))},r.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},r.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new qe(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},r.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new qe(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},r.prototype._diffStyle=function(e,n){var i=this;if("string"==typeof e){var r=this._requestManager.normalizeStyleURL(e),o=this._requestManager.transformRequest(r,t.ResourceType.Style);t.getJSON(o,(function(e,r){e?i.fire(new t.ErrorEvent(e)):r&&i._updateDiff(r,n)}))}else"object"==typeof e&&this._updateDiff(e,n)},r.prototype._updateDiff=function(e,n){try{this.style.setState(e)&&this._update(!0)}catch(i){t.warnOnce("Unable to perform style diff: "+(i.message||i.error||i)+".  Rebuilding the style from scratch."),this._updateStyle(e,n)}},r.prototype.getStyle=function(){if(this.style)return this.style.serialize()},r.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},r.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},r.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},r.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var i in n){var r=n[i];if("loaded"!==r.state&&"errored"!==r.state)return!1}}return!0},r.prototype.addSourceType=function(t,e,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)},r.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},r.prototype.getSource=function(t){return this.style.getSource(t)},r.prototype.addImage=function(e,n,i){void 0===i&&(i={});var r=i.pixelRatio;void 0===r&&(r=1);var o=i.sdf;void 0===o&&(o=!1);var a=i.stretchX,s=i.stretchY,l=i.content;if(this._lazyInitEmptyStyle(),n instanceof Cr||Er&&n instanceof Er){var u=t.browser.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:u.width,height:u.height},u.data),pixelRatio:r,stretchX:a,stretchY:s,content:l,sdf:o,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=n;this.style.addImage(e,{data:new t.RGBAImage({width:n.width,height:n.height},new Uint8Array(n.data)),pixelRatio:r,stretchX:a,stretchY:s,content:l,sdf:o,version:0,userImage:c}),c.onAdd&&c.onAdd(this,e)}},r.prototype.updateImage=function(e,n){var i=this.style.getImage(e);if(!i)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var r=n instanceof Cr||Er&&n instanceof Er?t.browser.getImageData(n):n,o=r.width,a=r.height,s=r.data;return void 0===o||void 0===a?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==i.data.width||a!==i.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(i.data.replace(s,!(n instanceof Cr||Er&&n instanceof Er)),void this.style.updateImage(e,i))},r.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},r.prototype.removeImage=function(t){this.style.removeImage(t)},r.prototype.loadImage=function(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),n)},r.prototype.listImages=function(){return this.style.listImages()},r.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},r.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},r.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},r.prototype.getLayer=function(t){return this.style.getLayer(t)},r.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)},r.prototype.setFilter=function(t,e,n){return void 0===n&&(n={}),this.style.setFilter(t,e,n),this._update(!0)},r.prototype.getFilter=function(t){return this.style.getFilter(t)},r.prototype.setPaintProperty=function(t,e,n,i){return void 0===i&&(i={}),this.style.setPaintProperty(t,e,n,i),this._update(!0)},r.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},r.prototype.setLayoutProperty=function(t,e,n,i){return void 0===i&&(i={}),this.style.setLayoutProperty(t,e,n,i),this._update(!0)},r.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},r.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},r.prototype.getLight=function(){return this.style.getLight()},r.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},r.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},r.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},r.prototype.getContainer=function(){return this._container},r.prototype.getCanvasContainer=function(){return this._canvasContainer},r.prototype.getCanvas=function(){return this._canvas},r.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},r.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},r.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=n.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var i=this._containerDimensions();this._resizeCanvas(i[0],i[1]);var r=this._controlContainer=n.create("div","mapboxgl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){o[t]=n.create("div","mapboxgl-ctrl-"+t,r)}))},r.prototype._resizeCanvas=function(e,n){var i=t.browser.devicePixelRatio||1;this._canvas.width=i*e,this._canvas.height=i*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},r.prototype._setupPainter=function(){var n=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);i?(this.painter=new _i(i,this.transform),t.webpSupported.testSupport(i)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},r.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},r.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},r.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},r.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},r.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},r.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},r.prototype._render=function(e){var n,i=this,r=0,o=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,n),r=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),!this._removed){var a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,l=t.browser.now();this.style.zoomHistory.update(s,l);var u=new t.EvaluationParameters(s,{now:l,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),c=u.crossFadingFactor();1===c&&c===this._crossFadingFactor||(a=!0,this._crossFadingFactor=c),this.style.update(u)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var h=t.browser.now()-r;o.endQueryEXT(o.TIME_ELAPSED_EXT,n),setTimeout((function(){var e=o.getQueryObjectEXT(n,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(n),i.fire(new t.Event("gpu-timing-frame",{cpuTime:h,gpuTime:e}))}),50)}if(this.listens("gpu-timing-layer")){var p=this.painter.collectGpuTimers();setTimeout((function(){var e=i.painter.queryGpuTimers(p);i.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))}),50)}var f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0),this}},r.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,n=this._controls;e<n.length;e+=1)n[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),Tr(this._canvasContainer),Tr(this._controlContainer),Tr(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},r.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame((function(t){e._frame=null,e._render(t)})))},r.prototype._onWindowOnline=function(){this._update()},r.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(t){this._vertices=t,this._update()},r.prototype._setCacheLimits=function(e,n){t.setCacheLimits(e,n)},o.version.get=function(){return t.version},Object.defineProperties(r.prototype,o),r}(vr);function Tr(t){t.parentNode&&t.parentNode.removeChild(t)}var Pr={showCompass:!0,showZoom:!0,visualizePitch:!1},Ar=function(e){var i=this;this.options=t.extend({},Pr,e),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(t){return i._map.zoomIn({},{originalEvent:t})})),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(t){return i._map.zoomOut({},{originalEvent:t})})),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(t){i.options.visualizePitch?i._map.resetNorthPitch({},{originalEvent:t}):i._map.resetNorth({},{originalEvent:t})})),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ar.prototype._updateZoomButtons=function(){var t=this._map.getZoom();this._zoomInButton.disabled=t===this._map.getMaxZoom(),this._zoomOutButton.disabled=t===this._map.getMinZoom()},Ar.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},Ar.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Lr(this._map,this._compass,this.options.visualizePitch)),this._container},Ar.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ar.prototype._createButton=function(t,e){var i=n.create("button",t,this._container);return i.type="button",i.addEventListener("click",e),i},Ar.prototype._setButtonTitle=function(t,e){var n=this._map._getUIString("NavigationControl."+e);t.title=n,t.setAttribute("aria-label",n)};var Lr=function(e,i,r){void 0===r&&(r=!1),this._clickTolerance=10,this.element=i,this.mouseRotate=new Zi({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,r&&(this.mousePitch=new Wi({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener(i,"mousedown",this.mousedown),n.addEventListener(i,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(i,"touchmove",this.touchmove),n.addEventListener(i,"touchend",this.touchend),n.addEventListener(i,"touchcancel",this.reset)};function Mr(e,n,i){if(e=new t.LngLat(e.lng,e.lat),n){var r=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=i.locationPoint(e).distSqr(n);i.locationPoint(r).distSqr(n)<a?e=r:i.locationPoint(o).distSqr(n)<a&&(e=o)}for(;Math.abs(e.lng-i.center.lng)>180;){var s=i.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=i.width&&s.y<=i.height)break;e.lng>i.center.lng?e.lng-=360:e.lng+=360}return e}Lr.prototype.down=function(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),n.disableDrag()},Lr.prototype.move=function(t,e){var n=this.map,i=this.mouseRotate.mousemoveWindow(t,e);if(i&&i.bearingDelta&&n.setBearing(n.getBearing()+i.bearingDelta),this.mousePitch){var r=this.mousePitch.mousemoveWindow(t,e);r&&r.pitchDelta&&n.setPitch(n.getPitch()+r.pitchDelta)}},Lr.prototype.off=function(){var t=this.element;n.removeEventListener(t,"mousedown",this.mousedown),n.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(t,"touchmove",this.touchmove),n.removeEventListener(t,"touchend",this.touchend),n.removeEventListener(t,"touchcancel",this.reset),this.offTemp()},Lr.prototype.offTemp=function(){n.enableDrag(),n.removeEventListener(t.window,"mousemove",this.mousemove),n.removeEventListener(t.window,"mouseup",this.mouseup)},Lr.prototype.mousedown=function(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:function(){return e.preventDefault()}}),n.mousePos(this.element,e)),n.addEventListener(t.window,"mousemove",this.mousemove),n.addEventListener(t.window,"mouseup",this.mouseup)},Lr.prototype.mousemove=function(t){this.move(t,n.mousePos(this.element,t))},Lr.prototype.mouseup=function(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()},Lr.prototype.touchstart=function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))},Lr.prototype.touchmove=function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=n.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))},Lr.prototype.touchend=function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Lr.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Rr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Or(t,e,n){var i=t.classList;for(var r in Rr)i.remove("mapboxgl-"+n+"-anchor-"+r);i.add("mapboxgl-"+n+"-anchor-"+e)}var Dr,Nr=function(e){function i(i,r){var o=this;if(e.call(this),(i instanceof t.window.HTMLElement||r)&&(i=t.extend({element:i},r)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&"auto"!==i.pitchAlignment?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=t.Point.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");var a=n.createNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height","41px"),a.setAttributeNS(null,"width","27px"),a.setAttributeNS(null,"viewBox","0 0 27 41");var s=n.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none"),s.setAttributeNS(null,"stroke-width","1"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"fill-rule","evenodd");var l=n.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"fill-rule","nonzero");var u=n.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"transform","translate(3.0, 29.0)"),u.setAttributeNS(null,"fill","#000000");for(var c=0,h=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];c<h.length;c+=1){var p=h[c],f=n.createNS("http://www.w3.org/2000/svg","ellipse");f.setAttributeNS(null,"opacity","0.04"),f.setAttributeNS(null,"cx","10.5"),f.setAttributeNS(null,"cy","5.80029008"),f.setAttributeNS(null,"rx",p.rx),f.setAttributeNS(null,"ry",p.ry),u.appendChild(f)}var d=n.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"fill",this._color);var m=n.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),d.appendChild(m);var g=n.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"fill","#000000");var y=n.createNS("http://www.w3.org/2000/svg","path");y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),g.appendChild(y);var v=n.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(6.0, 7.0)"),v.setAttributeNS(null,"fill","#FFFFFF");var _=n.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"transform","translate(8.0, 8.0)");var b=n.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#000000"),b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962");var x=n.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#FFFFFF"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962"),_.appendChild(b),_.appendChild(x),l.appendChild(u),l.appendChild(d),l.appendChild(g),l.appendChild(v),l.appendChild(_),a.appendChild(l),a.setAttributeNS(null,"height",41*this._scale+"px"),a.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(a),this._offset=t.Point.convert(i&&i.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(t){t.preventDefault()})),this._element.addEventListener("mousedown",(function(t){t.preventDefault()})),this._element.addEventListener("focus",(function(){var t=o._map.getContainer();t.scrollTop=0,t.scrollLeft=0})),Or(this._element,this._anchor,"marker"),this._popup=null}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},i.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},i.prototype.getLngLat=function(){return this._lngLat},i.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},i.prototype.getElement=function(){return this._element},i.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},i.prototype._onKeyPress=function(t){var e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()},i.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},i.prototype.getPopup=function(){return this._popup},i.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},i.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Mr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var i="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?i="rotateX(0deg)":"map"===this._pitchAlignment&&(i="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),n.setTransform(this._element,Rr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+i+" "+e)}},i.prototype.getOffset=function(){return this._offset},i.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},i.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},i.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},i.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},i.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},i.prototype.isDraggable=function(){return this._draggable},i.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},i.prototype.getRotation=function(){return this._rotation},i.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},i.prototype.getRotationAlignment=function(){return this._rotationAlignment},i.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},i.prototype.getPitchAlignment=function(){return this._pitchAlignment},i}(t.Evented),Fr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},zr=0,Br=!1,Vr=function(e){function i(n){e.call(this),this.options=t.extend({},Fr,n),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.onAdd=function(e){var i;return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,void 0!==Dr?i(Dr):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((function(t){i(Dr="denied"!==t.state)})):i(Dr=!!t.window.navigator.geolocation),this._container},i.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,zr=0,Br=!1},i.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())},i.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},i.prototype._onSuccess=function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}},i.prototype._updateCamera=function(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude),i=e.coords.accuracy,r=this._map.getBearing(),o=t.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(i),o,{geolocateSource:!0})},i.prototype._updateMarker=function(e){if(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},i.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),n=this._map.unproject([1,t]),i=e.distanceTo(n),r=Math.ceil(2*this._accuracy/i);this._circleElement.style.width=r+"px",this._circleElement.style.height=r+"px"},i.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},i.prototype._onError=function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Br)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}},i.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},i.prototype._setupUI=function(e){var i=this;if(this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{var o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Nr(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Nr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){e.geolocateSource||"ACTIVE_LOCK"!==i._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(i._watchState="BACKGROUND",i._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),i._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),i.fire(new t.Event("trackuserlocationend")))}))},i.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":zr--,Br=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++zr>1?(e={maximumAge:6e5,timeout:0},Br=!0):(e=this.options.positionOptions,Br=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},i.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},i}(t.Evented),Ur={maxWidth:100,unit:"metric"},jr=function(e){this.options=t.extend({},Ur,e),t.bindAll(["_onMove","setUnit"],this)};function qr(t,e,n){var i=n&&n.maxWidth||100,r=t._container.clientHeight/2,o=t.unproject([0,r]),a=t.unproject([i,r]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){var l=3.2808*s;l>5280?Gr(e,i,l/5280,t._getUIString("ScaleControl.Miles")):Gr(e,i,l,t._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?Gr(e,i,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Gr(e,i,s/1e3,t._getUIString("ScaleControl.Kilometers")):Gr(e,i,s,t._getUIString("ScaleControl.Meters"))}function Gr(t,e,n,i){var r,o,a,s=(r=n,(o=Math.pow(10,(""+Math.floor(r)).length-1))*(a=(a=r/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(a)));t.style.width=e*(s/n)+"px",t.innerHTML=s+"&nbsp;"+i}jr.prototype.getDefaultPosition=function(){return"bottom-left"},jr.prototype._onMove=function(){qr(this._map,this._container,this.options)},jr.prototype.onAdd=function(t){return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},jr.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},jr.prototype.setUnit=function(t){this.options.unit=t,qr(this._map,this._container,this.options)};var Hr=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Hr.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Hr.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Hr.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Hr.prototype._setupUI=function(){var e=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Hr.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},Hr.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Hr.prototype._isFullscreen=function(){return this._fullscreen},Hr.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Hr.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Xr={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Zr=function(e){function i(n){e.call(this),this.options=t.extend(Object.create(Xr),n),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.addTo=function(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},i.prototype.isOpen=function(){return!!this._map},i.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},i.prototype.getLngLat=function(){return this._lngLat},i.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},i.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},i.prototype.getElement=function(){return this._container},i.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},i.prototype.setHTML=function(e){var n,i=t.window.document.createDocumentFragment(),r=t.window.document.createElement("body");for(r.innerHTML=e;n=r.firstChild;)i.appendChild(n);return this.setDOMContent(i)},i.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},i.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},i.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},i.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},i.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},i.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},i.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},i.prototype._onMouseUp=function(t){this._update(t.point)},i.prototype._onMouseMove=function(t){this._update(t.point)},i.prototype._onDrag=function(t){this._update(t.point)},i.prototype._update=function(e){var i=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(t){return i._container.classList.add(t)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Mr(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var r=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),o=this.options.anchor,a=function e(n){if(n){if("number"==typeof n){var i=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.Point(0,0),top:new t.Point(0,n),"top-left":new t.Point(i,i),"top-right":new t.Point(-i,i),bottom:new t.Point(0,-n),"bottom-left":new t.Point(i,-i),"bottom-right":new t.Point(-i,-i),left:new t.Point(n,0),right:new t.Point(-n,0)}}if(n instanceof t.Point||Array.isArray(n)){var r=t.Point.convert(n);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:t.Point.convert(n.center||[0,0]),top:t.Point.convert(n.top||[0,0]),"top-left":t.Point.convert(n["top-left"]||[0,0]),"top-right":t.Point.convert(n["top-right"]||[0,0]),bottom:t.Point.convert(n.bottom||[0,0]),"bottom-left":t.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(n["bottom-right"]||[0,0]),left:t.Point.convert(n.left||[0,0]),right:t.Point.convert(n.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!o){var s,l=this._container.offsetWidth,u=this._container.offsetHeight;s=r.y+a.bottom.y<u?["top"]:r.y>this._map.transform.height-u?["bottom"]:[],r.x<l/2?s.push("left"):r.x>this._map.transform.width-l/2&&s.push("right"),o=0===s.length?"bottom":s.join("-")}var c=r.add(a[o]).round();n.setTransform(this._container,Rr[o]+" translate("+c.x+"px,"+c.y+"px)"),Or(this._container,o,"popup")}},i.prototype._onClose=function(){this.remove()},i}(t.Evented),Wr={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:Ir,NavigationControl:Ar,GeolocateControl:Vr,AttributionControl:_r,ScaleControl:jr,FullscreenControl:Hr,Popup:Zr,Marker:Nr,Style:qe,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){zt().acquire(Ot)},clearPrewarmedResources:function(){var t=Nt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Ot),Nt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Dt.workerCount},set workerCount(t){Dt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return Wr})),n}()},Gxqf:function(t,e){t.exports=function t(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce((function(e,n){return e.concat(t(n))}),[]),e;case"Feature":return e.geometry?t(e.geometry).map((function(t){var n={type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:t};return void 0!==e.id&&(n.id=e.id),n})):e;case"MultiPoint":return e.coordinates.map((function(t){return{type:"Point",coordinates:t}}));case"MultiPolygon":return e.coordinates.map((function(t){return{type:"Polygon",coordinates:t}}));case"MultiLineString":return e.coordinates.map((function(t){return{type:"LineString",coordinates:t}}));case"GeometryCollection":return e.geometries.map(t).reduce((function(t,e){return t.concat(e)}),[]);case"Point":case"Polygon":case"LineString":return[e]}}},KVSD:function(t,e,n){var i=n("cKVx"),r=n("eGrx"),o=n("epIz"),a={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},s=Object.keys(a);function l(t){for(var e=o(),n=i(t),r=0;r<n.length;r++)e.include(n[r]);return e}t.exports=function(t){return l(t).bbox()},t.exports.polygon=function(t){return l(t).polygon()},t.exports.bboxify=function(t){return r(t).map((function(t){t&&s.some((function(e){return!!t[e]&&-1!==a[e].indexOf(t.type)}))&&(t.bbox=l(t).bbox(),this.update(t))}))}},U6jy:function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var i=arguments[e];for(var r in i)n.call(i,r)&&(t[r]=i[r])}return t};var n=Object.prototype.hasOwnProperty},VbFZ:function(t,e){var n=t.exports=function(t,e){if(e||(e=16),void 0===t&&(t=128),t<=0)return"0";for(var i=Math.log(Math.pow(2,t))/Math.log(e),r=2;i===1/0;r*=2)i=Math.log(Math.pow(2,t/r))/Math.log(e)*r;var o=i-Math.floor(i),a="";for(r=0;r<Math.floor(i);r++)a=Math.floor(Math.random()*e).toString(e)+a;if(o){var s=Math.pow(e,o);a=Math.floor(Math.random()*s).toString(e)+a}var l=parseInt(a,e);return l!==1/0&&l>=Math.pow(2,t)?n(t,e):a};n.rack=function(t,e,i){var r=function(r){var a=0;do{if(a++>10){if(!i)throw new Error("too many ID collisions, use more bits");t+=i}var s=n(t,e)}while(Object.hasOwnProperty.call(o,s));return o[s]=r,s},o=r.hats={};return r.get=function(t){return r.hats[t]},r.set=function(t,e){return r.hats[t]=e,r},r.bits=t||128,r.base=e||16,r}},"WVt+":function(t,e,n){!function(t){"use strict";function e(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var i=n.bbox,r=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");i&&E(i),r&&S(r);var o={type:"Feature"};return r&&(o.id=r),i&&(o.bbox=i),o.properties=e||{},o.geometry=t,o}function n(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var r,a=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");switch(a&&E(a),t){case"Point":r=i(e).geometry;break;case"LineString":r=s(e).geometry;break;case"Polygon":r=o(e).geometry;break;case"MultiPoint":r=h(e).geometry;break;case"MultiLineString":r=c(e).geometry;break;case"MultiPolygon":r=p(e).geometry;break;default:throw new Error(t+" is invalid")}return a&&(r.bbox=a),r}function i(t,n,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!C(t[0])||!C(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},n,i)}function r(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return u(t.map((function(t){return i(t,e)})),n)}function o(t,n,i){if(!t)throw new Error("coordinates is required");for(var r=0;r<t.length;r++){var o=t[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++){if(0===r&&0===a&&!C(o[0][0])||!C(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}}return e({type:"Polygon",coordinates:t},n,i)}function a(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return u(t.map((function(t){return o(t,e)})),n)}function s(t,n,i){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!C(t[0][1])||!C(t[0][1]))throw new Error("coordinates must contain numbers");return e({type:"LineString",coordinates:t},n,i)}function l(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return u(t.map((function(t){return s(t,e)})),n)}function u(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.bbox,i=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&E(n),i&&S(i);var r={type:"FeatureCollection"};return i&&(r.id=i),n&&(r.bbox=n),r.features=t,r}function c(t,n,i){if(!t)throw new Error("coordinates is required");return e({type:"MultiLineString",coordinates:t},n,i)}function h(t,n,i){if(!t)throw new Error("coordinates is required");return e({type:"MultiPoint",coordinates:t},n,i)}function p(t,n,i){if(!t)throw new Error("coordinates is required");return e({type:"MultiPolygon",coordinates:t},n,i)}function f(t,n,i){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return e({type:"GeometryCollection",geometries:t},n,i)}function d(t,e){if(null==t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function m(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=wo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function g(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=wo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function y(t,e){return _(g(t,e))}function v(t){if(null==t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function _(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function b(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function x(t,e,n){if(null==t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return m(g(t,e),n||"kilometers")}function w(t,e,n){if(null==t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var i=ko[e||"meters"];if(!i)throw new Error("invalid original units");var r=ko[n||"kilometers"];if(!r)throw new Error("invalid final units");return t/i*r}function C(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function k(t){return!!t&&t.constructor===Object}function E(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!C(t))throw new Error("bbox must only contain numbers")}))}function S(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function I(t,e,n){if(null!==t)for(var i,r,o,a,s,l,u,c,h=0,p=0,f=t.type,d="FeatureCollection"===f,m="Feature"===f,g=d?t.features.length:1,y=0;y<g;y++){s=(c=!!(u=d?t.features[y].geometry:m?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<s;v++){var _=0,b=0;if(null!==(a=c?u.geometries[v]:u)){l=a.coordinates;var x=a.type;switch(h=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":e(l,p,y,_,b),p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++)e(l[i],p,y,_,b),p++,"MultiPoint"===x&&_++;"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++)e(l[i][r],p,y,_,b),p++;"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for("MultiPolygon"===x&&(b=0),r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++)e(l[i][r][o],p,y,_,b),p++;b++}_++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)I(a.geometries[i],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function T(t,e,n,i){var r=n;return I(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)}),i),r}function P(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function A(t,e,n){var i=n;return P(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i}function L(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function M(t,e,n){var i=n;return L(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i}function R(t){var e=[];return I(t,(function(t){e.push(t)})),e}function O(t,e){var n,i,r,o,a,s,l,u,c,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,m=f?t.features.length:1;for(n=0;n<m;n++){for(u=f?t.features[n].properties:d?t.properties:{},c=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,a=(l=!!(s=f?t.features[n].geometry:d?t.geometry:t)&&"GeometryCollection"===s.type)?s.geometries.length:1,r=0;r<a;r++)if(null!==(o=l?s.geometries[r]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,p,u,c,h);break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)e(o.geometries[i],p,u,c,h);break;default:throw new Error("Unknown Geometry Type")}else e(null,p,u,c,h);p++}}function D(t,e,n){var i=n;return O(t,(function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)})),i}function N(t,n){O(t,(function(t,i,r,o,a){var s,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return void n(e(t,r,{bbox:o,id:a}),i,0)}switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}t.coordinates.forEach((function(t,o){n(e({type:s,coordinates:t},r),i,o)}))}))}function F(t,e,n){var i=n;return N(t,(function(t,r,o){i=0===r&&0===o&&void 0===n?t:e(i,t,r,o)})),i}function z(t,e){N(t,(function(t,n,i){var r=0;if(t.geometry){var o=t.geometry.type;"Point"!==o&&"MultiPoint"!==o&&T(t,(function(o,a,l,u,c,h){var p=s([o,a],t.properties);return e(p,n,i,h,r),r++,a}))}}))}function B(t,e,n){var i=n,r=!1;return z(t,(function(t,o,a,s,l){i=!1===r&&void 0===n?t:e(i,t,o,a,s,l),r=!0})),i}function V(t,e){if(!t)throw new Error("geojson is required");N(t,(function(t,n,i){if(null!==t.geometry){var r=t.geometry.coordinates;switch(t.geometry.type){case"LineString":e(t,n,i,0,0);break;case"Polygon":for(var o=0;o<r.length;o++)e(s(r[o],t.properties),n,i,o)}}}))}function U(t,e,n){var i=n;return V(t,(function(t,r,o,a){i=0===r&&void 0===n?t:e(i,t,r,o,a)})),i}function j(t){var e=[1/0,1/0,-1/0,-1/0];return I(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function q(t){if(!t)throw new Error("obj is required");var e=G(t);if(e.length>1&&C(e[0])&&C(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function G(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return H(e),e;throw new Error("No valid coordinates")}function H(t){if(t.length>1&&C(t[0])&&C(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return H(t[0]);throw new Error("coordinates must only contain numbers")}function X(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function Z(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function W(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var i=0;i<t.features.length;i++){var r=t.features[i];if(!r||"Feature"!==r.type||!r.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!r.geometry||r.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+r.geometry.type)}}function Y(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function K(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function J(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}function Q(t,e,n){n=n||{};for(var i=Object.keys(To),r=0;r<i.length;r++){var o=i[r],a=n[o];Po[o]=a=null!=a?a:To[o]}Po.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var s=function(t){var e=[],n=0;return t.cells.forEach((function(i,r){i.forEach((function(i,o){if(void 0!==i&&!function(t){return 5===t.cval||10===t.cval}(i)&&!tt(i)){var a=function(t,e,n){var i,r,o,a=t.length,s=[],l=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],u=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],c=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=t[e][n],p=h.cval,f=nt(h,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][p]);s.push([n+f[0],e+f[1]]),f=nt(h,o=c[p]),s.push([n+f[0],e+f[1]]),et(h);for(var d=n+l[p],m=e+u[p],g=p;d>=0&&m>=0&&m<a&&(d!=n||m!=e)&&void 0!==(h=t[m][d]);){if(0===(p=h.cval)||15===p)return{path:s,info:"mergeable"};o=c[p],i=l[p],r=u[p],5!==p&&10!==p||(5===p?h.flipped?-1===u[g]?(o="left",i=-1,r=0):(o="right",i=1,r=0):-1===l[g]&&(o="bottom",i=0,r=-1):10===p&&(h.flipped?-1===l[g]?(o="top",i=0,r=1):(o="bottom",i=0,r=-1):1===u[g]&&(o="left",i=-1,r=0))),f=nt(h,o),s.push([d+f[0],m+f[1]]),et(h),d+=i,m+=r,g=p}return{path:s,info:"closed"}}(t.cells,r,o),s=!1;if("mergeable"===a.info)for(var l=a.path[a.path.length-1][0],u=a.path[a.path.length-1][1],c=n-1;c>=0;c--)if(Math.abs(e[c][0][0]-l)<=1e-7&&Math.abs(e[c][0][1]-u)<=1e-7){for(var h=a.path.length-2;h>=0;--h)e[c].unshift(a.path[h]);s=!0;break}s||(e[n++]=a.path)}}))})),e}(function(t,e){for(var n=t.length-1,i=t[0].length-1,r={rows:n,cols:i,cells:[]},o=0;o<n;++o){r.cells[o]=[];for(var a=0;a<i;++a){var s=0,l=t[o+1][a],u=t[o+1][a+1],c=t[o][a+1],h=t[o][a];if(!(isNaN(l)||isNaN(u)||isNaN(c)||isNaN(h))){s|=l>=e?8:0,s|=u>=e?4:0,s|=c>=e?2:0;var p,f,d,m,g=!1;if(5==(s|=h>=e?1:0)||10===s){var y=(l+u+c+h)/4;5===s&&y<e?(s=10,g=!0):10===s&&y<e&&(s=5,g=!0)}0!==s&&15!==s&&(p=f=d=m=.5,1===s?(d=1-$(e,l,h),f=1-$(e,c,h)):2===s?(f=$(e,h,c),m=1-$(e,u,c)):3===s?(d=1-$(e,l,h),m=1-$(e,u,c)):4===s?(p=$(e,l,u),m=$(e,c,u)):5===s?(p=$(e,l,u),m=$(e,c,u),f=1-$(e,c,h),d=1-$(e,l,h)):6===s?(f=$(e,h,c),p=$(e,l,u)):7===s?(d=1-$(e,l,h),p=$(e,l,u)):8===s?(d=$(e,h,l),p=1-$(e,u,l)):9===s?(f=1-$(e,c,h),p=1-$(e,u,l)):10===s?(p=1-$(e,u,l),m=1-$(e,u,c),f=$(e,h,c),d=$(e,h,l)):11===s?(p=1-$(e,u,l),m=1-$(e,u,c)):12===s?(d=$(e,h,l),m=$(e,c,u)):13===s?(f=1-$(e,c,h),m=$(e,c,u)):14===s?(d=$(e,h,l),f=$(e,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+s),r.cells[o][a]={cval:s,flipped:g,top:p,right:m,bottom:f,left:d})}}}return r}(t,e));return"function"==typeof Po.successCallback&&Po.successCallback(s),s}function $(t,e,n){return(t-e)/(n-e)}function tt(t){return 0===t.cval||15===t.cval}function et(t){tt(t)||5===t.cval||10===t.cval||(t.cval=15)}function nt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function it(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function rt(t,e){if(!(this instanceof rt))return new rt(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function ot(t,e){at(t,0,t.children.length,e,t)}function at(t,e,n,i,r){r||(r=dt(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],st(r,t.leaf?i(o):o);return r}function st(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function lt(t,e){return t.minX-e.minX}function ut(t,e){return t.minY-e.minY}function ct(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ht(t){return t.maxX-t.minX+(t.maxY-t.minY)}function pt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function ft(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function dt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function mt(t,e,n,i,r){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=i||(o=e+Math.ceil((n-e)/i/2)*i,Ao(t,o,e,n,r),a.push(e,o,o,n))}function gt(t,e){return t(e={exports:{}},e.exports),e.exports}function yt(t,e){if(!(this instanceof yt))return new yt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||function(t,e){return t<e?-1:t>e?1:0},this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function vt(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var i,r=function(t){for(var e=t[0],n=t[0],i=t[0],r=t[0],o=0;o<t.length;o++){var a=t[o];a[0]<e[0]&&(e=a),a[0]>i[0]&&(i=a),a[1]<n[1]&&(n=a),a[1]>r[1]&&(r=a)}var s=[e,n,i,r],l=s.slice();for(o=0;o<t.length;o++)qo(t[o],s)||l.push(t[o]);var u=Bo(l),c=[];for(o=0;o<u.length;o++)c.push(l[u[o]]);return c}(t),o=Lo(16,["[0]","[1]","[0]","[1]"]).load(t),a=[],s=0;s<r.length;s++){var l=r[s];o.remove(l),i=Ct(l,i),a.push(i)}var u=Lo(16);for(s=0;s<a.length;s++)u.insert(wt(a[s]));for(var c=e*e,h=n*n;a.length;){var p=a.shift(),f=p.p,d=p.next.p,m=kt(f,d);if(!(m<h)){var g=m/c;(l=function(t,e,n,i,r,o,a){for(var s=new Uo(null,_t),l=t.data;l;){for(var u=0;u<l.children.length;u++){var c=l.children[u],h=l.leaf?Et(c,n,i):function(t,e,n){if(bt(t,n)||bt(e,n))return 0;var i=St(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===i)return 0;var r=St(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===r)return 0;var o=St(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=St(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(i,r,o,a)}(n,i,c);h>o||s.push({node:c,dist:h})}for(;s.length&&!s.peek().node.children;){var p=s.pop(),f=p.node,d=Et(f,e,n),m=Et(f,i,r);if(p.dist<d&&p.dist<m&&xt(n,f,a)&&xt(i,f,a))return f}(l=s.pop())&&(l=l.node)}return null}(o,p.prev.p,f,d,p.next.next.p,g,u))&&Math.min(kt(l,f),kt(l,d))<=g&&(a.push(p),a.push(Ct(l,p)),o.remove(l),u.remove(p),u.insert(wt(p)),u.insert(wt(p.next)))}}p=i;var y=[];do{y.push(p.p),p=p.next}while(p!==i);return y.push(p.p),y}function _t(t,e){return t.dist-e.dist}function bt(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function xt(t,e,n){for(var i=Math.min(t[0],e[0]),r=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),a=Math.max(t[1],e[1]),s=n.search({minX:i,minY:r,maxX:o,maxY:a}),l=0;l<s.length;l++)if(function(t,e,n,i){return t!==i&&e!==n&&Go(t,e,n)>0!=Go(t,e,i)>0&&Go(n,i,t)>0!=Go(n,i,e)>0}(s[l].p,s[l].next.p,t,e))return!1;return!0}function wt(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function Ct(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function kt(t,e){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function Et(t,e,n){var i=e[0],r=e[1],o=n[0]-i,a=n[1]-r;if(0!==o||0!==a){var s=((t[0]-i)*o+(t[1]-r)*a)/(o*o+a*a);s>1?(i=n[0],r=n[1]):s>0&&(i+=o*s,r+=a*s)}return(o=t[0]-i)*o+(a=t[1]-r)*a}function St(t,e,n,i,r,o,a,s){var l,u,c,h,p=n-t,f=i-e,d=a-r,m=s-o,g=t-r,y=e-o,v=p*p+f*f,_=p*d+f*m,b=d*d+m*m,x=p*g+f*y,w=d*g+m*y,C=v*b-_*_,k=C,E=C;0===C?(u=0,k=1,h=w,E=b):(h=v*w-_*x,(u=_*w-b*x)<0?(u=0,h=w,E=b):u>k&&(u=k,h=w+_,E=b)),h<0?(h=0,-x<0?u=0:-x>v?u=k:(u=-x,k=v)):h>E&&(h=E,-x+_<0?u=0:-x+_>v?u=k:(u=-x+_,k=v));var S=(1-(c=0===h?0:h/E))*r+c*a-((1-(l=0===u?0:u/k))*t+l*n),I=(1-c)*o+c*s-((1-l)*e+l*i);return S*S+I*I}function It(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.concavity||1/0,i=[];if(I(t,(function(t){i.push([t[0],t[1]])})),!i.length)return null;var r=Ho(i,n);return r.length>3?o([r]):null}function Tt(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=q(t),o=G(e),a=e.geometry?e.geometry.type:e.type,s=e.bbox;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,s))return!1;"Polygon"===a&&(o=[o]);for(var l=0,u=!1;l<o.length&&!u;l++)if(Pt(r,o[l][0],i)){for(var c=!1,h=1;h<o[l].length&&!c;)Pt(r,o[l][h],!i)&&(c=!0),h++;c||(u=!0)}return u}function Pt(t,e,n){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,o=e.length-1;r<e.length;o=r++){var a=e[r][0],s=e[r][1],l=e[o][0],u=e[o][1];if(t[1]*(a-l)+s*(l-t[0])+u*(t[0]-a)==0&&(a-t[0])*(l-t[0])<=0&&(s-t[1])*(u-t[1])<=0)return!n;s>t[1]!=u>t[1]&&t[0]<(l-a)*(t[1]-s)/(u-s)+a&&(i=!i)}return i}function At(t,e){var n=[];return O(e,(function(e){L(t,(function(t){Tt(t,e)&&n.push(t)}))})),u(n)}function Lt(t,e){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var n=!1;return u(function(t){if(t.length<3)return[];t.sort(Rt);for(var e,n,i,r=t.length-1,o=t[r].x,a=t[0].x,s=t[r].y,l=s;r--;)t[r].y<s&&(s=t[r].y),t[r].y>l&&(l=t[r].y);var u,c=a-o,h=l-s,p=c>h?c:h,f=.5*(a+o),d=.5*(l+s),m=[new Mt({x:f-20*p,y:d-p,__sentinel:!0},{x:f,y:d+20*p,__sentinel:!0},{x:f+20*p,y:d-p,__sentinel:!0})],g=[],y=[];for(r=t.length;r--;){for(y.length=0,u=m.length;u--;)(c=t[r].x-m[u].x)>0&&c*c>m[u].r?(g.push(m[u]),m.splice(u,1)):c*c+(h=t[r].y-m[u].y)*h>m[u].r||(y.push(m[u].a,m[u].b,m[u].b,m[u].c,m[u].c,m[u].a),m.splice(u,1));for(Ot(y),u=y.length;u;)n=y[--u],e=y[--u],i=t[r],Math.abs(2*((n.x-e.x)*(i.y-n.y)-(n.y-e.y)*(i.x-n.x)))>1e-12&&m.push(new Mt(e,n,i))}for(Array.prototype.push.apply(g,m),r=g.length;r--;)(g[r].a.__sentinel||g[r].b.__sentinel||g[r].c.__sentinel)&&g.splice(r,1);return g}(t.features.map((function(t){var i={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?i.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,i.z=t.geometry.coordinates[2]),i}))).map((function(t){var e=[t.a.x,t.a.y],i=[t.b.x,t.b.y],r=[t.c.x,t.c.y],a={};return n?(e.push(t.a.z),i.push(t.b.z),r.push(t.c.z)):a={a:t.a.z,b:t.b.z,c:t.c.z},o([[e,i,r,e]],a)})))}function Mt(t,e,n){this.a=t,this.b=e,this.c=n;var i,r,o=e.x-t.x,a=e.y-t.y,s=n.x-t.x,l=n.y-t.y,u=o*(t.x+e.x)+a*(t.y+e.y),c=s*(t.x+n.x)+l*(t.y+n.y),h=2*(o*(n.y-e.y)-a*(n.x-e.x));this.x=(l*u-a*c)/h,this.y=(o*c-s*u)/h,this.r=(i=this.x-t.x)*i+(r=this.y-t.y)*r}function Rt(t,e){return e.x-t.x}function Ot(t){var e,n,i,r,o,a=t.length;t:for(;a;)for(n=t[--a],e=t[--a],i=a;i;)if(o=t[--i],e===(r=t[--i])&&n===o||e===o&&n===r){t.splice(a,2),t.splice(i,2),a-=2;continue t}}function Dt(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var i=n.units,r=q(t),o=q(e),a=b(o[1]-r[1]),s=b(o[0]-r[0]),l=b(r[1]),u=b(o[1]),c=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(l)*Math.cos(u);return m(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),i)}function Nt(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Ft(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return Ft(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return zt(t);default:throw new Error("unknown GeoJSON type")}}function Ft(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=function t(e){var n={};return e?(Object.keys(e).forEach((function(i){var r=e[i];n[i]="object"==typeof r?null===r?null:r.length?r.map((function(t){return t})):t(r):r})),n):n}(t.properties),e.geometry=zt(t.geometry),e}function zt(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return zt(t)})),e):(e.coordinates=function t(e){return"object"!=typeof e[0]?e.slice():e.map((function(e){return t(e)}))}(t.coordinates),e)}function Bt(t,e){function n(t,e){e.length&&e.pop();for(var n=l[t<0?~t:t],i=0,r=n.length;i<r;++i)e.push(s(n[i],i));t<0&&Wo(e,r)}function i(t){return s(t)}function r(t){for(var e=[],i=0,r=t.length;i<r;++i)n(t[i],e);return e.length<2&&e.push(e[0]),e}function o(t){for(var e=r(t);e.length<4;)e.push(e[0]);return e}function a(t){return t.map(o)}var s=Zo(t.transform),l=t.arcs;return function t(e){var n,o=e.type;switch(o){case"GeometryCollection":return{type:o,geometries:e.geometries.map(t)};case"Point":n=i(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(i);break;case"LineString":n=r(e.arcs);break;case"MultiLineString":n=e.arcs.map(r);break;case"Polygon":n=a(e.arcs);break;case"MultiPolygon":n=e.arcs.map(a);break;default:return null}return{type:o,coordinates:n}}(e)}function Vt(t,e){function n(t){t.forEach((function(e){e.forEach((function(e){(r[e=e<0?~e:e]||(r[e]=[])).push(t)}))})),o.push(t)}function i(e){return function(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)o+=(e=r)[0]*(r=t[n])[1]-e[1]*r[0];return Math.abs(o)}(Bt(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var r={},o=[],a=[];return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":n(e.arcs);break;case"MultiPolygon":e.arcs.forEach(n)}})),o.forEach((function(t){if(!t._){var e=[],n=[t];for(t._=1,a.push(e);t=n.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){r[t<0?~t:t].forEach((function(t){t._||(t._=1,n.push(t))}))}))}))}})),o.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:a.map((function(e){var n,o=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){r[t<0?~t:t].length<2&&o.push(t)}))}))})),(n=(o=Yo(t,o)).length)>1)for(var a,s,l=1,u=i(o[0]);l<n;++l)(a=i(o[l]))>u&&(s=o[0],o[0]=o[l],o[l]=s,u=a);return o}))}}function Ut(t,e,n){for(var i,r=e+(n---e>>1);e<r;++e,--n)i=t[e],t[e]=t[n],t[n]=i}function jt(t){return null==t?{type:null}:("FeatureCollection"===t.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(qt)};return null!=t.bbox&&(e.bbox=t.bbox),e}:"Feature"===t.type?qt:Gt)(t)}function qt(t){var e,n=Gt(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Gt(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Gt)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ht(t){var e,n=t[0],i=t[1];return i<n&&(e=n,n=i,i=e),n+31*i}function Xt(t,e){var n,i=t[0],r=t[1],o=e[0],a=e[1];return r<i&&(n=i,i=r,r=n),a<o&&(n=o,o=a,a=n),i===o&&r===a}function Zt(t){return t[0].toString()+","+t[1].toString()}function Wt(t,n){var i="object"==typeof n?n.mutate:n;if(!t)throw new Error("geojson is required");var r=J(t),o=[];switch(r){case"LineString":o=Yt(t);break;case"MultiLineString":case"Polygon":G(t).forEach((function(t){o.push(Yt(t))}));break;case"MultiPolygon":G(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(Yt(t))})),o.push(e)}));break;case"Point":return t;case"MultiPoint":var a={};G(t).forEach((function(t){var e=t.join("-");a.hasOwnProperty(e)||(o.push(t),a[e]=!0)}));break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===i?(t.coordinates=o,t):{type:r,coordinates:o}:!0===i?(t.geometry.coordinates=o,t):e({type:r,coordinates:o},t.properties,t.bbox)}function Yt(t){var e=G(t);if(2===e.length&&!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(e[0],e[1]))return e;var n,i,r=[],o=e.length-1;r.push(e[0]);for(var a=1;a<o;a++)(function(t,e,n){var i=n[0],r=n[1],o=t[0],a=t[1],s=e[0],l=e[1],u=s-o,c=l-a;return(i-o)*c-(r-a)*u==0&&(Math.abs(u)>=Math.abs(c)?u>0?o<=i&&i<=s:s<=i&&i<=o:c>0?a<=r&&r<=l:l<=r&&r<=a)})(e[a-1],i=e[a+1],n=e[a])||r.push(n);return r.push(i),r}function Kt(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}function Jt(t,e,n){var i=e.x,r=e.y,o=n.x-i,a=n.y-r;if(0!==o||0!==a){var s=((t.x-i)*o+(t.y-r)*a)/(o*o+a*a);s>1?(i=n.x,r=n.y):s>0&&(i+=o*s,r+=a*s)}return(o=t.x-i)*o+(a=t.y-r)*a}function Qt(t,e,n){if(t.length<=2)return t;var i=void 0!==e?e*e:1;return function(t,e){var n=t.length-1,i=[t[0]];return function t(e,n,i,r,o){for(var a,s=r,l=n+1;l<i;l++){var u=Jt(e[l],e[n],e[i]);u>s&&(a=l,s=u)}s>r&&(a-n>1&&t(e,n,a,r,o),o.push(e[a]),i-a>1&&t(e,a,i,r,o))}(t,0,n,e,i),i.push(t[n]),i}(t=n?t:function(t,e){for(var n,i=t[0],r=[i],o=1,a=t.length;o<a;o++)Kt(n=t[o],i)>e&&(r.push(n),i=n);return i!==n&&r.push(n),r}(t,i),i)}function $t(t,e,n){return Qt(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,n).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function te(t,e,n){return t.map((function(t){var i=t.map((function(t){return{x:t[0],y:t[1]}}));if(i.length<4)throw new Error("invalid polygon");for(var r=Qt(i,e,n).map((function(t){return[t.x,t.y]}));!function(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}(r);)r=Qt(i,e-=.01*e,n).map((function(t){return[t.x,t.y]}));return r[r.length-1][0]===r[0][0]&&r[r.length-1][1]===r[0][1]||r.push(r[0]),r}))}function ee(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.resolution||1e4,i=e.sharpness||.85;if(!t)throw new Error("line is required");if(!C(n))throw new Error("resolution must be an number");if(!C(i))throw new Error("sharpness must be an number");for(var r=[],o=new na({points:Y(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),duration:n,sharpness:i}),a=0;a<o.duration;a+=10){var l=o.pos(a);Math.floor(a/100)%2==0&&r.push([l.x,l.y])}return s(r,t.properties)}function ne(t){E(t);var e=Number(t[0]),n=Number(t[1]),i=Number(t[2]),r=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[e,n];return o([[a,[i,n],[i,r],[e,r],a]])}function ie(t){return ne(j(t))}function re(t){var e=t[0],n=t[1],i=t[2],r=t[3];if(Dt(t.slice(0,2),[i,n])>=Dt(t.slice(0,2),[e,r])){var o=(n+r)/2;return[e,o-(i-e)/2,i,o+(i-e)/2]}var a=(e+i)/2;return[a-(r-n)/2,n,a+(r-n)/2,r]}function oe(t,e,n,r){if(!k(r=r||{}))throw new Error("options is invalid");var o=r.units,a=r.properties,s=q(t),l=b(s[0]),u=b(s[1]),c=b(n),h=g(e,o),p=Math.asin(Math.sin(u)*Math.cos(h)+Math.cos(u)*Math.sin(h)*Math.cos(c));return i([_(l+Math.atan2(Math.sin(c)*Math.sin(h)*Math.cos(u),Math.cos(h)-Math.sin(u)*Math.sin(p))),_(p)],a)}function ae(t,e,n){var i=(n=n||{}).steps||64,r=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be a number");i=i||64,r=r||t.properties||{};for(var a=[],s=0;s<i;s++)a.push(oe(t,e,-360*s/i,n).geometry.coordinates);return a.push(a[0]),o([a],r)}function se(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");if(!0===n.final)return function(t,e){return(se(e,t)+180)%360}(t,e);var i=q(t),r=q(e),o=b(i[0]),a=b(r[0]),s=b(i[1]),l=b(r[1]),u=Math.sin(a-o)*Math.cos(l),c=Math.cos(s)*Math.sin(l)-Math.sin(s)*Math.cos(l)*Math.cos(a-o);return _(Math.atan2(u,c))}function le(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var r=j(t);return i([(r[0]+r[2])/2,(r[1]+r[3])/2],n)}function ue(t,e){var n=0,r=0,o=0;return I(t,(function(t){n+=t[0],r+=t[1],o++}),!0),i([n/o,r/o],e)}function ce(t){var e=[];return"FeatureCollection"===t.type?L(t,(function(t){I(t,(function(n){e.push(i(n,t.properties))}))})):I(t,(function(n){e.push(i(n,t.properties))})),u(e)}function he(t,e,n){n=n||2;var i,r,o,a,s,l,u,c=e&&e.length,h=c?e[0]*n:t.length,p=pe(t,0,h,n,!0),f=[];if(!p)return f;if(c&&(p=function(t,e,n,i){var r,o,a,s=[];for(r=0,o=e.length;r<o;r++)(a=pe(t,e[r]*i,r<o-1?e[r+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),s.push(function(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}(a));for(s.sort(de),r=0;r<s.length;r++)!function(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n.prev;var l,u=n,c=n.x,h=n.y,p=1/0;for(i=n.next;i!==u;)r>=i.x&&i.x>=c&&r!==i.x&&ge(o<h?r:a,o,c,h,o<h?a:r,o,i.x,i.y)&&((l=Math.abs(o-i.y)/(r-i.x))<p||l===p&&i.x>n.x)&&be(i,t)&&(n=i,p=l),i=i.next;return n}(t,e)){var n=xe(e,t);fe(n,n.next)}}(s[r],n),n=fe(n,n.next);return n}(t,e,p,n)),t.length>80*n){i=o=t[0],r=a=t[1];for(var d=n;d<h;d+=n)(s=t[d])<i&&(i=s),(l=t[d+1])<r&&(r=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-i,a-r))?1/u:0}return function t(e,n,i,r,o,a,s){if(e){!s&&a&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=me(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,a,s,l,u=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<u&&(s++,i=i.nextZ);e++);for(l=u;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,u*=2}while(a>1)}(r)}(e,r,o,a);for(var l,u,c=e;e.prev!==e.next;)if(l=e.prev,u=e.next,a?function(t,e,n,i){var r=t.prev,o=t,a=t.next;if(ye(r,o,a)>=0)return!1;for(var s=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,l=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,u=me(r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,e,n,i),c=me(s,l,e,n,i),h=t.nextZ;h&&h.z<=c;){if(h!==t.prev&&h!==t.next&&ge(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&ye(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(h=t.prevZ;h&&h.z>=u;){if(h!==t.prev&&h!==t.next&&ge(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&ye(h.prev,h,h.next)>=0)return!1;h=h.prevZ}return!0}(e,r,o,a):function(t){var e=t.prev,n=t,i=t.next;if(ye(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(ge(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&ye(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}(e))n.push(l.i/i),n.push(e.i/i),n.push(u.i/i),Ce(e),e=u.next,c=u.next;else if((e=u)===c){s?1===s?t(e=function(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!ve(r,o)&&_e(r,i,i.next,o)&&be(r,o)&&be(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),Ce(i),Ce(i.next),i=t=o),i=i.next}while(i!==t);return i}(e,n,i),n,i,r,o,a,2):2===s&&function(e,n,i,r,o,a){var s=e;do{for(var l=s.next.next;l!==s.prev;){if(s.i!==l.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&_e(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&be(t,e)&&be(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)}(s,l)){var u=xe(s,l);return s=fe(s,s.next),u=fe(u,u.next),t(s,n,i,r,o,a),void t(u,n,i,r,o,a)}l=l.next}s=s.next}while(s!==e)}(e,n,i,r,o,a):t(fe(e),n,i,r,o,a,1);break}}}(p,f,n,i,r,u),f}function pe(t,e,n,i,r){var o,a;if(r===Ee(t,e,n,i)>0)for(o=e;o<n;o+=i)a=we(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=we(o,t[o],t[o+1],a);return a&&ve(a,a.next)&&(Ce(a),a=a.next),a}function fe(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!ve(i,i.next)&&0!==ye(i.prev,i,i.next))i=i.next;else{if(Ce(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function de(t,e){return t.x-e.x}function me(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ge(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function ye(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function ve(t,e){return t.x===e.x&&t.y===e.y}function _e(t,e,n,i){return!!(ve(t,e)&&ve(n,i)||ve(t,i)&&ve(n,e))||ye(t,e,n)>0!=ye(t,e,i)>0&&ye(n,i,t)>0!=ye(n,i,e)>0}function be(t,e){return ye(t.prev,t,t.next)<0?ye(t,e,t.next)>=0&&ye(t,t.prev,e)>=0:ye(t,e,t.prev)<0||ye(t,t.next,e)<0}function xe(t,e){var n=new ke(t.i,t.x,t.y),i=new ke(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function we(t,e,n,i){var r=new ke(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Ce(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ke(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ee(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}function Se(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);r>0&&n.holes.push(i+=t[r-1].length)}return n}(t),n=ia(e.vertices,e.holes,2),i=[],r=[];n.forEach((function(t,i){var o=n[i];r.push([e.vertices[2*o],e.vertices[2*o+1]])}));for(var a=0;a<r.length;a+=3){var s=r.slice(a,a+3);s.push(r[a]),i.push(o([s]))}return i}function Ie(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,i=1/0;return L(e,(function(e,r){var o=Dt(t,e);o<i&&((n=Nt(e)).properties.featureIndex=r,n.properties.distanceToPoint=o,i=o)})),n}function Te(t,e,n,i,r){!function t(e,n,i,r,o){for(;r>i;){if(r-i>600){var a=r-i+1,s=n-i+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(i,Math.floor(n-s*u/a+c)),Math.min(r,Math.floor(n+(a-s)*u/a+c)),o)}var h=e[n],p=i,f=r;for(Pe(e,i,n),o(e[r],h)>0&&Pe(e,i,r);p<f;){for(Pe(e,p,f),p++,f--;o(e[p],h)<0;)p++;for(;o(e[f],h)>0;)f--}0===o(e[i],h)?Pe(e,i,f):Pe(e,++f,r),f<=n&&(i=f+1),n<=f&&(r=f-1)}}(t,e,n||0,i||t.length-1,r||function(t,e){return t<e?-1:t>e?1:0})}function Pe(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Ae(t,e){if(!(this instanceof Ae))return new Ae(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Le(t,e){Me(t,0,t.children.length,e,t)}function Me(t,e,n,i,r){r||(r=Ve(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],Re(r,t.leaf?i(o):o);return r}function Re(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Oe(t,e){return t.minX-e.minX}function De(t,e){return t.minY-e.minY}function Ne(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Fe(t){return t.maxX-t.minX+(t.maxY-t.minY)}function ze(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Be(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Ve(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ue(t,e,n,i,r){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=i||(Te(t,o=e+Math.ceil((n-e)/i/2)*i,e,n,r),a.push(e,o,o,n))}function je(t){var e=Ae(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=qe(e)).bbox=e}else t.bbox=t.bbox?t.bbox:Ge(t);return Ae.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){var n=qe(t);n.bbox=t,e.push(n)})):L(t,(function(t){t.bbox=t.bbox?t.bbox:Ge(t),e.push(t)})),Ae.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=qe(e)).bbox=e}return Ae.prototype.remove.call(this,t)},e.clear=function(){return Ae.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:Ae.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return Ae.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:Ae.prototype.all.call(this)}},e.toJSON=function(){return Ae.prototype.toJSON.call(this)},e.fromJSON=function(t){return Ae.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:Ge(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function qe(t){var e=[t[0],t[1]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],[t[2],t[3]],[t[0],t[3]],e]]}}}function Ge(t){var e=[1/0,1/0,-1/0,-1/0];return I(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function He(t){if(!t)throw new Error("geojson is required");var e=[];return N(t,(function(t){!function(t,e){var n=[],i=t.geometry;switch(i.type){case"Polygon":n=G(i);break;case"LineString":n=[G(i)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,i){var r=s([t,i],e);return r.bbox=function(t,e){var n=t[0],i=t[1],r=e[0],o=e[1];return[n<r?n:r,i<o?i:o,n>r?n:r,i>o?i:o]}(t,i),n.push(r),i})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}(t,e)})),u(e)}function Xe(t,n){var i={},r=[];if("LineString"===t.type&&(t=e(t)),"LineString"===n.type&&(n=e(n)),"Feature"===t.type&&"Feature"===n.type&&"LineString"===t.geometry.type&&"LineString"===n.geometry.type&&2===t.geometry.coordinates.length&&2===n.geometry.coordinates.length){var o=Ze(t,n);return o&&r.push(o),u(r)}var a=je();return a.load(He(n)),L(He(t),(function(t){L(a.search(t),(function(e){var n=Ze(t,e);if(n){var o=G(n).join(",");i[o]||(i[o]=!0,r.push(n))}}))})),u(r)}function Ze(t,e){var n=G(t),r=G(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],a=n[0][1],s=n[1][0],l=n[1][1],u=r[0][0],c=r[0][1],h=r[1][0],p=r[1][1],f=(p-c)*(s-o)-(h-u)*(l-a);if(0===f)return null;var d=((h-u)*(a-c)-(p-c)*(o-u))/f,m=((s-o)*(a-c)-(l-a)*(o-u))/f;return d>=0&&d<=1&&m>=0&&m<=1?i([o+d*(s-o),a+d*(l-a)]):null}function We(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var r=t.geometry?t.geometry.type:t.type;if("LineString"!==r&&"MultiLineString"!==r)throw new Error("lines must be LineString or MultiLineString");var o=i([1/0,1/0],{dist:1/0}),a=0;return N(t,(function(t){for(var r=G(t),l=0;l<r.length-1;l++){var u=i(r[l]);u.properties.dist=Dt(e,u,n);var c=i(r[l+1]);c.properties.dist=Dt(e,c,n);var h=Dt(u,c,n),p=Math.max(u.properties.dist,c.properties.dist),f=se(u,c),d=oe(e,p,f+90,n),m=oe(e,p,f-90,n),g=Xe(s([d.geometry.coordinates,m.geometry.coordinates]),s([u.geometry.coordinates,c.geometry.coordinates])),y=null;g.features.length>0&&((y=g.features[0]).properties.dist=Dt(e,y,n),y.properties.location=a+Dt(u,y,n)),u.properties.dist<o.properties.dist&&((o=u).properties.index=l,o.properties.location=a),c.properties.dist<o.properties.dist&&((o=c).properties.index=l+1,o.properties.location=a+h),y&&y.properties.dist<o.properties.dist&&((o=y).properties.index=l),a+=h}})),o}function Ye(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var i,r=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return(i=r?Ke(q(e),q(t)):Ke(q(t),q(e)))>180?-(360-i):i}function Ke(t,e){var n=b(t[1]),i=b(e[1]),r=b(e[0]-t[0]);r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI);var o=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(_(Math.atan2(r,o))+360)%360}function Je(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var i=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var r=q(t),o=q(e);return o[0]+=o[0]-r[0]>180?-360:r[0]-o[0]>180?360:0,x(function(t,e,n){var i=n=void 0===n?xo:Number(n),r=t[1]*Math.PI/180,o=e[1]*Math.PI/180,a=o-r,s=Math.abs(e[0]-t[0])*Math.PI/180;s>Math.PI&&(s-=2*Math.PI);var l=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),u=Math.abs(l)>1e-11?a/l:Math.cos(r);return Math.sqrt(a*a+u*u*s*s)*i}(r,o),"meters",i)}function Qe(t,e){return tn(t,"mercator",e)}function $e(t,e){return tn(t,"wgs84",e)}function tn(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var i=n.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&C(t[0])?t="mercator"===e?en(t):nn(t):(!0!==i&&(t=Nt(t)),I(t,(function(t){var n="mercator"===e?en(t):nn(t);t[0]=n[0],t[1]=n[1]}))),t}function en(t){var e=Math.PI/180,n=20037508.342789244,i=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return i[0]>n&&(i[0]=n),i[0]<-n&&(i[0]=-n),i[1]>n&&(i[1]=n),i[1]<-n&&(i[1]=-n),i}function nn(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function rn(t,n,r){if(!k(r=r||{}))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=i(t):"Point"===t.type?t=e(t):Z(t,"Point","point"),!n)throw new Error("line is required");Array.isArray(n)?n=s(n):"LineString"===n.type?n=e(n):Z(n,"LineString","line");var o=1/0,a=t.geometry.coordinates;return z(n,(function(t){var e=function(t,e,n,r){var o=r.mercator,a=!0!==o?Dt(e,t,r):on(e,t,r),s=v(!0!==o?se(e,t):Ye(e,t)),l=v(!0!==o?se(e,n):Ye(e,n)),u=Math.abs(s-l);if(u>90)return a;var c=(l+180)%360,h=v(!0!==o?se(n,t):Ye(n,t)),p=Math.abs(h-c);return p>180&&(p=Math.abs(p-360)),p>90?!0!==o?Dt(t,n,r):on(t,n,r):!0!==o?a*Math.sin(b(u)):function(t,e,n,r){var o=0;(Math.abs(t[0])>=180||Math.abs(e[0])>=180||Math.abs(n[0])>=180)&&(o=t[0]>0||e[0]>0||n[0]>0?-180:180);var a=i(n),s=$e(function(t,e,n){var i=t[0],r=t[1],o=e[0]-i,a=e[1]-r,s=((n[0]-i)*o+(n[1]-r)*a)/(o*o+a*a);return[i+s*o,r+s*a]}(Qe([t[0]+o,t[1]]),Qe([e[0]+o,e[1]]),Qe([n[0]+o,n[1]])));return 0!==o&&(s[0]-=o),Je(a,s,r)}(e,n,t,r)}(a,t.geometry.coordinates[0],t.geometry.coordinates[1],r);o>e&&(o=e)})),o}function on(t,e,n){var i=n.units,r=0;Math.abs(t[0])>=180&&(r=t[0]>0?-180:180),Math.abs(e[0])>=180&&(r=e[0]>0?-180:180);var o=Qe([t[0]+r,t[1]]),a=Qe([e[0]+r,e[1]]),s=function(t){return t*t},l=s(o[0]-a[0])+s(o[1]-a[1]);return x(Math.sqrt(l),"meters",i)}function an(t){for(var n=function(t){return"FeatureCollection"!==t.type?u("Feature"!==t.type?[e(t)]:[t]):t}(t),r=le(n),o=!1,a=0;!o&&a<n.features.length;){var s,l=n.features[a].geometry,c=!1;if("Point"===l.type)r.geometry.coordinates[0]===l.coordinates[0]&&r.geometry.coordinates[1]===l.coordinates[1]&&(o=!0);else if("MultiPoint"===l.type){var h=!1;for(s=0;!h&&s<l.coordinates.length;)r.geometry.coordinates[0]===l.coordinates[s][0]&&r.geometry.coordinates[1]===l.coordinates[s][1]&&(o=!0,h=!0),s++}else if("LineString"===l.type)for(s=0;!c&&s<l.coordinates.length-1;)sn(r.geometry.coordinates[0],r.geometry.coordinates[1],l.coordinates[s][0],l.coordinates[s][1],l.coordinates[s+1][0],l.coordinates[s+1][1])&&(c=!0,o=!0),s++;else if("MultiLineString"===l.type)for(var p=0;p<l.coordinates.length;){c=!1,s=0;for(var f=l.coordinates[p];!c&&s<f.length-1;)sn(r.geometry.coordinates[0],r.geometry.coordinates[1],f[s][0],f[s][1],f[s+1][0],f[s+1][1])&&(c=!0,o=!0),s++;p++}else"Polygon"!==l.type&&"MultiPolygon"!==l.type||Tt(r,l)&&(o=!0);a++}if(o)return r;var d=u([]);for(a=0;a<n.features.length;a++)d.features=d.features.concat(ce(n.features[a]).features);return i(Ie(r,d).geometry.coordinates)}function sn(t,e,n,i,r,o){return Math.sqrt((r-n)*(r-n)+(o-i)*(o-i))===Math.sqrt((t-n)*(t-n)+(e-i)*(e-i))+Math.sqrt((r-t)*(r-t)+(o-e)*(o-e))}function ln(t){return D(t,(function(t,e){return t+function t(e){var n,i=0;switch(e.type){case"Polygon":return un(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)i+=un(e.coordinates[n]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)i+=t(e.geometries[n]);return i}}(e)}),0)}function un(t){var e=0;if(t&&t.length>0){e+=Math.abs(cn(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(cn(t[n]))}return e}function cn(t){var e,n,i,r,o,a,s=0,l=t.length;if(l>2){for(a=0;a<l;a++)a===l-2?(i=l-2,r=l-1,o=0):a===l-1?(i=l-1,r=0,o=1):(i=a,r=a+1,o=a+2),e=t[i],n=t[r],s+=(hn(t[o][0])-hn(e[0]))*Math.sin(hn(n[1]));s=s*aa*aa/2}return s}function hn(t){return t*Math.PI/180}function pn(t,e){if(!k(e=e||{}))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return B(t,(function(t,n){var i=n.geometry.coordinates;return t+Dt(i[0],i[1],e)}),0)}function fn(t,e,n,i){if(!k(i=i||{}))throw new Error("options is invalid");var r,o=[];if("Feature"===t.type)r=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");r=t.coordinates}for(var a,l,u,c=0,h=0;h<r.length&&!(e>=c&&h===r.length-1);h++){if(c>e&&0===o.length){if(!(a=e-c))return o.push(r[h]),s(o);l=se(r[h],r[h-1])-180,u=oe(r[h],a,l,i),o.push(u.geometry.coordinates)}if(c>=n)return(a=n-c)?(l=se(r[h],r[h-1])-180,u=oe(r[h],a,l,i),o.push(u.geometry.coordinates),s(o)):(o.push(r[h]),s(o));if(c>=e&&o.push(r[h]),h===r.length-1)return s(o);c+=Dt(r[h],r[h+1],i)}return s(r[r.length-1])}function dn(t,e,n){var i=(n=n||{}).ignoreEndVertices;if(!k(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var r=q(t),o=G(e),a=0;a<o.length-1;a++){var s=!1;if(i&&(0===a&&(s="start"),a===o.length-2&&(s="end"),0===a&&a+1===o.length-1&&(s="both")),function(t,e,n,i){var r=n[0],o=n[1],a=t[0],s=t[1],l=e[0],u=e[1],c=l-a,h=u-s;return(n[0]-a)*h-(n[1]-s)*c==0&&(i?"start"===i?Math.abs(c)>=Math.abs(h)?c>0?a<r&&r<=l:l<=r&&r<a:h>0?s<o&&o<=u:u<=o&&o<s:"end"===i?Math.abs(c)>=Math.abs(h)?c>0?a<=r&&r<l:l<r&&r<=a:h>0?s<=o&&o<u:u<o&&o<=s:"both"===i?Math.abs(c)>=Math.abs(h)?c>0?a<r&&r<l:l<r&&r<a:h>0?s<o&&o<u:u<o&&o<s:void 0:Math.abs(c)>=Math.abs(h)?c>0?a<=r&&r<=l:l<=r&&r<=a:h>0?s<=o&&o<=u:u<=o&&o<=s)}(o[a],o[a+1],r,s))return!0}return!1}function mn(t,e){var n=J(t),i=J(e),r=Y(t),o=Y(e);switch(n){case"Point":switch(i){case"MultiPoint":return function(t,e){var n,i=!1;for(n=0;n<e.coordinates.length;n++)if(yn(e.coordinates[n],t.coordinates)){i=!0;break}return i}(r,o);case"LineString":return dn(r,o,{ignoreEndVertices:!0});case"Polygon":return Tt(r,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+i+" geometry not supported")}case"MultiPoint":switch(i){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var i=!1,r=0;r<e.coordinates.length;r++)yn(t.coordinates[n],e.coordinates[r])&&(i=!0);if(!i)return!1}return!0}(r,o);case"LineString":return function(t,e){for(var n=!1,i=0;i<t.coordinates.length;i++){if(!dn(t.coordinates[i],e))return!1;n||(n=dn(t.coordinates[i],e,{ignoreEndVertices:!0}))}return n}(r,o);case"Polygon":return function(t,e){for(var n=!0,i=0;i<t.coordinates.length;i++){var r=Tt(t.coordinates[1],e);if(!r){n=!1;break}r=Tt(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&r}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!dn(t.coordinates[n],e))return!1;return!0}(r,o);case"Polygon":return function(t,e){if(!gn(j(e),j(t)))return!1;for(var n=!1,i=0;i<t.coordinates.length-1;i++){if(!Tt(t.coordinates[i],e))return!1;n||(n=Tt(t.coordinates[i],e,{ignoreBoundary:!0})),n||(n=Tt(function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(t.coordinates[i],t.coordinates[i+1]),e,{ignoreBoundary:!0}))}return n}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"Polygon":return function(t,e){var n=j(t);if(!gn(j(e),n))return!1;for(var i=0;i<t.coordinates[0].length;i++)if(!Tt(t.coordinates[0][i],e))return!1;return!0}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function gn(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function yn(t,e){return t[0]===e[0]&&t[1]===e[1]}function vn(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var r=n.mask,o=n.properties,a=[];if(null==e)throw new Error("cellSide is required");if(!C(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(r&&-1===["Polygon","MultiPolygon"].indexOf(J(r)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],l=t[1],c=t[2],h=t[3],p=e/Dt([s,l],[c,l],n)*(c-s),f=e/Dt([s,l],[s,h],n)*(h-l),d=c-s,m=h-l,g=Math.floor(d/p),y=(m-Math.floor(m/f)*f)/2,v=s+(d-g*p)/2;v<=c;){for(var _=l+y;_<=h;){var b=i([v,_],o);r?mn(b,r)&&a.push(b):a.push(b),_+=f}v+=p}return u(a)}function _n(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.precision,i=e.coordinates,r=e.mutate;if(n=null==n||isNaN(n)?6:n,i=null==i||isNaN(i)?3:i,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof i)throw new Error("<coordinates> must be a number");!1!==r&&void 0!==r||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return I(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var i=0;i<t.length;i++)t[i]=Math.round(t[i]*e)/e}(t,o,i)})),t}function bn(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!bn(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function xn(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function wn(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!wn(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function Cn(t,e){var n=[],i=je();return N(e,(function(e){if(n.forEach((function(t,e){t.id=e})),n.length){var r=i.search(e);if(r.features.length){var o=En(e,r);n=n.filter((function(t){return t.id!==o.id})),i.remove(o),L(kn(o,e),(function(t){n.push(t),i.insert(t)}))}}else(n=kn(t,e).features).forEach((function(t){t.bbox||(t.bbox=re(j(t)))})),i.load(u(n))})),u(n)}function kn(t,e){var n=[],i=G(t)[0],r=G(t)[t.geometry.coordinates.length-1];if(Sn(i,q(e))||Sn(r,q(e)))return u([t]);var o=je(),a=He(t);o.load(a);var l=o.search(e);if(!l.features.length)return u([t]);var c=En(e,l),h=M(a,(function(t,i,r){var o=G(i)[1],a=q(e);return r===c.id?(t.push(a),n.push(s(t)),Sn(a,o)?[a]:[a,o]):(t.push(o),t)}),[i]);return h.length>1&&n.push(s(h)),u(n)}function En(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,i=1/0;return L(e,(function(e){var r=We(e,t).properties.dist;r<i&&(n=e,i=r)})),n}function Sn(t,e){return t[0]===e[0]&&t[1]===e[1]}function In(t,e,n,i,r){if(!k(r=r||{}))throw new Error("options is invalid");var o=r.steps,a=r.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(null==n)throw new Error("bearing1 is required");if(null==i)throw new Error("bearing2 is required");if("object"!=typeof r)throw new Error("options must be an object");o=o||64;var l=Tn(n),u=Tn(i),c=t.properties;if(l===u)return s(ae(t,e,r).geometry.coordinates[0],c);for(var h=l,p=l<u?u:u+360,f=h,d=[],m=0;f<p;)d.push(oe(t,e,f,a).geometry.coordinates),f=h+360*++m/o;return f>p&&d.push(oe(t,e,p,a).geometry.coordinates),s(d,c)}function Tn(t){var e=t%360;return e<0&&(e+=360),e}function Pn(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.properties,i=J(t),r=G(t);if(n=n||t.properties||{},!r.length)throw new Error("polygon must contain coordinates");switch(i){case"Polygon":return An(r,n);case"MultiPolygon":var o=[];return r.forEach((function(t){o.push(An(t,n))})),u(o);default:throw new Error("geom "+i+" not supported")}}function An(t,e){return t.length>1?c(t,e):s(t[0],e)}function Ln(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.properties,i=e.autoComplete,r=e.orderCoords;if(!t)throw new Error("lines is required");switch(i=void 0===i||i,r=void 0===r||r,J(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach((function(t){o.push(G(Mn(t,{},i,r)))})),p(o,n)}return Mn(t,n,i,r)}function Mn(t,e,n,i){e=e||t.properties||{};var r=G(t),a=J(t);if(!r.length)throw new Error("line must contain coordinates");switch(a){case"LineString":return n&&(r=Rn(r)),o([r],e);case"MultiLineString":var l=[],u=0;return r.forEach((function(t){if(n&&(t=Rn(t)),i){var e=function(t){var e=t[1],n=t[3];return Math.abs(t[0]-t[2])*Math.abs(e-n)}(j(s(t)));e>u?(l.unshift(t),u=e):l.push(t)}else l.push(t)})),o(l,e);default:throw new Error("geometry type "+a+" is not supported")}}function Rn(t){var e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]||t.push(e),t}function On(t,e,n){var i,r,o,a,s,l=t.length,u=Nn(t[0],e),c=[];for(n||(n=[]),i=1;i<l;i++){for(r=t[i-1],a=s=Nn(o=t[i],e);;){if(!(u|a)){c.push(r),a!==s?(c.push(o),i<l-1&&(n.push(c),c=[])):i===l-1&&c.push(o);break}if(u&a)break;u?u=Nn(r=Dn(r,o,u,e),e):a=Nn(o=Dn(r,o,a,e),e)}u=s}return c.length&&n.push(c),n}function Dn(t,e,n,i){return 8&n?[t[0]+(e[0]-t[0])*(i[3]-t[1])/(e[1]-t[1]),i[3]]:4&n?[t[0]+(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1]),i[1]]:2&n?[i[2],t[1]+(e[1]-t[1])*(i[2]-t[0])/(e[0]-t[0])]:1&n?[i[0],t[1]+(e[1]-t[1])*(i[0]-t[0])/(e[0]-t[0])]:null}function Nn(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Fn(t,e){for(var n=[],i=0;i<t.length;i++){var r=ma.polygon(t[i],e);r.length>0&&(r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]||r.push(r[0]),r.length>=4&&n.push(r))}return n}function zn(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function Bn(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?t===e:function(t,e,n){var i,r;if(Vn(t)||Vn(e))return!1;if(t.prototype!==e.prototype)return!1;if(zn(t))return!!zn(e)&&Bn(t=ga.call(t),e=ga.call(e),n);if(Un(t)){if(!Un(e))return!1;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}try{var o=Object.keys(t),a=Object.keys(e)}catch(t){return!1}if(o.length!==a.length)return!1;for(o.sort(),a.sort(),i=o.length-1;i>=0;i--)if(o[i]!==a[i])return!1;for(i=o.length-1;i>=0;i--)if(!Bn(t[r=o[i]],e[r],n))return!1;return typeof t==typeof e}(t,e,n))}function Vn(t){return null==t}function Un(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}function jn(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var i,r=n.tolerance||0,o=[],a=je();return a.load(He(t)),z(e,(function(t){var e=!1;L(a.search(t),(function(n){if(!1===e){var o=G(t).sort(),a=G(n).sort();Bn(o,a)||(0===r?dn(o[0],n)&&dn(o[1],n):We(n,o[0]).properties.dist<=r&&We(n,o[1]).properties.dist<=r)?(e=!0,i=i?qn(i,t):t):(0===r?dn(a[0],t)&&dn(a[1],t):We(t,a[0]).properties.dist<=r&&We(t,a[1]).properties.dist<=r)&&(i=i?qn(i,n):n)}})),!1===e&&i&&(o.push(i),i=void 0)})),i&&o.push(i),u(o)}function qn(t,e){var n=G(e),i=G(t),r=i[0],o=i[i.length-1],a=t.geometry.coordinates;return Bn(n[0],r)?a.unshift(n[1]):Bn(n[0],o)?a.push(n[1]):Bn(n[1],r)?a.unshift(n[0]):Bn(n[1],o)&&a.push(n[0]),t}function Gn(t){var e=t%360;return e<0&&(e+=360),e}function Hn(t,e,n,r){if(!k(r=r||{}))throw new Error("options is invalid");var o=r.units,a=r.properties;if(!t)throw new Error("origin is required");if(null==e)throw new Error("distance is required");if(null==n)throw new Error("bearing is required");if(!(e>=0))throw new Error("distance must be greater than 0");var s=x(e,o,"meters"),l=q(t),u=function(t,e,n,i){var r=e/(i=void 0===i?xo:Number(i)),o=t[0]*Math.PI/180,a=b(t[1]),s=b(n),l=r*Math.cos(s),u=a+l;Math.abs(u)>Math.PI/2&&(u=u>0?Math.PI-u:-Math.PI-u);var c=Math.log(Math.tan(u/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),h=Math.abs(c)>1e-11?l/c:Math.cos(a);return[(180*(o+r*Math.sin(s)/h)/Math.PI+540)%360-180,180*u/Math.PI]}(l,s,n);return u[0]+=u[0]-l[0]>180?-360:l[0]-u[0]>180?360:0,i(u,a)}function Xn(t,e,n,i,r,o){for(var a=0;a<t.length;a++){var s=t[a],l=t[a+1];a===t.length-1&&(l=t[0]),i=Zn(s,l,e),n<=0&&i>0?function(t,e,n){return Zn(t,e,n)<0}(e,s,r)||(r=s):n>0&&i<=0&&(function(t,e,n){return Zn(t,e,n)>0}(e,s,o)||(o=s)),n=i}return[r,o]}function Zn(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function Wn(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,i,r=G(t),o=0,a=1;a<r.length;)n=i||r[0],o+=((i=r[a])[0]-n[0])*(i[1]+n[1]),a++;return o>0}function Yn(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return O(t,(function(t){Yn(t,e)})),t;case"LineString":return Kn(G(t),e),t;case"Polygon":return Jn(G(t),e),t;case"MultiLineString":return G(t).forEach((function(t){Kn(t,e)})),t;case"MultiPolygon":return G(t).forEach((function(t){Jn(t,e)})),t;case"Point":case"MultiPoint":return t}}function Kn(t,e){Wn(t)===e&&t.reverse()}function Jn(t,e){Wn(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Wn(t[n])===e&&t[n].reverse()}function Qn(t,e,n,i){i=i||{};for(var r=Object.keys(ya),o=0;o<r.length;o++){var a=r[o],s=i[a];va[a]=s=null!=s?s:ya[a]}va.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var l,u=function(t,e,n){for(var i=t.length-1,r=t[0].length-1,o={rows:i,cols:r,cells:[]},a=e+Math.abs(n),s=0;s<i;++s){o.cells[s]=[];for(var l=0;l<r;++l){var u=0,c=t[s+1][l],h=t[s+1][l+1],p=t[s][l+1],f=t[s][l];if(!(isNaN(c)||isNaN(h)||isNaN(p)||isNaN(f))){u|=c<e?0:c>a?128:64,u|=h<e?0:h>a?32:16,u|=p<e?0:p>a?8:4;var d=+(u|=f<e?0:f>a?2:1),m=0;if(17===u||18===u||33===u||34===u||38===u||68===u||72===u||98===u||102===u||132===u||136===u||137===u||152===u||153===u){var g=(c+h+p+f)/4;m=g>a?2:g<e?0:1,34===u?1===m?u=35:0===m&&(u=136):136===u?1===m?(u=35,m=4):0===m&&(u=34):17===u?1===m?(u=155,m=4):0===m&&(u=153):68===u?1===m?(u=103,m=4):0===m&&(u=102):153===u?1===m&&(u=155):102===u?1===m&&(u=103):152===u?m<2&&(u=156,m=1):137===u?m<2&&(u=139,m=1):98===u?m<2&&(u=99,m=1):38===u?m<2&&(u=39,m=1):18===u?m>0?(u=156,m=4):u=152:33===u?m>0?(u=139,m=4):u=137:72===u?m>0?(u=99,m=4):u=98:132===u&&(m>0?(u=39,m=4):u=38)}if(0!=u&&170!=u){var y,v,_,b,x,w,C,k;y=v=_=b=x=w=C=k=.5;var E=[];1===u?(_=1-$n(e,p,f),k=1-$n(e,c,f),E.push(rs[u])):169===u?(_=$n(a,f,p),k=$n(a,f,c),E.push(rs[u])):4===u?(w=1-$n(e,h,p),b=$n(e,f,p),E.push(ns[u])):166===u?(w=$n(a,p,h),b=1-$n(a,p,f),E.push(ns[u])):16===u?(x=$n(e,p,h),v=$n(e,c,h),E.push(es[u])):154===u?(x=1-$n(a,h,p),v=1-$n(a,h,c),E.push(es[u])):64===u?(C=$n(e,f,c),y=1-$n(e,h,c),E.push(as[u])):106===u?(C=1-$n(a,c,f),y=$n(a,c,h),E.push(as[u])):168===u?(b=$n(a,f,p),_=$n(e,f,p),k=$n(e,f,c),C=$n(a,f,c),E.push(is[u]),E.push(rs[u])):2===u?(b=1-$n(e,p,f),_=1-$n(a,p,f),k=1-$n(a,c,f),C=1-$n(e,c,f),E.push(is[u]),E.push(rs[u])):162===u?(x=$n(a,p,h),w=$n(e,p,h),b=1-$n(e,p,f),_=1-$n(a,p,f),E.push(is[u]),E.push(rs[u])):8===u?(x=1-$n(e,h,p),w=1-$n(a,h,p),b=$n(a,f,p),_=$n(e,f,p),E.push(es[u]),E.push(ns[u])):138===u?(x=1-$n(e,h,p),w=1-$n(a,h,p),y=1-$n(a,h,c),v=1-$n(e,h,c),E.push(es[u]),E.push(ns[u])):32===u?(x=$n(a,p,h),w=$n(e,p,h),y=$n(e,c,h),v=$n(a,c,h),E.push(es[u]),E.push(ns[u])):42===u?(k=1-$n(a,c,f),C=1-$n(e,c,f),y=$n(e,c,h),v=$n(a,c,h),E.push(os[u]),E.push(as[u])):128===u&&(k=$n(e,f,c),C=$n(a,f,c),y=1-$n(a,h,c),v=1-$n(e,h,c),E.push(os[u]),E.push(as[u])),5===u?(w=1-$n(e,h,p),k=1-$n(e,c,f),E.push(ns[u])):165===u?(w=$n(a,p,h),k=$n(a,f,c),E.push(ns[u])):20===u?(b=$n(e,f,p),v=$n(e,c,h),E.push(is[u])):150===u?(b=1-$n(a,p,f),v=1-$n(a,h,c),E.push(is[u])):80===u?(x=$n(e,p,h),C=$n(e,f,c),E.push(es[u])):90===u?(x=1-$n(a,h,p),C=1-$n(a,c,f),E.push(es[u])):65===u?(_=1-$n(e,p,f),y=1-$n(e,h,c),E.push(rs[u])):105===u?(_=$n(a,f,p),y=$n(a,c,h),E.push(rs[u])):160===u?(x=$n(a,p,h),w=$n(e,p,h),k=$n(e,f,c),C=$n(a,f,c),E.push(es[u]),E.push(ns[u])):10===u?(x=1-$n(e,h,p),w=1-$n(a,h,p),k=1-$n(a,c,f),C=1-$n(e,c,f),E.push(es[u]),E.push(ns[u])):130===u?(b=1-$n(e,p,f),_=1-$n(a,p,f),y=1-$n(a,h,c),v=1-$n(e,h,c),E.push(is[u]),E.push(rs[u])):40===u?(b=$n(a,f,p),_=$n(e,f,p),y=$n(e,c,h),v=$n(a,c,h),E.push(is[u]),E.push(rs[u])):101===u?(w=$n(a,p,h),y=$n(a,c,h),E.push(ns[u])):69===u?(w=1-$n(e,h,p),y=1-$n(e,h,c),E.push(ns[u])):149===u?(k=$n(a,f,c),v=1-$n(a,h,c),E.push(os[u])):21===u?(k=1-$n(e,c,f),v=$n(e,c,h),E.push(os[u])):86===u?(b=1-$n(a,p,f),C=1-$n(a,c,f),E.push(is[u])):84===u?(b=$n(e,f,p),C=$n(e,f,c),E.push(is[u])):89===u?(x=1-$n(a,h,p),_=$n(a,f,p),E.push(rs[u])):81===u?(x=$n(e,p,h),_=1-$n(e,p,f),E.push(rs[u])):96===u?(x=$n(a,p,h),w=$n(e,p,h),C=$n(e,f,c),y=$n(a,c,h),E.push(es[u]),E.push(ns[u])):74===u?(x=1-$n(e,h,p),w=1-$n(a,h,p),C=1-$n(a,c,f),y=1-$n(e,h,c),E.push(es[u]),E.push(ns[u])):24===u?(x=1-$n(a,h,p),b=$n(a,f,p),_=$n(e,f,p),v=$n(e,c,h),E.push(es[u]),E.push(rs[u])):146===u?(x=$n(e,p,h),b=1-$n(e,p,f),_=1-$n(a,p,f),v=1-$n(a,h,c),E.push(es[u]),E.push(rs[u])):6===u?(w=1-$n(e,h,p),b=1-$n(a,p,f),k=1-$n(a,c,f),C=1-$n(e,c,f),E.push(ns[u]),E.push(is[u])):164===u?(w=$n(a,p,h),b=$n(e,f,p),k=$n(e,f,c),C=$n(a,f,c),E.push(ns[u]),E.push(is[u])):129===u?(_=1-$n(e,p,f),k=$n(a,f,c),y=1-$n(a,h,c),v=1-$n(e,h,c),E.push(rs[u]),E.push(os[u])):41===u?(_=$n(a,f,p),k=1-$n(e,c,f),y=$n(e,c,h),v=$n(a,c,h),E.push(rs[u]),E.push(os[u])):66===u?(b=1-$n(e,p,f),_=1-$n(a,p,f),C=1-$n(a,c,f),y=1-$n(e,h,c),E.push(is[u]),E.push(rs[u])):104===u?(b=$n(a,f,p),_=$n(e,f,p),C=$n(e,f,c),y=$n(a,c,h),E.push(rs[u]),E.push(ss[u])):144===u?(x=$n(e,p,h),k=$n(e,f,c),C=$n(a,f,c),v=1-$n(a,h,c),E.push(es[u]),E.push(as[u])):26===u?(x=1-$n(a,h,p),k=1-$n(a,c,f),C=1-$n(e,c,f),v=$n(e,c,h),E.push(es[u]),E.push(as[u])):36===u?(w=$n(a,p,h),b=$n(e,f,p),y=$n(e,c,h),v=$n(a,c,h),E.push(ns[u]),E.push(is[u])):134===u?(w=1-$n(e,h,p),b=1-$n(a,p,f),y=1-$n(a,h,c),v=1-$n(e,h,c),E.push(ns[u]),E.push(is[u])):9===u?(x=1-$n(e,h,p),w=1-$n(a,h,p),_=$n(a,f,p),k=1-$n(e,c,f),E.push(es[u]),E.push(ns[u])):161===u?(x=$n(a,p,h),w=$n(e,p,h),_=1-$n(e,p,f),k=$n(a,f,c),E.push(es[u]),E.push(ns[u])):37===u?(w=$n(a,p,h),k=1-$n(e,c,f),y=$n(e,c,h),v=$n(a,c,h),E.push(ns[u]),E.push(os[u])):133===u?(w=1-$n(e,h,p),k=$n(a,f,c),y=1-$n(a,h,c),v=1-$n(e,h,c),E.push(ns[u]),E.push(os[u])):148===u?(b=$n(e,f,p),k=$n(e,f,c),C=$n(a,f,c),v=1-$n(a,h,c),E.push(is[u]),E.push(as[u])):22===u?(b=1-$n(a,p,f),k=1-$n(a,c,f),C=1-$n(e,c,f),v=$n(e,c,h),E.push(is[u]),E.push(as[u])):82===u?(x=$n(e,p,h),b=1-$n(e,p,f),_=1-$n(a,p,f),C=1-$n(a,c,f),E.push(es[u]),E.push(rs[u])):88===u?(x=1-$n(a,h,p),b=$n(a,f,p),_=$n(e,f,p),C=$n(e,f,c),E.push(es[u]),E.push(rs[u])):73===u?(x=1-$n(e,h,p),w=1-$n(a,h,p),_=$n(a,f,p),y=1-$n(e,h,c),E.push(es[u]),E.push(ns[u])):97===u?(x=$n(a,p,h),w=$n(e,p,h),_=1-$n(e,p,f),y=$n(a,c,h),E.push(es[u]),E.push(ns[u])):145===u?(x=$n(e,p,h),_=1-$n(e,p,f),k=$n(a,f,c),v=1-$n(a,h,c),E.push(es[u]),E.push(os[u])):25===u?(x=1-$n(a,h,p),_=$n(a,f,p),k=1-$n(e,c,f),v=$n(e,c,h),E.push(es[u]),E.push(os[u])):70===u?(w=1-$n(e,h,p),b=1-$n(a,p,f),C=1-$n(a,c,f),y=1-$n(e,h,c),E.push(ns[u]),E.push(is[u])):100===u?(w=$n(a,p,h),b=$n(e,f,p),C=$n(e,f,c),y=$n(a,c,h),E.push(ns[u]),E.push(is[u])):34===u?(0===m?(x=1-$n(e,h,p),w=1-$n(a,h,p),b=$n(a,f,p),_=$n(e,f,p),k=$n(e,f,c),C=$n(a,f,c),y=1-$n(a,h,c),v=1-$n(e,h,c)):(x=$n(a,p,h),w=$n(e,p,h),b=1-$n(e,p,f),_=1-$n(a,p,f),k=1-$n(a,c,f),C=1-$n(e,c,f),y=$n(e,c,h),v=$n(a,c,h)),E.push(es[u]),E.push(ns[u]),E.push(os[u]),E.push(as[u])):35===u?(4===m?(x=1-$n(e,h,p),w=1-$n(a,h,p),b=$n(a,f,p),_=$n(e,f,p),k=$n(e,f,c),C=$n(a,f,c),y=1-$n(a,h,c),v=1-$n(e,h,c)):(x=$n(a,p,h),w=$n(e,p,h),b=1-$n(e,p,f),_=1-$n(a,p,f),k=1-$n(a,c,f),C=1-$n(e,c,f),y=$n(e,c,h),v=$n(a,c,h)),E.push(es[u]),E.push(ns[u]),E.push(rs[u]),E.push(as[u])):136===u?(0===m?(x=$n(a,p,h),w=$n(e,p,h),b=1-$n(e,p,f),_=1-$n(a,p,f),k=1-$n(a,c,f),C=1-$n(e,c,f),y=$n(e,c,h),v=$n(a,c,h)):(x=1-$n(e,h,p),w=1-$n(a,h,p),b=$n(a,f,p),_=$n(e,f,p),k=$n(e,f,c),C=$n(a,f,c),y=1-$n(a,h,c),v=1-$n(e,h,c)),E.push(es[u]),E.push(ns[u]),E.push(os[u]),E.push(as[u])):153===u?(0===m?(x=$n(e,p,h),_=1-$n(e,p,f),k=1-$n(e,c,f),v=$n(e,c,h)):(x=1-$n(a,h,p),_=$n(a,f,p),k=$n(a,f,c),v=1-$n(a,h,c)),E.push(es[u]),E.push(rs[u])):102===u?(0===m?(w=1-$n(e,h,p),b=$n(e,f,p),C=$n(e,f,c),y=1-$n(e,h,c)):(w=$n(a,p,h),b=1-$n(a,p,f),C=1-$n(a,c,f),y=$n(a,c,h)),E.push(ns[u]),E.push(as[u])):155===u?(4===m?(x=$n(e,p,h),_=1-$n(e,p,f),k=1-$n(e,c,f),v=$n(e,c,h)):(x=1-$n(a,h,p),_=$n(a,f,p),k=$n(a,f,c),v=1-$n(a,h,c)),E.push(es[u]),E.push(os[u])):103===u?(4===m?(w=1-$n(e,h,p),b=$n(e,f,p),C=$n(e,f,c),y=1-$n(e,h,c)):(w=$n(a,p,h),b=1-$n(a,p,f),C=1-$n(a,c,f),y=$n(a,c,h)),E.push(ns[u]),E.push(is[u])):152===u?(0===m?(x=$n(e,p,h),b=1-$n(e,p,f),_=1-$n(a,p,f),k=1-$n(a,c,f),C=1-$n(e,c,f),v=$n(e,c,h)):(x=1-$n(a,h,p),b=$n(a,f,p),_=$n(e,f,p),k=$n(e,f,c),C=$n(a,f,c),v=1-$n(a,h,c)),E.push(es[u]),E.push(is[u]),E.push(rs[u])):156===u?(4===m?(x=$n(e,p,h),b=1-$n(e,p,f),_=1-$n(a,p,f),k=1-$n(a,c,f),C=1-$n(e,c,f),v=$n(e,c,h)):(x=1-$n(a,h,p),b=$n(a,f,p),_=$n(e,f,p),k=$n(e,f,c),C=$n(a,f,c),v=1-$n(a,h,c)),E.push(es[u]),E.push(rs[u]),E.push(as[u])):137===u?(0===m?(x=$n(a,p,h),w=$n(e,p,h),_=1-$n(e,p,f),k=1-$n(e,c,f),y=$n(e,c,h),v=$n(a,c,h)):(x=1-$n(e,h,p),w=1-$n(a,h,p),_=$n(a,f,p),k=$n(a,f,c),y=1-$n(a,h,c),v=1-$n(e,h,c)),E.push(es[u]),E.push(ns[u]),E.push(rs[u])):139===u?(4===m?(x=$n(a,p,h),w=$n(e,p,h),_=1-$n(e,p,f),k=1-$n(e,c,f),y=$n(e,c,h),v=$n(a,c,h)):(x=1-$n(e,h,p),w=1-$n(a,h,p),_=$n(a,f,p),k=$n(a,f,c),y=1-$n(a,h,c),v=1-$n(e,h,c)),E.push(es[u]),E.push(ns[u]),E.push(os[u])):98===u?(0===m?(x=1-$n(e,h,p),w=1-$n(a,h,p),b=$n(a,f,p),_=$n(e,f,p),C=$n(e,f,c),y=1-$n(e,h,c)):(x=$n(a,p,h),w=$n(e,p,h),b=1-$n(e,p,f),_=1-$n(a,p,f),C=1-$n(a,c,f),y=$n(a,c,h)),E.push(es[u]),E.push(ns[u]),E.push(as[u])):99===u?(4===m?(x=1-$n(e,h,p),w=1-$n(a,h,p),b=$n(a,f,p),_=$n(e,f,p),C=$n(e,f,c),y=1-$n(e,h,c)):(x=$n(a,p,h),w=$n(e,p,h),b=1-$n(e,p,f),_=1-$n(a,p,f),C=1-$n(a,c,f),y=$n(a,c,h)),E.push(es[u]),E.push(ns[u]),E.push(rs[u])):38===u?(0===m?(w=1-$n(e,h,p),b=$n(e,f,p),k=$n(e,f,c),C=$n(a,f,c),y=1-$n(a,h,c),v=1-$n(e,h,c)):(w=$n(a,p,h),b=1-$n(a,p,f),k=1-$n(a,c,f),C=1-$n(e,c,f),y=$n(e,c,h),v=$n(a,c,h)),E.push(ns[u]),E.push(os[u]),E.push(as[u])):39===u?(4===m?(w=1-$n(e,h,p),b=$n(e,f,p),k=$n(e,f,c),C=$n(a,f,c),y=1-$n(a,h,c),v=1-$n(e,h,c)):(w=$n(a,p,h),b=1-$n(a,p,f),k=1-$n(a,c,f),C=1-$n(e,c,f),y=$n(e,c,h),v=$n(a,c,h)),E.push(ns[u]),E.push(is[u]),E.push(as[u])):85===u&&(x=1,w=0,b=1,_=0,k=0,C=1,y=0,v=1),(y<0||y>1||v<0||v>1||x<0||x>1||b<0||b>1||k<0||k>1||C<0||C>1)&&console.log("MarchingSquaresJS-isoBands: "+u+" "+d+" "+c+","+h+","+p+","+f+" "+m+" "+y+" "+v+" "+x+" "+w+" "+b+" "+_+" "+k+" "+C),o.cells[s][l]={cval:u,cval_real:d,flipped:m,topleft:y,topright:v,righttop:x,rightbottom:w,bottomright:b,bottomleft:_,leftbottom:k,lefttop:C,edges:E}}}}}return o}(t,e,n);return va.polygons?(va.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),l=function(t){var e=[],n=0;return t.cells.forEach((function(t,i){t.forEach((function(t,r){if(void 0!==t){var o=us[t.cval](t);"object"==typeof o&&ti(o)?"object"==typeof o[0]&&ti(o[0])?"object"==typeof o[0][0]&&ti(o[0][0])?o.forEach((function(t){t.forEach((function(t){t[0]+=r,t[1]+=i})),e[n++]=t})):(o.forEach((function(t){t[0]+=r,t[1]+=i})),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(u)):(va.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),l=function(t){for(var e=[],n=t.rows,i=t.cols,r=[],o=0;o<n;o++)for(var a=0;a<i;a++)if(void 0!==t.cells[o][a]&&t.cells[o][a].edges.length>0){var s=function(t){if(t.edges.length>0){var e=t.cval_real;switch(t.edges[t.edges.length-1]){case 0:return e&ba?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return e&xa?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return e&xa?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return e&wa?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return e&ba?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return e&xa?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return e&xa?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return e&wa?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return e&xa?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return e&wa?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return e&wa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return e&_a?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return e&xa?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return e&wa?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return e&wa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return e&_a?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return e&xa?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return e&_a?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return e&wa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return e&_a?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return e&_a?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return e&ba?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return e&_a?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return e&ba?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}(t.cells[o][a]),l=null,u=a,c=o;null!==s&&r.push([s.p[0]+u,s.p[1]+c]);do{if(null===(l=function(t,e,n,i){var r,o,a,s,l,u=t.cval;switch(e){case-1:switch(i){case 0:r=ns[u],a=Ma[u],s=Ra[u],l=Oa[u];break;default:r=es[u],a=Pa[u],s=Aa[u],l=La[u]}break;case 1:switch(i){case 0:r=os[u],a=Ga[u],s=Ha[u],l=Xa[u];break;default:r=as[u],a=Ua[u],s=ja[u],l=qa[u]}break;default:switch(n){case-1:switch(i){case 0:r=ss[u],a=Ca[u],s=ka[u],l=Ea[u];break;default:r=ls[u],a=Sa[u],s=Ia[u],l=Ta[u]}break;case 1:switch(i){case 0:r=rs[u],a=Da[u],s=Na[u],l=Fa[u];break;default:r=is[u],a=za[u],s=Ba[u],l=Va[u]}}}if(o=t.edges.indexOf(r),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),u=t.cval_real,r){case 0:u&ba?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:u&xa?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:u&xa?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:u&wa?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:u&ba?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:u&xa?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:u&xa?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:u&wa?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:u&xa?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:u&wa?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:u&wa?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:u&_a?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:u&xa?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:u&wa?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:u&wa?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:u&_a?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:u&xa?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:u&_a?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:u&wa?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:u&_a?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:u&_a?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:u&ba?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:u&_a?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:u&ba?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==a&&void 0!==s&&void 0!==l||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+a+" "+s+" "+l)),{p:[e,n],x:a,y:s,o:l}}(t.cells[c][u],s.x,s.y,s.o)))break;if(r.push([l.p[0]+u,l.p[1]+c]),u+=l.x,s=l,(c+=l.y)<0||c>=n||u<0||u>=i||void 0===t.cells[c][u]){var h=function(t,e,n,i,r,o){for(var a=t.cells[n][e],s=a.cval_real,l=e+i,u=n+r,c=[],h=!1;!h;){if(void 0===t.cells[u]||void 0===t.cells[u][l])if(s=(a=t.cells[u-=r][l-=i]).cval_real,-1===r)if(0===o)if(s&wa)c.push([l,u]),i=-1,r=0,o=0;else{if(!(s&xa)){c.push([l+a.bottomright,u]),i=0,r=1,o=1,h=!0;break}c.push([l+1,u]),i=1,r=0,o=0}else{if(!(s&wa)){if(s&xa){c.push([l+a.bottomright,u]),i=0,r=1,o=1,h=!0;break}c.push([l+a.bottomleft,u]),i=0,r=1,o=0,h=!0;break}c.push([l,u]),i=-1,r=0,o=0}else if(1===r)if(0===o){if(!(s&ba)){if(s&_a){c.push([l+a.topleft,u+1]),i=0,r=-1,o=0,h=!0;break}c.push([l+a.topright,u+1]),i=0,r=-1,o=1,h=!0;break}c.push([l+1,u+1]),i=1,r=0,o=1}else c.push([l+1,u+1]),i=1,r=0,o=1;else if(-1===i)if(0===o){if(!(s&_a)){if(s&wa){c.push([l,u+a.leftbottom]),i=1,r=0,o=0,h=!0;break}c.push([l,u+a.lefttop]),i=1,r=0,o=1,h=!0;break}c.push([l,u+1]),i=0,r=1,o=0}else{if(!(s&_a)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([l,u+1]),i=0,r=1,o=0}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(s&xa)){c.push([l+1,u+a.rightbottom]),i=-1,r=0,o=0,h=!0;break}c.push([l+1,u]),i=0,r=-1,o=1}else{if(!(s&xa)){if(s&ba){c.push([l+1,u+a.righttop]),i=-1,r=0,o=1;break}c.push([l+1,u+a.rightbottom]),i=-1,r=0,o=0,h=!0;break}c.push([l+1,u]),i=0,r=-1,o=1}}else if(s=(a=t.cells[u][l]).cval_real,-1===i)if(0===o)if(void 0!==t.cells[u-1]&&void 0!==t.cells[u-1][l])i=0,r=-1,o=1;else{if(!(s&wa)){c.push([l+a.bottomright,u]),i=0,r=1,o=1,h=!0;break}c.push([l,u])}else{if(!(s&_a)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+l+","+u);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===i){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u+1]&&void 0!==t.cells[u+1][l])i=0,r=1,o=0;else{if(!(s&ba)){c.push([l+a.topleft,u+1]),i=0,r=-1,o=0,h=!0;break}c.push([l+1,u+1]),i=1,r=0,o=1}}else if(-1===r){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u][l+1])i=1,r=0,o=1;else{if(!(s&xa)){c.push([l+1,u+a.righttop]),i=-1,r=0,o=1,h=!0;break}c.push([l+1,u]),i=0,r=-1,o=1}}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u][l-1])i=-1,r=0,o=0;else{if(!(s&_a)){c.push([l,u+a.leftbottom]),i=1,r=0,o=0,h=!0;break}c.push([l,u+1]),i=0,r=1,o=0}}if(u+=r,(l+=i)===e&&u===n)break}return{path:c,i:l,j:u,x:i,y:r,o:o}}(t,u-=l.x,c-=l.y,l.x,l.y,l.o);if(null===h)break;h.path.forEach((function(t){r.push(t)})),u=h.i,c=h.j,s=h}}while(void 0!==t.cells[c][u]&&t.cells[c][u].edges.length>0);e.push(r),r=[],t.cells[o][a].edges.length>0&&a--}return e}(u)),"function"==typeof va.successCallback&&va.successCallback(l),l}function $n(t,e,n){return(t-e)/(n-e)}function ti(t){return t.constructor.toString().indexOf("Array")>-1}function ei(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var i=n.pivot,r=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(i||(i=ue(t)),!1!==r&&void 0!==r||(t=Nt(t)),I(t,(function(t){var n=Ye(i,t)+e,r=Je(i,t),o=G(Hn(i,r,n));t[0]=o[0],t[1]=o[1]}))),t}function ni(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var i=n.origin,r=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(i)||"object"==typeof i;return!0!==r&&(t=Nt(t)),"FeatureCollection"!==t.type||o?ii(t,e,i):(L(t,(function(n,r){t.features[r]=ii(n,e,i)})),t)}function ii(t,e,n){var r="Point"===J(t);return n=function(t,e){if(null!=e||(e="centroid"),Array.isArray(e)||"object"==typeof e)return q(e);var n=t.bbox?t.bbox:j(t),r=n[0],o=n[1],a=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return i([r,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return i([a,o]);case"nw":case"northwest":case"westnorth":case"topleft":return i([r,s]);case"ne":case"northeast":case"eastnorth":case"topright":return i([a,s]);case"center":return le(t);case void 0:case null:case"centroid":return ue(t);default:throw new Error("invalid origin")}}(t,n),1===e||r||I(t,(function(t){var i=Je(n,t),r=Ye(n,t),o=G(Hn(n,i*e,r));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)})),t}function ri(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function oi(t,e){return t[0]*e[1]-e[0]*t[1]}function ai(t,e,n){var i=[],r=y(e,n),o=G(t),a=[];return o.forEach((function(t,e){if(e!==o.length-1){var n=function(t,e,n){var i=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]));return[[t[0]+n*(e[1]-t[1])/i,t[1]+n*(t[0]-e[0])/i],[e[0]+n*(e[1]-t[1])/i,e[1]+n*(t[0]-e[0])/i]]}(t,o[e+1],r);if(i.push(n),e>0){var s=i[e-1],l=function(t,e){return!function(t,e){return 0===oi(ri(t),ri(e))}(t,e)&&function(t,e){var n=t[0],i=ri(t),r=e[0],o=ri(e),a=oi(i,o);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(n,function(t,e){return[t*e[0],t*e[1]]}(oi(function(t,e){return[t[0]-e[0],t[1]-e[1]]}(r,n),o)/a,i))}(t,e)}(n,s);!1!==l&&(s[1]=l,n[0]=l),a.push(s[0]),e===o.length-2&&(a.push(n[0]),a.push(n[1]))}2===o.length&&(a.push(n[0]),a.push(n[1]))}})),s(a,t.properties)}function si(t,e,n){return Math.sign((e[0]-t[0])*(n[1]-e[1])-(n[0]-e[0])*(e[1]-t[1]))}function li(t,e){return e.geometry.coordinates[0].every((function(e){return Tt(i(e),t)}))}function ui(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(function(t,e,n){var i=e[0]-t[0],r=e[1]-t[1];return(n[0]-t[0])*r-(n[1]-t[1])*i==0&&(Math.abs(i)>=Math.abs(r)?i>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:r>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function ci(t,e){return Xe(e,Pn(t)).features.length>0}function hi(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function pi(t,e){return t[0]===e[0]&&t[1]===e[1]}function fi(t,e){for(var n=!1,i=!1,r=t.coordinates.length,o=0;o<r&&!n&&!i;){for(var a=0;a<e.coordinates.length-1;a++){var s=!0;0!==a&&a!==e.coordinates.length-2||(s=!1),gi(e.coordinates[a],e.coordinates[a+1],t.coordinates[o],s)?n=!0:i=!0}o++}return n&&i}function di(t,e){return Xe(t,Pn(e)).features.length>0}function mi(t,e){for(var n=!1,r=!1,o=t.coordinates[0].length,a=0;a<o&&n&&r;)Tt(i(t.coordinates[0][a]),e)?n=!0:r=!0,a++;return r&&r}function gi(t,e,n,i){var r=e[0]-t[0],o=e[1]-t[1];return 0==(n[0]-t[0])*o-(n[1]-t[1])*r&&(i?Math.abs(r)>=Math.abs(o)?r>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:o>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(r)>=Math.abs(o)?r>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:o>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function yi(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function vi(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function _i(t,e){return ys(t,e,{strict:!0})}function bi(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var n=J(t);if(n!==J(e))throw new Error("features must be of the same type");if("Point"===n)throw new Error("Point geometry not supported");if(new _s({precision:6}).compare(t,e))return!1;var i=0;switch(n){case"MultiPoint":var r=R(t),o=R(e);r.forEach((function(t){o.forEach((function(e){t[0]===e[0]&&t[1]===e[1]&&i++}))}));break;case"LineString":case"MultiLineString":z(t,(function(t){z(e,(function(e){jn(t,e).features.length&&i++}))}));break;case"Polygon":case"MultiPolygon":z(t,(function(t){z(e,(function(e){Xe(t,e).features.length&&i++}))}))}return i>0}function xi(t,e,n){n=n||[];for(var i=0;i<t;i++)n[i]=e;return n}function wi(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Ci(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}function ki(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var i=0,r=t[n];i<r.length;i++){var o=new Ei(n,i,r[i]);this.grid[n][i]=o,this.nodes.push(o)}}this.init()}function Ei(t,e,n){this.x=t,this.y=e,this.weight=n}function Si(t){this.content=[],this.scoreFunction=t}function Ii(t){return t[0]}function Ti(t){return t[1]}function Pi(){this._=null}function Ai(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Li(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Mi(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Ri(t){for(;t.L;)t=t.L;return t}function Oi(t,e,n,i){var r=[null,null],o=Ds.push(r)-1;return r.left=t,r.right=e,n&&Ni(r,t,e,n),i&&Ni(r,e,t,i),Rs[t.index].halfedges.push(o),Rs[e.index].halfedges.push(o),r}function Di(t,e,n){var i=[e,n];return i.left=t,i}function Ni(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function Fi(t,e,n,i,r){var o,a=t[0],s=t[1],l=a[0],u=a[1],c=0,h=1,p=s[0]-l,f=s[1]-u;if(o=e-l,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=i-l,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}if(o=n-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=r-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[l+c*p,u+c*f]),h<1&&(t[1]=[l+h*p,u+h*f]),!0)}}}}}function zi(t,e,n,i,r){var o=t[1];if(o)return!0;var a,s,l=t[0],u=t.left,c=t.right,h=u[0],p=u[1],f=c[0],d=c[1],m=(h+f)/2;if(d===p){if(m<e||m>=i)return;if(h>f){if(l){if(l[1]>=r)return}else l=[m,n];o=[m,r]}else{if(l){if(l[1]<n)return}else l=[m,r];o=[m,n]}}else if(s=(p+d)/2-(a=(h-f)/(d-p))*m,a<-1||a>1)if(h>f){if(l){if(l[1]>=r)return}else l=[(n-s)/a,n];o=[(r-s)/a,r]}else{if(l){if(l[1]<n)return}else l=[(r-s)/a,r];o=[(n-s)/a,n]}else if(p<d){if(l){if(l[0]>=i)return}else l=[e,a*e+s];o=[i,a*i+s]}else{if(l){if(l[0]<e)return}else l=[i,a*i+s];o=[e,a*e+s]}return t[0]=l,t[1]=o,!0}function Bi(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function Vi(t,e){return e[+(e.left!==t.site)]}function Ui(t,e){return e[+(e.left===t.site)]}function ji(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var a=r[0],s=r[1],l=i[0]-a,u=i[1]-s,c=o[0]-a,h=o[1]-s,p=2*(l*h-u*c);if(!(p>=-Bs)){var f=l*l+u*u,d=c*c+h*h,m=(h*f-u*d)/p,g=(l*d-c*f)/p,y=Ns.pop()||new function(){Ai(this),this.x=this.y=this.arc=this.site=this.cy=null};y.arc=t,y.site=r,y.x=m+a,y.y=(y.cy=g+s)+Math.sqrt(m*m+g*g),t.circle=y;for(var v=null,_=Os._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){v=_.P;break}_=_.L}else{if(!_.R){v=_;break}_=_.R}Os.insert(v,y),v||(Ls=y)}}}}function qi(t){var e=t.circle;e&&(e.P||(Ls=e.N),Os.remove(e),Ns.push(e),Ai(e),t.circle=null)}function Gi(t){var e=Fs.pop()||new function(){Ai(this),this.edge=this.site=this.circle=null};return e.site=t,e}function Hi(t){qi(t),Ms.remove(t),Fs.push(t),Ai(t)}function Xi(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],o=t.P,a=t.N,s=[t];Hi(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<zs&&Math.abs(i-l.circle.cy)<zs;)o=l.P,s.unshift(l),Hi(l),l=o;s.unshift(l),qi(l);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<zs&&Math.abs(i-u.circle.cy)<zs;)a=u.N,s.push(u),Hi(u),u=a;s.push(u),qi(u);var c,h=s.length;for(c=1;c<h;++c)Ni((u=s[c]).edge,(l=s[c-1]).site,u.site,r);(u=s[h-1]).edge=Oi((l=s[0]).site,u.site,null,r),ji(l),ji(u)}function Zi(t){for(var e,n,i,r,o=t[0],a=t[1],s=Ms._;s;)if((i=Wi(s,a)-o)>zs)s=s.L;else{if(!((r=o-function(t,e){var n=t.N;if(n)return Wi(n,e);var i=t.site;return i[1]===e?i[0]:1/0}(s,a))>zs)){i>-zs?(e=s.P,n=s):r>-zs?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){Rs[t.index]={site:t,halfedges:[]}}(t);var l=Gi(t);if(Ms.insert(e,l),e||n){if(e===n)return qi(e),n=Gi(e.site),Ms.insert(l,n),l.edge=n.edge=Oi(e.site,l.site),ji(e),void ji(n);if(n){qi(e),qi(n);var u=e.site,c=u[0],h=u[1],p=t[0]-c,f=t[1]-h,d=n.site,m=d[0]-c,g=d[1]-h,y=2*(p*g-f*m),v=p*p+f*f,_=m*m+g*g,b=[(g*v-f*_)/y+c,(p*_-m*v)/y+h];Ni(n.edge,u,d,b),l.edge=Oi(u,t,null,b),n.edge=Oi(t,d,null,b),ji(e),ji(n)}else l.edge=Oi(e.site,l.site)}}function Wi(t,e){var n=t.site,i=n[0],r=n[1],o=r-e;if(!o)return i;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],l=n[1],u=l-e;if(!u)return s;var c=s-i,h=1/o-1/u,p=c/u;return h?(-p+Math.sqrt(p*p-2*h*(c*c/(-2*u)-l+u/2+r-o/2)))/h+i:(i+s)/2}function Yi(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function Ki(t,e){return e[1]-t[1]||e[0]-t[0]}function Ji(t,e){var n,i,r,o=t.sort(Ki).pop();for(Ds=[],Rs=new Array(t.length),Ms=new Pi,Os=new Pi;;)if(r=Ls,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(Zi(o),n=o[0],i=o[1]),o=t.pop();else{if(!r)break;Xi(r.arc)}if(function(){for(var t,e,n,i,r=0,o=Rs.length;r<o;++r)if((t=Rs[r])&&(i=(e=t.halfedges).length)){var a=new Array(i),s=new Array(i);for(n=0;n<i;++n)a[n]=n,s[n]=Bi(t,Ds[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<i;++n)s[n]=e[a[n]];for(n=0;n<i;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],l=+e[1][0],u=+e[1][1];!function(t,e,n,i){for(var r,o=Ds.length;o--;)zi(r=Ds[o],t,e,n,i)&&Fi(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>zs||Math.abs(r[0][1]-r[1][1])>zs)||delete Ds[o]}(a,s,l,u),function(t,e,n,i){var r,o,a,s,l,u,c,h,p,f,d,m,g=Rs.length,y=!0;for(r=0;r<g;++r)if(o=Rs[r]){for(a=o.site,s=(l=o.halfedges).length;s--;)Ds[l[s]]||l.splice(s,1);for(s=0,u=l.length;s<u;)d=(f=Ui(o,Ds[l[s]]))[0],m=f[1],h=(c=Vi(o,Ds[l[++s%u]]))[0],p=c[1],(Math.abs(d-h)>zs||Math.abs(m-p)>zs)&&(l.splice(s,0,Ds.push(Di(a,f,Math.abs(d-t)<zs&&i-m>zs?[t,Math.abs(h-t)<zs?p:i]:Math.abs(m-i)<zs&&n-d>zs?[Math.abs(p-i)<zs?h:n,i]:Math.abs(d-n)<zs&&m-e>zs?[n,Math.abs(h-n)<zs?p:e]:Math.abs(m-e)<zs&&d-t>zs?[Math.abs(p-e)<zs?h:t,e]:null))-1),++u);u&&(y=!1)}if(y){var v,_,b,x=1/0;for(r=0,y=null;r<g;++r)(o=Rs[r])&&(b=(v=(a=o.site)[0]-t)*v+(_=a[1]-e)*_)<x&&(x=b,y=o);if(y){var w=[t,e],C=[t,i],k=[n,i],E=[n,e];y.halfedges.push(Ds.push(Di(a=y.site,w,C))-1,Ds.push(Di(a,C,k))-1,Ds.push(Di(a,k,E))-1,Ds.push(Di(a,E,w))-1)}}for(r=0;r<g;++r)(o=Rs[r])&&(o.halfedges.length||delete Rs[r])}(a,s,l,u)}this.edges=Ds,this.cells=Rs,Ms=Os=Ds=Rs=null}function Qi(t){return(t=t.slice()).push(t[0]),o([t])}function $i(t,e,n,i){var r=(i=i||{}).steps||64,a=i.units||"kilometers",s=i.angle||0,l=i.pivot||t,u=i.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!k(i))throw new Error("options must be an object");if(!C(r))throw new Error("steps must be a number");if(!C(s))throw new Error("angle must be a number");var c=q(t);if("degrees"===a)var h=b(s);else e=Hn(t,e,90,{units:a}),n=Hn(t,n,0,{units:a}),e=q(e)[0]-c[0],n=q(n)[1]-c[1];for(var p=[],f=0;f<r;f+=1){var d=-360*f/r,m=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(tr(d),2)),g=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(tr(d),2));if(d<-90&&d>=-270&&(m=-m),d<-180&&d>=-360&&(g=-g),"degrees"===a){var y=m*Math.cos(h)+g*Math.sin(h),v=g*Math.cos(h)-m*Math.sin(h);m=y,g=v}p.push([m+c[0],g+c[1]])}return p.push(p[0]),"degrees"===a?o([p],u):ei(o([p],u),s,{pivot:l})}function tr(t){var e=t*Math.PI/180;return Math.tan(e)}function er(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=e.weight;if(!t)throw new Error("geojson is required");var o=0,a=0,s=0;return O(t,(function(t,e,n){var i=n[r];if(!C(i=null==i?1:i))throw new Error("weight value must be a number for feature index "+e);(i=Number(i))>0&&I(t,(function(t){o+=t[0]*i,a+=t[1]*i,s+=i}))})),i([o/s,a/s],n)}function nr(t,e,n,r){var o=n.properties.tolerance||.001,a=0,s=0,l=0,u=0;if(L(n,(function(e){var n=e.properties.weight,i=null==n?1:n;if(!C(i=Number(i)))throw new Error("weight value must be a number");if(i>0){u+=1;var r=i*Dt(e,t);0===r&&(r=1);var o=i/r;a+=e.geometry.coordinates[0]*o,s+=e.geometry.coordinates[1]*o,l+=o}})),u<1)throw new Error("no features to measure");var c=a/l,h=s/l;return 1===u||0===r||Math.abs(c-e[0])<o&&Math.abs(h-e[1])<o?i([c,h],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([c,h]),nr([c,h],t,n,r-1))}function ir(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function rr(t){if(k(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?function(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}(t):[360*lr(),180*lr()]}function or(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.bbox;null!=t||(t=1);for(var r=[],o=0;o<t;o++)r.push(i(rr(n)));return u(r)}function ar(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.bbox,i=e.num_vertices,r=e.max_radial_length;null!=t||(t=1),C(i)||(i=10),C(r)||(r=10);for(var a=[],s=0;s<t;s++){var l=[],c=Array.apply(null,new Array(i+1)).map(Math.random);c.forEach((function(t,e,n){n[e]=e>0?t+n[e-1]:t})),c.forEach((function(t){t=2*t*Math.PI/c[c.length-1];var e=Math.random();l.push([e*r*Math.sin(t),e*r*Math.cos(t)])})),l[l.length-1]=l[0],l=l.map(function(t){return function(e){return[e[0]+t[0],e[1]+t[1]]}}(rr(n))),a.push(o([l]))}return u(a)}function sr(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.bbox,i=e.num_vertices,r=e.max_length,o=e.max_rotation;null!=t||(t=1),(!C(i)||i<2)&&(i=10),C(r)||(r=1e-4),C(o)||(o=Math.PI/8);for(var a=[],l=0;l<t;l++){for(var c=[rr(n)],h=0;h<i-1;h++){var p=(0===h?2*Math.random()*Math.PI:Math.tan((c[h][1]-c[h-1][1])/(c[h][0]-c[h-1][0])))+(Math.random()-.5)*o*2,f=Math.random()*r;c.push([c[h][0]+f*Math.cos(p),c[h][1]+f*Math.sin(p)])}a.push(s(c))}return u(a)}function lr(){return Math.random()-.5}function ur(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return L(t,(function(t){fr(t.properties,e)&&n.push(t)})),u(n)}function cr(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var i=pr(t,e),r=Object.keys(i),o=0;o<r.length;o++){for(var a=r[o],s=i[a],l=[],c=0;c<s.length;c++)l.push(t.features[s[c]]);n(u(l),a,o)}}function hr(t,e,n,i){var r=i;return cr(t,e,(function(t,e,o){r=0===o&&void 0===i?t:n(r,t,e,o)})),r}function pr(t,e){var n={};return L(t,(function(t,i){var r=t.properties||{};if(r.hasOwnProperty(e)){var o=r[e];n.hasOwnProperty(o)?n[o].push(i):n[o]=[i]}})),n}function fr(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var i=0;i<e.length;i++)if(!fr(t,e[i]))return!1;return!0}return dr(t,e)}function dr(t,e){for(var n=Object.keys(e),i=0;i<n.length;i++){var r=n[i];if(t[r]!==e[r])return!1}return!0}function mr(t,e){if(!e)return{};if(!e.length)return{};for(var n={},i=0;i<e.length;i++){var r=e[i];t.hasOwnProperty(r)&&(n[r]=t[r])}return n}function gr(){}function yr(t){this.message=t||""}function vr(t){this.message=t||""}function _r(){}function br(t){return null===t?au:t.color}function xr(t){return null===t?null:t.parent}function wr(t,e){null!==t&&(t.color=e)}function Cr(t){return null===t?null:t.left}function kr(t){return null===t?null:t.right}function Er(){this.root_=null,this.size_=0}function Sr(){}function Ir(){this.array_=[],arguments[0]instanceof Hl&&this.addAll(arguments[0])}function Tr(){}function Pr(t){this.message=t||""}function Ar(){this.array_=[]}function Lr(t){switch(t.type){case"Polygon":return ln(t)>1?t:null;case"MultiPolygon":var e=[];if(N(t,(function(t){ln(t)>1&&e.push(t.geometry.coordinates)})),e.length)return{type:"MultiPolygon",coordinates:e}}}function Mr(){this.reset()}function Rr(t,e,n){var i=t.s=e+n,r=i-e;t.t=e-(i-r)+(n-r)}function Or(t){return t>1?pf:t<-1?-pf:Math.asin(t)}function Dr(){}function Nr(t,e){t&&If.hasOwnProperty(t.type)&&If[t.type](t,e)}function Fr(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)e.point((i=t[r])[0],i[1],i[2]);e.lineEnd()}function zr(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Fr(t[n],e,1);e.polygonEnd()}function Br(t){return[_f(t[1],t[0]),Or(t[2])]}function Vr(t){var e=t[0],n=t[1],i=bf(n);return[i*bf(e),i*Cf(e),Cf(n)]}function Ur(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function jr(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function qr(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Gr(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Hr(t){var e=kf(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Xr(t,e){return[t>hf?t-df:t<-hf?t+df:t,e]}function Zr(t,e,n){return(t%=df)?e||n?Pf(Yr(t),Kr(e,n)):Yr(t):e||n?Kr(e,n):Xr}function Wr(t){return function(e,n){return[(e+=t)>hf?e-df:e<-hf?e+df:e,n]}}function Yr(t){var e=Wr(t);return e.invert=Wr(-t),e}function Kr(t,e){function n(t,e){var n=bf(e),s=bf(t)*n,l=Cf(t)*n,u=Cf(e),c=u*i+s*r;return[_f(l*o-c*a,s*i-u*r),Or(c*o+l*a)]}var i=bf(t),r=Cf(t),o=bf(e),a=Cf(e);return n.invert=function(t,e){var n=bf(e),s=bf(t)*n,l=Cf(t)*n,u=Cf(e),c=u*o-l*a;return[_f(l*o+u*a,s*i+c*r),Or(c*i-s*r)]},n}function Jr(t,e){(e=Vr(e))[0]-=t,Hr(e);var n=function(t){return t>1?0:t<-1?hf:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+df-cf)%df}function Qr(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function $r(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function to(t,e,n,i){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function o(r,o,s,u){var c=0,h=0;if(null==r||(c=a(r,s))!==(h=a(o,s))||l(r,o)<0^s>0)do{u.point(0===c||3===c?t:n,c>1?i:e)}while((c=(c+s+4)%4)!==h);else u.point(o[0],o[1])}function a(i,r){return yf(i[0]-t)<cf?r>0?0:3:yf(i[0]-n)<cf?r>0?2:1:yf(i[1]-e)<cf?r>0?1:0:r>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=a(t,1),i=a(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){function l(t,e){r(t,e)&&x.point(t,e)}function u(o,a){var s=r(o,a);if(h&&p.push([o,a]),_)f=o,d=a,m=s,_=!1,s&&(x.lineStart(),x.point(o,a));else if(s&&v)x.point(o,a);else{var l=[g=Math.max(Ff,Math.min(Nf,g)),y=Math.max(Ff,Math.min(Nf,y))],u=[o=Math.max(Ff,Math.min(Nf,o)),a=Math.max(Ff,Math.min(Nf,a))];Lf(l,u,t,e,n,i)?(v||(x.lineStart(),x.point(l[0],l[1])),x.point(u[0],u[1]),s||x.lineEnd(),b=!1):s&&(x.lineStart(),x.point(o,a),b=!1)}g=o,y=a,v=s}var c,h,p,f,d,m,g,y,v,_,b,x=a,w=Af(),C={point:l,lineStart:function(){C.point=u,h&&h.push(p=[]),_=!0,v=!1,g=y=NaN},lineEnd:function(){c&&(u(f,d),m&&v&&w.rejoin(),c.push(w.result())),C.point=l,v&&x.lineEnd()},polygonStart:function(){x=w,c=[],h=[],b=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=h.length;n<r;++n)for(var o,a,s=h[n],l=1,u=s.length,c=s[0],p=c[0],f=c[1];l<u;++l)o=p,a=f,p=(c=s[l])[0],f=c[1],a<=i?f>i&&(p-o)*(i-a)>(f-a)*(t-o)&&++e:f<=i&&(p-o)*(i-a)<(f-a)*(t-o)&&--e;return e}(),n=b&&e,r=(c=Df(c)).length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),r&&Rf(c,s,e,o,a),a.polygonEnd()),x=a,c=h=p=null}};return C}}function eo(t){return t.length>1}function no(t,e){return((t=t.x)[0]<0?t[1]-pf-cf:pf-t[1])-((e=e.x)[0]<0?e[1]-pf-cf:pf-e[1])}function io(t){return function(e){var n=new ro;for(var i in t)n[i]=t[i];return n.stream=e,n}}function ro(){}function oo(t,e,n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),Tf(n,t.stream(Gf));var a=Gf.result(),s=Math.min(i/(a[1][0]-a[0][0]),r/(a[1][1]-a[0][1])),l=+e[0][0]+(i-s*(a[1][0]+a[0][0]))/2,u=+e[0][1]+(r-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([l,u])}function ao(t,e){return[t,wf(Ef((pf+e)/2))]}function so(t,e){return[wf(Ef((pf+e)/2)),-t]}function lo(t,n,i,r){var o=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var s=[];return O(t,(function(t){var e=lo(t,n,i,r);e&&s.push(e)})),u(s)}var l,c=j(t),h=c[1]>50&&c[3]>50;l=h?{type:a.type,coordinates:uo(a.coordinates,ho(a))}:Qe(a);var p,f=(new Yu).read(l),d=m(g(n,i),"meters"),y=Vh.bufferOp(f,d);if(!function t(e){return Array.isArray(e[0])?t(e[0]):isNaN(e[0])}((y=(new Ku).write(y)).coordinates))return(p=h?{type:y.type,coordinates:co(y.coordinates,ho(a))}:$e(y)).geometry?p:e(p,o)}function uo(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return uo(t,e)}))}function co(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return co(t,e)}))}function ho(t){var e=le(t).geometry.coordinates.reverse(),n=e.map((function(t){return-t}));return Jf().center(e).rotate(n).scale(xo)}function po(){for(var t=new Yu,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=sf.union(e,t.read(JSON.stringify(arguments[n].geometry)));return{type:"Feature",geometry:e=(new Ku).write(e),properties:arguments[0].properties}}function fo(t,n){var i=Y(t),r=Y(n);if(Wt(_n(r,{precision:4})).coordinates[0].length<4)return null;if(Wt(_n(i,{precision:4})).coordinates[0].length<4)return null;var o=new Yu,a=o.read(_n(i)),s=o.read(_n(r)),l=Jp.intersection(a,s);return l.isEmpty()?null:e((new Ku).write(l))}function mo(t,e){return function(t,e,n){var i,r;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach((function(e,n){var o=function(t,e){return t-e}(e,t);o>=0&&(void 0===r||o<r)&&(r=o,i=n)})),i}(t,e)}function go(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var i=n.properties||{},r=n.triangles,a=n.mask;if(null==e)throw new Error("cellSide is required");if(!C(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(a&&-1===["Polygon","MultiPolygon"].indexOf(J(a)))throw new Error("options.mask must be a (Multi)Polygon");var s=t[0],l=t[1],c=t[2],h=t[3],p=(l+h)/2,f=(s+c)/2,d=2*e/Dt([s,p],[c,p],n)*(c-s),m=2*e/Dt([f,l],[f,h],n)*(h-l),g=d/2,y=2*g,v=Math.sqrt(3)/2*m,_=c-s,b=h-l,x=.75*y,w=v,E=Math.floor((_-y)/(y-g/2)),S=(E*x-g/2-_)/2-g/2+x/2,I=Math.floor((b-v)/v),T=(b-I*v)/2,P=I*v-b>v/2;P&&(T-=v/4);for(var A=[],L=[],M=0;M<6;M++){var R=2*Math.PI/6*M;A.push(Math.cos(R)),L.push(Math.sin(R))}for(var O=[],D=0;D<=E;D++)for(var N=0;N<=I;N++){var F=D%2==1;if(!(0===N&&F||0===N&&P)){var z=D*x+s-S,B=N*w+l+T;if(F&&(B-=v/2),!0===r)(function(t,e,n,i,r,a){for(var s=[],l=0;l<6;l++){var u=[];u.push(t),u.push([t[0]+e*r[l],t[1]+n*a[l]]),u.push([t[0]+e*r[(l+1)%6],t[1]+n*a[(l+1)%6]]),u.push(t),s.push(o([u],i))}return s})([z,B],d/2,m/2,i,A,L).forEach((function(t){a?fo(a,t)&&O.push(t):O.push(t)}));else{var V=function(t,e,n,i,r,a){for(var s=[],l=0;l<6;l++)s.push([t[0]+e*r[l],t[1]+n*a[l]]);return s.push(s[0].slice()),o([s],i)}([z,B],d/2,m/2,i,A,L);a?fo(a,V)&&O.push(V):O.push(V)}}}return u(O)}function yo(t){if(t.features.length<=1)return t;var e=function(t){var e=Lo(),n=[];return N(t,(function(t,e){var i=j(t);n.push({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3],geojson:t,index:e})})),e.load(n),e}(t),n=[],i={};return N(t,(function(t,r){if(i[r])return!0;for(e.remove({index:r},vo),i[r]=!0;;){var o=j(t),a=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(a.length>0){var s=a.map((function(t){return i[t.index]=!0,e.remove({index:t.index},vo),t.geojson}));s.push(t),t=po.apply(this,s)}if(0===a.length)break}n.push(t)})),u(n)}function vo(t,e){return t.index===e.index}function _o(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var i=n.properties,r=n.mask,a=[];if(null==e)throw new Error("cellSide is required");if(!C(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(r&&-1===["Polygon","MultiPolygon"].indexOf(J(r)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],l=t[1],c=t[2],h=t[3],p=e/Dt([s,l],[c,l],n)*(c-s),f=e/Dt([s,l],[s,h],n)*(h-l),d=c-s,m=h-l,g=Math.floor(d/p),y=Math.floor(m/f),v=(m-y*f)/2,_=s+(d-g*p)/2,b=0;b<g;b++){for(var x=l+v,w=0;w<y;w++){var E=o([[[_,x],[_,x+f],[_+p,x+f],[_+p,x],[_,x]]],i);r?fo(r,E)&&a.push(E):a.push(E),x+=f}_+=p}return u(a)}function bo(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var i=n.properties,r=n.mask,a=[];if(null==e)throw new Error("cellSide is required");if(!C(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(r&&-1===["Polygon","MultiPolygon"].indexOf(J(r)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=e/Dt([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),l=e/Dt([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),c=0,h=t[0];h<=t[2];){for(var p=0,f=t[1];f<=t[3];){var d=null,m=null;c%2==0&&p%2==0?(d=o([[[h,f],[h,f+l],[h+s,f],[h,f]]],i),m=o([[[h,f+l],[h+s,f+l],[h+s,f],[h,f+l]]],i)):c%2==0&&p%2==1?(d=o([[[h,f],[h+s,f+l],[h+s,f],[h,f]]],i),m=o([[[h,f],[h,f+l],[h+s,f+l],[h,f]]],i)):p%2==0&&c%2==1?(d=o([[[h,f],[h,f+l],[h+s,f+l],[h,f]]],i),m=o([[[h,f],[h+s,f+l],[h+s,f],[h,f]]],i)):p%2==1&&c%2==1&&(d=o([[[h,f],[h,f+l],[h+s,f],[h,f]]],i),m=o([[[h,f+l],[h+s,f+l],[h+s,f],[h,f+l]]],i)),r?(fo(r,d)&&a.push(d),fo(r,m)&&a.push(m)):(a.push(d),a.push(m)),f+=l,p++}c++,h+=s}return u(a)}var xo=6371008.8,wo={meters:xo,metres:xo,millimeters:1e3*xo,millimetres:1e3*xo,centimeters:100*xo,centimetres:100*xo,kilometers:xo/1e3,kilometres:xo/1e3,miles:xo/1609.344,nauticalmiles:xo/1852,inches:39.37*xo,yards:xo/1.0936,feet:3.28084*xo,radians:1,degrees:xo/111325},Co={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/xo,degrees:1/111325},ko={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006},Eo=Object.freeze({earthRadius:xo,factors:wo,unitsFactors:Co,areaFactors:ko,feature:e,geometry:n,point:i,points:r,polygon:o,polygons:a,lineString:s,lineStrings:l,featureCollection:u,multiLineString:c,multiPoint:h,multiPolygon:p,geometryCollection:f,round:d,radiansToLength:m,lengthToRadians:g,lengthToDegrees:y,bearingToAzimuth:v,radiansToDegrees:_,degreesToRadians:b,convertLength:x,convertArea:w,isNumber:C,isObject:k,validateBBox:E,validateId:S,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),So=Object.freeze({coordEach:I,coordReduce:T,propEach:P,propReduce:A,featureEach:L,featureReduce:M,coordAll:R,geomEach:O,geomReduce:D,flattenEach:N,flattenReduce:F,segmentEach:z,segmentReduce:B,lineEach:V,lineReduce:U}),Io=Object.freeze({getCoord:q,getCoords:G,containsNumber:H,geojsonType:X,featureOf:Z,collectionOf:W,getGeom:Y,getGeomType:K,getType:J}),To={successCallback:null,verbose:!1},Po={},Ao=function t(e,n,i,r,o){for(i=i||0,r=r||e.length-1,o=o||function(t,e){return t<e?-1:t>e?1:0};r>i;){if(r-i>600){var a=r-i+1,s=n-i+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(i,Math.floor(n-s*u/a+c)),Math.min(r,Math.floor(n+(a-s)*u/a+c)),o)}var h=e[n],p=i,f=r;for(it(e,i,n),o(e[r],h)>0&&it(e,i,r);p<f;){for(it(e,p,f),p++,f--;o(e[p],h)<0;)p++;for(;o(e[f],h)>0;)f--}0===o(e[i],h)?it(e,i,f):it(e,++f,r),f<=n&&(i=f+1),n<=f&&(r=f-1)}},Lo=rt;rt.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!ft(t,e))return n;for(var r,o,a,s,l=[];e;){for(r=0,o=e.children.length;r<o;r++)a=e.children[r],ft(t,s=e.leaf?i(a):a)&&(e.leaf?n.push(a):pt(t,s)?this._all(a,n):l.push(a));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!ft(t,e))return!1;for(var i,r,o,a,s=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],ft(t,a=e.leaf?n(o):o)){if(e.leaf||pt(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=dt([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,o,a=this.data,s=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),i=l[l.length-1],n=u.pop(),o=!0),a.leaf&&-1!==(r=function(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}(t,a.children,e)))return a.children.splice(r,1),l.push(a),this._condense(l),this;o||a.leaf||!pt(a,s)?i?(n++,a=i.children[n],o=!1):a=null:(l.push(a),u.push(n),n=0,i=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:lt,compareMinY:ut,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,a=this._maxEntries;if(o<=a)return ot(r=dt(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),(r=dt([])).leaf=!1,r.height=i;var s,l,u,c,h=Math.ceil(o/a),p=h*Math.ceil(Math.sqrt(a));for(mt(t,e,n,p,this.compareMinX),s=e;s<=n;s+=p)for(mt(t,s,u=Math.min(s+p-1,n),h,this.compareMinY),l=s;l<=u;l+=h)c=Math.min(l+h-1,u),r.children.push(this._build(t,l,c,i-1));return ot(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,a,s,l,u,c,h;i.push(e),!e.leaf&&i.length-1!==n;){for(c=h=1/0,r=0,o=e.children.length;r<o;r++)l=ct(a=e.children[r]),(u=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-l)<h?(h=u,c=l<c?l:c,s=a):u===h&&l<c&&(c=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var i=n?t:(0,this.toBBox)(t),r=[],o=this._chooseSubtree(i,this.data,e,r);for(o.children.push(t),st(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),a=dt(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,ot(n,this.toBBox),ot(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=dt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,ot(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,a,s,l,u,c;for(l=u=1/0,i=e;i<=n-e;i++)a=function(t,e){var n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,o-i)}(r=at(t,0,i,this.toBBox),o=at(t,i,n,this.toBBox)),s=ct(r)+ct(o),a<l?(l=a,c=i,u=s<u?s:u):a===l&&s<u&&(u=s,c=i);return c},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:lt,r=t.leaf?this.compareMinY:ut;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,a=this.toBBox,s=at(t,0,e,a),l=at(t,n-e,n,a),u=ht(s)+ht(l);for(r=e;r<n-e;r++)o=t.children[r],st(s,t.leaf?a(o):o),u+=ht(s);for(r=n-e-1;r>=e;r--)o=t.children[r],st(l,t.leaf?a(o):o),u+=ht(l);return u},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)st(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():ot(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Mo=function(t,e,n){var i=t*e,r=Ro*t,o=r-(r-t),a=t-o,s=Ro*e,l=s-(s-e),u=e-l,c=a*u-(i-o*l-a*l-o*u);return n?(n[0]=c,n[1]=i,n):[c,i]},Ro=+(Math.pow(2,27)+1),Oo=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}(t[0],e[0]);var r,o,a=new Array(n+i),s=0,l=0,u=0,c=Math.abs,h=t[l],p=c(h),f=e[u],d=c(f);p<d?(o=h,(l+=1)<n&&(p=c(h=t[l]))):(o=f,(u+=1)<i&&(d=c(f=e[u]))),l<n&&p<d||u>=i?(r=h,(l+=1)<n&&(p=c(h=t[l]))):(r=f,(u+=1)<i&&(d=c(f=e[u])));for(var m,g,y=r+o,v=y-r,_=o-v,b=_,x=y;l<n&&u<i;)p<d?(r=h,(l+=1)<n&&(p=c(h=t[l]))):(r=f,(u+=1)<i&&(d=c(f=e[u]))),(_=(o=b)-(v=(y=r+o)-r))&&(a[s++]=_),b=x-((m=x+y)-(g=m-x))+(y-g),x=m;for(;l<n;)(_=(o=b)-(v=(y=(r=h)+o)-r))&&(a[s++]=_),b=x-((m=x+y)-(g=m-x))+(y-g),x=m,(l+=1)<n&&(h=t[l]);for(;u<i;)(_=(o=b)-(v=(y=(r=f)+o)-r))&&(a[s++]=_),b=x-((m=x+y)-(g=m-x))+(y-g),x=m,(u+=1)<i&&(f=e[u]);return b&&(a[s++]=b),x&&(a[s++]=x),s||(a[s++]=0),a.length=s,a},Do=function(t,e,n){var i=t+e,r=i-t,o=e-r,a=t-(i-r);return n?(n[0]=a+o,n[1]=i,n):[a+o,i]},No=function(t,e){var n=t.length;if(1===n){var i=Mo(t[0],e);return i[0]?i:[i[1]]}var r=new Array(2*n),o=[.1,.1],a=[.1,.1],s=0;Mo(t[0],e,o),o[0]&&(r[s++]=o[0]);for(var l=1;l<n;++l){Mo(t[l],e,a),Do(o[1],a[0],o),o[0]&&(r[s++]=o[0]);var u=a[1],c=o[1],h=u+c,p=c-(h-u);o[1]=h,p&&(r[s++]=p)}return o[1]&&(r[s++]=o[1]),0===s&&(r[s++]=0),r.length=s,r},Fo=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}(t[0],-e[0]);var r,o,a=new Array(n+i),s=0,l=0,u=0,c=Math.abs,h=t[l],p=c(h),f=-e[u],d=c(f);p<d?(o=h,(l+=1)<n&&(p=c(h=t[l]))):(o=f,(u+=1)<i&&(d=c(f=-e[u]))),l<n&&p<d||u>=i?(r=h,(l+=1)<n&&(p=c(h=t[l]))):(r=f,(u+=1)<i&&(d=c(f=-e[u])));for(var m,g,y=r+o,v=y-r,_=o-v,b=_,x=y;l<n&&u<i;)p<d?(r=h,(l+=1)<n&&(p=c(h=t[l]))):(r=f,(u+=1)<i&&(d=c(f=-e[u]))),(_=(o=b)-(v=(y=r+o)-r))&&(a[s++]=_),b=x-((m=x+y)-(g=m-x))+(y-g),x=m;for(;l<n;)(_=(o=b)-(v=(y=(r=h)+o)-r))&&(a[s++]=_),b=x-((m=x+y)-(g=m-x))+(y-g),x=m,(l+=1)<n&&(h=t[l]);for(;u<i;)(_=(o=b)-(v=(y=(r=f)+o)-r))&&(a[s++]=_),b=x-((m=x+y)-(g=m-x))+(y-g),x=m,(u+=1)<i&&(f=-e[u]);return b&&(a[s++]=b),x&&(a[s++]=x),s||(a[s++]=0),a.length=s,a},zo=gt((function(t){function e(t,e){for(var n=new Array(t.length-1),i=1;i<t.length;++i)for(var r=n[i-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(r[a++]=t[i][o]);return n}function n(t){return 1&t?"-":""}function i(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",i(t.slice(0,e)),",",i(t.slice(e)),")"].join("")}function r(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var o=[],a=0;a<t.length;++a)o.push(["scale(",i(r(e(t,a))),",",n(a),t[0][a],")"].join(""));return o}function o(t){for(var n=[],o=[],a=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var i=0;i<t;++i)e[n][i]=["m",i,"[",t-n-1,"]"].join("")}return e}(t),s=[],l=0;l<t;++l)0==(1&l)?n.push.apply(n,r(e(a,l))):o.push.apply(o,r(e(a,l))),s.push("m"+l);var u=i(n),c=i(o),h="orientation"+t+"Exact",p=["function ",h,"(",s.join(),"){var p=",u,",n=",c,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",p)(Oo,Mo,No,Fo)}var a=o(3),s=o(4),l=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var i,r=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),s=r-o;if(r>0){if(o<=0)return s;i=r+o}else{if(!(r<0))return s;if(o>=0)return s;i=-(r+o)}var l=33306690738754716e-32*i;return s>=l||s<=-l?s:a(t,e,n)},function(t,e,n,i){var r=t[0]-i[0],o=e[0]-i[0],a=n[0]-i[0],l=t[1]-i[1],u=e[1]-i[1],c=n[1]-i[1],h=t[2]-i[2],p=e[2]-i[2],f=n[2]-i[2],d=o*c,m=a*u,g=a*l,y=r*c,v=r*u,_=o*l,b=h*(d-m)+p*(g-y)+f*(v-_),x=7771561172376103e-31*((Math.abs(d)+Math.abs(m))*Math.abs(h)+(Math.abs(g)+Math.abs(y))*Math.abs(p)+(Math.abs(v)+Math.abs(_))*Math.abs(f));return b>x||-b>x?b:s(t,e,n,i)}];!function(){for(;l.length<=5;)l.push(o(l.length));for(var e=[],n=["slow"],i=0;i<=5;++i)e.push("a"+i),n.push("o"+i);var r=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(i=2;i<=5;++i)r.push("case ",i,":return o",i,"(",e.slice(0,i).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(r.join(""));var a=Function.apply(void 0,n);for(t.exports=a.apply(void 0,[function(t){var e=l[t.length];return e||(e=l[t.length]=o(t.length)),e.apply(void 0,t)}].concat(l)),i=0;i<=5;++i)t.exports[i]=l[i]}()})),Bo=function(t){var e=t.length;if(e<3){for(var n=new Array(e),i=0;i<e;++i)n[i]=i;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var r=new Array(e);for(i=0;i<e;++i)r[i]=i;r.sort((function(e,n){return t[e][0]-t[n][0]||t[e][1]-t[n][1]}));var o=[r[0],r[1]],a=[r[0],r[1]];for(i=2;i<e;++i){for(var s=r[i],l=t[s],u=o.length;u>1&&Vo(t[o[u-2]],t[o[u-1]],l)<=0;)u-=1,o.pop();for(o.push(s),u=a.length;u>1&&Vo(t[a[u-2]],t[a[u-1]],l)>=0;)u-=1,a.pop();a.push(s)}n=new Array(a.length+o.length-2);for(var c=0,h=(i=0,o.length);i<h;++i)n[c++]=o[i];for(var p=a.length-2;p>0;--p)n[c++]=a[p];return n},Vo=zo[3],Uo=yt,jo=yt;yt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i},_down:function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,r)>=0)break;e[t]=s,t=o}e[t]=r}},Uo.default=jo;var qo=function(t,e){for(var n=t[0],i=t[1],r=!1,o=0,a=e.length-1;o<e.length;a=o++){var s=e[o][0],l=e[o][1],u=e[a][1];l>i!=u>i&&n<(e[a][0]-s)*(i-l)/(u-l)+s&&(r=!r)}return r},Go=zo[3],Ho=vt;Ho.default=vt;var Xo=function(t){return t},Zo=function(t){if(null==t)return Xo;var e,n,i=t.scale[0],r=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var l=2,u=t.length,c=new Array(u);for(c[0]=(e+=t[0])*i+o,c[1]=(n+=t[1])*r+a;l<u;)c[l]=t[l],++l;return c}},Wo=function(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n},Yo=function(t,e){function n(t,e){for(var n in t){var r=t[n];delete e[r.start],delete r.start,delete r.end,r.forEach((function(t){i[t<0?~t:t]=1})),a.push(r)}}var i={},r={},o={},a=[],s=-1;return e.forEach((function(n,i){var r,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(r=e[++s],e[s]=n,e[i]=r)})),e.forEach((function(e){var n,i,a=function(e){var n,i=t.arcs[e<0?~e:e],r=i[0];return t.transform?(n=[0,0],i.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=i[i.length-1],e<0?[n,r]:[r,n]}(e),s=a[0],l=a[1];if(n=o[s])if(delete o[n.end],n.push(e),n.end=l,i=r[l]){delete r[i.start];var u=i===n?n:n.concat(i);r[u.start=n.start]=o[u.end=i.end]=u}else r[n.start]=o[n.end]=n;else if(n=r[l])if(delete r[n.start],n.unshift(e),n.start=s,i=o[s]){delete o[i.end];var c=i===n?n:i.concat(n);r[c.start=i.start]=o[c.end=n.end]=c}else r[n.start]=o[n.end]=n;else r[(n=[e]).start=s]=o[n.end=l]=n})),n(o,r),n(r,o),e.forEach((function(t){i[t<0?~t:t]||a.push([t])})),a},Ko=function(t,e,n,i,r,o){3===arguments.length&&(i=o=Array,r=null);for(var a=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=new o(t),l=t-1,u=0;u<t;++u)a[u]=r;return{set:function(i,o){for(var u=e(i)&l,c=a[u],h=0;c!=r;){if(n(c,i))return s[u]=o;if(++h>=t)throw new Error("full hashmap");c=a[u=u+1&l]}return a[u]=i,s[u]=o,o},maybeSet:function(i,o){for(var u=e(i)&l,c=a[u],h=0;c!=r;){if(n(c,i))return s[u];if(++h>=t)throw new Error("full hashmap");c=a[u=u+1&l]}return a[u]=i,s[u]=o,o},get:function(i,o){for(var u=e(i)&l,c=a[u],h=0;c!=r;){if(n(c,i))return s[u];if(++h>=t)break;c=a[u=u+1&l]}return o},keys:function(){for(var t=[],e=0,n=a.length;e<n;++e){var i=a[e];i!=r&&t.push(i)}return t}}},Jo=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Qo=new ArrayBuffer(16),$o=new Float64Array(Qo),ta=new Uint32Array(Qo),ea=function(t){$o[0]=t[0],$o[1]=t[1];var e=ta[0]^ta[1];return 2147483647&(e<<5^e>>7^ta[2]^ta[3])},na=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],i=this.points[e+1];this.centers.push({x:(n.x+i.x)/2,y:(n.y+i.y)/2,z:(n.z+i.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){n=this.centers[e],i=this.centers[e+1];var r=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};na.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var i=0;i<this.duration;i+=10){var r=this.pos(i);Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)+(r.z-n.z)*(r.z-n.z))>t&&(e.push(i),n=r)}return e},na.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},na.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*n);return function(t,e,n,i,r){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:r.x*o[0]+i.x*o[1]+n.x*o[2]+e.x*o[3],y:r.y*o[0]+i.y*o[1]+n.y*o[2]+e.y*o[3],z:r.z*o[0]+i.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-i,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])};var ia=he,ra=he;he.deviation=function(t,e,n,i){var r=e&&e.length,o=Math.abs(Ee(t,0,r?e[0]*n:t.length,n));if(r)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(Ee(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var l=0;for(a=0;a<i.length;a+=3){var u=i[a]*n,c=i[a+1]*n,h=i[a+2]*n;l+=Math.abs((t[u]-t[h])*(t[c+1]-t[u+1])-(t[u]-t[c])*(t[h+1]-t[u+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},he.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);r>0&&n.holes.push(i+=t[r-1].length)}return n},ia.default=ra,Ae.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!Be(t,e))return n;for(var r,o,a,s,l=[];e;){for(r=0,o=e.children.length;r<o;r++)a=e.children[r],Be(t,s=e.leaf?i(a):a)&&(e.leaf?n.push(a):ze(t,s)?this._all(a,n):l.push(a));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Be(t,e))return!1;for(var i,r,o,a,s=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],Be(t,a=e.leaf?n(o):o)){if(e.leaf||ze(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Ve([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,o,a=this.data,s=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),i=l[l.length-1],n=u.pop(),o=!0),a.leaf&&-1!==(r=function(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}(t,a.children,e)))return a.children.splice(r,1),l.push(a),this._condense(l),this;o||a.leaf||!ze(a,s)?i?(n++,a=i.children[n],o=!1):a=null:(l.push(a),u.push(n),n=0,i=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:Oe,compareMinY:De,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,a=this._maxEntries;if(o<=a)return Le(r=Ve(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),(r=Ve([])).leaf=!1,r.height=i;var s,l,u,c,h=Math.ceil(o/a),p=h*Math.ceil(Math.sqrt(a));for(Ue(t,e,n,p,this.compareMinX),s=e;s<=n;s+=p)for(Ue(t,s,u=Math.min(s+p-1,n),h,this.compareMinY),l=s;l<=u;l+=h)c=Math.min(l+h-1,u),r.children.push(this._build(t,l,c,i-1));return Le(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,a,s,l,u,c,h;i.push(e),!e.leaf&&i.length-1!==n;){for(c=h=1/0,r=0,o=e.children.length;r<o;r++)l=Ne(a=e.children[r]),(u=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-l)<h?(h=u,c=l<c?l:c,s=a):u===h&&l<c&&(c=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var i=n?t:(0,this.toBBox)(t),r=[],o=this._chooseSubtree(i,this.data,e,r);for(o.children.push(t),Re(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),a=Ve(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,Le(n,this.toBBox),Le(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=Ve([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Le(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,a,s,l,u,c;for(l=u=1/0,i=e;i<=n-e;i++)a=function(t,e){var n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,o-i)}(r=Me(t,0,i,this.toBBox),o=Me(t,i,n,this.toBBox)),s=Ne(r)+Ne(o),a<l?(l=a,c=i,u=s<u?s:u):a===l&&s<u&&(u=s,c=i);return c},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:Oe,r=t.leaf?this.compareMinY:De;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,a=this.toBBox,s=Me(t,0,e,a),l=Me(t,n-e,n,a),u=Fe(s)+Fe(l);for(r=e;r<n-e;r++)o=t.children[r],Re(s,t.leaf?a(o):o),u+=Fe(s);for(r=n-e-1;r>=e;r--)o=t.children[r],Re(l,t.leaf?a(o):o),u+=Fe(l);return u},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)Re(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Le(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var oa=Object.freeze({toMercator:Qe,toWgs84:$e}),aa=6378137,sa=function(t,e,n,i,r){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=i,this.nxtIsectAlongEdgeIn=r},la=function(t,e,n,i,r,o,a){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=i,this.nxtIsectAlongRingAndEdge2=r,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};Number.prototype.modulo=function(t){return(this%t+t)%t};var ua=Math.PI/180,ca=180/Math.PI,ha=function(t,e){this.lon=t,this.lat=e,this.x=ua*t,this.y=ua*e};ha.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},ha.prototype.antipode=function(){return new ha(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var pa=function(){this.coords=[],this.length=0};pa.prototype.move_to=function(t){this.length++,this.coords.push(t)};var fa=function(t){this.properties=t||{},this.geometries=[]};fa.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},fa.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var da=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new ha(t.x,t.y),this.end=new ha(e.x,e.y),this.properties=n||{};var i=this.start.x-this.end.x,r=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(r)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};da.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=ca*Math.atan2(o,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[ca*Math.atan2(r,i),a]},da.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var i=1/(t-1),r=0;r<t;++r){var o=this.interpolate(i*r);n.push(o)}for(var a=!1,s=0,l=e&&e.offset?e.offset:10,u=180-l,c=-180+l,h=360-l,p=1;p<n.length;++p){var f=n[p-1][0],d=n[p][0],m=Math.abs(d-f);m>h&&(d>u&&f<c||f>u&&d<c)?a=!0:m>s&&(s=m)}var g=[];if(a&&s<l){var y=[];g.push(y);for(var v=0;v<n.length;++v){var _=parseFloat(n[v][0]);if(v>0&&Math.abs(_-n[v-1][0])>h){var b=parseFloat(n[v-1][0]),x=parseFloat(n[v-1][1]),w=parseFloat(n[v][0]),C=parseFloat(n[v][1]);if(b>-180&&b<c&&180===w&&v+1<n.length&&n[v-1][0]>-180&&n[v-1][0]<c){y.push([-180,n[v][1]]),v++,y.push([n[v][0],n[v][1]]);continue}if(b>u&&b<180&&-180===w&&v+1<n.length&&n[v-1][0]>u&&n[v-1][0]<180){y.push([180,n[v][1]]),v++,y.push([n[v][0],n[v][1]]);continue}if(b<c&&w>u){var k=b;b=w,w=k;var E=x;x=C,C=E}if(b>u&&w<c&&(w+=360),b<=180&&w>=180&&b<w){var S=(180-b)/(w-b),I=S*C+(1-S)*x;y.push([n[v-1][0]>u?180:-180,I]),(y=[]).push([n[v-1][0]>u?-180:180,I]),g.push(y)}else g.push(y=[]);y.push([_,n[v][1]])}else y.push([n[v][0],n[v][1]])}}else{var T=[];g.push(T);for(var P=0;P<n.length;++P)T.push([n[P][0],n[P][1]])}for(var A=new fa(this.properties),L=0;L<g.length;++L){var M=new pa;A.geometries.push(M);for(var R=g[L],O=0;O<R.length;++O)M.move_to(R[O])}return A};var ma=On;On.polyline=On,On.polygon=function(t,e){var n,i,r,o,a,s,l;for(i=1;i<=8;i*=2){for(n=[],o=!(Nn(r=t[t.length-1],e)&i),a=0;a<t.length;a++)(l=!(Nn(s=t[a],e)&i))!==o&&n.push(Dn(r,s,i,e)),l&&n.push(s),r=s,o=l;if(!(t=n).length)break}return n};var ga=Array.prototype.slice,ya={successCallback:null,verbose:!1,polygons:!1},va={},_a=64,ba=16,xa=4,wa=1,Ca=[],ka=[],Ea=[],Sa=[],Ia=[],Ta=[],Pa=[],Aa=[],La=[],Ma=[],Ra=[],Oa=[],Da=[],Na=[],Fa=[],za=[],Ba=[],Va=[],Ua=[],ja=[],qa=[],Ga=[],Ha=[],Xa=[];Pa[85]=Ma[85]=-1,Aa[85]=Ra[85]=0,La[85]=Oa[85]=1,Ua[85]=Ga[85]=1,ja[85]=Ha[85]=0,qa[85]=Xa[85]=1,Ca[85]=Sa[85]=0,ka[85]=Ia[85]=-1,Ea[85]=Fa[85]=0,za[85]=Da[85]=0,Ba[85]=Na[85]=1,Ta[85]=Va[85]=1,Ga[1]=Ga[169]=0,Ha[1]=Ha[169]=-1,Xa[1]=Xa[169]=0,Da[1]=Da[169]=-1,Na[1]=Na[169]=0,Fa[1]=Fa[169]=0,Ma[4]=Ma[166]=0,Ra[4]=Ra[166]=-1,Oa[4]=Oa[166]=1,za[4]=za[166]=1,Ba[4]=Ba[166]=0,Va[4]=Va[166]=0,Pa[16]=Pa[154]=0,Aa[16]=Aa[154]=1,La[16]=La[154]=1,Sa[16]=Sa[154]=1,Ia[16]=Ia[154]=0,Ta[16]=Ta[154]=1,Ua[64]=Ua[106]=0,ja[64]=ja[106]=1,qa[64]=qa[106]=0,Ca[64]=Ca[106]=-1,ka[64]=ka[106]=0,Ea[64]=Ea[106]=1,Ua[2]=Ua[168]=0,ja[2]=ja[168]=-1,qa[2]=qa[168]=1,Ga[2]=Ga[168]=0,Ha[2]=Ha[168]=-1,Xa[2]=Xa[168]=0,Da[2]=Da[168]=-1,Na[2]=Na[168]=0,Fa[2]=Fa[168]=0,za[2]=za[168]=-1,Ba[2]=Ba[168]=0,Va[2]=Va[168]=1,Pa[8]=Pa[162]=0,Aa[8]=Aa[162]=-1,La[8]=La[162]=0,Ma[8]=Ma[162]=0,Ra[8]=Ra[162]=-1,Oa[8]=Oa[162]=1,Da[8]=Da[162]=1,Na[8]=Na[162]=0,Fa[8]=Fa[162]=1,za[8]=za[162]=1,Ba[8]=Ba[162]=0,Va[8]=Va[162]=0,Pa[32]=Pa[138]=0,Aa[32]=Aa[138]=1,La[32]=La[138]=1,Ma[32]=Ma[138]=0,Ra[32]=Ra[138]=1,Oa[32]=Oa[138]=0,Ca[32]=Ca[138]=1,ka[32]=ka[138]=0,Ea[32]=Ea[138]=0,Sa[32]=Sa[138]=1,Ia[32]=Ia[138]=0,Ta[32]=Ta[138]=1,Ga[128]=Ga[42]=0,Ha[128]=Ha[42]=1,Xa[128]=Xa[42]=1,Ua[128]=Ua[42]=0,ja[128]=ja[42]=1,qa[128]=qa[42]=0,Ca[128]=Ca[42]=-1,ka[128]=ka[42]=0,Ea[128]=Ea[42]=1,Sa[128]=Sa[42]=-1,Ia[128]=Ia[42]=0,Ta[128]=Ta[42]=0,Ma[5]=Ma[165]=-1,Ra[5]=Ra[165]=0,Oa[5]=Oa[165]=0,Ga[5]=Ga[165]=1,Ha[5]=Ha[165]=0,Xa[5]=Xa[165]=0,za[20]=za[150]=0,Ba[20]=Ba[150]=1,Va[20]=Va[150]=1,Sa[20]=Sa[150]=0,Ia[20]=Ia[150]=-1,Ta[20]=Ta[150]=1,Pa[80]=Pa[90]=-1,Aa[80]=Aa[90]=0,La[80]=La[90]=1,Ua[80]=Ua[90]=1,ja[80]=ja[90]=0,qa[80]=qa[90]=1,Da[65]=Da[105]=0,Na[65]=Na[105]=1,Fa[65]=Fa[105]=0,Ca[65]=Ca[105]=0,ka[65]=ka[105]=-1,Ea[65]=Ea[105]=0,Pa[160]=Pa[10]=-1,Aa[160]=Aa[10]=0,La[160]=La[10]=1,Ma[160]=Ma[10]=-1,Ra[160]=Ra[10]=0,Oa[160]=Oa[10]=0,Ga[160]=Ga[10]=1,Ha[160]=Ha[10]=0,Xa[160]=Xa[10]=0,Ua[160]=Ua[10]=1,ja[160]=ja[10]=0,qa[160]=qa[10]=1,za[130]=za[40]=0,Ba[130]=Ba[40]=1,Va[130]=Va[40]=1,Da[130]=Da[40]=0,Na[130]=Na[40]=1,Fa[130]=Fa[40]=0,Ca[130]=Ca[40]=0,ka[130]=ka[40]=-1,Ea[130]=Ea[40]=0,Sa[130]=Sa[40]=0,Ia[130]=Ia[40]=-1,Ta[130]=Ta[40]=1,Ma[37]=Ma[133]=0,Ra[37]=Ra[133]=1,Oa[37]=Oa[133]=1,Ga[37]=Ga[133]=0,Ha[37]=Ha[133]=1,Xa[37]=Xa[133]=0,Ca[37]=Ca[133]=-1,ka[37]=ka[133]=0,Ea[37]=Ea[133]=0,Sa[37]=Sa[133]=1,Ia[37]=Ia[133]=0,Ta[37]=Ta[133]=0,za[148]=za[22]=-1,Ba[148]=Ba[22]=0,Va[148]=Va[22]=0,Ga[148]=Ga[22]=0,Ha[148]=Ha[22]=-1,Xa[148]=Xa[22]=1,Ua[148]=Ua[22]=0,ja[148]=ja[22]=1,qa[148]=qa[22]=1,Sa[148]=Sa[22]=-1,Ia[148]=Ia[22]=0,Ta[148]=Ta[22]=1,Pa[82]=Pa[88]=0,Aa[82]=Aa[88]=-1,La[82]=La[88]=1,za[82]=za[88]=1,Ba[82]=Ba[88]=0,Va[82]=Va[88]=1,Da[82]=Da[88]=-1,Na[82]=Na[88]=0,Fa[82]=Fa[88]=1,Ua[82]=Ua[88]=0,ja[82]=ja[88]=-1,qa[82]=qa[88]=0,Pa[73]=Pa[97]=0,Aa[73]=Aa[97]=1,La[73]=La[97]=0,Ma[73]=Ma[97]=0,Ra[73]=Ra[97]=-1,Oa[73]=Oa[97]=0,Da[73]=Da[97]=1,Na[73]=Na[97]=0,Fa[73]=Fa[97]=0,Ca[73]=Ca[97]=1,ka[73]=ka[97]=0,Ea[73]=Ea[97]=1,Pa[145]=Pa[25]=0,Aa[145]=Aa[25]=-1,La[145]=La[25]=0,Da[145]=Da[25]=1,Na[145]=Na[25]=0,Fa[145]=Fa[25]=1,Ga[145]=Ga[25]=0,Ha[145]=Ha[25]=1,Xa[145]=Xa[25]=1,Sa[145]=Sa[25]=-1,Ia[145]=Ia[25]=0,Ta[145]=Ta[25]=0,Ma[70]=Ma[100]=0,Ra[70]=Ra[100]=1,Oa[70]=Oa[100]=0,za[70]=za[100]=-1,Ba[70]=Ba[100]=0,Va[70]=Va[100]=1,Ua[70]=Ua[100]=0,ja[70]=ja[100]=-1,qa[70]=qa[100]=1,Ca[70]=Ca[100]=1,ka[70]=ka[100]=0,Ea[70]=Ea[100]=0,Ma[101]=Ma[69]=0,Ra[101]=Ra[69]=1,Oa[101]=Oa[69]=0,Ca[101]=Ca[69]=1,ka[101]=ka[69]=0,Ea[101]=Ea[69]=0,Ga[149]=Ga[21]=0,Ha[149]=Ha[21]=1,Xa[149]=Xa[21]=1,Sa[149]=Sa[21]=-1,Ia[149]=Ia[21]=0,Ta[149]=Ta[21]=0,za[86]=za[84]=-1,Ba[86]=Ba[84]=0,Va[86]=Va[84]=1,Ua[86]=Ua[84]=0,ja[86]=ja[84]=-1,qa[86]=qa[84]=1,Pa[89]=Pa[81]=0,Aa[89]=Aa[81]=-1,La[89]=La[81]=0,Da[89]=Da[81]=1,Na[89]=Na[81]=0,Fa[89]=Fa[81]=1,Pa[96]=Pa[74]=0,Aa[96]=Aa[74]=1,La[96]=La[74]=0,Ma[96]=Ma[74]=-1,Ra[96]=Ra[74]=0,Oa[96]=Oa[74]=1,Ua[96]=Ua[74]=1,ja[96]=ja[74]=0,qa[96]=qa[74]=0,Ca[96]=Ca[74]=1,ka[96]=ka[74]=0,Ea[96]=Ea[74]=1,Pa[24]=Pa[146]=0,Aa[24]=Aa[146]=-1,La[24]=La[146]=1,za[24]=za[146]=1,Ba[24]=Ba[146]=0,Va[24]=Va[146]=1,Da[24]=Da[146]=0,Na[24]=Na[146]=1,Fa[24]=Fa[146]=1,Sa[24]=Sa[146]=0,Ia[24]=Ia[146]=-1,Ta[24]=Ta[146]=0,Ma[6]=Ma[164]=-1,Ra[6]=Ra[164]=0,Oa[6]=Oa[164]=1,za[6]=za[164]=-1,Ba[6]=Ba[164]=0,Va[6]=Va[164]=0,Ga[6]=Ga[164]=0,Ha[6]=Ha[164]=-1,Xa[6]=Xa[164]=1,Ua[6]=Ua[164]=1,ja[6]=ja[164]=0,qa[6]=qa[164]=0,Da[129]=Da[41]=0,Na[129]=Na[41]=1,Fa[129]=Fa[41]=1,Ga[129]=Ga[41]=0,Ha[129]=Ha[41]=1,Xa[129]=Xa[41]=0,Ca[129]=Ca[41]=-1,ka[129]=ka[41]=0,Ea[129]=Ea[41]=0,Sa[129]=Sa[41]=0,Ia[129]=Ia[41]=-1,Ta[129]=Ta[41]=0,za[66]=za[104]=0,Ba[66]=Ba[104]=1,Va[66]=Va[104]=0,Da[66]=Da[104]=-1,Na[66]=Na[104]=0,Fa[66]=Fa[104]=1,Ua[66]=Ua[104]=0,ja[66]=ja[104]=-1,qa[66]=qa[104]=0,Ca[66]=Ca[104]=0,ka[66]=ka[104]=-1,Ea[66]=Ea[104]=1,Pa[144]=Pa[26]=-1,Aa[144]=Aa[26]=0,La[144]=La[26]=0,Ga[144]=Ga[26]=1,Ha[144]=Ha[26]=0,Xa[144]=Xa[26]=1,Ua[144]=Ua[26]=0,ja[144]=ja[26]=1,qa[144]=qa[26]=1,Sa[144]=Sa[26]=-1,Ia[144]=Ia[26]=0,Ta[144]=Ta[26]=1,Ma[36]=Ma[134]=0,Ra[36]=Ra[134]=1,Oa[36]=Oa[134]=1,za[36]=za[134]=0,Ba[36]=Ba[134]=1,Va[36]=Va[134]=0,Ca[36]=Ca[134]=0,ka[36]=ka[134]=-1,Ea[36]=Ea[134]=1,Sa[36]=Sa[134]=1,Ia[36]=Ia[134]=0,Ta[36]=Ta[134]=0,Pa[9]=Pa[161]=-1,Aa[9]=Aa[161]=0,La[9]=La[161]=0,Ma[9]=Ma[161]=0,Ra[9]=Ra[161]=-1,Oa[9]=Oa[161]=0,Da[9]=Da[161]=1,Na[9]=Na[161]=0,Fa[9]=Fa[161]=0,Ga[9]=Ga[161]=1,Ha[9]=Ha[161]=0,Xa[9]=Xa[161]=1,Pa[136]=0,Aa[136]=1,La[136]=1,Ma[136]=0,Ra[136]=1,Oa[136]=0,za[136]=-1,Ba[136]=0,Va[136]=1,Da[136]=-1,Na[136]=0,Fa[136]=0,Ga[136]=0,Ha[136]=-1,Xa[136]=0,Ua[136]=0,ja[136]=-1,qa[136]=1,Ca[136]=1,ka[136]=0,Ea[136]=0,Sa[136]=1,Ia[136]=0,Ta[136]=1,Pa[34]=0,Aa[34]=-1,La[34]=0,Ma[34]=0,Ra[34]=-1,Oa[34]=1,za[34]=1,Ba[34]=0,Va[34]=0,Da[34]=1,Na[34]=0,Fa[34]=1,Ga[34]=0,Ha[34]=1,Xa[34]=1,Ua[34]=0,ja[34]=1,qa[34]=0,Ca[34]=-1,ka[34]=0,Ea[34]=1,Sa[34]=-1,Ia[34]=0,Ta[34]=0,Pa[35]=0,Aa[35]=1,La[35]=1,Ma[35]=0,Ra[35]=-1,Oa[35]=1,za[35]=1,Ba[35]=0,Va[35]=0,Da[35]=-1,Na[35]=0,Fa[35]=0,Ga[35]=0,Ha[35]=-1,Xa[35]=0,Ua[35]=0,ja[35]=1,qa[35]=0,Ca[35]=-1,ka[35]=0,Ea[35]=1,Sa[35]=1,Ia[35]=0,Ta[35]=1,Pa[153]=0,Aa[153]=1,La[153]=1,Da[153]=-1,Na[153]=0,Fa[153]=0,Ga[153]=0,Ha[153]=-1,Xa[153]=0,Sa[153]=1,Ia[153]=0,Ta[153]=1,Ma[102]=0,Ra[102]=-1,Oa[102]=1,za[102]=1,Ba[102]=0,Va[102]=0,Ua[102]=0,ja[102]=1,qa[102]=0,Ca[102]=-1,ka[102]=0,Ea[102]=1,Pa[155]=0,Aa[155]=-1,La[155]=0,Da[155]=1,Na[155]=0,Fa[155]=1,Ga[155]=0,Ha[155]=1,Xa[155]=1,Sa[155]=-1,Ia[155]=0,Ta[155]=0,Ma[103]=0,Ra[103]=1,Oa[103]=0,za[103]=-1,Ba[103]=0,Va[103]=1,Ua[103]=0,ja[103]=-1,qa[103]=1,Ca[103]=1,ka[103]=0,Ea[103]=0,Pa[152]=0,Aa[152]=1,La[152]=1,za[152]=-1,Ba[152]=0,Va[152]=1,Da[152]=-1,Na[152]=0,Fa[152]=0,Ga[152]=0,Ha[152]=-1,Xa[152]=0,Ua[152]=0,ja[152]=-1,qa[152]=1,Sa[152]=1,Ia[152]=0,Ta[152]=1,Pa[156]=0,Aa[156]=-1,La[156]=1,za[156]=1,Ba[156]=0,Va[156]=1,Da[156]=-1,Na[156]=0,Fa[156]=0,Ga[156]=0,Ha[156]=-1,Xa[156]=0,Ua[156]=0,ja[156]=1,qa[156]=1,Sa[156]=-1,Ia[156]=0,Ta[156]=1,Pa[137]=0,Aa[137]=1,La[137]=1,Ma[137]=0,Ra[137]=1,Oa[137]=0,Da[137]=-1,Na[137]=0,Fa[137]=0,Ga[137]=0,Ha[137]=-1,Xa[137]=0,Ca[137]=1,ka[137]=0,Ea[137]=0,Sa[137]=1,Ia[137]=0,Ta[137]=1,Pa[139]=0,Aa[139]=1,La[139]=1,Ma[139]=0,Ra[139]=-1,Oa[139]=0,Da[139]=1,Na[139]=0,Fa[139]=0,Ga[139]=0,Ha[139]=1,Xa[139]=0,Ca[139]=-1,ka[139]=0,Ea[139]=0,Sa[139]=1,Ia[139]=0,Ta[139]=1,Pa[98]=0,Aa[98]=-1,La[98]=0,Ma[98]=0,Ra[98]=-1,Oa[98]=1,za[98]=1,Ba[98]=0,Va[98]=0,Da[98]=1,Na[98]=0,Fa[98]=1,Ua[98]=0,ja[98]=1,qa[98]=0,Ca[98]=-1,ka[98]=0,Ea[98]=1,Pa[99]=0,Aa[99]=1,La[99]=0,Ma[99]=0,Ra[99]=-1,Oa[99]=1,za[99]=1,Ba[99]=0,Va[99]=0,Da[99]=-1,Na[99]=0,Fa[99]=1,Ua[99]=0,ja[99]=-1,qa[99]=0,Ca[99]=1,ka[99]=0,Ea[99]=1,Ma[38]=0,Ra[38]=-1,Oa[38]=1,za[38]=1,Ba[38]=0,Va[38]=0,Ga[38]=0,Ha[38]=1,Xa[38]=1,Ua[38]=0,ja[38]=1,qa[38]=0,Ca[38]=-1,ka[38]=0,Ea[38]=1,Sa[38]=-1,Ia[38]=0,Ta[38]=0,Ma[39]=0,Ra[39]=1,Oa[39]=1,za[39]=-1,Ba[39]=0,Va[39]=0,Ga[39]=0,Ha[39]=-1,Xa[39]=1,Ua[39]=0,ja[39]=1,qa[39]=0,Ca[39]=-1,ka[39]=0,Ea[39]=1,Sa[39]=1,Ia[39]=0,Ta[39]=0;var Za=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Wa=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},Ya=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},Ka=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},Ja=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},Qa=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},$a=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},ts=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},es=[],ns=[],is=[],rs=[],os=[],as=[],ss=[],ls=[];rs[1]=os[1]=18,rs[169]=os[169]=18,is[4]=ns[4]=12,is[166]=ns[166]=12,es[16]=ls[16]=4,es[154]=ls[154]=4,as[64]=ss[64]=22,as[106]=ss[106]=22,is[2]=as[2]=17,rs[2]=os[2]=18,is[168]=as[168]=17,rs[168]=os[168]=18,es[8]=rs[8]=9,ns[8]=is[8]=12,es[162]=rs[162]=9,ns[162]=is[162]=12,es[32]=ls[32]=4,ns[32]=ss[32]=1,es[138]=ls[138]=4,ns[138]=ss[138]=1,os[128]=ls[128]=21,as[128]=ss[128]=22,os[42]=ls[42]=21,as[42]=ss[42]=22,ns[5]=os[5]=14,ns[165]=os[165]=14,is[20]=ls[20]=6,is[150]=ls[150]=6,es[80]=as[80]=11,es[90]=as[90]=11,rs[65]=ss[65]=3,rs[105]=ss[105]=3,es[160]=as[160]=11,ns[160]=os[160]=14,es[10]=as[10]=11,ns[10]=os[10]=14,is[130]=ls[130]=6,rs[130]=ss[130]=3,is[40]=ls[40]=6,rs[40]=ss[40]=3,ns[101]=ss[101]=1,ns[69]=ss[69]=1,os[149]=ls[149]=21,os[21]=ls[21]=21,is[86]=as[86]=17,is[84]=as[84]=17,es[89]=rs[89]=9,es[81]=rs[81]=9,es[96]=ss[96]=0,ns[96]=as[96]=15,es[74]=ss[74]=0,ns[74]=as[74]=15,es[24]=is[24]=8,rs[24]=ls[24]=7,es[146]=is[146]=8,rs[146]=ls[146]=7,ns[6]=as[6]=15,is[6]=os[6]=16,ns[164]=as[164]=15,is[164]=os[164]=16,rs[129]=ls[129]=7,os[129]=ss[129]=20,rs[41]=ls[41]=7,os[41]=ss[41]=20,is[66]=ss[66]=2,rs[66]=as[66]=19,is[104]=ss[104]=2,rs[104]=as[104]=19,es[144]=os[144]=10,as[144]=ls[144]=23,es[26]=os[26]=10,as[26]=ls[26]=23,ns[36]=ls[36]=5,is[36]=ss[36]=2,ns[134]=ls[134]=5,is[134]=ss[134]=2,es[9]=os[9]=10,ns[9]=rs[9]=13,es[161]=os[161]=10,ns[161]=rs[161]=13,ns[37]=ls[37]=5,os[37]=ss[37]=20,ns[133]=ls[133]=5,os[133]=ss[133]=20,is[148]=os[148]=16,as[148]=ls[148]=23,is[22]=os[22]=16,as[22]=ls[22]=23,es[82]=is[82]=8,rs[82]=as[82]=19,es[88]=is[88]=8,rs[88]=as[88]=19,es[73]=ss[73]=0,ns[73]=rs[73]=13,es[97]=ss[97]=0,ns[97]=rs[97]=13,es[145]=rs[145]=9,os[145]=ls[145]=21,es[25]=rs[25]=9,os[25]=ls[25]=21,ns[70]=ss[70]=1,is[70]=as[70]=17,ns[100]=ss[100]=1,is[100]=as[100]=17,es[34]=rs[34]=9,ns[34]=is[34]=12,os[34]=ls[34]=21,as[34]=ss[34]=22,es[136]=ls[136]=4,ns[136]=ss[136]=1,is[136]=as[136]=17,rs[136]=os[136]=18,es[35]=ls[35]=4,ns[35]=is[35]=12,rs[35]=os[35]=18,as[35]=ss[35]=22,es[153]=ls[153]=4,rs[153]=os[153]=18,ns[102]=is[102]=12,as[102]=ss[102]=22,es[155]=rs[155]=9,os[155]=ls[155]=23,ns[103]=ss[103]=1,is[103]=as[103]=17,es[152]=ls[152]=4,is[152]=as[152]=17,rs[152]=os[152]=18,es[156]=is[156]=8,rs[156]=os[156]=18,as[156]=ls[156]=23,es[137]=ls[137]=4,ns[137]=ss[137]=1,rs[137]=os[137]=18,es[139]=ls[139]=4,ns[139]=rs[139]=13,os[139]=ss[139]=20,es[98]=rs[98]=9,ns[98]=is[98]=12,as[98]=ss[98]=22,es[99]=ss[99]=0,ns[99]=is[99]=12,rs[99]=as[99]=19,ns[38]=is[38]=12,os[38]=ls[38]=21,as[38]=ss[38]=22,ns[39]=ls[39]=5,is[39]=os[39]=16,as[39]=ss[39]=22;var us=[];us[1]=us[169]=Za,us[4]=us[166]=Wa,us[16]=us[154]=Ya,us[64]=us[106]=Ka,us[168]=us[2]=Ja,us[162]=us[8]=Qa,us[138]=us[32]=$a,us[42]=us[128]=ts,us[5]=us[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},us[20]=us[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},us[80]=us[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},us[65]=us[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},us[160]=us[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},us[130]=us[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},us[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},us[101]=us[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},us[149]=us[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},us[86]=us[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},us[89]=us[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},us[96]=us[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},us[24]=us[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},us[6]=us[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},us[129]=us[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},us[66]=us[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},us[144]=us[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},us[36]=us[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},us[9]=us[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},us[37]=us[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},us[148]=us[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},us[82]=us[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},us[73]=us[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},us[145]=us[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},us[70]=us[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},us[34]=function(t){return[ts(t),Qa(t)]},us[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},us[136]=function(t){return[$a(t),Ja(t)]},us[153]=function(t){return[Ya(t),Za(t)]},us[102]=function(t){return[Wa(t),Ka(t)]},us[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},us[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},us[152]=function(t){return[Ya(t),Ja(t)]},us[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},us[137]=function(t){return[$a(t),Za(t)]},us[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},us[98]=function(t){return[Qa(t),Ka(t)]},us[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},us[38]=function(t){return[Wa(t),ts(t)]},us[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var cs=function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};cs.buildId=function(t){return t.join(",")},cs.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},cs.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},cs.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},cs.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var i=e.to,r=n.to;if(i.coordinates[0]-t.coordinates[0]>=0&&r.coordinates[0]-t.coordinates[0]<0)return 1;if(i.coordinates[0]-t.coordinates[0]<0&&r.coordinates[0]-t.coordinates[0]>=0)return-1;if(i.coordinates[0]-t.coordinates[0]==0&&r.coordinates[0]-t.coordinates[0]==0)return i.coordinates[1]-t.coordinates[1]>=0||r.coordinates[1]-t.coordinates[1]>=0?i.coordinates[1]-r.coordinates[1]:r.coordinates[1]-i.coordinates[1];var o=si(t.coordinates,i.coordinates,r.coordinates);return o<0?1:o>0?-1:Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2)-(Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},cs.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},cs.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},cs.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};var hs=function(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};hs.prototype.getSymetric=function(){return this.symetric||(this.symetric=new hs(this.to,this.from),this.symetric.symetric=this),this.symetric},hs.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},hs.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},hs.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},hs.prototype.toLineString=function(){return s([this.from.coordinates,this.to.coordinates])},hs.prototype.compareTo=function(t){return si(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var ps=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},fs={length:{configurable:!0}};ps.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},ps.prototype.get=function(t){return this.edges[t]},fs.length.get=function(){return this.edges.length},ps.prototype.forEach=function(t){this.edges.forEach(t)},ps.prototype.map=function(t){return this.edges.map(t)},ps.prototype.some=function(t){return this.edges.some(t)},ps.prototype.isValid=function(){return!0},ps.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,i){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=i),e}),0),n=(0===e?this.length:e)-1,i=(e+1)%this.length,r=si(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[i].from.coordinates);return 0===r?this.edges[n].from.coordinates[0]>this.edges[i].from.coordinates[0]:r>0},ps.prototype.toMultiPoint=function(){return h(this.edges.map((function(t){return t.from.coordinates})))},ps.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=o([t])},ps.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=ie(this.toPolygon())},ps.findEdgeRingContaining=function(t,e){var n,r,o=t.getEnvelope();return e.forEach((function(e){var a=e.getEnvelope();if(r&&(n=r.getEnvelope()),!function(t,e){var n=t.geometry.coordinates.map((function(t){return t[0]})),i=t.geometry.coordinates.map((function(t){return t[1]})),r=e.geometry.coordinates.map((function(t){return t[0]})),o=e.geometry.coordinates.map((function(t){return t[1]}));return Math.max(null,n)===Math.max(null,r)&&Math.max(null,i)===Math.max(null,o)&&Math.min(null,n)===Math.min(null,r)&&Math.min(null,i)===Math.min(null,o)}(a,o)&&li(a,o)){var s=t.map((function(t){return t.from.coordinates})).find((function(t){return!e.some((function(e){return function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t,e.from.coordinates)}))}));s&&e.inside(i(s))&&(r&&!li(n,a)||(r=e))}})),r},ps.prototype.inside=function(t){return Tt(t,this.toPolygon())},Object.defineProperties(ps.prototype,fs);var ds=function(){this.edges=[],this.nodes={}};ds.fromGeoJson=function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var e=new ds;return N(t,(function(t){Z(t,"LineString","Graph::fromGeoJson"),T(t,(function(t,n){if(t){var i=e.getNode(t),r=e.getNode(n);e.addEdge(i,r)}return n}))})),e},ds.prototype.getNode=function(t){var e=cs.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new cs(t)),n},ds.prototype.addEdge=function(t,e){var n=new hs(t,e),i=n.getSymetric();this.edges.push(n),this.edges.push(i)},ds.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},ds.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},ds.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},ds.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},ds.prototype._computeNextCCWEdges=function(t,e){for(var n,i,r=t.getOuterEdges(),o=r.length-1;o>=0;--o){var a=r[o],s=a.symetric,l=void 0,u=void 0;a.label===e&&(l=a),s.label===e&&(u=s),l&&u&&(u&&(i=u),l&&(i&&(i.next=l,i=void 0),n||(n=l)))}i&&(i.next=n)},ds.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var i=n;do{i.label=e,i=i.next}while(!n.isEqual(i));e++}})),t},ds.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},ds.prototype._findIntersectionNodes=function(t){var e=[],n=t,i=function(){var i=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++i})),i>1&&e.push(n.from),n=n.next};do{i()}while(!t.isEqual(n));return e},ds.prototype._findEdgeRing=function(t){var e=t,n=new ps;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},ds.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},ds.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()};var ms=gt((function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n})),gs=gt((function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=r?n:i).supported=n,e.unsupported=i})),ys=gt((function(t){function e(t){return null==t}function n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}var i=Array.prototype.slice,r=t.exports=function(t,o,a){return a||(a={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?a.strict?t===o:t==o:function(t,o,a){var s,l;if(e(t)||e(o))return!1;if(t.prototype!==o.prototype)return!1;if(gs(t))return!!gs(o)&&(t=i.call(t),o=i.call(o),r(t,o,a));if(n(t)){if(!n(o))return!1;if(t.length!==o.length)return!1;for(s=0;s<t.length;s++)if(t[s]!==o[s])return!1;return!0}try{var u=ms(t),c=ms(o)}catch(t){return!1}if(u.length!=c.length)return!1;for(u.sort(),c.sort(),s=u.length-1;s>=0;s--)if(u[s]!=c[s])return!1;for(s=u.length-1;s>=0;s--)if(!r(t[l=u[s]],o[l],a))return!1;return typeof t==typeof o}(t,o,a))}})),vs=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:_i};vs.prototype.compare=function(t,e){if(t.type!==e.type||!vi(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,i=yi(t),r=yi(e);return i.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),r)}}return!1},vs.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},vs.prototype.compareLine=function(t,e,n,i){if(!vi(t,e))return!1;var r=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!i||this.compareCoord(r[0],o[0])||(o=this.fixStartIndex(o,r))){var a=this.compareCoord(r[n],o[n]);return this.direction||a?this.comparePath(r,o):!!this.compareCoord(r[n],o[o.length-(1+n)])&&this.comparePath(r.slice().reverse(),o)}},vs.prototype.fixStartIndex=function(t,e){for(var n,i=-1,r=0;r<t.length;r++)if(this.compareCoord(t[r],e[0])){i=r;break}return i>=0&&(n=[].concat(t.slice(i,t.length),t.slice(1,i+1))),n},vs.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},vs.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),i=e.coordinates.slice(1,e.coordinates.length),r=this;return n.every((function(t){return this.some((function(e){return r.compareLine(t,e,1,!0)}))}),i)}return!1},vs.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},vs.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},vs.prototype.removePseudo=function(t){return t};var _s=vs,bs=gt((function(t){function e(t,e,n,i){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,i)}e.prototype.run=function(t,e,n,i){this._init(t,e,n,i);for(var r=0;r<this._datasetLength;r++)if(1!==this._visited[r]){this._visited[r]=1;var o=this._regionQuery(r);if(o.length<this.minPts)this.noise.push(r);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(r,a),this._expandCluster(a,o)}}return this.clusters},e.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var i=e[n];if(1!==this._visited[i]){this._visited[i]=1;var r=this._regionQuery(i);r.length>=this.minPts&&(e=this._mergeArrays(e,r))}1!==this._assigned[i]&&this._addToCluster(i,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,i=0;i<n;i++){var r=e[i];t.indexOf(r)<0&&t.push(r)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),xs=gt((function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,i=0;i<this.k;i++)this.centroids[i]=this.randomCentroid();for(var r=!0;r;){r=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(c),s=0,l=0;l<c;l++)a[l]=0;for(var u=0;u<n;u++){var c=this.dataset[u].length;if(o===this.assignments[u]){for(l=0;l<c;l++)a[l]+=this.dataset[u][l];s++}}if(s>0){for(l=0;l<c;l++)a[l]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),r=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,i=0;i<n;i++)(t=this.argmin(this.dataset[i],this.centroids,this.distance))!=this.assignments[i]&&(this.assignments[i]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var i,r=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(i=n(t,e[s]))<r&&(r=i,o=s);return o},e.prototype.distance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;){var r=t[i]-e[i];n+=r*r}return Math.sqrt(n)},t.exports&&(t.exports=e)})),ws=gt((function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,i=n;i--;){var r=this._priorities[i];"desc"===this._sorting?e>r&&(n=i):e<r&&(n=i)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var i=0;i<t.length;i++)this.insert(t[i],e[i])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)})),Cs=gt((function(t){function e(t,e,n,i){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,i)}if(t.exports)var n=ws;e.prototype.run=function(t,e,i,r){this._init(t,e,i,r);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var l=new n(null,null,"asc"),u=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,u,l),this._expandCluster(s,l))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var i=this._orderedList[e];t.push([i,this._reachability[i]])}return t},e.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},e.prototype._updateQueue=function(t,e,n){var i=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===i._processed[e]){var r=i.distance(i.dataset[t],i.dataset[e]),o=Math.max(i._coreDistance,r);void 0===i._reachability[e]?(i._reachability[e]=o,n.insert(e,o)):o<i._reachability[e]&&(i._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},e.prototype._expandCluster=function(t,e){for(var n=e.getElements(),i=0,r=n.length;i<r;i++){var o=n[i];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],i=0,r=this.dataset.length;i<r;i++)this.distance(this.dataset[t],this.dataset[i])<e&&n.push(i);return n},e.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),ks=gt((function(t){t.exports&&(t.exports={DBSCAN:bs,KMEANS:xs,OPTICS:Cs,PriorityQueue:ws})})),Es=function(t,e,n){for(var i=t.length,r=0,o=0;o<i;o++){var a=(t[o]||0)-(e[o]||0);r+=a*a}return n?Math.sqrt(r):r},Ss=Es,Is=function(t,e,n){var i=Math.abs(t-e);return n?i:i*i},Ts=Es,Ps={search:function(t,e,n,i){t.cleanDirty();var r=(i=i||{}).heuristic||Ps.heuristics.manhattan,o=i.closest||!1,a=new Si((function(t){return t.f})),s=e;for(e.h=r(e,n),a.push(e);a.size()>0;){var l=a.pop();if(l===n)return Ci(l);l.closed=!0;for(var u=t.neighbors(l),c=0,h=u.length;c<h;++c){var p=u[c];if(!p.closed&&!p.isWall()){var f=l.g+p.getCost(l),d=p.visited;(!d||f<p.g)&&(p.visited=!0,p.parent=l,p.h=p.h||r(p,n),p.g=f,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<s.h||p.h===s.h&&p.g<s.g)&&(s=p),d?a.rescoreElement(p):a.push(p))}}}return o?Ci(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),i=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return 1*(i+r)+(n-2)*Math.min(i,r)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};ki.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Ps.cleanNode(this.nodes[t])},ki.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Ps.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},ki.prototype.markDirty=function(t){this.dirtyNodes.push(t)},ki.prototype.neighbors=function(t){var e=[],n=t.x,i=t.y,r=this.grid;return r[n-1]&&r[n-1][i]&&e.push(r[n-1][i]),r[n+1]&&r[n+1][i]&&e.push(r[n+1][i]),r[n]&&r[n][i-1]&&e.push(r[n][i-1]),r[n]&&r[n][i+1]&&e.push(r[n][i+1]),this.diagonal&&(r[n-1]&&r[n-1][i-1]&&e.push(r[n-1][i-1]),r[n+1]&&r[n+1][i-1]&&e.push(r[n+1][i-1]),r[n-1]&&r[n-1][i+1]&&e.push(r[n-1][i+1]),r[n+1]&&r[n+1][i+1]&&e.push(r[n+1][i+1])),e},ki.prototype.toString=function(){for(var t,e,n,i,r=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],n=0,i=(e=o[a]).length;n<i;n++)t.push(e[n].weight);r.push(t.join(" "))}return r.join("\n")},Ei.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Ei.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Ei.prototype.isWall=function(){return 0===this.weight},Si.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,i=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[n]=e,this.content[t]=i,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var r,o=t+1<<1,a=o-1,s=null;if(a<e&&(r=this.scoreFunction(this.content[a]))<i&&(s=a),o<e&&this.scoreFunction(this.content[o])<(null===s?i:r)&&(s=o),null===s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}};var As=function(t){return function(){return t}};Pi.prototype={constructor:Pi,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Ri(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(Li(this,n),n=(t=n).U),n.C=!1,i.C=!0,Mi(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(Mi(this,n),n=(t=n).U),n.C=!1,i.C=!0,Li(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,a=t.R;if(n=o?a?Ri(a):o:a,r?r.L===t?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(r=n.U,n.U=t.U,r.L=t=n.R,n.R=a,a.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,Li(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Mi(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,Li(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,Mi(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Li(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,Mi(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};var Ls,Ms,Rs,Os,Ds,Ns=[],Fs=[],zs=1e-6,Bs=1e-12;Ji.prototype={constructor:Ji,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Vi(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,i){if(o=(r=n.halfedges).length)for(var r,o,a,s=n.site,l=-1,u=e[r[o-1]],c=u.left===s?u.right:u.left;++l<o;)a=c,c=(u=e[r[l]]).left===s?u.right:u.left,a&&c&&i<a.index&&i<c.index&&Yi(s,a,c)<0&&t.push([s.data,a.data,c.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var i,r,o=this,a=o._found||0,s=o.cells.length;!(r=o.cells[a]);)if(++a>=s)return null;var l=t-r.site[0],u=e-r.site[1],c=l*l+u*u;do{r=o.cells[i=a],a=null,r.halfedges.forEach((function(n){var i=o.edges[n],s=i.left;if(s!==r.site&&s||(s=i.right)){var l=t-s[0],u=e-s[1],h=l*l+u*u;h<c&&(c=h,a=s.index)}}))}while(null!==a);return o._found=i,null==n||c<=n*n?r.site:null}};var Vs=Object.freeze({randomPosition:rr,randomPoint:or,randomPolygon:ar,randomLineString:sr}),Us=Object.freeze({getCluster:ur,clusterEach:cr,clusterReduce:hr,createBins:pr,applyFilter:fr,propertiesContainsFilter:dr,filterProperties:mr});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var js=function(){};js.prototype.interfaces_=function(){return[]},js.prototype.getClass=function(){return js},js.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var qs=function(){},Gs=function(){},Hs={MAX_VALUE:{configurable:!0}};Gs.isNaN=function(t){return Number.isNaN(t)},Gs.doubleToLongBits=function(t){return t},Gs.longBitsToDouble=function(t){return t},Gs.isInfinite=function(t){return!Number.isFinite(t)},Hs.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(Gs,Hs);var Xs=function(){},Zs=function(){},Ws=function(){},Ys=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Ks={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Ys.prototype.setOrdinate=function(t,e){switch(t){case Ys.X:this.x=e;break;case Ys.Y:this.y=e;break;case Ys.Z:this.z=e;break;default:throw new qs("Invalid ordinate index: "+t)}},Ys.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!js.equalsWithTolerance(this.x,e.x,n)&&!!js.equalsWithTolerance(this.y,e.y,n)}},Ys.prototype.getOrdinate=function(t){switch(t){case Ys.X:return this.x;case Ys.Y:return this.y;case Ys.Z:return this.z}throw new qs("Invalid ordinate index: "+t)},Ys.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||Gs.isNaN(this.z))&&Gs.isNaN(t.z)},Ys.prototype.equals=function(t){return t instanceof Ys&&this.equals2D(t)},Ys.prototype.equalInZ=function(t,e){return js.equalsWithTolerance(this.z,t.z,e)},Ys.prototype.compareTo=function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},Ys.prototype.clone=function(){},Ys.prototype.copy=function(){return new Ys(this)},Ys.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Ys.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},Ys.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},Ys.prototype.hashCode=function(){var t=17;return 37*(t=37*t+Ys.hashCode(this.x))+Ys.hashCode(this.y)},Ys.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},Ys.prototype.interfaces_=function(){return[Xs,Zs,gr]},Ys.prototype.getClass=function(){return Ys},Ys.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=Gs.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},Ks.DimensionalComparator.get=function(){return Js},Ks.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Ks.NULL_ORDINATE.get=function(){return Gs.NaN},Ks.X.get=function(){return 0},Ks.Y.get=function(){return 1},Ks.Z.get=function(){return 2},Object.defineProperties(Ys,Ks);var Js=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new qs("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};Js.prototype.compare=function(t,e){var n=t,i=e,r=Js.compare(n.x,i.x);if(0!==r)return r;var o=Js.compare(n.y,i.y);return 0!==o?o:this._dimensionsToTest<=2?0:Js.compare(n.z,i.z)},Js.prototype.interfaces_=function(){return[Ws]},Js.prototype.getClass=function(){return Js},Js.compare=function(t,e){return t<e?-1:t>e?1:Gs.isNaN(t)?Gs.isNaN(e)?0:-1:Gs.isNaN(e)?1:0};var Qs=function(){};Qs.prototype.create=function(){},Qs.prototype.interfaces_=function(){return[]},Qs.prototype.getClass=function(){return Qs};var $s=function(){},tl={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};$s.prototype.interfaces_=function(){return[]},$s.prototype.getClass=function(){return $s},$s.toLocationSymbol=function(t){switch(t){case $s.EXTERIOR:return"e";case $s.BOUNDARY:return"b";case $s.INTERIOR:return"i";case $s.NONE:return"-"}throw new qs("Unknown location value: "+t)},tl.INTERIOR.get=function(){return 0},tl.BOUNDARY.get=function(){return 1},tl.EXTERIOR.get=function(){return 2},tl.NONE.get=function(){return-1},Object.defineProperties($s,tl);var el=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},nl=function(){},il={LOG_10:{configurable:!0}};nl.prototype.interfaces_=function(){return[]},nl.prototype.getClass=function(){return nl},nl.log10=function(t){var e=Math.log(t);return Gs.isInfinite(e)||Gs.isNaN(e)?e:e/nl.LOG_10},nl.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},nl.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}},nl.wrap=function(t,e){return t<0?e- -t%e:t%e},nl.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=t;return e>i&&(i=e),n>i&&(i=n),i}if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=r;return o>l&&(l=o),a>l&&(l=a),s>l&&(l=s),l}},nl.average=function(t,e){return(t+e)/2},il.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(nl,il);var rl=function(t){this.str=t};rl.prototype.append=function(t){this.str+=t},rl.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},rl.prototype.toString=function(t){return this.str};var ol=function(t){this.value=t};ol.prototype.intValue=function(){return this.value},ol.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},ol.isNaN=function(t){return Number.isNaN(t)};var al=function(){};al.isWhitespace=function(t){return t<=32&&t>=0||127===t},al.toUpperCase=function(t){return t.toUpperCase()};var sl=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var i=arguments[0];t.call(this,t.parse(i))}}else if(2===arguments.length){var r=arguments[0],o=arguments[1];this.init(r,o)}},ll={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};sl.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},sl.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),i=sl.magnitude(n._hi),r=sl.TEN.pow(i);(n=n.divide(r)).gt(sl.TEN)?(n=n.divide(sl.TEN),i+=1):n.lt(sl.ONE)&&(n=n.multiply(sl.TEN),i-=1);for(var o=i+1,a=new rl,s=sl.MAX_PRINT_DIGITS-1,l=0;l<=s;l++){t&&l===o&&a.append(".");var u=Math.trunc(n._hi);if(u<0)break;var c=!1,h=0;u>9?(c=!0,h="9"):h="0"+u,a.append(h),n=n.subtract(sl.valueOf(u)).multiply(sl.TEN),c&&n.selfAdd(sl.TEN);var p=!0,f=sl.magnitude(n._hi);if(f<0&&Math.abs(f)>=s-l&&(p=!1),!p)break}return e[0]=i,a.toString()},sl.prototype.sqr=function(){return this.multiply(this)},sl.prototype.doubleValue=function(){return this._hi+this._lo},sl.prototype.subtract=function(){if(arguments[0]instanceof sl){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},sl.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},sl.prototype.isZero=function(){return 0===this._hi&&0===this._lo},sl.prototype.selfSubtract=function(){if(arguments[0]instanceof sl){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},sl.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},sl.prototype.min=function(t){return this.le(t)?this:t},sl.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof sl){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,a=null,s=null,l=null,u=null,c=null,h=null;return this._hi=h=(l=this._hi/n)+(u=(this._hi-(c=l*n)-(h=(r=(u=sl.SPLIT*l)-(r=u-l))*(a=(h=sl.SPLIT*n)-(a=h-n))-c+r*(s=n-a)+(o=l-r)*a+o*s)+this._lo-l*i)/n),this._lo=l-h+u,this}},sl.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},sl.prototype.divide=function(){if(arguments[0]instanceof sl){var t=arguments[0],e=null,n=null,i=null,r=null,o=null,a=null,s=null,l=null;return n=(o=this._hi/t._hi)-(e=(a=sl.SPLIT*o)-(e=a-o)),l=e*(i=(l=sl.SPLIT*t._hi)-(i=l-t._hi))-(s=o*t._hi)+e*(r=t._hi-i)+n*i+n*r,new sl(l=o+(a=(this._hi-s-l+this._lo-o*t._lo)/t._hi),o-l+a)}if("number"==typeof arguments[0]){var u=arguments[0];return Gs.isNaN(u)?sl.createNaN():sl.copy(this).selfDivide(u,0)}},sl.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},sl.prototype.pow=function(t){if(0===t)return sl.valueOf(1);var e=new sl(this),n=sl.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},sl.prototype.ceil=function(){if(this.isNaN())return sl.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new sl(t,e)},sl.prototype.compareTo=function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},sl.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},sl.prototype.setValue=function(){if(arguments[0]instanceof sl){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},sl.prototype.max=function(t){return this.ge(t)?this:t},sl.prototype.sqrt=function(){if(this.isZero())return sl.valueOf(0);if(this.isNegative())return sl.NaN;var t=1/Math.sqrt(this._hi),e=sl.valueOf(this._hi*t),n=this.subtract(e.sqr())._hi*(.5*t);return e.add(n)},sl.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof sl){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,o=null,a=null;return this._hi=(n=(r=this._hi+e)+(a=e-(o=r-this._hi)+(this._hi-(r-o))+this._lo))+(i=a+(r-n)),this._lo=i+(n-this._hi),this}}else if(2===arguments.length){var s=arguments[0],l=arguments[1],u=null,c=null,h=null,p=null,f=null,d=null,m=null;f=(p=this._hi+s)-(d=p-this._hi),h=(c=this._lo+l)-(m=c-this._lo);var g=(u=p+(d=(f=s-d+(this._hi-f))+c))+(d=(h=l-m+(this._lo-h))+(d+(p-u))),y=d+(u-g);return this._hi=g,this._lo=y,this}},sl.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof sl){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,a=null,s=null,l=null,u=null;r=(l=sl.SPLIT*this._hi)-this._hi,r=l-r;var c=(l=this._hi*n)+(u=r*(a=(u=sl.SPLIT*n)-(a=u-n))-l+r*(s=n-a)+(o=this._hi-r)*a+o*s+(this._hi*i+this._lo*n)),h=u+(r=l-c);return this._hi=c,this._lo=h,this}},sl.prototype.selfSqr=function(){return this.selfMultiply(this)},sl.prototype.floor=function(){if(this.isNaN())return sl.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new sl(t,e)},sl.prototype.negate=function(){return this.isNaN()?this:new sl(-this._hi,-this._lo)},sl.prototype.clone=function(){},sl.prototype.multiply=function(){if(arguments[0]instanceof sl){var t=arguments[0];return t.isNaN()?sl.createNaN():sl.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Gs.isNaN(e)?sl.createNaN():sl.copy(this).selfMultiply(e,0)}},sl.prototype.isNaN=function(){return Gs.isNaN(this._hi)},sl.prototype.intValue=function(){return Math.trunc(this._hi)},sl.prototype.toString=function(){var t=sl.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},sl.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;return"."===n.charAt(0)?r="0"+n:i<0?r="0."+sl.stringOfChar("0",-i)+n:-1===n.indexOf(".")&&(r=n+sl.stringOfChar("0",i-n.length)+".0"),this.isNegative()?"-"+r:r},sl.prototype.reciprocal=function(){var t,e,n,i,r=null,o=null,a=null,s=null;t=(n=1/this._hi)-(r=(a=sl.SPLIT*n)-(r=a-n)),o=(s=sl.SPLIT*this._hi)-this._hi;var l=n+(a=(1-(i=n*this._hi)-(s=r*(o=s-o)-i+r*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new sl(l,n-l+a)},sl.prototype.toSciNotation=function(){if(this.isZero())return sl.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=sl.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i},sl.prototype.abs=function(){return this.isNaN()?sl.NaN:this.isNegative()?this.negate():new sl(this)},sl.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},sl.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},sl.prototype.add=function(){if(arguments[0]instanceof sl){var t=arguments[0];return sl.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return sl.copy(this).selfAdd(e)}},sl.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof sl){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._hi=n,this._lo=i}},sl.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},sl.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},sl.prototype.trunc=function(){return this.isNaN()?sl.NaN:this.isPositive()?this.floor():this.ceil()},sl.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},sl.prototype.interfaces_=function(){return[gr,Xs,Zs]},sl.prototype.getClass=function(){return sl},sl.sqr=function(t){return sl.valueOf(t).selfMultiply(t)},sl.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return sl.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new sl(e)}},sl.sqrt=function(t){return sl.valueOf(t).sqrt()},sl.parse=function(t){for(var e=0,n=t.length;al.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var o=new sl,a=0,s=0,l=0;!(e>=n);){var u=t.charAt(e);if(e++,al.isDigit(u)){var c=u-"0";o.selfMultiply(sl.TEN),o.selfAdd(c),a++}else{if("."!==u){if("e"===u||"E"===u){var h=t.substring(e);try{l=ol.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+u+"' at position "+e+" in string "+t)}s=a}}var p=o,f=a-s-l;if(0===f)p=o;else if(f>0){var d=sl.TEN.pow(f);p=o.divide(d)}else if(f<0){var m=sl.TEN.pow(-f);p=o.multiply(m)}return i?p.negate():p},sl.createNaN=function(){return new sl(Gs.NaN,Gs.NaN)},sl.copy=function(t){return new sl(t)},sl.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i},sl.stringOfChar=function(t,e){for(var n=new rl,i=0;i<e;i++)n.append(t);return n.toString()},ll.PI.get=function(){return new sl(3.141592653589793,12246467991473532e-32)},ll.TWO_PI.get=function(){return new sl(6.283185307179586,24492935982947064e-32)},ll.PI_2.get=function(){return new sl(1.5707963267948966,6123233995736766e-32)},ll.E.get=function(){return new sl(2.718281828459045,14456468917292502e-32)},ll.NaN.get=function(){return new sl(Gs.NaN,Gs.NaN)},ll.EPS.get=function(){return 123259516440783e-46},ll.SPLIT.get=function(){return 134217729},ll.MAX_PRINT_DIGITS.get=function(){return 32},ll.TEN.get=function(){return sl.valueOf(10)},ll.ONE.get=function(){return sl.valueOf(1)},ll.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},ll.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(sl,ll);var ul=function(){},cl={DP_SAFE_EPSILON:{configurable:!0}};ul.prototype.interfaces_=function(){return[]},ul.prototype.getClass=function(){return ul},ul.orientationIndex=function(t,e,n){var i=ul.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=sl.valueOf(e.x).selfAdd(-t.x),o=sl.valueOf(e.y).selfAdd(-t.y),a=sl.valueOf(n.x).selfAdd(-e.x),s=sl.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},ul.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum()},ul.intersection=function(t,e,n,i){var r=sl.valueOf(i.y).selfSubtract(n.y).selfMultiply(sl.valueOf(e.x).selfSubtract(t.x)),o=sl.valueOf(i.x).selfSubtract(n.x).selfMultiply(sl.valueOf(e.y).selfSubtract(t.y)),a=r.subtract(o),s=sl.valueOf(i.x).selfSubtract(n.x).selfMultiply(sl.valueOf(t.y).selfSubtract(n.y)),l=sl.valueOf(i.y).selfSubtract(n.y).selfMultiply(sl.valueOf(t.x).selfSubtract(n.x)),u=s.subtract(l).selfDivide(a).doubleValue(),c=sl.valueOf(t.x).selfAdd(sl.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),h=sl.valueOf(e.x).selfSubtract(t.x).selfMultiply(sl.valueOf(t.y).selfSubtract(n.y)),p=sl.valueOf(e.y).selfSubtract(t.y).selfMultiply(sl.valueOf(t.x).selfSubtract(n.x)),f=h.subtract(p).selfDivide(a).doubleValue(),d=sl.valueOf(n.y).selfAdd(sl.valueOf(i.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new Ys(c,d)},ul.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=r-o;if(r>0){if(o<=0)return ul.signum(a);i=r+o}else{if(!(r<0))return ul.signum(a);if(o>=0)return ul.signum(a);i=-r-o}var s=ul.DP_SAFE_EPSILON*i;return a>=s||-a>=s?ul.signum(a):2},ul.signum=function(t){return t>0?1:t<0?-1:0},cl.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(ul,cl);var hl=function(){},pl={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};pl.X.get=function(){return 0},pl.Y.get=function(){return 1},pl.Z.get=function(){return 2},pl.M.get=function(){return 3},hl.prototype.setOrdinate=function(t,e,n){},hl.prototype.size=function(){},hl.prototype.getOrdinate=function(t,e){},hl.prototype.getCoordinate=function(){},hl.prototype.getCoordinateCopy=function(t){},hl.prototype.getDimension=function(){},hl.prototype.getX=function(t){},hl.prototype.clone=function(){},hl.prototype.expandEnvelope=function(t){},hl.prototype.copy=function(){},hl.prototype.getY=function(t){},hl.prototype.toCoordinateArray=function(){},hl.prototype.interfaces_=function(){return[Zs]},hl.prototype.getClass=function(){return hl},Object.defineProperties(hl,pl);var fl=function(){},dl=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fl),ml=function(){};ml.arraycopy=function(t,e,n,i,r){for(var o=0,a=e;a<e+r;a++)n[i+o]=t[a],o++},ml.getProperty=function(t){return{"line.separator":"\n"}[t]};var gl=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.x=n,this.y=i,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],o=arguments[1];this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof Ys&&arguments[1]instanceof Ys){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2];this.x=l,this.y=u,this.w=c}else if(4===arguments.length){var h=arguments[0],p=arguments[1],f=arguments[2],d=arguments[3],m=h.y-p.y,g=p.x-h.x,y=h.x*p.y-p.x*h.y,v=f.y-d.y,_=d.x-f.x,b=f.x*d.y-d.x*f.y;this.x=g*b-_*y,this.y=v*y-m*b,this.w=m*_-v*g}};gl.prototype.getY=function(){var t=this.y/this.w;if(Gs.isNaN(t)||Gs.isInfinite(t))throw new dl;return t},gl.prototype.getX=function(){var t=this.x/this.w;if(Gs.isNaN(t)||Gs.isInfinite(t))throw new dl;return t},gl.prototype.getCoordinate=function(){var t=new Ys;return t.x=this.getX(),t.y=this.getY(),t},gl.prototype.interfaces_=function(){return[]},gl.prototype.getClass=function(){return gl},gl.intersection=function(t,e,n,i){var r=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-i.y,l=i.x-n.x,u=n.x*i.y-i.x*n.y,c=r*l-s*o,h=(o*u-l*a)/c,p=(s*a-r*u)/c;if(Gs.isNaN(h)||Gs.isInfinite(h)||Gs.isNaN(p)||Gs.isInfinite(p))throw new dl;return new Ys(h,p)};var yl=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof Ys){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];this.init(o,a,s,l)}},vl={serialVersionUID:{configurable:!0}};yl.prototype.getArea=function(){return this.getWidth()*this.getHeight()},yl.prototype.equals=function(t){if(!(t instanceof yl))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},yl.prototype.intersection=function(t){return this.isNull()||t.isNull()||!this.intersects(t)?new yl:new yl(this._minx>t._minx?this._minx:t._minx,this._maxx<t._maxx?this._maxx:t._maxx,this._miny>t._miny?this._miny:t._miny,this._maxy<t._maxy?this._maxy:t._maxy)},yl.prototype.isNull=function(){return this._maxx<this._minx},yl.prototype.getMaxX=function(){return this._maxx},yl.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof Ys){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof yl){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}},yl.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof yl){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof Ys){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}},yl.prototype.getMinY=function(){return this._miny},yl.prototype.getMinX=function(){return this._minx},yl.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof Ys){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof yl){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}},yl.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},yl.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},yl.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},yl.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},yl.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},yl.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},yl.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},yl.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},yl.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},yl.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof yl){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof Ys){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},yl.prototype.centre=function(){return this.isNull()?null:new Ys((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},yl.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof Ys){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof yl){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];r<o?(this._minx=r,this._maxx=o):(this._minx=o,this._maxx=r),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},yl.prototype.getMaxY=function(){return this._maxy},yl.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},yl.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+Ys.hashCode(this._minx))+Ys.hashCode(this._maxx))+Ys.hashCode(this._miny))+Ys.hashCode(this._maxy)},yl.prototype.interfaces_=function(){return[Xs,gr]},yl.prototype.getClass=function(){return yl},yl.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),l=Math.max(o.x,a.x),u=Math.min(i.x,r.x),c=Math.max(i.x,r.x);return!(u>l||c<s||(s=Math.min(o.y,a.y),l=Math.max(o.y,a.y),u=Math.min(i.y,r.y),c=Math.max(i.y,r.y),u>l||c<s))}},vl.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(yl,vl);var _l={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},bl=function(t){this.geometryFactory=t||new qu};bl.prototype.read=function(t){var e,n;t=t.replace(/[\n\r]/g," ");var i=_l.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=_l.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),wl[n]&&(e=wl[n].apply(this,[i[2]]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},bl.prototype.write=function(t){return this.extractGeometry(t)},bl.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!xl[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+xl[e].apply(this,[t])+")"};var xl={coordinate:function(t){return t.x+" "+t.y},point:function(t){return xl.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+xl.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(xl.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(xl.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+xl.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+xl.linestring.apply(this,[t._shell])+")");for(var n=0,i=t._holes.length;n<i;++n)e.push("("+xl.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+xl.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},wl={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(_l.spaces);return this.geometryFactory.createPoint(new Ys(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(_l.trimParens,"$1"),i.push(wl.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(_l.spaces),i.push(new Ys(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(_l.spaces),i.push(new Ys(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(_l.parenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(_l.trimParens,"$1"),i.push(wl.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,o=t.trim().split(_l.parenComma),a=[],s=0,l=o.length;s<l;++s)e=o[s].replace(_l.trimParens,"$1"),n=wl.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n._points),0===s?r=i:a.push(i);return this.geometryFactory.createPolygon(r,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(_l.doubleParenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(_l.trimParens,"$1"),i.push(wl.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}},Cl=function(t){this.parser=new bl(t)};Cl.prototype.write=function(t){return this.parser.write(t)},Cl.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var kl=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),El=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(kl),Sl=function(){};Sl.prototype.interfaces_=function(){return[]},Sl.prototype.getClass=function(){return Sl},Sl.shouldNeverReachHere=function(){if(0===arguments.length)Sl.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new El("Should never reach here"+(null!==t?": "+t:""))}},Sl.isTrue=function(){var t;if(1===arguments.length)Sl.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new El:new El(t)},Sl.equals=function(){var t,e,n;if(2===arguments.length)Sl.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(n=arguments[2],!(e=arguments[1]).equals(t=arguments[0])))throw new El("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var Il=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Ys,this._intPt[1]=new Ys,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Tl={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Il.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},Il.prototype.getTopologySummary=function(){var t=new rl;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},Il.prototype.computeIntersection=function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)},Il.prototype.getIntersectionNum=function(){return this._result},Il.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},Il.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Il.prototype.setPrecisionModel=function(t){this._precisionModel=t},Il.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},Il.prototype.getIntersection=function(t){return this._intPt[t]},Il.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Il.prototype.hasIntersection=function(){return this._result!==Il.NO_INTERSECTION},Il.prototype.getEdgeDistance=function(t,e){return Il.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},Il.prototype.isCollinear=function(){return this._result===Il.COLLINEAR_INTERSECTION},Il.prototype.toString=function(){return Cl.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Cl.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Il.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},Il.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},Il.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},Il.prototype.interfaces_=function(){return[]},Il.prototype.getClass=function(){return Il},Il.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=i>r?a:s)||t.equals(e)||(o=Math.max(a,s))}return Sl.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},Il.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return Sl.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},Tl.DONT_INTERSECT.get=function(){return 0},Tl.DO_INTERSECT.get=function(){return 1},Tl.COLLINEAR.get=function(){return 2},Tl.NO_INTERSECTION.get=function(){return 0},Tl.POINT_INTERSECTION.get=function(){return 1},Tl.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Il,Tl);var Pl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new yl(this._inputLines[0][0],this._inputLines[0][1]),n=new yl(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2];if(this._isProper=!1,yl.intersects(n,i,e)&&0===Ml.orientationIndex(n,i,e)&&0===Ml.orientationIndex(i,n,e))return this._isProper=!0,(e.equals(n)||e.equals(i))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.safeHCoordinateIntersection=function(t,n,i,r){var o=null;try{o=gl.intersection(t,n,i,r)}catch(a){if(!(a instanceof dl))throw a;o=e.nearestEndpoint(t,n,i,r)}return o},e.prototype.intersection=function(t,n,i,r){var o=this.intersectionWithNormalization(t,n,i,r);return this.isInSegmentEnvelopes(o)||(o=new Ys(e.nearestEndpoint(t,n,i,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,i){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},e.prototype.checkDD=function(t,e,n,i,r){var o=ul.intersection(t,e,n,i),a=this.isInSegmentEnvelopes(o);ml.out.println("DD in env = "+a+"  --------------------- "+o),r.distance(o)>1e-4&&ml.out.println("Distance = "+r.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,i){var r=new Ys(t),o=new Ys(e),a=new Ys(n),s=new Ys(i),l=new Ys;this.normalizeToEnvCentre(r,o,a,s,l);var u=this.safeHCoordinateIntersection(r,o,a,s);return u.x+=l.x,u.y+=l.y,u},e.prototype.computeCollinearIntersection=function(e,n,i,r){var o=yl.intersects(e,n,i),a=yl.intersects(e,n,r),s=yl.intersects(i,r,e),l=yl.intersects(i,r,n);return o&&a?(this._intPt[0]=i,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):s&&l?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||a||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&l?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&l?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=n.x<i.x?n.x:i.x,c=n.y<i.y?n.y:i.y,h=n.x>i.x?n.x:i.x,p=n.y>i.y?n.y:i.y,f=((a>c?a:c)+(l<p?l:p))/2;r.x=((o>u?o:u)+(s<h?s:h))/2,r.y=f,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.computeIntersect=function(e,n,i,r){if(this._isProper=!1,!yl.intersects(e,n,i,r))return t.NO_INTERSECTION;var o=Ml.orientationIndex(e,n,i),a=Ml.orientationIndex(e,n,r);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=Ml.orientationIndex(i,r,e),l=Ml.orientationIndex(i,r,n);return s>0&&l>0||s<0&&l<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===l?this.computeCollinearIntersection(e,n,i,r):(0===o||0===a||0===s||0===l?(this._isProper=!1,e.equals2D(i)||e.equals2D(r)?this._intPt[0]=e:n.equals2D(i)||n.equals2D(r)?this._intPt[0]=n:0===o?this._intPt[0]=new Ys(i):0===a?this._intPt[0]=new Ys(r):0===s?this._intPt[0]=new Ys(e):0===l&&(this._intPt[0]=new Ys(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,i,r)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,i){var r=t,o=Ml.distancePointLine(t,n,i),a=Ml.distancePointLine(e,n,i);return a<o&&(o=a,r=e),(a=Ml.distancePointLine(n,t,e))<o&&(o=a,r=n),(a=Ml.distancePointLine(i,t,e))<o&&(o=a,r=i),r},e}(Il),Al=function(){};Al.prototype.interfaces_=function(){return[]},Al.prototype.getClass=function(){return Al},Al.orientationIndex=function(t,e,n){return Al.signOfDet2x2(e.x-t.x,e.y-t.y,n.x-e.x,n.y-e.y)},Al.signOfDet2x2=function(t,e,n,i){var r=null,o=null,a=null;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(e>0?i>0?e<=i||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):e<=-i?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):i>0?-e<=i?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),t>0){if(!(n>0))return r;if(!(t<=n))return r}else{if(n>0)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if((i-=(a=Math.floor(n/t))*e)<0)return-r;if(i>e)return r;if(t>(n-=a*t)+n){if(e<i+i)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if((e-=(a=Math.floor(t/n))*i)<0)return r;if(e>i)return-r;if(n>(t-=a*n)+t){if(i<e+e)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}};var Ll=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};Ll.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=t.y-this._p.y,o=e.y-this._p.y,a=Al.signOfDet2x2(t.x-this._p.x,r,e.x-this._p.x,o);if(0===a)return this._isPointOnSegment=!0,null;o<r&&(a=-a),a>0&&this._crossingCount++}},Ll.prototype.isPointInPolygon=function(){return this.getLocation()!==$s.EXTERIOR},Ll.prototype.getLocation=function(){return this._isPointOnSegment?$s.BOUNDARY:this._crossingCount%2==1?$s.INTERIOR:$s.EXTERIOR},Ll.prototype.isOnSegment=function(){return this._isPointOnSegment},Ll.prototype.interfaces_=function(){return[]},Ll.prototype.getClass=function(){return Ll},Ll.locatePointInRing=function(){if(arguments[0]instanceof Ys&&el(arguments[1],hl)){for(var t=arguments[0],e=arguments[1],n=new Ll(t),i=new Ys,r=new Ys,o=1;o<e.size();o++)if(e.getCoordinate(o,i),e.getCoordinate(o-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof Ys&&arguments[1]instanceof Array){for(var a=arguments[0],s=arguments[1],l=new Ll(a),u=1;u<s.length;u++){var c=s[u],h=s[u-1];if(l.countSegment(c,h),l.isOnSegment())return l.getLocation()}return l.getLocation()}};var Ml=function(){},Rl={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Ml.prototype.interfaces_=function(){return[]},Ml.prototype.getClass=function(){return Ml},Ml.orientationIndex=function(t,e,n){return ul.orientationIndex(t,e,n)},Ml.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y;e+=r*(t[i-1].y-o)}return e/2}if(el(arguments[0],hl)){var a=arguments[0],s=a.size();if(s<3)return 0;var l=new Ys,u=new Ys,c=new Ys;a.getCoordinate(0,u),a.getCoordinate(1,c);var h=u.x;c.x-=h;for(var p=0,f=1;f<s-1;f++)l.y=u.y,u.x=c.x,u.y=c.y,a.getCoordinate(f+1,c),c.x-=h,p+=u.x*(l.y-c.y);return p/2}},Ml.distanceLineLine=function(t,e,n,i){if(t.equals(e))return Ml.distancePointLine(t,n,i);if(n.equals(i))return Ml.distancePointLine(i,t,e);var r=!1;if(yl.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,s=((t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y))/o;(s<0||s>1||a<0||a>1)&&(r=!0)}}else r=!0;return r?nl.min(Ml.distancePointLine(t,n,i),Ml.distancePointLine(e,n,i),Ml.distancePointLine(n,t,e),Ml.distancePointLine(i,t,e)):0},Ml.isPointInRing=function(t,e){return Ml.locatePointInRing(t,e)!==$s.EXTERIOR},Ml.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new Ys;t.getCoordinate(0,i);for(var r=i.x,o=i.y,a=1;a<e;a++){t.getCoordinate(a,i);var s=i.x,l=i.y,u=s-r,c=l-o;n+=Math.sqrt(u*u+c*c),r=s,o=l}return n},Ml.isCCW=function(t){var e=t.length-1;if(e<3)throw new qs("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],i=0,r=1;r<=e;r++){var o=t[r];o.y>n.y&&(n=o,i=r)}var a=i;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==i);var s=i;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==i);var l=t[a],u=t[s];if(l.equals2D(n)||u.equals2D(n)||l.equals2D(u))return!1;var c=Ml.computeOrientation(l,n,u);return 0===c?l.x>u.x:c>0},Ml.locatePointInRing=function(t,e){return Ll.locatePointInRing(t,e)},Ml.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y);return Math.abs(((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i)*Math.sqrt(i)},Ml.computeOrientation=function(t,e,n){return Ml.orientationIndex(t,e,n)},Ml.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new qs("Line array must contain at least one vertex");for(var n=t.distance(e[0]),i=0;i<e.length-1;i++){var r=Ml.distancePointLine(t,e[i],e[i+1]);r<n&&(n=r)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var l=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),u=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/l;if(u<=0)return o.distance(a);if(u>=1)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/l;return Math.abs(c)*Math.sqrt(l)}},Ml.isOnLine=function(t,e){for(var n=new Pl,i=1;i<e.length;i++)if(n.computeIntersection(t,e[i-1],e[i]),n.hasIntersection())return!0;return!1},Rl.CLOCKWISE.get=function(){return-1},Rl.RIGHT.get=function(){return Ml.CLOCKWISE},Rl.COUNTERCLOCKWISE.get=function(){return 1},Rl.LEFT.get=function(){return Ml.COUNTERCLOCKWISE},Rl.COLLINEAR.get=function(){return 0},Rl.STRAIGHT.get=function(){return Ml.COLLINEAR},Object.defineProperties(Ml,Rl);var Ol=function(){};Ol.prototype.filter=function(t){},Ol.prototype.interfaces_=function(){return[]},Ol.prototype.getClass=function(){return Ol};var Dl=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Nl={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Dl.prototype.isGeometryCollection=function(){return this.getSortIndex()===Dl.SORTINDEX_GEOMETRYCOLLECTION},Dl.prototype.getFactory=function(){return this._factory},Dl.prototype.getGeometryN=function(t){return this},Dl.prototype.getArea=function(){return 0},Dl.prototype.isRectangle=function(){return!1},Dl.prototype.equals=function(){if(arguments[0]instanceof Dl){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof Dl))return!1;var n=e;return this.equalsExact(n)}},Dl.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Dl.prototype.geometryChanged=function(){this.apply(Dl.geometryChangedFilter)},Dl.prototype.geometryChangedAction=function(){this._envelope=null},Dl.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Dl.prototype.getLength=function(){return 0},Dl.prototype.getNumGeometries=function(){return 1},Dl.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}},Dl.prototype.getUserData=function(){return this._userData},Dl.prototype.getSRID=function(){return this._SRID},Dl.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Dl.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Dl.SORTINDEX_GEOMETRYCOLLECTION)throw new qs("This method does not support GeometryCollection arguments")},Dl.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},Dl.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Dl.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Dl.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new yl(this._envelope)},Dl.prototype.setSRID=function(t){this._SRID=t},Dl.prototype.setUserData=function(t){this._userData=t},Dl.prototype.compare=function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),a=r.compareTo(o);if(0!==a)return a}return n.hasNext()?1:i.hasNext()?-1:0},Dl.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Dl.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Dl.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Dl.SORTINDEX_MULTIPOINT||this.getSortIndex()===Dl.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Dl.SORTINDEX_MULTIPOLYGON},Dl.prototype.interfaces_=function(){return[Zs,Xs,gr]},Dl.prototype.getClass=function(){return Dl},Dl.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Dl.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Nl.serialVersionUID.get=function(){return 0x799ea46522854c00},Nl.SORTINDEX_POINT.get=function(){return 0},Nl.SORTINDEX_MULTIPOINT.get=function(){return 1},Nl.SORTINDEX_LINESTRING.get=function(){return 2},Nl.SORTINDEX_LINEARRING.get=function(){return 3},Nl.SORTINDEX_MULTILINESTRING.get=function(){return 4},Nl.SORTINDEX_POLYGON.get=function(){return 5},Nl.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Nl.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Nl.geometryChangedFilter.get=function(){return Fl},Object.defineProperties(Dl,Nl);var Fl=function(){};Fl.interfaces_=function(){return[Ol]},Fl.filter=function(t){t.geometryChangedAction()};var zl=function(){};zl.prototype.filter=function(t){},zl.prototype.interfaces_=function(){return[]},zl.prototype.getClass=function(){return zl};var Bl=function(){},Vl={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Bl.prototype.isInBoundary=function(t){},Bl.prototype.interfaces_=function(){return[]},Bl.prototype.getClass=function(){return Bl},Vl.Mod2BoundaryNodeRule.get=function(){return Ul},Vl.EndPointBoundaryNodeRule.get=function(){return jl},Vl.MultiValentEndPointBoundaryNodeRule.get=function(){return ql},Vl.MonoValentEndPointBoundaryNodeRule.get=function(){return Gl},Vl.MOD2_BOUNDARY_RULE.get=function(){return new Ul},Vl.ENDPOINT_BOUNDARY_RULE.get=function(){return new jl},Vl.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ql},Vl.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Gl},Vl.OGC_SFS_BOUNDARY_RULE.get=function(){return Bl.MOD2_BOUNDARY_RULE},Object.defineProperties(Bl,Vl);var Ul=function(){};Ul.prototype.isInBoundary=function(t){return t%2==1},Ul.prototype.interfaces_=function(){return[Bl]},Ul.prototype.getClass=function(){return Ul};var jl=function(){};jl.prototype.isInBoundary=function(t){return t>0},jl.prototype.interfaces_=function(){return[Bl]},jl.prototype.getClass=function(){return jl};var ql=function(){};ql.prototype.isInBoundary=function(t){return t>1},ql.prototype.interfaces_=function(){return[Bl]},ql.prototype.getClass=function(){return ql};var Gl=function(){};Gl.prototype.isInBoundary=function(t){return 1===t},Gl.prototype.interfaces_=function(){return[Bl]},Gl.prototype.getClass=function(){return Gl};var Hl=function(){};Hl.prototype.add=function(){},Hl.prototype.addAll=function(){},Hl.prototype.isEmpty=function(){},Hl.prototype.iterator=function(){},Hl.prototype.size=function(){},Hl.prototype.toArray=function(){},Hl.prototype.remove=function(){};var Xl=function(t){function e(e){t.call(this),this.message=e||""}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={name:{configurable:!0}};return n.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(e,n),e}(Error),Zl=function(){};Zl.prototype.hasNext=function(){},Zl.prototype.next=function(){},Zl.prototype.remove=function(){};var Wl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(Hl);(yr.prototype=new Error).name="NoSuchElementException";var Yl=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Hl&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,Hl]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Kl(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new Xl;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(Wl),Kl=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new yr;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Zl),Jl=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.ensureCapacity(n.length),this.add(n,i)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=!1,r=e.iterator();r.hasNext();)this.add(r.next(),n),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return this.add(n,i,!0),!0}if(arguments[0]instanceof Ys&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(r))return null;t.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],l=arguments[1];if(arguments[2])for(var u=0;u<s.length;u++)this.add(s[u],l);else for(var c=s.length-1;c>=0;c--)this.add(s[c],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof Ys){var h=arguments[0],p=arguments[1];if(!arguments[2]){var f=this.size();if(f>0){if(h>0&&this.get(h-1).equals2D(p))return null;if(h<f&&this.get(h).equals2D(p))return null}}t.prototype.add.call(this,h,p)}}else if(4===arguments.length){var d=arguments[0],m=arguments[1],g=arguments[2],y=arguments[3],v=1;g>y&&(v=-1);for(var _=g;_!==y;_+=v)this.add(d[_],m);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new Ys(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Yl),Ql=function(){},$l={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};$l.ForwardComparator.get=function(){return tu},$l.BidirectionalComparator.get=function(){return eu},$l.coordArrayType.get=function(){return new Array(0).fill(null)},Ql.prototype.interfaces_=function(){return[]},Ql.prototype.getClass=function(){return Ql},Ql.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Ql.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(Ql.indexOf(i,e)<0)return i}return null},Ql.scroll=function(t,e){var n=Ql.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);ml.arraycopy(t,n,i,0,t.length-n),ml.arraycopy(t,0,i,t.length-n,n),ml.arraycopy(i,0,t,0,t.length)},Ql.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var a=0;a<i.length;a++)if(0!==o.compare(i[a],r[a]))return!1;return!0}},Ql.intersection=function(t,e){for(var n=new Jl,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},Ql.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Ql.removeRepeatedPoints=function(t){return Ql.hasRepeatedPoints(t)?new Jl(t,!1).toCoordinateArray():t},Ql.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},Ql.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(i[r++]=t[o]);return i},Ql.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new Ys(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],l=0;l<s;l++)o[a+l]=new Ys(i[r+l])},Ql.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++)if(0!==t[n].compareTo(e[t.length-n-1]))return!1;return!0},Ql.envelope=function(t){for(var e=new yl,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Ql.toCoordinateArray=function(t){return t.toArray(Ql.coordArrayType)},Ql.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Ql.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Ql.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t[e].compareTo(t[t.length-1-e]);if(0!==n)return n}return 1},Ql.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},Ql.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Ql.extract=function(t,e,n){e=nl.clamp(e,0,t.length);var i=(n=nl.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,a=e;a<=n;a++)r[o++]=t[a];return r},Object.defineProperties(Ql,$l);var tu=function(){};tu.prototype.compare=function(t,e){return Ql.compare(t,e)},tu.prototype.interfaces_=function(){return[Ws]},tu.prototype.getClass=function(){return tu};var eu=function(){};eu.prototype.compare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=Ql.compare(n,i);return Ql.isEqualReversed(n,i)?0:r},eu.prototype.OLDcompare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=Ql.increasingDirection(n),o=Ql.increasingDirection(i),a=r>0?0:n.length-1,s=o>0?0:n.length-1,l=0;l<n.length;l++){var u=n[a].compareTo(i[s]);if(0!==u)return u;a+=r,s+=o}return 0},eu.prototype.interfaces_=function(){return[Ws]},eu.prototype.getClass=function(){return eu};var nu=function(){};nu.prototype.get=function(){},nu.prototype.put=function(){},nu.prototype.size=function(){},nu.prototype.values=function(){},nu.prototype.entrySet=function(){};var iu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(nu);(vr.prototype=new Error).name="OperationNotSupported",(_r.prototype=new Hl).contains=function(){};var ru=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Hl&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new ou(this)},e}(_r),ou=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new yr;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new vr},e}(Zl),au=0;(Er.prototype=new iu).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Er.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:au,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var a={key:t,left:null,right:null,value:e,parent:n,color:au,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},Er.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(xr(t)===Cr(xr(xr(t)))){var e=kr(xr(xr(t)));1===br(e)?(wr(xr(t),au),wr(e,au),wr(xr(xr(t)),1),t=xr(xr(t))):(t===kr(xr(t))&&(t=xr(t),this.rotateLeft(t)),wr(xr(t),au),wr(xr(xr(t)),1),this.rotateRight(xr(xr(t))))}else{var n=Cr(xr(xr(t)));1===br(n)?(wr(xr(t),au),wr(n,au),wr(xr(xr(t)),1),t=xr(xr(t))):(t===Cr(xr(t))&&(t=xr(t),this.rotateRight(t)),wr(xr(t),au),wr(xr(xr(t)),1),this.rotateLeft(xr(xr(t))))}this.root_.color=au},Er.prototype.values=function(){var t=new Yl,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Er.successor(e));)t.add(e.value);return t},Er.prototype.entrySet=function(){var t=new ru,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Er.successor(e));)t.add(e);return t},Er.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Er.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Er.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Er.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,i=t;null!==n&&i===n.right;)i=n,n=n.parent;return n},Er.prototype.size=function(){return this.size_};var su=function(){};su.prototype.interfaces_=function(){return[]},su.prototype.getClass=function(){return su},Sr.prototype=new _r,(Ir.prototype=new Sr).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Ir.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Ir.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Ir.prototype.remove=function(t){throw new vr},Ir.prototype.size=function(){return this.array_.length},Ir.prototype.isEmpty=function(){return 0===this.array_.length},Ir.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Ir.prototype.iterator=function(){return new lu(this)};var lu=function(t){this.treeSet_=t,this.position_=0};lu.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new yr;return this.treeSet_.array_[this.position_++]},lu.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},lu.prototype.remove=function(){throw new vr};var uu=function(){};uu.sort=function(){var t,e,n,i=arguments[0];if(1===arguments.length)i.sort((function(t,e){return t.compareTo(e)}));else if(2===arguments.length)n=arguments[1],i.sort((function(t,e){return n.compare(t,e)}));else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var r=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<r.length;t++)i.push(r[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],e.sort((function(t,e){return n.compare(t,e)})),r=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<r.length;t++)i.push(r[t])},uu.asList=function(t){for(var e=new Yl,n=0,i=t.length;n<i;n++)e.add(t[n]);return e};var cu=function(){},hu={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};hu.P.get=function(){return 0},hu.L.get=function(){return 1},hu.A.get=function(){return 2},hu.FALSE.get=function(){return-1},hu.TRUE.get=function(){return-2},hu.DONTCARE.get=function(){return-3},hu.SYM_FALSE.get=function(){return"F"},hu.SYM_TRUE.get=function(){return"T"},hu.SYM_DONTCARE.get=function(){return"*"},hu.SYM_P.get=function(){return"0"},hu.SYM_L.get=function(){return"1"},hu.SYM_A.get=function(){return"2"},cu.prototype.interfaces_=function(){return[]},cu.prototype.getClass=function(){return cu},cu.toDimensionSymbol=function(t){switch(t){case cu.FALSE:return cu.SYM_FALSE;case cu.TRUE:return cu.SYM_TRUE;case cu.DONTCARE:return cu.SYM_DONTCARE;case cu.P:return cu.SYM_P;case cu.L:return cu.SYM_L;case cu.A:return cu.SYM_A}throw new qs("Unknown dimension value: "+t)},cu.toDimensionValue=function(t){switch(al.toUpperCase(t)){case cu.SYM_FALSE:return cu.FALSE;case cu.SYM_TRUE:return cu.TRUE;case cu.SYM_DONTCARE:return cu.DONTCARE;case cu.SYM_P:return cu.P;case cu.SYM_L:return cu.L;case cu.SYM_A:return cu.A}throw new qs("Unknown dimension symbol: "+t)},Object.defineProperties(cu,hu);var pu=function(){};pu.prototype.filter=function(t){},pu.prototype.interfaces_=function(){return[]},pu.prototype.getClass=function(){return pu};var fu=function(){};fu.prototype.filter=function(t,e){},fu.prototype.isDone=function(){},fu.prototype.isGeometryChanged=function(){},fu.prototype.interfaces_=function(){return[]},fu.prototype.getClass=function(){return fu};var du=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new qs("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new yl,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._geometries.length!==i._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(i._geometries[r],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();uu.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=cu.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=cu.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<this._geometries.length;e++)t[e]=this._geometries[e].reverse();return this.getFactory().createGeometryCollection(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new Ir(uu.asList(this._geometries)),n=new Ir(uu.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o=i,a=this.getNumGeometries(),s=o.getNumGeometries(),l=0;l<a&&l<s;){var u=this.getGeometryN(l),c=o.getGeometryN(l),h=u.compareToSameClass(c,r);if(0!==h)return h;l++}return l<a?1:l<s?-1:0}},e.prototype.apply=function(){if(el(arguments[0],zl))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(el(arguments[0],fu)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(el(arguments[0],pu)){var r=arguments[0];r.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(r)}else if(el(arguments[0],Ol)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Sl.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(Dl),mu=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Dl.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?cu.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new gu(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[su]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(du),gu=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=Bl.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}};gu.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},gu.prototype.getBoundary=function(){return this._geom instanceof xu?this.boundaryLineString(this._geom):this._geom instanceof mu?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},gu.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},gu.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},gu.prototype.computeBoundaryCoordinates=function(t){var e=new Yl;this._endpointMap=new Er;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this._endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Ql.toCoordinateArray(e)},gu.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new yu,this._endpointMap.put(t,e)),e.count++},gu.prototype.interfaces_=function(){return[]},gu.prototype.getClass=function(){return gu},gu.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new gu(t).getBoundary()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new gu(e,n).getBoundary()}};var yu=function(){this.count=null};yu.prototype.interfaces_=function(){return[]},yu.prototype.getClass=function(){return yu};var vu=function(){},_u={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};vu.prototype.interfaces_=function(){return[]},vu.prototype.getClass=function(){return vu},vu.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return String(n)},vu.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o="",a=new function(){}(new function(){}(vu.getStackTrace(i))),s=0;s<r;s++)try{o+=a.readLine()+vu.NEWLINE}catch(t){if(!(t instanceof Tr))throw t;Sl.shouldNeverReachHere()}return o}},vu.split=function(t,e){for(var n=e.length,i=new Yl,r=""+t,o=r.indexOf(e);o>=0;){var a=r.substring(0,o);i.add(a),o=(r=r.substring(o+n)).indexOf(e)}r.length>0&&i.add(r);for(var s=new Array(i.size()).fill(null),l=0;l<s.length;l++)s[l]=i.get(l);return s},vu.toString=function(){if(1===arguments.length){var t=arguments[0];return vu.SIMPLE_ORDINATE_FORMAT.format(t)}},vu.spaces=function(t){return vu.chars(" ",t)},_u.NEWLINE.get=function(){return ml.getProperty("line.separator")},_u.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(vu,_u);var bu=function(){};bu.prototype.interfaces_=function(){return[]},bu.prototype.getClass=function(){return bu},bu.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},bu.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,hl.X)===t.getOrdinate(e-1,hl.X)&&t.getOrdinate(0,hl.Y)===t.getOrdinate(e-1,hl.Y)},bu.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var a=t.getOrdinate(r,o),s=e.getOrdinate(r,o);if(!(t.getOrdinate(r,o)===e.getOrdinate(r,o)||Gs.isNaN(a)&&Gs.isNaN(s)))return!1}return!0},bu.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(bu.copy(e,0,i,0,r),r>0)for(var o=r;o<n;o++)bu.copy(e,r-1,i,o,1);return i},bu.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)bu.swap(t,i,e-i)},bu.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},bu.copy=function(t,e,n,i,r){for(var o=0;o<r;o++)bu.copyCoord(t,e+o,n,i+o)},bu.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new rl;i.append("(");for(var r=0;r<e;r++){r>0&&i.append(" ");for(var o=0;o<n;o++)o>0&&i.append(","),i.append(vu.toString(t.getOrdinate(r,o)))}return i.append(")"),i.toString()}},bu.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?bu.createClosedRing(t,e,4):e.getOrdinate(0,hl.X)===e.getOrdinate(n-1,hl.X)&&e.getOrdinate(0,hl.Y)===e.getOrdinate(n-1,hl.Y)?e:bu.createClosedRing(t,e,n+1)},bu.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();bu.copy(e,0,i,0,r);for(var o=r;o<n;o++)bu.copy(e,0,i,o,1);return i};var xu=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new yl:this._points.expandEnvelope(new yl)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._points.size()!==i._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),i._points.getCoordinate(r),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&bu.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?cu.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Ml.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return bu.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var r=arguments[0];return arguments[1].compare(this._points,r._points)}},e.prototype.apply=function(){if(el(arguments[0],zl))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(el(arguments[0],fu)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else(el(arguments[0],pu)||el(arguments[0],Ol))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new gu(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new qs("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[su]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(Dl),wu=function(){};wu.prototype.interfaces_=function(){return[]},wu.prototype.getClass=function(){return wu};var Cu=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new yl;var t=new yl;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return cu.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(el(arguments[0],zl)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(el(arguments[0],fu)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(el(arguments[0],pu)||el(arguments[0],Ol))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),Sl.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[wu]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(Dl),ku=function(){};ku.prototype.interfaces_=function(){return[]},ku.prototype.getClass=function(){return ku};var Eu=function(t){function e(e,n,i){if(t.call(this,i),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new qs("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new qs("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(Ml.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(Ml.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var l=t.getX(s),u=t.getY(s);if(l!==o==(u!==a))return!1;o=l,a=u}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e,r=this._shell,o=i._shell;if(!r.equalsExact(o,n))return!1;if(this._holes.length!==i._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(i._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);uu.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);ml.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=Ql.minCoordinate(e.getCoordinates());Ql.scroll(i,r),ml.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],Ml.isCCW(e.getCoordinates())===n&&Ql.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],r=arguments[1],o=i,a=this._shell,s=o._shell,l=a.compareToSameClass(s,r);if(0!==l)return l;for(var u=this.getNumInteriorRing(),c=o.getNumInteriorRing(),h=0;h<u&&h<c;){var p=this.getInteriorRingN(h),f=o.getInteriorRingN(h),d=p.compareToSameClass(f,r);if(0!==d)return d;h++}return h<u?1:h<c?-1:0}},e.prototype.apply=function(t){if(el(t,zl)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(el(t,fu)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(el(t,pu))t.filter(this);else if(el(t,Ol)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)this._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),i=0;i<n.length;i++)n[i]=this._holes[i].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[ku]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(Dl),Su=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Dl.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return cu.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[wu]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(du),Iu=function(t){function e(e,n){e instanceof Ys&&n instanceof qu&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Dl.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return cu.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return bu.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new qs("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new qs("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(xu),Tu=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Dl.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<this._geometries.length;e++)t[e]=this._geometries[e].reverse();return this.getFactory().createMultiPolygon(t)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Yl,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[ku]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(du),Pu=function(t){this._factory=t||null,this._isUserDataCopied=!1},Au={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Pu.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},Pu.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},Pu.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof du?this.editGeometryCollection(t,e):t instanceof Eu?this.editPolygon(t,e):t instanceof Cu||t instanceof xu?e.edit(t,this._factory):(Sl.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},Pu.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),i=new Yl,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o)}return n.getClass()===Su?this._factory.createMultiPoint(i.toArray([])):n.getClass()===mu?this._factory.createMultiLineString(i.toArray([])):n.getClass()===Tu?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))},Pu.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this._factory.createPolygon();for(var r=new Yl,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||r.add(a)}return this._factory.createPolygon(i,r.toArray([]))},Pu.prototype.interfaces_=function(){return[]},Pu.prototype.getClass=function(){return Pu},Pu.GeometryEditorOperation=function(){},Au.NoOpGeometryOperation.get=function(){return Lu},Au.CoordinateOperation.get=function(){return Mu},Au.CoordinateSequenceOperation.get=function(){return Ru},Object.defineProperties(Pu,Au);var Lu=function(){};Lu.prototype.edit=function(t,e){return t},Lu.prototype.interfaces_=function(){return[Pu.GeometryEditorOperation]},Lu.prototype.getClass=function(){return Lu};var Mu=function(){};Mu.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof Iu?e.createLinearRing(n):t instanceof xu?e.createLineString(n):t instanceof Cu?n.length>0?e.createPoint(n[0]):e.createPoint():t},Mu.prototype.interfaces_=function(){return[Pu.GeometryEditorOperation]},Mu.prototype.getClass=function(){return Mu};var Ru=function(){};Ru.prototype.edit=function(t,e){return t instanceof Iu?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof xu?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Cu?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},Ru.prototype.interfaces_=function(){return[Pu.GeometryEditorOperation]},Ru.prototype.getClass=function(){return Ru};var Ou=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new Ys}else if(el(arguments[0],hl)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)this._coordinates[i]=n.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1];this._coordinates=r,this._dimension=o,null===r&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var l=0;l<a;l++)this._coordinates[l]=new Ys}},Du={serialVersionUID:{configurable:!0}};Ou.prototype.setOrdinate=function(t,e,n){switch(e){case hl.X:this._coordinates[t].x=n;break;case hl.Y:this._coordinates[t].y=n;break;case hl.Z:this._coordinates[t].z=n;break;default:throw new qs("invalid ordinateIndex")}},Ou.prototype.size=function(){return this._coordinates.length},Ou.prototype.getOrdinate=function(t,e){switch(e){case hl.X:return this._coordinates[t].x;case hl.Y:return this._coordinates[t].y;case hl.Z:return this._coordinates[t].z}return Gs.NaN},Ou.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},Ou.prototype.getCoordinateCopy=function(t){return new Ys(this._coordinates[t])},Ou.prototype.getDimension=function(){return this._dimension},Ou.prototype.getX=function(t){return this._coordinates[t].x},Ou.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new Ou(t,this._dimension)},Ou.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},Ou.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Ou(t,this._dimension)},Ou.prototype.toString=function(){if(this._coordinates.length>0){var t=new rl(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},Ou.prototype.getY=function(t){return this._coordinates[t].y},Ou.prototype.toCoordinateArray=function(){return this._coordinates},Ou.prototype.interfaces_=function(){return[hl,gr]},Ou.prototype.getClass=function(){return Ou},Du.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Ou,Du);var Nu=function(){},Fu={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Nu.prototype.readResolve=function(){return Nu.instance()},Nu.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Ou(t)}if(el(arguments[0],hl)){var e=arguments[0];return new Ou(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new Ou(n):new Ou(n,i)}},Nu.prototype.interfaces_=function(){return[Qs,gr]},Nu.prototype.getClass=function(){return Nu},Nu.instance=function(){return Nu.instanceObject},Fu.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Fu.instanceObject.get=function(){return new Nu},Object.defineProperties(Nu,Fu);var zu=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Yl,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new ru;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(nu),Bu=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Uu){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}},Vu={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Bu.prototype.equals=function(t){return t instanceof Bu&&this._modelType===t._modelType&&this._scale===t._scale},Bu.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new ol(n).compareTo(new ol(i))},Bu.prototype.getScale=function(){return this._scale},Bu.prototype.isFloating=function(){return this._modelType===Bu.FLOATING||this._modelType===Bu.FLOATING_SINGLE},Bu.prototype.getType=function(){return this._modelType},Bu.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Bu.FLOATING?t="Floating":this._modelType===Bu.FLOATING_SINGLE?t="Floating-Single":this._modelType===Bu.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},Bu.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return Gs.isNaN(t)||this._modelType===Bu.FLOATING_SINGLE?t:this._modelType===Bu.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof Ys){var e=arguments[0];if(this._modelType===Bu.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},Bu.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Bu.FLOATING?t=16:this._modelType===Bu.FLOATING_SINGLE?t=6:this._modelType===Bu.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},Bu.prototype.setScale=function(t){this._scale=Math.abs(t)},Bu.prototype.interfaces_=function(){return[gr,Xs]},Bu.prototype.getClass=function(){return Bu},Bu.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},Vu.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Vu.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Bu,Vu);var Uu=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ju={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Uu.prototype.readResolve=function(){return Uu.nameToTypeMap.get(this._name)},Uu.prototype.toString=function(){return this._name},Uu.prototype.interfaces_=function(){return[gr]},Uu.prototype.getClass=function(){return Uu},ju.serialVersionUID.get=function(){return-552860263173159e4},ju.nameToTypeMap.get=function(){return new zu},Object.defineProperties(Uu,ju),Bu.Type=Uu,Bu.FIXED=new Uu("FIXED"),Bu.FLOATING=new Uu("FLOATING"),Bu.FLOATING_SINGLE=new Uu("FLOATING SINGLE");var qu=function t(){this._precisionModel=new Bu,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?el(arguments[0],Qs)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Bu&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Gu={serialVersionUID:{configurable:!0}};qu.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new Ys(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new Ys(t.getMinX(),t.getMinY()),new Ys(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new Ys(t.getMinX(),t.getMinY()),new Ys(t.getMinX(),t.getMaxY()),new Ys(t.getMaxX(),t.getMaxY()),new Ys(t.getMaxX(),t.getMinY()),new Ys(t.getMinX(),t.getMinY())]),null)},qu.prototype.createLineString=function(t){return t?t instanceof Array?new xu(this.getCoordinateSequenceFactory().create(t),this):el(t,hl)?new xu(t,this):void 0:new xu(this.getCoordinateSequenceFactory().create([]),this)},qu.prototype.createMultiLineString=function(){if(0===arguments.length)return new mu(null,this);if(1===arguments.length){var t=arguments[0];return new mu(t,this)}},qu.prototype.buildGeometry=function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(qu.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof Eu)return this.createMultiPolygon(qu.toPolygonArray(t));if(s instanceof xu)return this.createMultiLineString(qu.toLineStringArray(t));if(s instanceof Cu)return this.createMultiPoint(qu.toPointArray(t));Sl.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},qu.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},qu.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Ys){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(el(arguments[0],hl)){var e=arguments[0];return new Cu(e,this)}}},qu.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},qu.prototype.createPolygon=function(){if(0===arguments.length)return new Eu(null,null,this);if(1===arguments.length){if(el(arguments[0],hl)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Iu){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return new Eu(i,r,this)}},qu.prototype.getSRID=function(){return this._SRID},qu.prototype.createGeometryCollection=function(){if(0===arguments.length)return new du(null,this);if(1===arguments.length){var t=arguments[0];return new du(t,this)}},qu.prototype.createGeometry=function(t){return new Pu(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},qu.prototype.getPrecisionModel=function(){return this._precisionModel},qu.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(el(arguments[0],hl)){var e=arguments[0];return new Iu(e,this)}}},qu.prototype.createMultiPolygon=function(){if(0===arguments.length)return new Tu(null,this);if(1===arguments.length){var t=arguments[0];return new Tu(t,this)}},qu.prototype.createMultiPoint=function(){if(0===arguments.length)return new Su(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Su(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(el(arguments[0],hl)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(n.size()).fill(null),r=0;r<n.size();r++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());bu.copy(n,r,o,0,1),i[r]=this.createPoint(o)}return this.createMultiPoint(i)}}},qu.prototype.interfaces_=function(){return[gr]},qu.prototype.getClass=function(){return qu},qu.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},qu.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},qu.getDefaultCoordinateSequenceFactory=function(){return Nu.instance()},qu.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},qu.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},qu.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},qu.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},qu.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},qu.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},qu.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Gu.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(qu,Gu);var Hu=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Xu=function(t){this.geometryFactory=t||new qu};Xu.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Zu[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Hu.indexOf(n)?Zu[n].apply(this,[e.coordinates]):Zu[n].apply(this,"GeometryCollection"===n?[e.geometries]:[e])},Xu.prototype.write=function(t){var e=t.getGeometryType();if(!Wu[e])throw new Error("Geometry is not supported");return Wu[e].apply(this,[t])};var Zu={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){if(!Zu[t.geometry.type])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Zu.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new Ys(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new Ys(t[0],t[1]),new Ys(t[2],t[1]),new Ys(t[2],t[3]),new Ys(t[0],t[3]),new Ys(t[0],t[1])])},Point:function(t){var e=new Ys(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Zu.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Zu.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Zu.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Zu.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=Zu.coordinates.apply(this,[t[r]]),a=this.geometryFactory.createLinearRing(o);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Zu.Polygon.apply(this,[t[n]]));return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n)e.push(this.read(t[n]));return this.geometryFactory.createGeometryCollection(e)}},Wu={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Wu.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=Wu.Point.apply(this,[t._geometries[n]]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i)e.push(Wu.coordinate.apply(this,[n[i]]));return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=Wu.LineString.apply(this,[t._geometries[n]]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Wu.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var r=Wu.LineString.apply(this,[t._holes[i]]);e.push(r.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=Wu.Polygon.apply(this,[t._geometries[n]]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(Wu[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}},Yu=function(t){this.geometryFactory=t||new qu,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Xu(this.geometryFactory)};Yu.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Bu.FIXED&&this.reducePrecision(e),e},Yu.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Ku=function(){this.parser=new Xu(this.geometryFactory)};Ku.prototype.write=function(t){return this.parser.write(t)};var Ju=function(){},Qu={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ju.prototype.interfaces_=function(){return[]},Ju.prototype.getClass=function(){return Ju},Ju.opposite=function(t){return t===Ju.LEFT?Ju.RIGHT:t===Ju.RIGHT?Ju.LEFT:t},Qu.ON.get=function(){return 0},Qu.LEFT.get=function(){return 1},Qu.RIGHT.get=function(){return 2},Object.defineProperties(Ju,Qu),(Pr.prototype=new Error).name="EmptyStackException",(Ar.prototype=new Wl).add=function(t){return this.array_.push(t),!0},Ar.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Ar.prototype.push=function(t){return this.array_.push(t),t},Ar.prototype.pop=function(t){if(0===this.array_.length)throw new Pr;return this.array_.pop()},Ar.prototype.peek=function(){if(0===this.array_.length)throw new Pr;return this.array_[this.array_.length-1]},Ar.prototype.empty=function(){return 0===this.array_.length},Ar.prototype.isEmpty=function(){return this.empty()},Ar.prototype.search=function(t){return this.array_.indexOf(t)},Ar.prototype.size=function(){return this.array_.length},Ar.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var $u=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};$u.prototype.getCoordinate=function(){return this._minCoord},$u.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},$u.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();Sl.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=Ml.computeOrientation(this._minCoord,n,e),r=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===Ml.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===Ml.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)},$u.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=Ju.LEFT;return n[e].y<n[e+1].y&&(i=Ju.RIGHT),i},$u.prototype.getEdge=function(){return this._orientedDe},$u.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},$u.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},$u.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}Sl.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ju.LEFT&&(this._orientedDe=this._minDe.getSym())},$u.prototype.interfaces_=function(){return[]},$u.prototype.getClass=function(){return $u};var tc=function(t){function e(n,i){t.call(this,e.msgWithCoord(n,i)),this.pt=i?new Ys(i):null,this.name="TopologyException"}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(kl),ec=function(){this.array_=[]};ec.prototype.addLast=function(t){this.array_.push(t)},ec.prototype.removeFirst=function(){return this.array_.shift()},ec.prototype.isEmpty=function(){return 0===this.array_.length};var nc=function(){this._finder=null,this._dirEdgeList=new Yl,this._nodes=new Yl,this._rightMostCoord=null,this._env=null,this._finder=new $u};nc.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},nc.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},nc.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new tc("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}},nc.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ju.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},nc.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},nc.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ju.RIGHT)>=1&&e.getDepth(Ju.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},nc.prototype.computeDepths=function(t){var e=new ru,n=new ec,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},nc.prototype.compareTo=function(t){return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},nc.prototype.getEnvelope=function(){if(null===this._env){for(var t=new yl,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env},nc.prototype.addReachable=function(t){var e=new Ar;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},nc.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ju.LEFT,t.getDepth(Ju.RIGHT)),e.setDepth(Ju.RIGHT,t.getDepth(Ju.LEFT))},nc.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}},nc.prototype.getNodes=function(){return this._nodes},nc.prototype.getDirectedEdges=function(){return this._dirEdgeList},nc.prototype.interfaces_=function(){return[Xs]},nc.prototype.getClass=function(){return nc};var ic=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ju.ON]=n}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var r=0;r<this.location.length;r++)this.location[r]=i.location[r]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Ju.ON]=o,this.location[Ju.LEFT]=a,this.location[Ju.RIGHT]=s}};ic.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},ic.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==$s.NONE)return!1;return!0},ic.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===$s.NONE&&(this.location[e]=t)},ic.prototype.isLine=function(){return 1===this.location.length},ic.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ju.ON]=this.location[Ju.ON],e[Ju.LEFT]=$s.NONE,e[Ju.RIGHT]=$s.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===$s.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},ic.prototype.getLocations=function(){return this.location},ic.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ju.LEFT];this.location[Ju.LEFT]=this.location[Ju.RIGHT],this.location[Ju.RIGHT]=t},ic.prototype.toString=function(){var t=new rl;return this.location.length>1&&t.append($s.toLocationSymbol(this.location[Ju.LEFT])),t.append($s.toLocationSymbol(this.location[Ju.ON])),this.location.length>1&&t.append($s.toLocationSymbol(this.location[Ju.RIGHT])),t.toString()},ic.prototype.setLocations=function(t,e,n){this.location[Ju.ON]=t,this.location[Ju.LEFT]=e,this.location[Ju.RIGHT]=n},ic.prototype.get=function(t){return t<this.location.length?this.location[t]:$s.NONE},ic.prototype.isArea=function(){return this.location.length>1},ic.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===$s.NONE)return!0;return!1},ic.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ju.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},ic.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations($s.NONE)},ic.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},ic.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},ic.prototype.interfaces_=function(){return[]},ic.prototype.getClass=function(){return ic};var rc=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new ic(e),this.elt[1]=new ic(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new ic(n.elt[0]),this.elt[1]=new ic(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new ic($s.NONE),this.elt[1]=new ic($s.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new ic(o,a,s),this.elt[1]=new ic(o,a,s)}else if(4===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new ic($s.NONE,$s.NONE,$s.NONE),this.elt[1]=new ic($s.NONE,$s.NONE,$s.NONE),this.elt[l].setLocations(u,c,h)}};rc.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},rc.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},rc.prototype.isNull=function(t){return this.elt[t].isNull()},rc.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},rc.prototype.isLine=function(t){return this.elt[t].isLine()},rc.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new ic(t.elt[e]):this.elt[e].merge(t.elt[e])},rc.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},rc.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ju.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},rc.prototype.toString=function(){var t=new rl;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},rc.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},rc.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},rc.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ju.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},rc.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},rc.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},rc.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new ic(this.elt[t].location[0]))},rc.prototype.interfaces_=function(){return[]},rc.prototype.getClass=function(){return rc},rc.toLineLabel=function(t){for(var e=new rc($s.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var oc=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Yl,this._pts=new Yl,this._label=new rc($s.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Yl,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};oc.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Ml.isCCW(this._ring.getCoordinates())},oc.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},oc.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new tc("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new tc("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var i=e.getLabel();Sl.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},oc.prototype.getLinearRing=function(){return this._ring},oc.prototype.getCoordinate=function(t){return this._pts.get(t)},oc.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},oc.prototype.addPoints=function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var a=i.length-2;n&&(a=i.length-1);for(var s=a;s>=0;s--)this._pts.add(i[s])}},oc.prototype.isHole=function(){return this._isHole},oc.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},oc.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Ml.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},oc.prototype.addHole=function(t){this._holes.add(t)},oc.prototype.isShell=function(){return null===this._shell},oc.prototype.getLabel=function(){return this._label},oc.prototype.getEdges=function(){return this._edges},oc.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},oc.prototype.getShell=function(){return this._shell},oc.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e.getLocation(n,Ju.RIGHT);if(i===$s.NONE)return null;if(this._label.getLocation(n)===$s.NONE)return this._label.setLocation(n,i),null}},oc.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},oc.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},oc.prototype.interfaces_=function(){return[]},oc.prototype.getClass=function(){return oc};var ac=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(oc),sc=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildMinimalRings=function(){var t=new Yl,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new ac(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(oc),lc=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};lc.prototype.setVisited=function(t){this._isVisited=t},lc.prototype.setInResult=function(t){this._isInResult=t},lc.prototype.isCovered=function(){return this._isCovered},lc.prototype.isCoveredSet=function(){return this._isCoveredSet},lc.prototype.setLabel=function(t){this._label=t},lc.prototype.getLabel=function(){return this._label},lc.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},lc.prototype.updateIM=function(t){Sl.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},lc.prototype.isInResult=function(){return this._isInResult},lc.prototype.isVisited=function(){return this._isVisited},lc.prototype.interfaces_=function(){return[]},lc.prototype.getClass=function(){return lc};var uc=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new rc(0,$s.NONE)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=$s.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==$s.BOUNDARY&&(n=i)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new rc(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof rc)for(var n=arguments[0],i=0;i<2;i++){var r=this.computeMergedLocation(n,i);this._label.getLocation(i)===$s.NONE&&this._label.setLocation(i,r)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=$s.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case $s.BOUNDARY:n=$s.INTERIOR;break;case $s.INTERIOR:default:n=$s.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(lc),cc=function(){this.nodeMap=new Er,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};cc.prototype.find=function(t){return this.nodeMap.get(t)},cc.prototype.addNode=function(){if(arguments[0]instanceof Ys){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof uc){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}},cc.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},cc.prototype.iterator=function(){return this.nodeMap.values().iterator()},cc.prototype.values=function(){return this.nodeMap.values()},cc.prototype.getBoundaryNodes=function(t){for(var e=new Yl,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===$s.BOUNDARY&&e.add(i)}return e},cc.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},cc.prototype.interfaces_=function(){return[]},cc.prototype.getClass=function(){return cc};var hc=function(){},pc={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};hc.prototype.interfaces_=function(){return[]},hc.prototype.getClass=function(){return hc},hc.isNorthern=function(t){return t===hc.NE||t===hc.NW},hc.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},hc.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},hc.isInHalfPlane=function(t,e){return e===hc.SE?t===hc.SE||t===hc.SW:t===e||t===e+1},hc.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new qs("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?hc.NE:hc.SE:e>=0?hc.NW:hc.SW}if(arguments[0]instanceof Ys&&arguments[1]instanceof Ys){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new qs("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?hc.NE:hc.SE:i.y>=n.y?hc.NW:hc.SW}},pc.NE.get=function(){return 0},pc.NW.get=function(){return 1},pc.SW.get=function(){return 2},pc.SE.get=function(){return 3},Object.defineProperties(hc,pc);var fc=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];this._edge=e,this.init(n,i),this._label=null}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=r,this.init(o,a),this._label=s}};fc.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Ml.computeOrientation(t._p0,t._p1,this._p1)},fc.prototype.getDy=function(){return this._dy},fc.prototype.getCoordinate=function(){return this._p0},fc.prototype.setNode=function(t){this._node=t},fc.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},fc.prototype.compareTo=function(t){return this.compareDirection(t)},fc.prototype.getDirectedCoordinate=function(){return this._p1},fc.prototype.getDx=function(){return this._dx},fc.prototype.getLabel=function(){return this._label},fc.prototype.getEdge=function(){return this._edge},fc.prototype.getQuadrant=function(){return this._quadrant},fc.prototype.getNode=function(){return this._node},fc.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},fc.prototype.computeLabel=function(t){},fc.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=hc.quadrant(this._dx,this._dy),Sl.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},fc.prototype.interfaces_=function(){return[Xs]},fc.prototype.getClass=function(){return fc};var dc=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var i=e.getNumPoints()-1;this.init(e.getCoordinate(i),e.getCoordinate(i-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new rc(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new tc("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ju.LEFT)===$s.INTERIOR&&this._label.getLocation(e,Ju.RIGHT)===$s.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ju.LEFT]+"/"+this._depth[Ju.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,$s.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,$s.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===Ju.LEFT&&(i=-1);var r=Ju.opposite(t),o=e+n*i;this.setDepth(t,e),this.setDepth(r,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===$s.EXTERIOR&&e===$s.INTERIOR?1:t===$s.INTERIOR&&e===$s.EXTERIOR?-1:0},e}(fc),mc=function(){};mc.prototype.createNode=function(t){return new uc(t,null)},mc.prototype.interfaces_=function(){return[]},mc.prototype.getClass=function(){return mc};var gc=function(){if(this._edges=new Yl,this._nodes=null,this._edgeEndList=new Yl,0===arguments.length)this._nodes=new cc(new mc);else if(1===arguments.length){var t=arguments[0];this._nodes=new cc(t)}};gc.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},gc.prototype.find=function(t){return this._nodes.find(t)},gc.prototype.addNode=function(){if(arguments[0]instanceof uc){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof Ys){var e=arguments[0];return this._nodes.addNode(e)}},gc.prototype.getNodeIterator=function(){return this._nodes.iterator()},gc.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},gc.prototype.debugPrintln=function(t){ml.out.println(t)},gc.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===$s.BOUNDARY},gc.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},gc.prototype.matchInSameDirection=function(t,e,n,i){return!!t.equals(n)&&Ml.computeOrientation(t,e,i)===Ml.COLLINEAR&&hc.quadrant(t,e)===hc.quadrant(n,i)},gc.prototype.getEdgeEnds=function(){return this._edgeEndList},gc.prototype.debugPrint=function(t){ml.out.print(t)},gc.prototype.getEdgeIterator=function(){return this._edges.iterator()},gc.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},gc.prototype.insertEdge=function(t){this._edges.add(t)},gc.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},gc.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var i=new dc(n,!0),r=new dc(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},gc.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},gc.prototype.getNodes=function(){return this._nodes.values()},gc.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},gc.prototype.interfaces_=function(){return[]},gc.prototype.getClass=function(){return gc},gc.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var yc=function(){this._geometryFactory=null,this._shellList=new Yl;var t=arguments[0];this._geometryFactory=t};yc.prototype.sortShellsAndHoles=function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},yc.prototype.computePolygons=function(t){for(var e=new Yl,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e},yc.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new tc("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},yc.prototype.buildMinimalEdgeRings=function(t,e,n){for(var i=new Yl,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else i.add(o)}return i},yc.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},yc.prototype.buildMaximalEdgeRings=function(t){for(var e=new Yl,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new sc(i,this._geometryFactory);e.add(r),r.setInResult()}}return e},yc.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},yc.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},yc.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var l=s.next(),u=l.getLinearRing(),c=u.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(i)&&Ml.isPointInRing(r,u.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=l)}return o},yc.prototype.findShell=function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return Sl.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},yc.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];gc.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new Yl,o=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(o,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},yc.prototype.interfaces_=function(){return[]},yc.prototype.getClass=function(){return yc};var vc=function(){};vc.prototype.getBounds=function(){},vc.prototype.interfaces_=function(){return[]},vc.prototype.getClass=function(){return vc};var _c=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};_c.prototype.getItem=function(){return this._item},_c.prototype.getBounds=function(){return this._bounds},_c.prototype.interfaces_=function(){return[vc,gr]},_c.prototype.getClass=function(){return _c};var bc=function(){this._size=null,this._items=null,this._size=0,this._items=new Yl,this._items.add(null)};bc.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},bc.prototype.size=function(){return this._size},bc.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},bc.prototype.clear=function(){this._size=0,this._items.clear()},bc.prototype.isEmpty=function(){return 0===this._size},bc.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},bc.prototype.interfaces_=function(){return[]},bc.prototype.getClass=function(){return bc};var xc=function(){};xc.prototype.visitItem=function(t){},xc.prototype.interfaces_=function(){return[]},xc.prototype.getClass=function(){return xc};var wc=function(){};wc.prototype.insert=function(t,e){},wc.prototype.remove=function(t,e){},wc.prototype.query=function(){},wc.prototype.interfaces_=function(){return[]},wc.prototype.getClass=function(){return wc};var Cc=function(){if(this._childBoundables=new Yl,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},kc={serialVersionUID:{configurable:!0}};Cc.prototype.getLevel=function(){return this._level},Cc.prototype.size=function(){return this._childBoundables.size()},Cc.prototype.getChildBoundables=function(){return this._childBoundables},Cc.prototype.addChildBoundable=function(t){Sl.isTrue(null===this._bounds),this._childBoundables.add(t)},Cc.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Cc.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Cc.prototype.interfaces_=function(){return[vc,gr]},Cc.prototype.getClass=function(){return Cc},kc.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Cc,kc);var Ec=function(){};Ec.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Ec.min=function(t){return Ec.sort(t),t.get(0)},Ec.sort=function(t,e){var n=t.toArray();e?uu.sort(n,e):uu.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},Ec.singletonList=function(t){var e=new Yl;return e.add(t),e};var Sc=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};Sc.prototype.expandToQueue=function(t,e){var n=Sc.isComposite(this._boundable1),i=Sc.isComposite(this._boundable2);if(n&&i)return Sc.area(this._boundable1)>Sc.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(i)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new qs("neither boundable is composite")},Sc.prototype.isLeaves=function(){return!(Sc.isComposite(this._boundable1)||Sc.isComposite(this._boundable2))},Sc.prototype.compareTo=function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0},Sc.prototype.expand=function(t,e,n,i){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next(),a=new Sc(o,e,this._itemDistance);a.getDistance()<i&&n.add(a)}},Sc.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},Sc.prototype.getDistance=function(){return this._distance},Sc.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Sc.prototype.interfaces_=function(){return[Xs]},Sc.prototype.getClass=function(){return Sc},Sc.area=function(t){return t.getBounds().getArea()},Sc.isComposite=function(t){return t instanceof Cc};var Ic=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Yl,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];Sl.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},Tc={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Ic.prototype.getNodeCapacity=function(){return this._nodeCapacity},Ic.prototype.lastNode=function(t){return t.get(t.size()-1)},Ic.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Cc?t+=this.size(n):n instanceof _c&&(t+=1)}return t}},Ic.prototype.removeItem=function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof _c&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},Ic.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Yl:t}if(1===arguments.length){for(var e=arguments[0],n=new Yl,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Cc){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof _c?n.add(r.getItem()):Sl.shouldNeverReachHere()}return n.size()<=0?null:n}},Ic.prototype.insert=function(t,e){Sl.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new _c(t,e))},Ic.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Yl;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(Sl.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Cc?this.boundablesAtLevel(n,a,r):(Sl.isTrue(a instanceof _c),-1===n&&r.add(a))}return null}},Ic.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Yl;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,i)}else if(3===arguments.length)if(el(arguments[2],xc)&&arguments[0]instanceof Object&&arguments[1]instanceof Cc)for(var r=arguments[0],o=arguments[1],a=arguments[2],s=o.getChildBoundables(),l=0;l<s.size();l++){var u=s.get(l);this.getIntersectsOp().intersects(u.getBounds(),r)&&(u instanceof Cc?this.query(r,u,a):u instanceof _c?a.visitItem(u.getItem()):Sl.shouldNeverReachHere())}else if(el(arguments[2],Wl)&&arguments[0]instanceof Object&&arguments[1]instanceof Cc)for(var c=arguments[0],h=arguments[1],p=arguments[2],f=h.getChildBoundables(),d=0;d<f.size();d++){var m=f.get(d);this.getIntersectsOp().intersects(m.getBounds(),c)&&(m instanceof Cc?this.query(c,m,p):m instanceof _c?p.add(m.getItem()):Sl.shouldNeverReachHere())}},Ic.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Ic.prototype.getRoot=function(){return this.build(),this._root},Ic.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var a=null,s=i.getChildBoundables().iterator();s.hasNext();){var l=s.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof Cc&&(o=this.remove(n,l,r))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),o}},Ic.prototype.createHigherLevels=function(t,e){Sl.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},Ic.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Cc){var i=this.depth(n);i>t&&(t=i)}}return t+1}},Ic.prototype.createParentBoundables=function(t,e){Sl.isTrue(!t.isEmpty());var n=new Yl;n.add(this.createNode(e));var i=new Yl(t);Ec.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},Ic.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Ic.prototype.interfaces_=function(){return[gr]},Ic.prototype.getClass=function(){return Ic},Ic.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},Tc.IntersectsOp.get=function(){return Pc},Tc.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},Tc.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Ic,Tc);var Pc=function(){},Ac=function(){};Ac.prototype.distance=function(t,e){},Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac};var Lc=function(t){function e(n){t.call(this,n=n||e.DEFAULT_NODE_CAPACITY)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){Sl.isTrue(t.length>0);for(var n=new Yl,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},e.prototype.createNode=function(t){return new Mc(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new Yl;for(var a=0;r.hasNext()&&a<n;){var s=r.next();i[o].add(s),a++}}return i},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];t.prototype.query.call(this,n,i)}else if(3===arguments.length)if(el(arguments[2],xc)&&arguments[0]instanceof Object&&arguments[1]instanceof Cc){var r=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,r,o,a)}else if(el(arguments[2],Wl)&&arguments[0]instanceof Object&&arguments[1]instanceof Cc){var s=arguments[0],l=arguments[1],u=arguments[2];t.prototype.query.call(this,s,l,u)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){Sl.isTrue(!t.isEmpty());var i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new Yl(t);Ec.sort(r,e.xComparator);var o=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(el(arguments[0],Ac)){var t=arguments[0],n=new Sc(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof Sc){var i=arguments[0];return this.nearestNeighbour(i,Gs.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&el(arguments[1],Ac)){var r=arguments[0],o=arguments[1],a=new Sc(this.getRoot(),r.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof Sc&&"number"==typeof arguments[1]){var s=arguments[0],l=arguments[1],u=null,c=new bc;for(c.add(s);!c.isEmpty()&&l>0;){var h=c.poll(),p=h.getDistance();if(p>=l)break;h.isLeaves()?(l=p,u=h):h.expandToQueue(c,l)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[0],d=arguments[1],m=arguments[2],g=new _c(f,d),y=new Sc(this.getRoot(),g,m);return this.nearestNeighbour(y)[0]}},e.prototype.interfaces_=function(){return[wc,gr]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return Mc},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[Ws]},compare:function(n,i){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(i.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[Ws]},compare:function(n,i){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(i.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(Ic),Mc=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new yl(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Cc),Rc=function(){};Rc.prototype.interfaces_=function(){return[]},Rc.prototype.getClass=function(){return Rc},Rc.relativeSign=function(t,e){return t<e?-1:t>e?1:0},Rc.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=Rc.relativeSign(e.x,n.x),r=Rc.relativeSign(e.y,n.y);switch(t){case 0:return Rc.compareValue(i,r);case 1:return Rc.compareValue(r,i);case 2:return Rc.compareValue(r,-i);case 3:return Rc.compareValue(-i,r);case 4:return Rc.compareValue(-i,-r);case 5:return Rc.compareValue(-r,-i);case 6:return Rc.compareValue(-r,i);case 7:return Rc.compareValue(i,-r)}return Sl.shouldNeverReachHere("invalid octant value"),0},Rc.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var Oc=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new Ys(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))};Oc.prototype.getCoordinate=function(){return this.coord},Oc.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},Oc.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Rc.compare(this._segmentOctant,this.coord,e.coord)},Oc.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},Oc.prototype.isInterior=function(){return this._isInterior},Oc.prototype.interfaces_=function(){return[Xs]},Oc.prototype.getClass=function(){return Oc};var Dc=function(){this._nodeMap=new Er,this._edge=null;var t=arguments[0];this._edge=t};Dc.prototype.getSplitCoordinates=function(){var t=new Jl;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},Dc.prototype.addCollapsedNodes=function(){var t=new Yl;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},Dc.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Dc.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),i=this._edge.getCoordinate(e+2);n.equals2D(i)&&t.add(new ol(e+1))}},Dc.prototype.addEdgeCoordinates=function(t,e,n){var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);n.add(new Ys(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));r&&n.add(new Ys(e.coord))},Dc.prototype.iterator=function(){return this._nodeMap.values().iterator()},Dc.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},Dc.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},Dc.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new ol(e[0])),i=r}},Dc.prototype.getEdge=function(){return this._edge},Dc.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},Dc.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),a=0;o[a++]=new Ys(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return r&&(o[a]=new Ys(e.coord)),new Bc(o,this._edge.getData())},Dc.prototype.add=function(t,e){var n=new Oc(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(Sl.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)},Dc.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new kl("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new kl("bad split edge end point at "+r)},Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc};var Nc=function(){};Nc.prototype.interfaces_=function(){return[]},Nc.prototype.getClass=function(){return Nc},Nc.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new qs("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),i=Math.abs(e);return t>=0?e>=0?n>=i?0:1:n>=i?7:6:e>=0?n>=i?3:2:n>=i?4:5}if(arguments[0]instanceof Ys&&arguments[1]instanceof Ys){var r=arguments[0],o=arguments[1],a=o.x-r.x,s=o.y-r.y;if(0===a&&0===s)throw new qs("Cannot compute the octant for two identical points "+r);return Nc.octant(a,s)}};var Fc=function(){};Fc.prototype.getCoordinates=function(){},Fc.prototype.size=function(){},Fc.prototype.getCoordinate=function(t){},Fc.prototype.isClosed=function(){},Fc.prototype.setData=function(t){},Fc.prototype.getData=function(){},Fc.prototype.interfaces_=function(){return[]},Fc.prototype.getClass=function(){return Fc};var zc=function(){};zc.prototype.addIntersection=function(t,e){},zc.prototype.interfaces_=function(){return[Fc]},zc.prototype.getClass=function(){return zc};var Bc=function(){this._nodeList=new Dc(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Bc.prototype.getCoordinates=function(){return this._pts},Bc.prototype.size=function(){return this._pts.length},Bc.prototype.getCoordinate=function(t){return this._pts[t]},Bc.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Bc.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},Bc.prototype.setData=function(t){this._data=t},Bc.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:Nc.octant(t,e)},Bc.prototype.getData=function(){return this._data},Bc.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[3],o=new Ys(n.getIntersection(r));this.addIntersection(o,i)}},Bc.prototype.toString=function(){return Cl.toLineString(new Ou(this._pts))},Bc.prototype.getNodeList=function(){return this._nodeList},Bc.prototype.addIntersectionNode=function(t,e){var n=e,i=n+1;return i<this._pts.length&&t.equals2D(this._pts[i])&&(n=i),this._nodeList.add(t,n)},Bc.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},Bc.prototype.interfaces_=function(){return[zc]},Bc.prototype.getClass=function(){return Bc},Bc.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Yl;return Bc.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(i)};var Vc=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new Ys,this.p1=new Ys;else if(1===arguments.length){var t=arguments[0];this.p0=new Ys(t.p0),this.p1=new Ys(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];this.p0=new Ys(e,n),this.p1=new Ys(i,r)}},Uc={serialVersionUID:{configurable:!0}};Vc.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Vc.prototype.orientationIndex=function(){if(arguments[0]instanceof Vc){var t=arguments[0],e=Ml.orientationIndex(this.p0,this.p1,t.p0),n=Ml.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof Ys){var i=arguments[0];return Ml.orientationIndex(this.p0,this.p1,i)}},Vc.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},Vc.prototype.isVertical=function(){return this.p0.x===this.p1.x},Vc.prototype.equals=function(t){if(!(t instanceof Vc))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},Vc.prototype.intersection=function(t){var e=new Pl;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},Vc.prototype.project=function(){if(arguments[0]instanceof Ys){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new Ys(t);var e=this.projectionFactor(t),n=new Ys;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Vc){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1)return null;if(r<=0&&o<=0)return null;var a=this.project(i.p0);r<0&&(a=this.p0),r>1&&(a=this.p1);var s=this.project(i.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new Vc(a,s)}},Vc.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Vc.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Vc.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},Vc.prototype.distancePerpendicular=function(t){return Ml.distancePointLinePerpendicular(t,this.p0,this.p1)},Vc.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Vc.prototype.midPoint=function(){return Vc.midPoint(this.p0,this.p1)},Vc.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?Gs.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i},Vc.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=Gs.MAX_VALUE,r=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(r=a.distance(t.p1))<i&&(i=r,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(r=s.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=s);var l=t.closestPoint(this.p1);return(r=l.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=l),n},Vc.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},Vc.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Vc.prototype.getLength=function(){return this.p0.distance(this.p1)},Vc.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},Vc.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},Vc.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},Vc.prototype.lineIntersection=function(t){try{return gl.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof dl))throw t}return null},Vc.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Vc.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(r*r+o*o),s=0,l=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*r/a,l=e*o/a}return new Ys(n-l,i+s)},Vc.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},Vc.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||Gs.isNaN(e))&&(e=1),e},Vc.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Vc.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Vc.prototype.distance=function(){if(arguments[0]instanceof Vc){var t=arguments[0];return Ml.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof Ys){var e=arguments[0];return Ml.distancePointLine(e,this.p0,this.p1)}},Vc.prototype.pointAlong=function(t){var e=new Ys;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},Vc.prototype.hashCode=function(){var t=Gs.doubleToLongBits(this.p0.x);t^=31*Gs.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=Gs.doubleToLongBits(this.p1.x);return n^=31*Gs.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},Vc.prototype.interfaces_=function(){return[Xs,gr]},Vc.prototype.getClass=function(){return Vc},Vc.midPoint=function(t,e){return new Ys((t.x+e.x)/2,(t.y+e.y)/2)},Uc.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Vc,Uc);var jc=function(){this.tempEnv1=new yl,this.tempEnv2=new yl,this._overlapSeg1=new Vc,this._overlapSeg2=new Vc};jc.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},jc.prototype.interfaces_=function(){return[]},jc.prototype.getClass=function(){return jc};var qc=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=i};qc.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},qc.prototype.computeSelect=function(t,e,n,i){if(i.tempEnv1.init(this._pts[e],this._pts[n]),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var r=Math.trunc((e+n)/2);e<r&&this.computeSelect(t,e,r,i),r<n&&this.computeSelect(t,r,n,i)},qc.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},qc.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},qc.prototype.setId=function(t){this._id=t},qc.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},qc.prototype.getEnvelope=function(){return null===this._env&&(this._env=new yl(this._pts[this._start],this._pts[this._end])),this._env},qc.prototype.getEndIndex=function(){return this._end},qc.prototype.getStartIndex=function(){return this._start},qc.prototype.getContext=function(){return this._context},qc.prototype.getId=function(){return this._id},qc.prototype.computeOverlapsInternal=function(t,e,n,i,r,o){var a=this._pts[t],s=this._pts[e],l=n._pts[i],u=n._pts[r];if(e-t==1&&r-i==1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(l,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((i+r)/2);t<c&&(i<h&&this.computeOverlapsInternal(t,c,n,i,h,o),h<r&&this.computeOverlapsInternal(t,c,n,h,r,o)),c<e&&(i<h&&this.computeOverlapsInternal(c,e,n,i,h,o),h<r&&this.computeOverlapsInternal(c,e,n,h,r,o))},qc.prototype.interfaces_=function(){return[]},qc.prototype.getClass=function(){return qc};var Gc=function(){};Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc},Gc.getChainStartIndices=function(t){var e=0,n=new Yl;n.add(new ol(e));do{var i=Gc.findChainEnd(t,e);n.add(new ol(i)),e=i}while(e<t.length-1);return Gc.toIntArray(n)},Gc.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=hc.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||hc.quadrant(t[r-1],t[r])===i);)r++;return r-1},Gc.getChains=function(){if(1===arguments.length){var t=arguments[0];return Gc.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new Yl,r=Gc.getChainStartIndices(e),o=0;o<r.length-1;o++){var a=new qc(e,r[o],r[o+1],n);i.add(a)}return i}},Gc.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Hc=function(){};Hc.prototype.computeNodes=function(t){},Hc.prototype.getNodedSubstrings=function(){},Hc.prototype.interfaces_=function(){return[]},Hc.prototype.getClass=function(){return Hc};var Xc=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};Xc.prototype.setSegmentIntersector=function(t){this._segInt=t},Xc.prototype.interfaces_=function(){return[Hc]},Xc.prototype.getClass=function(){return Xc};var Zc=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Yl,this._index=new Lc,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return Bc.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=Gc.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new Wc(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Wc},Object.defineProperties(e,n),e}(Xc),Wc=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3],o=e.getContext(),a=i.getContext();this._si.processIntersections(o,n,a,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(jc),Yc=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(i)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},Kc={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Yc.prototype.getEndCapStyle=function(){return this._endCapStyle},Yc.prototype.isSingleSided=function(){return this._isSingleSided},Yc.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Yc.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Yc.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Yc.JOIN_ROUND&&(this._quadrantSegments=Yc.DEFAULT_QUADRANT_SEGMENTS)},Yc.prototype.getJoinStyle=function(){return this._joinStyle},Yc.prototype.setJoinStyle=function(t){this._joinStyle=t},Yc.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Yc.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Yc.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Yc.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Yc.prototype.getMitreLimit=function(){return this._mitreLimit},Yc.prototype.setMitreLimit=function(t){this._mitreLimit=t},Yc.prototype.setSingleSided=function(t){this._isSingleSided=t},Yc.prototype.interfaces_=function(){return[]},Yc.prototype.getClass=function(){return Yc},Yc.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Kc.CAP_ROUND.get=function(){return 1},Kc.CAP_FLAT.get=function(){return 2},Kc.CAP_SQUARE.get=function(){return 3},Kc.JOIN_ROUND.get=function(){return 1},Kc.JOIN_MITRE.get=function(){return 2},Kc.JOIN_BEVEL.get=function(){return 3},Kc.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Kc.DEFAULT_MITRE_LIMIT.get=function(){return 5},Kc.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Yc,Kc);var Jc=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Ml.COUNTERCLOCKWISE,this._inputLine=t||null},Qc={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Jc.prototype.isDeletable=function(t,e,n,i){var r=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(r,o,a)&&!!this.isShallow(r,o,a,i)&&this.isShallowSampled(r,o,t,n,i)},Jc.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),i=!1;n<this._inputLine.length;){var r=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Jc.DELETE,r=!0,i=!0),e=this.findNextNonDeletedIndex(t=r?n:e),n=this.findNextNonDeletedIndex(e)}return i},Jc.prototype.isShallowConcavity=function(t,e,n,i){return Ml.computeOrientation(t,e,n)===this._angleOrientation&&Ml.distancePointLine(e,t,n)<i},Jc.prototype.isShallowSampled=function(t,e,n,i,r){var o=Math.trunc((i-n)/Jc.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<i;a+=o)if(!this.isShallow(t,e,this._inputLine[a],r))return!1;return!0},Jc.prototype.isConcave=function(t,e,n){return Ml.computeOrientation(t,e,n)===this._angleOrientation},Jc.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Ml.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Jc.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Jc.DELETE;)e++;return e},Jc.prototype.isShallow=function(t,e,n,i){return Ml.distancePointLine(e,t,n)<i},Jc.prototype.collapseLine=function(){for(var t=new Jl,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Jc.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Jc.prototype.interfaces_=function(){return[]},Jc.prototype.getClass=function(){return Jc},Jc.simplify=function(t,e){return new Jc(t).simplify(e)},Qc.INIT.get=function(){return 0},Qc.DELETE.get=function(){return 1},Qc.KEEP.get=function(){return 1},Qc.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Jc,Qc);var $c=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Yl},th={COORDINATE_ARRAY_TYPE:{configurable:!0}};$c.prototype.getCoordinates=function(){return this._ptList.toArray($c.COORDINATE_ARRAY_TYPE)},$c.prototype.setPrecisionModel=function(t){this._precisionModel=t},$c.prototype.addPt=function(t){var e=new Ys(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},$c.prototype.revere=function(){},$c.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])},$c.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},$c.prototype.toString=function(){return(new qu).createLineString(this.getCoordinates()).toString()},$c.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new Ys(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},$c.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},$c.prototype.interfaces_=function(){return[]},$c.prototype.getClass=function(){return $c},th.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties($c,th);var eh=function(){},nh={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};eh.prototype.interfaces_=function(){return[]},eh.prototype.getClass=function(){return eh},eh.toDegrees=function(t){return 180*t/Math.PI},eh.normalize=function(t){for(;t>Math.PI;)t-=eh.PI_TIMES_2;for(;t<=-Math.PI;)t+=eh.PI_TIMES_2;return t},eh.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},eh.isAcute=function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)>0},eh.isObtuse=function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)<0},eh.interiorAngle=function(t,e,n){var i=eh.angle(e,t),r=eh.angle(e,n);return Math.abs(r-i)},eh.normalizePositive=function(t){if(t<0){for(;t<0;)t+=eh.PI_TIMES_2;t>=eh.PI_TIMES_2&&(t=0)}else{for(;t>=eh.PI_TIMES_2;)t-=eh.PI_TIMES_2;t<0&&(t=0)}return t},eh.angleBetween=function(t,e,n){var i=eh.angle(e,t),r=eh.angle(e,n);return eh.diff(i,r)},eh.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},eh.toRadians=function(t){return t*Math.PI/180},eh.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?eh.COUNTERCLOCKWISE:n<0?eh.CLOCKWISE:eh.NONE},eh.angleBetweenOriented=function(t,e,n){var i=eh.angle(e,t),r=eh.angle(e,n)-i;return r<=-Math.PI?r+eh.PI_TIMES_2:r>Math.PI?r-eh.PI_TIMES_2:r},nh.PI_TIMES_2.get=function(){return 2*Math.PI},nh.PI_OVER_2.get=function(){return Math.PI/2},nh.PI_OVER_4.get=function(){return Math.PI/4},nh.COUNTERCLOCKWISE.get=function(){return Ml.COUNTERCLOCKWISE},nh.CLOCKWISE.get=function(){return Ml.CLOCKWISE},nh.NONE.get=function(){return Ml.COLLINEAR},Object.defineProperties(eh,nh);var ih=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Vc,this._seg1=new Vc,this._offset0=new Vc,this._offset1=new Vc,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new Pl,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Yc.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)},rh={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};ih.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Ml.computeOrientation(this._s0,this._s1,this._s2),i=n===Ml.CLOCKWISE&&this._side===Ju.LEFT||n===Ml.COUNTERCLOCKWISE&&this._side===Ju.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},ih.prototype.addLineEndCap=function(t,e){var n=new Vc(t,e),i=new Vc;this.computeOffsetSegment(n,Ju.LEFT,this._distance,i);var r=new Vc;this.computeOffsetSegment(n,Ju.RIGHT,this._distance,r);var o=Math.atan2(e.y-t.y,e.x-t.x);switch(this._bufParams.getEndCapStyle()){case Yc.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(e,o+Math.PI/2,o-Math.PI/2,Ml.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case Yc.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case Yc.CAP_SQUARE:var a=new Ys;a.x=Math.abs(this._distance)*Math.cos(o),a.y=Math.abs(this._distance)*Math.sin(o);var s=new Ys(i.p1.x+a.x,i.p1.y+a.y),l=new Ys(r.p1.x+a.x,r.p1.y+a.y);this._segList.addPt(s),this._segList.addPt(l)}},ih.prototype.getCoordinates=function(){return this._segList.getCoordinates()},ih.prototype.addMitreJoin=function(t,e,n,i){var r=!0,o=null;try{o=gl.intersection(e.p0,e.p1,n.p0,n.p1),(i<=0?1:o.distance(t)/Math.abs(i))>this._bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof dl))throw t;o=new Ys(0,0),r=!1}r?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())},ih.prototype.addFilletCorner=function(t,e,n,i,r){var o=Math.atan2(e.y-t.y,e.x-t.x),a=Math.atan2(n.y-t.y,n.x-t.x);i===Ml.CLOCKWISE?o<=a&&(o+=2*Math.PI):o>=a&&(o-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,o,a,i,r),this._segList.addPt(n)},ih.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*ih.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Yc.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Yc.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},ih.prototype.createSquare=function(t){this._segList.addPt(new Ys(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new Ys(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new Ys(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new Ys(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},ih.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},ih.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},ih.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},ih.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},ih.prototype.addLimitedMitreJoin=function(t,e,n,i){var r=this._seg0.p1,o=eh.angle(r,this._seg0.p0),a=eh.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,s=eh.normalize(o+a),l=eh.normalize(s+Math.PI),u=i*n,c=n-u*Math.abs(Math.sin(a)),h=r.x+u*Math.cos(l),p=r.y+u*Math.sin(l),f=new Ys(h,p),d=new Vc(r,f),m=d.pointAlongOffset(1,c),g=d.pointAlongOffset(1,-c);this._side===Ju.LEFT?(this._segList.addPt(m),this._segList.addPt(g)):(this._segList.addPt(g),this._segList.addPt(m))},ih.prototype.computeOffsetSegment=function(t,e,n,i){var r=e===Ju.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),l=r*n*o/s,u=r*n*a/s;i.p0.x=t.p0.x-u,i.p0.y=t.p0.y+l,i.p1.x=t.p1.x-u,i.p1.y=t.p1.y+l},ih.prototype.addFilletArc=function(t,e,n,i,r){var o=i===Ml.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var l=a/s,u=0,c=new Ys;u<a;){var h=e+o*u;c.x=t.x+r*Math.cos(h),c.y=t.y+r*Math.sin(h),this._segList.addPt(c),u+=l}},ih.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*ih.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new Ys((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new Ys((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},ih.prototype.createCircle=function(t){var e=new Ys(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},ih.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},ih.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new $c,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*ih.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},ih.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Yc.JOIN_BEVEL||this._bufParams.getJoinStyle()===Yc.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Ml.CLOCKWISE,this._distance))},ih.prototype.closeRing=function(){this._segList.closeRing()},ih.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},ih.prototype.interfaces_=function(){return[]},ih.prototype.getClass=function(){return ih},rh.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},rh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},rh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},rh.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(ih,rh);var oh=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};oh.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&Ql.reverse(o),o},oh.prototype.computeSingleSidedBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=Jc.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Ju.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{n.addSegments(t,!1);var s=Jc.simplify(t,i),l=s.length-1;n.initSideSegments(s[0],s[1],Ju.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment(),n.closeRing()},oh.prototype.computeRingBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);e===Ju.RIGHT&&(i=-i);var r=Jc.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var a=1;a<=o;a++)n.addNextSegment(r[a],1!==a);n.closeRing()},oh.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),i=Jc.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],Ju.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var a=Jc.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Ju.LEFT);for(var l=s-2;l>=0;l--)e.addNextSegment(a[l],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},oh.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Yc.CAP_ROUND:e.createCircle(t);break;case Yc.CAP_SQUARE:e.createSquare(t)}},oh.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);return t.length<=1?this.computePointCurve(t[0],i):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(t,e<0,i):this.computeLineBufferCurve(t,i),i.getCoordinates()},oh.prototype.getBufferParameters=function(){return this._bufParams},oh.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},oh.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return oh.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},oh.prototype.computeOffsetCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=Jc.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Ju.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{var s=Jc.simplify(t,i),l=s.length-1;n.initSideSegments(s[0],s[1],Ju.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment()},oh.prototype.getSegGen=function(t){return new ih(this._precisionModel,this._bufParams,t)},oh.prototype.interfaces_=function(){return[]},oh.prototype.getClass=function(){return oh},oh.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new Ys(t[n]);return e};var ah=function(){this._subgraphs=null,this._seg=new Vc,this._cga=new Ml;var t=arguments[0];this._subgraphs=t},sh={DepthSegment:{configurable:!0}};ah.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Yl,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(el(arguments[2],Wl)&&arguments[0]instanceof Ys&&arguments[1]instanceof dc){for(var o=arguments[0],a=arguments[1],s=arguments[2],l=a.getEdge().getCoordinates(),u=0;u<l.length-1;u++)if(this._seg.p0=l[u],this._seg.p1=l[u+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||Ml.computeOrientation(this._seg.p0,this._seg.p1,o)===Ml.RIGHT)){var c=a.getDepth(Ju.LEFT);this._seg.p0.equals(l[u])||(c=a.getDepth(Ju.RIGHT));var h=new lh(this._seg,c);s.add(h)}}else if(el(arguments[2],Wl)&&arguments[0]instanceof Ys&&el(arguments[1],Wl))for(var p=arguments[0],f=arguments[1],d=arguments[2],m=f.iterator();m.hasNext();){var g=m.next();g.isForward()&&this.findStabbedSegments(p,g,d)}},ah.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Ec.min(e)._leftDepth},ah.prototype.interfaces_=function(){return[]},ah.prototype.getClass=function(){return ah},sh.DepthSegment.get=function(){return lh},Object.defineProperties(ah,sh);var lh=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new Vc(t),this._leftDepth=e};lh.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},lh.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},lh.prototype.toString=function(){return this._upwardSeg.toString()},lh.prototype.interfaces_=function(){return[Xs]},lh.prototype.getClass=function(){return lh};var uh=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};uh.prototype.area=function(){return uh.area(this.p0,this.p1,this.p2)},uh.prototype.signedArea=function(){return uh.signedArea(this.p0,this.p1,this.p2)},uh.prototype.interpolateZ=function(t){if(null===t)throw new qs("Supplied point is null.");return uh.interpolateZ(t,this.p0,this.p1,this.p2)},uh.prototype.longestSideLength=function(){return uh.longestSideLength(this.p0,this.p1,this.p2)},uh.prototype.isAcute=function(){return uh.isAcute(this.p0,this.p1,this.p2)},uh.prototype.circumcentre=function(){return uh.circumcentre(this.p0,this.p1,this.p2)},uh.prototype.area3D=function(){return uh.area3D(this.p0,this.p1,this.p2)},uh.prototype.centroid=function(){return uh.centroid(this.p0,this.p1,this.p2)},uh.prototype.inCentre=function(){return uh.inCentre(this.p0,this.p1,this.p2)},uh.prototype.interfaces_=function(){return[]},uh.prototype.getClass=function(){return uh},uh.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},uh.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},uh.det=function(t,e,n,i){return t*i-e*n},uh.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,a=n.x-r,s=i.x-r,l=n.y-o,u=i.y-o,c=a*u-s*l,h=t.x-r,p=t.y-o;return e.z+(u*h-s*p)/c*(n.z-e.z)+(-l*h+a*p)/c*(i.z-e.z)},uh.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),a=i;return r>a&&(a=r),o>a&&(a=o),a},uh.isAcute=function(t,e,n){return!!eh.isAcute(t,e,n)&&!!eh.isAcute(e,n,t)&&!!eh.isAcute(n,t,e)},uh.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,a=t.y-r,s=e.x-i,l=e.y-r,u=2*uh.det(o,a,s,l),c=uh.det(a,o*o+a*a,l,s*s+l*l),h=uh.det(o,o*o+a*a,s,s*s+l*l);return new Ys(i-c/u,r+h/u)},uh.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new gl(t.x+n/2,t.y+i/2,1),o=new gl(t.x-i+n/2,t.y+n+i/2,1);return new gl(r,o)},uh.angleBisector=function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n));return new Ys(t.x+r*(n.x-t.x),t.y+r*(n.y-t.y))},uh.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,l=n.z-t.z,u=r*l-o*s,c=o*a-i*l,h=i*s-r*a;return Math.sqrt(u*u+c*c+h*h)/2},uh.centroid=function(t,e,n){return new Ys((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)},uh.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),a=i+r+o;return new Ys((i*t.x+r*e.x+o*n.x)/a,(i*t.y+r*e.y+o*n.y)/a)};var ch=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Yl;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};ch.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,$s.EXTERIOR,$s.INTERIOR)},ch.prototype.addPolygon=function(t){var e=this._distance,n=Ju.LEFT;this._distance<0&&(e=-this._distance,n=Ju.RIGHT);var i=t.getExteriorRing(),r=Ql.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,$s.EXTERIOR,$s.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Ql.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Ju.opposite(n),$s.INTERIOR,$s.EXTERIOR)}},ch.prototype.isTriangleErodedCompletely=function(t,e){var n=new uh(t[0],t[1],t[2]),i=n.inCentre();return Ml.distancePointLine(i,n.p0,n.p1)<Math.abs(e)},ch.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Ql.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,$s.EXTERIOR,$s.INTERIOR)},ch.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var i=new Bc(t,new rc(0,$s.BOUNDARY,e,n));this._curveList.add(i)},ch.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},ch.prototype.addPolygonRing=function(t,e,n,i,r){if(0===e&&t.length<Iu.MINIMUM_VALID_SIZE)return null;var o=i,a=r;t.length>=Iu.MINIMUM_VALID_SIZE&&Ml.isCCW(t)&&(o=r,a=i,n=Ju.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},ch.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Eu?this.addPolygon(t):t instanceof xu?this.addLineString(t):t instanceof Cu?this.addPoint(t):(t instanceof Su||t instanceof mu||t instanceof Tu||t instanceof du)&&this.addCollection(t)},ch.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r},ch.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},ch.prototype.interfaces_=function(){return[]},ch.prototype.getClass=function(){return ch};var hh=function(){};hh.prototype.locate=function(t){},hh.prototype.interfaces_=function(){return[]},hh.prototype.getClass=function(){return hh};var ph=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};ph.prototype.next=function(){if(this._atStart)return this._atStart=!1,ph.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new yr;var t=this._parent.getGeometryN(this._index++);return t instanceof du?(this._subcollectionIterator=new ph(t),this._subcollectionIterator.next()):t},ph.prototype.remove=function(){throw new Error(this.getClass().getName())},ph.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},ph.prototype.interfaces_=function(){return[Zl]},ph.prototype.getClass=function(){return ph},ph.isAtomic=function(t){return!(t instanceof du)};var fh=function(){this._geom=null;var t=arguments[0];this._geom=t};fh.prototype.locate=function(t){return fh.locate(t,this._geom)},fh.prototype.interfaces_=function(){return[hh]},fh.prototype.getClass=function(){return fh},fh.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Ml.isPointInRing(t,e.getCoordinates())},fh.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!fh.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(fh.isPointInRing(t,r))return!1}return!0},fh.containsPoint=function(t,e){if(e instanceof Eu)return fh.containsPointInPolygon(t,e);if(e instanceof du)for(var n=new ph(e);n.hasNext();){var i=n.next();if(i!==e&&fh.containsPoint(t,i))return!0}return!1},fh.locate=function(t,e){return e.isEmpty()?$s.EXTERIOR:fh.containsPoint(t,e)?$s.INTERIOR:$s.EXTERIOR};var dh=function(){this._edgeMap=new Er,this._edgeList=null,this._ptInAreaLocation=[$s.NONE,$s.NONE]};dh.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},dh.prototype.propagateSideLabels=function(t){for(var e=$s.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,Ju.LEFT)!==$s.NONE&&(e=i.getLocation(t,Ju.LEFT))}if(e===$s.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Ju.ON)===$s.NONE&&s.setLocation(t,Ju.ON,r),s.isArea(t)){var l=s.getLocation(t,Ju.LEFT),u=s.getLocation(t,Ju.RIGHT);if(u!==$s.NONE){if(u!==r)throw new tc("side location conflict",a.getCoordinate());l===$s.NONE&&Sl.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),r=l}else Sl.isTrue(s.getLocation(t,Ju.LEFT)===$s.NONE,"found single null side"),s.setLocation(t,Ju.RIGHT,r),s.setLocation(t,Ju.LEFT,r)}}},dh.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},dh.prototype.print=function(t){ml.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},dh.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},dh.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,Ju.LEFT);Sl.isTrue(i!==$s.NONE,"Found unlabelled area edge");for(var r=i,o=this.iterator();o.hasNext();){var a=o.next().getLabel();Sl.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Ju.LEFT),l=a.getLocation(t,Ju.RIGHT);if(s===l)return!1;if(l!==r)return!1;r=s}return!0},dh.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},dh.prototype.iterator=function(){return this.getEdges().iterator()},dh.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Yl(this._edgeMap.values())),this._edgeList},dh.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===$s.NONE&&(this._ptInAreaLocation[t]=fh.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},dh.prototype.toString=function(){var t=new rl;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},dh.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},dh.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===$s.BOUNDARY&&(e[r]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),l=0;l<2;l++)if(s.isAnyNull(l)){var u=$s.NONE;if(e[l])u=$s.EXTERIOR;else{var c=a.getCoordinate();u=this.getLocation(l,c,t)}s.setAllLocationsIfNull(l,u)}},dh.prototype.getDegree=function(){return this._edgeMap.size()},dh.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},dh.prototype.interfaces_=function(){return[]},dh.prototype.getClass=function(){return dh};var mh=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new tc("no outgoing dirEdge found",this.getCoordinate());Sl.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){this.insertEdgeEnd(t,t)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return hc.isNorthern(r)&&hc.isNorthern(o)?n:hc.isNorthern(r)||hc.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(Sl.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},e.prototype.print=function(t){ml.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Yl;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Ju.LEFT),i=t.getDepth(Ju.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new tc("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],a=arguments[1],s=arguments[2],l=o;l<a;l++){var u=this._edgeList.get(l);u.setEdgeDepths(Ju.RIGHT,s),s=u.getDepth(Ju.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var o=this._resultAreaEdgeList.get(r),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(Sl.isTrue(null!==e,"found null for first outgoing dirEdge"),Sl.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===n&&i++;return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=$s.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=$s.INTERIOR;break}if(i.isInResult()){t=$s.EXTERIOR;break}}}if(t===$s.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(r===$s.INTERIOR):(a.isInResult()&&(r=$s.EXTERIOR),s.isInResult()&&(r=$s.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new rc($s.NONE);for(var n=this.iterator();n.hasNext();)for(var i=n.next().getEdge().getLabel(),r=0;r<2;r++){var o=i.getLocation(r);o!==$s.INTERIOR&&o!==$s.BOUNDARY||this._label.setLocation(r,$s.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(dh),gh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createNode=function(t){return new uc(t,new mh)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mc),yh=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};yh.prototype.compareTo=function(t){return yh.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},yh.prototype.interfaces_=function(){return[Xs]},yh.prototype.getClass=function(){return yh},yh.orientation=function(t){return 1===Ql.increasingDirection(t)},yh.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,a=e?t.length:-1,s=i?n.length:-1,l=e?0:t.length-1,u=i?0:n.length-1;;){var c=t[l].compareTo(n[u]);if(0!==c)return c;var h=(l+=r)===a,p=(u+=o)===s;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var vh=function(){this._edges=new Yl,this._ocaMap=new Er};vh.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},vh.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},vh.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},vh.prototype.iterator=function(){return this._edges.iterator()},vh.prototype.getEdges=function(){return this._edges},vh.prototype.get=function(t){return this._edges.get(t)},vh.prototype.findEqualEdge=function(t){var e=new yh(t.getCoordinates());return this._ocaMap.get(e)},vh.prototype.add=function(t){this._edges.add(t);var e=new yh(t.getCoordinates());this._ocaMap.put(e,t)},vh.prototype.interfaces_=function(){return[]},vh.prototype.getClass=function(){return vh};var _h=function(){};_h.prototype.processIntersections=function(t,e,n,i){},_h.prototype.isDone=function(){},_h.prototype.interfaces_=function(){return[]},_h.prototype.getClass=function(){return _h};var bh=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};bh.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(bh.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},bh.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},bh.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},bh.prototype.getLineIntersector=function(){return this._li},bh.prototype.hasProperIntersection=function(){return this._hasProper},bh.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},bh.prototype.hasIntersection=function(){return this._hasIntersection},bh.prototype.isDone=function(){return!1},bh.prototype.hasInteriorIntersection=function(){return this._hasInterior},bh.prototype.interfaces_=function(){return[_h]},bh.prototype.getClass=function(){return bh},bh.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var xh=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new Ys(t),this.segmentIndex=e,this.dist=n};xh.prototype.getSegmentIndex=function(){return this.segmentIndex},xh.prototype.getCoordinate=function(){return this.coord},xh.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},xh.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},xh.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},xh.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},xh.prototype.getDistance=function(){return this.dist},xh.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},xh.prototype.interfaces_=function(){return[Xs]},xh.prototype.getClass=function(){return xh};var wh=function(){this._nodeMap=new Er,this.edge=null;var t=arguments[0];this.edge=t};wh.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},wh.prototype.iterator=function(){return this._nodeMap.values().iterator()},wh.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},wh.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},wh.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=e.dist>0||!e.coord.equals2D(this.edge.pts[e.segmentIndex]);i||n--;var r=new Array(n).fill(null),o=0;r[o++]=new Ys(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)r[o++]=this.edge.pts[a];return i&&(r[o]=e.coord),new Ih(r,new rc(this.edge._label))},wh.prototype.add=function(t,e,n){var i=new xh(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)},wh.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},wh.prototype.interfaces_=function(){return[]},wh.prototype.getClass=function(){return wh};var Ch=function(){};Ch.prototype.getChainStartIndices=function(t){var e=0,n=new Yl;n.add(new ol(e));do{var i=this.findChainEnd(t,e);n.add(new ol(i)),e=i}while(e<t.length-1);return Ch.toIntArray(n)},Ch.prototype.findChainEnd=function(t,e){for(var n=hc.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&hc.quadrant(t[i-1],t[i])===n;)i++;return i-1},Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch},Ch.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var kh=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new yl,this.env2=new yl;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Ch;this.startIndex=e.getChainStartIndices(this.pts)};kh.prototype.getCoordinates=function(){return this.pts},kh.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},kh.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},kh.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4],u=arguments[5],c=this.pts[r],h=this.pts[o],p=a.pts[s],f=a.pts[l];if(o-r==1&&l-s==1)return u.addIntersections(this.e,r,a.e,s),null;if(this.env1.init(c,h),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var d=Math.trunc((r+o)/2),m=Math.trunc((s+l)/2);r<d&&(s<m&&this.computeIntersectsForChain(r,d,a,s,m,u),m<l&&this.computeIntersectsForChain(r,d,a,m,l,u)),d<o&&(s<m&&this.computeIntersectsForChain(d,o,a,s,m,u),m<l&&this.computeIntersectsForChain(d,o,a,m,l,u))}},kh.prototype.getStartIndexes=function(){return this.startIndex},kh.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},kh.prototype.interfaces_=function(){return[]},kh.prototype.getClass=function(){return kh};var Eh=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},Sh={NULL_VALUE:{configurable:!0}};Eh.prototype.getDepth=function(t,e){return this._depth[t][e]},Eh.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},Eh.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==Eh.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===Eh.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._depth[i][r]===Eh.NULL_VALUE}},Eh.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}},Eh.prototype.getDelta=function(t){return this._depth[t][Ju.RIGHT]-this._depth[t][Ju.LEFT]},Eh.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?$s.EXTERIOR:$s.INTERIOR},Eh.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Eh.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var i=t.getLocation(e,n);i!==$s.EXTERIOR&&i!==$s.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=Eh.depthAtLocation(i):this._depth[e][n]+=Eh.depthAtLocation(i))}else if(3===arguments.length){var r=arguments[0],o=arguments[1];arguments[2]===$s.INTERIOR&&this._depth[r][o]++}},Eh.prototype.interfaces_=function(){return[]},Eh.prototype.getClass=function(){return Eh},Eh.depthAtLocation=function(t){return t===$s.EXTERIOR?0:t===$s.INTERIOR?1:Eh.NULL_VALUE},Sh.NULL_VALUE.get=function(){return-1},Object.defineProperties(Eh,Sh);var Ih=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new wh(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Eh,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.pts=i,this._label=r}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,rc.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var i=!0,r=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(i=!1),this.pts[a].equals2D(n.pts[--o])||(r=!1),!i&&!r)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new kh(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new yl;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,i){var r=new Ys(t.getIntersection(i)),o=e,a=t.getEdgeDistance(n,i),s=o+1;s<this.pts.length&&r.equals2D(this.pts[s])&&(o=s,a=0),this.eiList.add(r,o,a)},e.prototype.toString=function(){var t=new rl;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ju.ON),e.getLocation(1,Ju.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ju.LEFT),e.getLocation(1,Ju.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ju.RIGHT),e.getLocation(1,Ju.RIGHT),2))},e}(lc),Th=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new vh,this._bufParams=t||null};Th.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},Th.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new rc(t.getLabel())).flip(),n.merge(i);var r=Th.depthDelta(i),o=e.getDepthDelta()+r;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(Th.depthDelta(t.getLabel()))},Th.prototype.buildSubgraphs=function(t,e){for(var n=new Yl,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),a=new ah(n).getDepth(o);r.computeDepth(a),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},Th.prototype.createSubgraphs=function(t){for(var e=new Yl,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new nc;r.create(i),e.add(r)}}return Ec.sort(e,Ec.reverseOrder()),e},Th.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Th.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Zc,n=new Pl;return n.setPrecisionModel(t),e.setSegmentIntersector(new bh(n)),e},Th.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new oh(n,this._bufParams),r=new ch(t,e,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new gc(new gh),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new yc(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},Th.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=r.getData(),s=new Ih(r.getCoordinates(),new rc(a));this.insertUniqueEdge(s)}}},Th.prototype.setNoder=function(t){this._workingNoder=t},Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th},Th.depthDelta=function(t){var e=t.getLocation(0,Ju.LEFT),n=t.getLocation(0,Ju.RIGHT);return e===$s.INTERIOR&&n===$s.EXTERIOR?1:e===$s.EXTERIOR&&n===$s.INTERIOR?-1:0},Th.convertSegStrings=function(t){for(var e=new qu,n=new Yl;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)};var Ph=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=i,this._offsetX=r,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};Ph.prototype.rescale=function(){if(el(arguments[0],Hl))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],i=0;i<n.length;i++)n[i].x=n[i].x/this._scaleFactor+this._offsetX,n[i].y=n[i].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&ml.out.println(n)}},Ph.prototype.scale=function(){if(el(arguments[0],Hl)){for(var t=arguments[0],e=new Yl,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Bc(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),a=0;a<r.length;a++)o[a]=new Ys(Math.round((r[a].x-this._offsetX)*this._scaleFactor),Math.round((r[a].y-this._offsetY)*this._scaleFactor),r[a].z);return Ql.removeRepeatedPoints(o)}},Ph.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},Ph.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},Ph.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},Ph.prototype.interfaces_=function(){return[Hc]},Ph.prototype.getClass=function(){return Ph};var Ah=function(){this._li=new Pl,this._segStrings=null;var t=arguments[0];this._segStrings=t},Lh={fact:{configurable:!0}};Ah.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var r=i.next().getCoordinates(),o=1;o<r.length-1;o++)if(r[o].equals(n))throw new kl("found endpt/interior pt intersection at index "+o+" :pt "+n)},Ah.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],a=r.getCoordinates(),s=o.getCoordinates(),l=0;l<a.length-1;l++)for(var u=0;u<s.length-1;u++)this.checkInteriorIntersections(r,l,o,u);else if(4===arguments.length){var c=arguments[0],h=arguments[1],p=arguments[2],f=arguments[3];if(c===p&&h===f)return null;var d=c.getCoordinates()[h],m=c.getCoordinates()[h+1],g=p.getCoordinates()[f],y=p.getCoordinates()[f+1];if(this._li.computeIntersection(d,m,g,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,m)||this.hasInteriorIntersection(this._li,g,y)))throw new kl("found non-noded intersection at "+d+"-"+m+" and "+g+"-"+y)}},Ah.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Ah.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])},Ah.prototype.hasInteriorIntersection=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},Ah.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new kl("found non-noded collapse at "+Ah.fact.createLineString([t,e,n]))},Ah.prototype.interfaces_=function(){return[]},Ah.prototype.getClass=function(){return Ah},Lh.fact.get=function(){return new qu},Object.defineProperties(Ah,Lh);var Mh=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new qs("Scale factor must be non-zero");1!==e&&(this._pt=new Ys(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new Ys,this._p1Scaled=new Ys),this.initCorners(this._pt)},Rh={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Mh.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>i||this._maxy<r||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return Sl.isTrue(!(a&&s),"Found bad envelope test"),s},Mh.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new Ys(this._maxx,this._maxy),this._corner[1]=new Ys(this._minx,this._maxy),this._corner[2]=new Ys(this._minx,this._miny),this._corner[3]=new Ys(this._maxx,this._miny)},Mh.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Mh.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},Mh.prototype.getCoordinate=function(){return this._originalPt},Mh.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},Mh.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=Mh.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new yl(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},Mh.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},Mh.prototype.intersectsToleranceSquare=function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||t.equals(this._pt)||e.equals(this._pt)))))},Mh.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},Mh.prototype.interfaces_=function(){return[]},Mh.prototype.getClass=function(){return Mh},Rh.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Mh,Rh);var Oh=function(){this.tempEnv1=new yl,this.selectedSegment=new Vc};Oh.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},Oh.prototype.interfaces_=function(){return[]},Oh.prototype.getClass=function(){return Oh};var Dh=function(){this._index=null;var t=arguments[0];this._index=t},Nh={HotPixelSnapAction:{configurable:!0}};Dh.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new Fh(e,n,i);return this._index.query(r,{interfaces_:function(){return[xc]},visitItem:function(t){t.select(r,o)}}),o.isNodeAdded()}},Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh},Nh.HotPixelSnapAction.get=function(){return Fh},Object.defineProperties(Dh,Nh);var Fh=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],i=e.getContext();if(null!==this._parentEdge&&i===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Oh),zh=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Yl};zh.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}},zh.prototype.isDone=function(){return!1},zh.prototype.getInteriorIntersections=function(){return this._interiorIntersections},zh.prototype.interfaces_=function(){return[_h]},zh.prototype.getClass=function(){return zh};var Bh=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Pl,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Bh.prototype.checkCorrectness=function(t){var e=Bc.getNodedSubstrings(t),n=new Ah(e);try{n.checkValid()}catch(t){if(!(t instanceof fl))throw t;t.printStackTrace()}},Bh.prototype.getNodedSubstrings=function(){return Bc.getNodedSubstrings(this._nodedSegStrings)},Bh.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},Bh.prototype.findInteriorIntersections=function(t,e){var n=new zh(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},Bh.prototype.computeVertexSnaps=function(){if(el(arguments[0],Hl))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof Bc)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var o=new Mh(i[r],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,r)&&n.addIntersection(i[r],r)}},Bh.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Zc,this._pointSnapper=new Dh(this._noder.getIndex()),this.snapRound(t,this._li)},Bh.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new Mh(n,this._scaleFactor,this._li);this._pointSnapper.snap(i)}},Bh.prototype.interfaces_=function(){return[Hc]},Bh.prototype.getClass=function(){return Bh};var Vh=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Yc,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},Uh={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Vh.prototype.bufferFixedPrecision=function(t){var e=new Ph(new Bh(new Bu(1)),t.getScale()),n=new Th(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Vh.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Vh.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof tc))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],i=Vh.precisionScaleFactor(this._argGeom,this._distance,n),r=new Bu(i);this.bufferFixedPrecision(r)}},Vh.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Bu.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Vh.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Vh.prototype.bufferOriginalPrecision=function(){try{var t=new Th(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof kl))throw t;this._saveException=t}},Vh.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Vh.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Vh.prototype.interfaces_=function(){return[]},Vh.prototype.getClass=function(){return Vh},Vh.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Vh(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Dl&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1],r=arguments[2],o=new Vh(n);return o.setQuadrantSegments(r),o.getResultGeometry(i)}if(arguments[2]instanceof Yc&&arguments[0]instanceof Dl&&"number"==typeof arguments[1]){var a=arguments[0],s=arguments[1],l=arguments[2];return new Vh(a,l).getResultGeometry(s)}}else if(4===arguments.length){var u=arguments[0],c=arguments[1],h=arguments[2],p=arguments[3],f=new Vh(u);return f.setQuadrantSegments(h),f.setEndCapStyle(p),f.getResultGeometry(c)}},Vh.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=nl.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)},Uh.CAP_ROUND.get=function(){return Yc.CAP_ROUND},Uh.CAP_BUTT.get=function(){return Yc.CAP_FLAT},Uh.CAP_FLAT.get=function(){return Yc.CAP_FLAT},Uh.CAP_SQUARE.get=function(){return Yc.CAP_SQUARE},Uh.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Vh,Uh);var jh=function(){this._pt=[new Ys,new Ys],this._distance=Gs.NaN,this._isNull=!0};jh.prototype.getCoordinates=function(){return this._pt},jh.prototype.getCoordinate=function(t){return this._pt[t]},jh.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},jh.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},jh.prototype.getDistance=function(){return this._distance},jh.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},jh.prototype.interfaces_=function(){return[]},jh.prototype.getClass=function(){return jh};var qh=function(){};qh.prototype.interfaces_=function(){return[]},qh.prototype.getClass=function(){return qh},qh.computeDistance=function(){if(arguments[2]instanceof jh&&arguments[0]instanceof xu&&arguments[1]instanceof Ys)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=t.getCoordinates(),r=new Vc,o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof jh&&arguments[0]instanceof Eu&&arguments[1]instanceof Ys){var s=arguments[0],l=arguments[1],u=arguments[2];qh.computeDistance(s.getExteriorRing(),l,u);for(var c=0;c<s.getNumInteriorRing();c++)qh.computeDistance(s.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof jh&&arguments[0]instanceof Dl&&arguments[1]instanceof Ys){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof xu)qh.computeDistance(h,p,f);else if(h instanceof Eu)qh.computeDistance(h,p,f);else if(h instanceof du)for(var d=h,m=0;m<d.getNumGeometries();m++){var g=d.getGeometryN(m);qh.computeDistance(g,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof jh&&arguments[0]instanceof Vc&&arguments[1]instanceof Ys){var y=arguments[0],v=arguments[1],_=arguments[2],b=y.closestPoint(v);_.setMinimum(b,v)}};var Gh=function(t){this._maxPtDist=new jh,this._inputGeom=t||null},Hh={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Gh.prototype.computeMaxMidpointDistance=function(t){var e=new Zh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Gh.prototype.computeMaxVertexDistance=function(t){var e=new Xh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Gh.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Gh.prototype.getDistancePoints=function(){return this._maxPtDist},Gh.prototype.interfaces_=function(){return[]},Gh.prototype.getClass=function(){return Gh},Hh.MaxPointDistanceFilter.get=function(){return Xh},Hh.MaxMidpointDistanceFilter.get=function(){return Zh},Object.defineProperties(Gh,Hh);var Xh=function(t){this._maxPtDist=new jh,this._minPtDist=new jh,this._geom=t||null};Xh.prototype.filter=function(t){this._minPtDist.initialize(),qh.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Xh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Xh.prototype.interfaces_=function(){return[zl]},Xh.prototype.getClass=function(){return Xh};var Zh=function(t){this._maxPtDist=new jh,this._minPtDist=new jh,this._geom=t||null};Zh.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=new Ys((n.x+i.x)/2,(n.y+i.y)/2);this._minPtDist.initialize(),qh.computeDistance(this._geom,r,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Zh.prototype.isDone=function(){return!1},Zh.prototype.isGeometryChanged=function(){return!1},Zh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Zh.prototype.interfaces_=function(){return[fu]},Zh.prototype.getClass=function(){return Zh};var Wh=function(t){this._comps=t||null};Wh.prototype.filter=function(t){t instanceof Eu&&this._comps.add(t)},Wh.prototype.interfaces_=function(){return[pu]},Wh.prototype.getClass=function(){return Wh},Wh.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Wh.getPolygons(t,new Yl)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Eu?n.add(e):e instanceof du&&e.apply(new Wh(n)),n}};var Yh=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Yh.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof Iu){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof xu&&this._lines.add(t)},Yh.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Yh.prototype.interfaces_=function(){return[Ol]},Yh.prototype.getClass=function(){return Yh},Yh.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Yh.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Yh.getLines(e,n))}},Yh.getLines=function(){if(1===arguments.length){var t=arguments[0];return Yh.getLines(t,!1)}if(2===arguments.length){if(el(arguments[0],Hl)&&el(arguments[1],Hl)){for(var e=arguments[0],n=arguments[1],i=e.iterator();i.hasNext();){var r=i.next();Yh.getLines(r,n)}return n}if(arguments[0]instanceof Dl&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new Yl;return o.apply(new Yh(s,a)),s}if(arguments[0]instanceof Dl&&el(arguments[1],Hl)){var l=arguments[0],u=arguments[1];return l instanceof xu?u.add(l):l.apply(new Yh(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&el(arguments[0],Hl)&&el(arguments[1],Hl)){for(var c=arguments[0],h=arguments[1],p=arguments[2],f=c.iterator();f.hasNext();){var d=f.next();Yh.getLines(d,h,p)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Dl&&el(arguments[1],Hl)){var m=arguments[0],g=arguments[1],y=arguments[2];return m.apply(new Yh(g,y)),g}}};var Kh=function(){if(this._boundaryRule=Bl.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new qs("Rule must be non-null");this._boundaryRule=t}};Kh.prototype.locateInternal=function(){if(arguments[0]instanceof Ys&&arguments[1]instanceof Eu){var t=arguments[0],e=arguments[1];if(e.isEmpty())return $s.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===$s.EXTERIOR)return $s.EXTERIOR;if(i===$s.BOUNDARY)return $s.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),a=this.locateInPolygonRing(t,o);if(a===$s.INTERIOR)return $s.EXTERIOR;if(a===$s.BOUNDARY)return $s.BOUNDARY}return $s.INTERIOR}if(arguments[0]instanceof Ys&&arguments[1]instanceof xu){var s=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(s))return $s.EXTERIOR;var u=l.getCoordinates();return l.isClosed()||!s.equals(u[0])&&!s.equals(u[u.length-1])?Ml.isOnLine(s,u)?$s.INTERIOR:$s.EXTERIOR:$s.BOUNDARY}if(arguments[0]instanceof Ys&&arguments[1]instanceof Cu){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?$s.INTERIOR:$s.EXTERIOR}},Kh.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Ml.locatePointInRing(t,e.getCoordinates()):$s.EXTERIOR},Kh.prototype.intersects=function(t,e){return this.locate(t,e)!==$s.EXTERIOR},Kh.prototype.updateLocationInfo=function(t){t===$s.INTERIOR&&(this._isIn=!0),t===$s.BOUNDARY&&this._numBoundaries++},Kh.prototype.computeLocation=function(t,e){if(e instanceof Cu&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof xu)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Eu)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof mu)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof Tu)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof du)for(var l=new ph(e);l.hasNext();){var u=l.next();u!==e&&this.computeLocation(t,u)}},Kh.prototype.locate=function(t,e){return e.isEmpty()?$s.EXTERIOR:e instanceof xu||e instanceof Eu?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?$s.BOUNDARY:this._numBoundaries>0||this._isIn?$s.INTERIOR:$s.EXTERIOR)},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh};var Jh=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._component=i,this._segIndex=r,this._pt=o}},Qh={INSIDE_AREA:{configurable:!0}};Jh.prototype.isInsideArea=function(){return this._segIndex===Jh.INSIDE_AREA},Jh.prototype.getCoordinate=function(){return this._pt},Jh.prototype.getGeometryComponent=function(){return this._component},Jh.prototype.getSegmentIndex=function(){return this._segIndex},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh},Qh.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Jh,Qh);var $h=function(t){this._pts=t||null};$h.prototype.filter=function(t){t instanceof Cu&&this._pts.add(t)},$h.prototype.interfaces_=function(){return[pu]},$h.prototype.getClass=function(){return $h},$h.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Cu?Ec.singletonList(t):$h.getPoints(t,new Yl)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Cu?n.add(e):e instanceof du&&e.apply(new $h(n)),n}};var tp=function(){this._locations=null;var t=arguments[0];this._locations=t};tp.prototype.filter=function(t){(t instanceof Cu||t instanceof xu||t instanceof Eu)&&this._locations.add(new Jh(t,0,t.getCoordinate()))},tp.prototype.interfaces_=function(){return[pu]},tp.prototype.getClass=function(){return tp},tp.getLocations=function(t){var e=new Yl;return t.apply(new tp(e)),e};var ep=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Kh,this._minDistanceLocation=null,this._minDistance=Gs.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=r}};ep.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=Wh.getPolygons(this._geom[e]);if(r.size()>0){var o=tp.getLocations(this._geom[i]);if(this.computeContainmentDistance(o,r,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&el(arguments[0],Wl)&&el(arguments[1],Wl)){for(var a=arguments[0],s=arguments[1],l=arguments[2],u=0;u<a.size();u++)for(var c=a.get(u),h=0;h<s.size();h++)if(this.computeContainmentDistance(c,s.get(h),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Jh&&arguments[1]instanceof Eu){var p=arguments[0],f=arguments[1],d=arguments[2],m=p.getCoordinate();if($s.EXTERIOR!==this._ptLocator.locate(m,f))return this._minDistance=0,d[0]=p,d[1]=new Jh(f,m),null}},ep.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(r,a,n),this._minDistance<=this._terminateDistance)return null}},ep.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Yh.getLines(this._geom[0]),n=Yh.getLines(this._geom[1]),i=$h.getPoints(this._geom[0]),r=$h.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},ep.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},ep.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},ep.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},ep.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof xu&&arguments[1]instanceof Cu){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),o=0;o<i.length-1;o++){var a=Ml.distancePointLine(r,i[o],i[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new Vc(i[o],i[o+1]).closestPoint(r);n[0]=new Jh(t,o,s),n[1]=new Jh(e,0,r)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof xu&&arguments[1]instanceof xu){var l=arguments[0],u=arguments[1],c=arguments[2];if(l.getEnvelopeInternal().distance(u.getEnvelopeInternal())>this._minDistance)return null;for(var h=l.getCoordinates(),p=u.getCoordinates(),f=0;f<h.length-1;f++)for(var d=0;d<p.length-1;d++){var m=Ml.distanceLineLine(h[f],h[f+1],p[d],p[d+1]);if(m<this._minDistance){this._minDistance=m;var g=new Vc(h[f],h[f+1]),y=new Vc(p[d],p[d+1]),v=g.closestPoints(y);c[0]=new Jh(l,f,v[0]),c[1]=new Jh(u,d,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},ep.prototype.computeMinDistancePoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var a=e.get(o),s=r.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Jh(r,0,r.getCoordinate()),n[1]=new Jh(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},ep.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new qs("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},ep.prototype.computeMinDistanceLines=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(r,a,n),this._minDistance<=this._terminateDistance)return null}},ep.prototype.interfaces_=function(){return[]},ep.prototype.getClass=function(){return ep},ep.distance=function(t,e){return new ep(t,e).distance()},ep.isWithinDistance=function(t,e,n){return new ep(t,e,n).distance()<=n},ep.nearestPoints=function(t,e){return new ep(t,e).nearestPoints()};var np=function(){this._pt=[new Ys,new Ys],this._distance=Gs.NaN,this._isNull=!0};np.prototype.getCoordinates=function(){return this._pt},np.prototype.getCoordinate=function(t){return this._pt[t]},np.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},np.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},np.prototype.toString=function(){return Cl.toLineString(this._pt[0],this._pt[1])},np.prototype.getDistance=function(){return this._distance},np.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np};var ip=function(){};ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip},ip.computeDistance=function(){if(arguments[2]instanceof np&&arguments[0]instanceof xu&&arguments[1]instanceof Ys)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=new Vc,r=t.getCoordinates(),o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var a=i.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof np&&arguments[0]instanceof Eu&&arguments[1]instanceof Ys){var s=arguments[0],l=arguments[1],u=arguments[2];ip.computeDistance(s.getExteriorRing(),l,u);for(var c=0;c<s.getNumInteriorRing();c++)ip.computeDistance(s.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof np&&arguments[0]instanceof Dl&&arguments[1]instanceof Ys){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof xu)ip.computeDistance(h,p,f);else if(h instanceof Eu)ip.computeDistance(h,p,f);else if(h instanceof du)for(var d=h,m=0;m<d.getNumGeometries();m++){var g=d.getGeometryN(m);ip.computeDistance(g,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof np&&arguments[0]instanceof Vc&&arguments[1]instanceof Ys){var y=arguments[0],v=arguments[1],_=arguments[2],b=y.closestPoint(v);_.setMinimum(b,v)}};var rp=function(){this._g0=null,this._g1=null,this._ptDist=new np,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},op={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};rp.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},rp.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new qs("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},rp.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},rp.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},rp.prototype.computeOrientedDistance=function(t,e,n){var i=new ap(e);if(t.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var r=new sp(e,this._densifyFrac);t.apply(r),n.setMaximum(r.getMaxPointDistance())}},rp.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp},rp.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new rp(t,e).distance()}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new rp(n,i);return o.setDensifyFraction(r),o.distance()}},op.MaxPointDistanceFilter.get=function(){return ap},op.MaxDensifiedByFractionDistanceFilter.get=function(){return sp},Object.defineProperties(rp,op);var ap=function(){this._maxPtDist=new np,this._minPtDist=new np,this._euclideanDist=new ip,this._geom=null;var t=arguments[0];this._geom=t};ap.prototype.filter=function(t){this._minPtDist.initialize(),ip.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},ap.prototype.getMaxPointDistance=function(){return this._maxPtDist},ap.prototype.interfaces_=function(){return[zl]},ap.prototype.getClass=function(){return ap};var sp=function(){this._maxPtDist=new np,this._minPtDist=new np,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};sp.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=(i.x-n.x)/this._numSubSegs,o=(i.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=new Ys(n.x+a*r,n.y+a*o);this._minPtDist.initialize(),ip.computeDistance(this._geom,s,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},sp.prototype.isDone=function(){return!1},sp.prototype.isGeometryChanged=function(){return!1},sp.prototype.getMaxPointDistance=function(){return this._maxPtDist},sp.prototype.interfaces_=function(){return[fu]},sp.prototype.getClass=function(){return sp};var lp=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},up={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};lp.prototype.checkMaximumDistance=function(t,e,n){var i=new rp(e,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var r=i.getCoordinates();this._errorLocation=r[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Cl.toLineString(r[0],r[1])+")"}},lp.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=lp.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),lp.VERBOSE&&ml.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},lp.prototype.checkNegativeValid=function(){if(!(this._input instanceof Eu||this._input instanceof Tu||this._input instanceof du))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},lp.prototype.getErrorIndicator=function(){return this._errorIndicator},lp.prototype.checkMinimumDistance=function(t,e,n){var i=new ep(t,e,n);if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1;var r=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Cl.toLineString(r[0],r[1])+" )"}},lp.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},lp.prototype.getErrorLocation=function(){return this._errorLocation},lp.prototype.getPolygonLines=function(t){for(var e=new Yl,n=new Yh(e),i=Wh.getPolygons(t).iterator();i.hasNext();)i.next().apply(n);return t.getFactory().buildGeometry(e)},lp.prototype.getErrorMessage=function(){return this._errMsg},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},up.VERBOSE.get=function(){return!1},up.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(lp,up);var cp=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},hp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};cp.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},cp.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*cp.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new yl(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new yl(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},cp.prototype.checkDistance=function(){var t=new lp(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},cp.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},cp.prototype.checkPolygonal=function(){this._result instanceof Eu||this._result instanceof Tu||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},cp.prototype.getErrorIndicator=function(){return this._errorIndicator},cp.prototype.getErrorLocation=function(){return this._errorLocation},cp.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},cp.prototype.report=function(t){if(!cp.VERBOSE)return null;ml.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},cp.prototype.getErrorMessage=function(){return this._errorMsg},cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp},cp.isValidMsg=function(t,e,n){var i=new cp(t,e,n);return i.isValid()?null:i.getErrorMessage()},cp.isValid=function(t,e,n){return!!new cp(t,e,n).isValid()},hp.VERBOSE.get=function(){return!1},hp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(cp,hp);var pp=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};pp.prototype.getCoordinates=function(){return this._pts},pp.prototype.size=function(){return this._pts.length},pp.prototype.getCoordinate=function(t){return this._pts[t]},pp.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},pp.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:Nc.octant(this.getCoordinate(t),this.getCoordinate(t+1))},pp.prototype.setData=function(t){this._data=t},pp.prototype.getData=function(){return this._data},pp.prototype.toString=function(){return Cl.toLineString(new Ou(this._pts))},pp.prototype.interfaces_=function(){return[Fc]},pp.prototype.getClass=function(){return pp};var fp=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Yl,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};fp.prototype.getInteriorIntersection=function(){return this._interiorIntersection},fp.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},fp.prototype.getIntersectionSegments=function(){return this._intSegments},fp.prototype.count=function(){return this._intersectionCount},fp.prototype.getIntersections=function(){return this._intersections},fp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},fp.prototype.setKeepIntersections=function(t){this._keepIntersections=t},fp.prototype.processIntersections=function(t,e,n,i){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,i))return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},fp.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},fp.prototype.hasIntersection=function(){return null!==this._interiorIntersection},fp.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},fp.prototype.interfaces_=function(){return[_h]},fp.prototype.getClass=function(){return fp},fp.createAllIntersectionsFinder=function(t){var e=new fp(t);return e.setFindAllIntersections(!0),e},fp.createAnyIntersectionFinder=function(t){return new fp(t)},fp.createIntersectionCounter=function(t){var e=new fp(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var dp=function(){this._li=new Pl,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};dp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},dp.prototype.getIntersections=function(){return this._segInt.getIntersections()},dp.prototype.isValid=function(){return this.execute(),this._isValid},dp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},dp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new fp(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Zc;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},dp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new tc(this.getErrorMessage(),this._segInt.getInteriorIntersection())},dp.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Cl.toLineString(t[0],t[1])+" and "+Cl.toLineString(t[2],t[3])},dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp},dp.computeIntersections=function(t){var e=new dp(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var mp=function t(){this._nv=null;var e=arguments[0];this._nv=new dp(t.toSegmentStrings(e))};mp.prototype.checkValid=function(){this._nv.checkValid()},mp.prototype.interfaces_=function(){return[]},mp.prototype.getClass=function(){return mp},mp.toSegmentStrings=function(t){for(var e=new Yl,n=t.iterator();n.hasNext();){var i=n.next();e.add(new pp(i.getCoordinates(),i))}return e},mp.checkValid=function(t){new mp(t).checkValid()};var gp=function(t){this._mapOp=t};gp.prototype.map=function(t){for(var e=new Yl,n=0;n<t.getNumGeometries();n++){var i=this._mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(qu.toGeometryArray(e))},gp.prototype.interfaces_=function(){return[]},gp.prototype.getClass=function(){return gp},gp.map=function(t,e){return new gp(e).map(t)};var yp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Yl,this._resultLineList=new Yl;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};yp.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},yp.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},yp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},yp.prototype.collectLineEdge=function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Jp.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},yp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this._op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}},yp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},yp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(i),n.setInResult(!0)}},yp.prototype.collectBoundaryTouchEdge=function(t,e,n){var i=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(Sl.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Jp.isResultOfOp(i,e)&&e===Jp.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},yp.prototype.interfaces_=function(){return[]},yp.prototype.getClass=function(){return yp};var vp=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Yl;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};vp.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},vp.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Jp.INTERSECTION)){var i=n.getLabel();Jp.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},vp.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},vp.prototype.interfaces_=function(){return[]},vp.prototype.getClass=function(){return vp};var _p=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};_p.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},_p.prototype.transformPolygon=function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof Iu&&!i.isEmpty()||(n=!1);for(var r=new Yl,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof Iu||(n=!1),r.add(a))}if(n)return this._factory.createPolygon(i,r.toArray([]));var s=new Yl;return null!==i&&s.add(i),s.addAll(r),this._factory.buildGeometry(s)},_p.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},_p.prototype.getInputGeometry=function(){return this._inputGeom},_p.prototype.transformMultiLineString=function(t,e){for(var n=new Yl,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},_p.prototype.transformCoordinates=function(t,e){return this.copy(t)},_p.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},_p.prototype.transformMultiPoint=function(t,e){for(var n=new Yl,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},_p.prototype.transformMultiPolygon=function(t,e){for(var n=new Yl,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},_p.prototype.copy=function(t){return t.copy()},_p.prototype.transformGeometryCollection=function(t,e){for(var n=new Yl,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(qu.toGeometryArray(n)):this._factory.buildGeometry(n)},_p.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Cu)return this.transformPoint(t,null);if(t instanceof Su)return this.transformMultiPoint(t,null);if(t instanceof Iu)return this.transformLinearRing(t,null);if(t instanceof xu)return this.transformLineString(t,null);if(t instanceof mu)return this.transformMultiLineString(t,null);if(t instanceof Eu)return this.transformPolygon(t,null);if(t instanceof Tu)return this.transformMultiPolygon(t,null);if(t instanceof du)return this.transformGeometryCollection(t,null);throw new qs("Unknown Geometry subtype: "+t.getClass().getName())},_p.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},_p.prototype.interfaces_=function(){return[]},_p.prototype.getClass=function(){return _p};var bp=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Vc,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof xu&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var i=arguments[0],r=arguments[1];this._srcPts=i,this._isClosed=t.isClosed(i),this._snapTolerance=r}};bp.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new Ys(o)),0===i&&this._isClosed&&t.set(t.size()-1,new Ys(o)))}},bp.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},bp.prototype.snapTo=function(t){var e=new Jl(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},bp.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new Ys(r),!1)}},bp.prototype.findSegmentIndexToSnap=function(t,e){for(var n=Gs.MAX_VALUE,i=-1,r=0;r<e.size()-1;r++){if(this._seg.p0=e.get(r),this._seg.p1=e.get(r+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,i=r)}return i},bp.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},bp.prototype.interfaces_=function(){return[]},bp.prototype.getClass=function(){return bp},bp.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var xp=function(t){this._srcGeom=t||null},wp={SNAP_PRECISION_FACTOR:{configurable:!0}};xp.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Cp(e,n).transform(this._srcGeom)},xp.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),i=new Cp(t,n,!0).transform(this._srcGeom),r=i;return e&&el(r,ku)&&(r=i.buffer(0)),r},xp.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},xp.prototype.extractTargetCoordinates=function(t){for(var e=new Ir,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},xp.prototype.computeMinimumSegmentLength=function(t){for(var e=Gs.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e},xp.prototype.interfaces_=function(){return[]},xp.prototype.getClass=function(){return xp},xp.snap=function(t,e,n){var i=new Array(2).fill(null),r=new xp(t);i[0]=r.snapTo(e,n);var o=new xp(e);return i[1]=o.snapTo(i[0],n),i},xp.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=xp.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Bu.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(xp.computeOverlaySnapTolerance(r),xp.computeOverlaySnapTolerance(o))}},xp.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*xp.SNAP_PRECISION_FACTOR},xp.snapToSelf=function(t,e,n){return new xp(t).snapToSelf(e,n)},wp.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(xp,wp);var Cp=function(t){function e(e,n,i){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==i&&i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.snapLine=function(t,e){var n=new bp(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(_p),kp=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};kp.prototype.getCommon=function(){return Gs.longBitsToDouble(this._commonBits)},kp.prototype.add=function(t){var e=Gs.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=kp.signExpBits(this._commonBits),this._isFirst=!1,null):kp.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=kp.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=kp.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},kp.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=Gs.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+Gs.toBinaryString(t),i=n.substring(n.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]"}},kp.prototype.interfaces_=function(){return[]},kp.prototype.getClass=function(){return kp},kp.getBit=function(t,e){return 0!=(t&1<<e)?1:0},kp.signExpBits=function(t){return t>>52},kp.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},kp.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if(kp.getBit(t,i)!==kp.getBit(e,i))return n;n++}return 52};var Ep=function(){this._commonCoord=null,this._ccFilter=new Ip},Sp={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Ep.prototype.addCommonBits=function(t){var e=new Tp(this._commonCoord);t.apply(e),t.geometryChanged()},Ep.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new Ys(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new Tp(e);return t.apply(n),t.geometryChanged(),t},Ep.prototype.getCommonCoordinate=function(){return this._commonCoord},Ep.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Ep.prototype.interfaces_=function(){return[]},Ep.prototype.getClass=function(){return Ep},Sp.CommonCoordinateFilter.get=function(){return Ip},Sp.Translater.get=function(){return Tp},Object.defineProperties(Ep,Sp);var Ip=function(){this._commonBitsX=new kp,this._commonBitsY=new kp};Ip.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},Ip.prototype.getCommonCoordinate=function(){return new Ys(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Ip.prototype.interfaces_=function(){return[zl]},Ip.prototype.getClass=function(){return Ip};var Tp=function(){this.trans=null;var t=arguments[0];this.trans=t};Tp.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},Tp.prototype.isDone=function(){return!1},Tp.prototype.isGeometryChanged=function(){return!0},Tp.prototype.interfaces_=function(){return[fu]},Tp.prototype.getClass=function(){return Tp};var Pp=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};Pp.prototype.selfSnap=function(t){return new xp(t).snapTo(t,this._snapTolerance)},Pp.prototype.removeCommonBits=function(t){this._cbr=new Ep,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},Pp.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},Pp.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Jp.overlayOp(e[0],e[1],t);return this.prepareResult(n)},Pp.prototype.checkValid=function(t){t.isValid()||ml.out.println("Snapped geometry is invalid")},Pp.prototype.computeSnapTolerance=function(){this._snapTolerance=xp.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Pp.prototype.snap=function(t){var e=this.removeCommonBits(t);return xp.snap(e[0],e[1],this._snapTolerance)},Pp.prototype.interfaces_=function(){return[]},Pp.prototype.getClass=function(){return Pp},Pp.overlayOp=function(t,e,n){return new Pp(t,e).getResultGeometry(n)},Pp.union=function(t,e){return Pp.overlayOp(t,e,Jp.UNION)},Pp.intersection=function(t,e){return Pp.overlayOp(t,e,Jp.INTERSECTION)},Pp.symDifference=function(t,e){return Pp.overlayOp(t,e,Jp.SYMDIFFERENCE)},Pp.difference=function(t,e){return Pp.overlayOp(t,e,Jp.DIFFERENCE)};var Ap=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};Ap.prototype.getResultGeometry=function(t){var e=null,n=!1,i=null;try{e=Jp.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof kl))throw t;i=t}if(!n)try{e=Pp.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof kl?i:t}return e},Ap.prototype.interfaces_=function(){return[]},Ap.prototype.getClass=function(){return Ap},Ap.overlayOp=function(t,e,n){return new Ap(t,e).getResultGeometry(n)},Ap.union=function(t,e){return Ap.overlayOp(t,e,Jp.UNION)},Ap.intersection=function(t,e){return Ap.overlayOp(t,e,Jp.INTERSECTION)},Ap.symDifference=function(t,e){return Ap.overlayOp(t,e,Jp.SYMDIFFERENCE)},Ap.difference=function(t,e){return Ap.overlayOp(t,e,Jp.DIFFERENCE)};var Lp=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};Lp.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp};var Mp=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=i,this._xValue=r,this._obj=o}},Rp={INSERT:{configurable:!0},DELETE:{configurable:!0}};Mp.prototype.isDelete=function(){return this._eventType===Mp.DELETE},Mp.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},Mp.prototype.getObject=function(){return this._obj},Mp.prototype.compareTo=function(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},Mp.prototype.getInsertEvent=function(){return this._insertEvent},Mp.prototype.isInsert=function(){return this._eventType===Mp.INSERT},Mp.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},Mp.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Mp.prototype.interfaces_=function(){return[Xs]},Mp.prototype.getClass=function(){return Mp},Rp.INSERT.get=function(){return 1},Rp.DELETE.get=function(){return 2},Object.defineProperties(Mp,Rp);var Op=function(){};Op.prototype.interfaces_=function(){return[]},Op.prototype.getClass=function(){return Op};var Dp=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};Dp.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(Dp.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},Dp.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Dp.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},Dp.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Dp.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1},Dp.prototype.hasProperIntersection=function(){return this._hasProper},Dp.prototype.hasIntersection=function(){return this._hasIntersection},Dp.prototype.isDone=function(){return this._isDone},Dp.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},Dp.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},Dp.prototype.addIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Dp.prototype.interfaces_=function(){return[]},Dp.prototype.getClass=function(){return Dp},Dp.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Np=function(t){function e(){t.call(this),this.events=new Yl,this.nOverlaps=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.prepareEvents=function(){Ec.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Dp&&el(arguments[0],Wl)&&el(arguments[1],Wl)){var i=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&el(arguments[0],Wl)&&arguments[1]instanceof Dp){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new Lp(n,r),a=new Mp(e,n.getMinX(r),o);this.events.add(a),this.events.add(new Mp(n.getMaxX(r),a))}},e.prototype.processOverlaps=function(t,e,n,i){for(var r=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(r.computeIntersections(s,i),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();){var o=r.next();this.addEdge(o,i)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Op),Fp=function(){this._min=Gs.POSITIVE_INFINITY,this._max=Gs.NEGATIVE_INFINITY},zp={NodeComparator:{configurable:!0}};Fp.prototype.getMin=function(){return this._min},Fp.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},Fp.prototype.getMax=function(){return this._max},Fp.prototype.toString=function(){return Cl.toLineString(new Ys(this._min,0),new Ys(this._max,0))},Fp.prototype.interfaces_=function(){return[]},Fp.prototype.getClass=function(){return Fp},zp.NodeComparator.get=function(){return Bp},Object.defineProperties(Fp,zp);var Bp=function(){};Bp.prototype.compare=function(t,e){var n=(t._min+t._max)/2,i=(e._min+e._max)/2;return n<i?-1:n>i?1:0},Bp.prototype.interfaces_=function(){return[Ws]},Bp.prototype.getClass=function(){return Bp};var Vp=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],i=arguments[2];this._min=e,this._max=n,this._item=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fp),Up=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fp),jp=function(){this._leaves=new Yl,this._root=null,this._level=0};jp.prototype.buildTree=function(){Ec.sort(this._leaves,new Fp.NodeComparator);for(var t=this._leaves,e=null,n=new Yl;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},jp.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Vp(t,e,n))},jp.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},jp.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},jp.prototype.printNode=function(t){ml.out.println(Cl.toLineString(new Ys(t._min,this._level),new Ys(t._max,this._level)))},jp.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},jp.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new Up(t.get(n),t.get(n+1));e.add(r)}}},jp.prototype.interfaces_=function(){return[]},jp.prototype.getClass=function(){return jp};var qp=function(){this._items=new Yl};qp.prototype.visitItem=function(t){this._items.add(t)},qp.prototype.getItems=function(){return this._items},qp.prototype.interfaces_=function(){return[xc]},qp.prototype.getClass=function(){return qp};var Gp=function(){this._index=null;var t=arguments[0];if(!el(t,ku))throw new qs("Argument must be Polygonal");this._index=new Zp(t)},Hp={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Gp.prototype.locate=function(t){var e=new Ll(t),n=new Xp(e);return this._index.query(t.y,t.y,n),e.getLocation()},Gp.prototype.interfaces_=function(){return[hh]},Gp.prototype.getClass=function(){return Gp},Hp.SegmentVisitor.get=function(){return Xp},Hp.IntervalIndexedGeometry.get=function(){return Zp},Object.defineProperties(Gp,Hp);var Xp=function(){this._counter=null;var t=arguments[0];this._counter=t};Xp.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Xp.prototype.interfaces_=function(){return[xc]},Xp.prototype.getClass=function(){return Xp};var Zp=function(){this._index=new jp;var t=arguments[0];this.init(t)};Zp.prototype.init=function(t){for(var e=Yh.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Zp.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new Vc(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}},Zp.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new qp;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._index.query(i,r,o)}},Zp.prototype.interfaces_=function(){return[]},Zp.prototype.getClass=function(){return Zp};var Wp=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new zu,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Kh,2===arguments.length){var e=arguments[0],n=arguments[1],i=Bl.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=i,null!==n&&this.add(n)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=r,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var i=this._nodes.addNode(n).getLabel(),r=1;i.getLocation(t,Ju.ON)===$s.BOUNDARY&&r++;var o=e.determineBoundary(this._boundaryNodeRule,r);i.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new Dp(n,!0,!1);o.setIsDoneIfProperInt(r);var a=this.createEdgeSetIntersector(),s=this._parentGeom instanceof Iu||this._parentGeom instanceof Eu||this._parentGeom instanceof Tu,l=i||!s;return a.computeIntersections(this._edges,o,l),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var i=new Dp(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Cu){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,$s.INTERIOR)}else if(arguments[0]instanceof Ys){var e=arguments[0];this.insertPoint(this._argIndex,e,$s.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),$s.EXTERIOR,$s.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,$s.INTERIOR,$s.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],$s.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],$s.BOUNDARY)},e.prototype.addLineString=function(t){var e=Ql.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new Ih(e,new rc(this._argIndex,$s.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),Sl.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===$s.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var i=Ql.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var r=e,o=n;Ml.isCCW(i)&&(r=n,o=e);var a=new Ih(i,new rc(this._argIndex,$s.BOUNDARY,r,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,i[0],$s.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var i=this._nodes.addNode(e),r=i.getLabel();null===r?i._label=new rc(t,n):r.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new Np},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof Tu&&(this._useBoundaryDeterminationRule=!1),e instanceof Eu)this.addPolygon(e);else if(e instanceof xu)this.addLineString(e);else if(e instanceof Cu)this.addPoint(e);else if(e instanceof Su)this.addCollection(e);else if(e instanceof mu)this.addCollection(e);else if(e instanceof Tu)this.addCollection(e);else{if(!(e instanceof du))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return el(this._parentGeom,ku)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Gp(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?$s.BOUNDARY:$s.INTERIOR},e}(gc),Yp=function(){if(this._li=new Pl,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Wp(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=Bl.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Wp(0,e,i),this._arg[1]=new Wp(1,n,i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];r.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Wp(0,r,a),this._arg[1]=new Wp(1,o,a)}};Yp.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Yp.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp};var Kp=function(){};Kp.prototype.interfaces_=function(){return[]},Kp.prototype.getClass=function(){return Kp},Kp.map=function(){if(arguments[0]instanceof Dl&&el(arguments[1],Kp.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Yl,i=0;i<t.getNumGeometries();i++){var r=e.map(t.getGeometryN(i));null!==r&&n.add(r)}return t.getFactory().buildGeometry(n)}if(el(arguments[0],Hl)&&el(arguments[1],Kp.MapOp)){for(var o=arguments[0],a=arguments[1],s=new Yl,l=o.iterator();l.hasNext();){var u=l.next(),c=a.map(u);null!==c&&s.add(c)}return s}},Kp.MapOp=function(){};var Jp=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Kh,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new vh,this._resultPolyList=new Yl,this._resultLineList=new Yl,this._resultPointList=new Yl,this._graph=new gc(new gh),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new rc(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,i,r){var o=new Yl;return o.addAll(t),o.addAll(n),o.addAll(i),o.isEmpty()?e.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this._ptLocator.locate(t,i)!==$s.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Yl,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Yl;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),mp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new yc(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var i=new yp(this,this._geomFact,this._ptLocator);this._resultLineList=i.build(t);var r=new vp(this,this._geomFact,this._ptLocator);this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea()&&!i.isInteriorAreaEdge()&&e.isResultOfOp(r.getLocation(0,Ju.RIGHT),r.getLocation(1,Ju.RIGHT),t)&&i.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(Sl.isTrue(!i.isNull(r,Ju.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,Ju.LEFT,i.getLocation(r,Ju.LEFT)),Sl.isTrue(!i.isNull(r,Ju.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,Ju.RIGHT,i.getLocation(r,Ju.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Yp);Jp.overlayOp=function(t,e,n){return new Jp(t,e).getResultGeometry(n)},Jp.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Jp.createEmptyResult(Jp.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return gp.map(t,{interfaces_:function(){return[Kp.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ap.overlayOp(t,e,Jp.INTERSECTION)},Jp.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Jp.createEmptyResult(Jp.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ap.overlayOp(t,e,Jp.SYMDIFFERENCE)},Jp.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case Jp.INTERSECTION:o=Math.min(i,r);break;case Jp.UNION:o=Math.max(i,r);break;case Jp.DIFFERENCE:o=i;break;case Jp.SYMDIFFERENCE:o=Math.max(i,r)}return o},Jp.createEmptyResult=function(t,e,n,i){var r=null;switch(Jp.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},Jp.difference=function(t,e){return t.isEmpty()?Jp.createEmptyResult(Jp.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ap.overlayOp(t,e,Jp.DIFFERENCE))},Jp.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return Jp.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];switch(r===$s.BOUNDARY&&(r=$s.INTERIOR),o===$s.BOUNDARY&&(o=$s.INTERIOR),a){case Jp.INTERSECTION:return r===$s.INTERIOR&&o===$s.INTERIOR;case Jp.UNION:return r===$s.INTERIOR||o===$s.INTERIOR;case Jp.DIFFERENCE:return r===$s.INTERIOR&&o!==$s.INTERIOR;case Jp.SYMDIFFERENCE:return r===$s.INTERIOR&&o!==$s.INTERIOR||r!==$s.INTERIOR&&o===$s.INTERIOR}return!1}},Jp.INTERSECTION=1,Jp.UNION=2,Jp.DIFFERENCE=3,Jp.SYMDIFFERENCE=4;var Qp=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Kh,this._seg=new Vc;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Qp.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),i=0;i<n.size()-1;i++)if(n.getCoordinate(i,this._seg.p0),n.getCoordinate(i+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Qp.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?$s.BOUNDARY:this._ptLocator.locate(t,this._g)},Qp.prototype.extractLinework=function(t){var e=new $p;t.apply(e);var n=e.getLinework(),i=qu.toLineStringArray(n);return t.getFactory().createMultiLineString(i)},Qp.prototype.interfaces_=function(){return[]},Qp.prototype.getClass=function(){return Qp};var $p=function(){this._linework=null,this._linework=new Yl};$p.prototype.getLinework=function(){return this._linework},$p.prototype.filter=function(t){if(t instanceof Eu){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},$p.prototype.interfaces_=function(){return[pu]},$p.prototype.getClass=function(){return $p};var tf=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};tf.prototype.extractPoints=function(t,e,n){for(var i=t.getCoordinates(),r=0;r<i.length-1;r++)this.computeOffsetPoints(i[r],i[r+1],e,n)},tf.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},tf.prototype.getPoints=function(t){for(var e=new Yl,n=Yh.getLines(this._g).iterator();n.hasNext();){var i=n.next();this.extractPoints(i,t,e)}return e},tf.prototype.computeOffsetPoints=function(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,a=Math.sqrt(r*r+o*o),s=n*r/a,l=n*o/a,u=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new Ys(u-l,c+s);i.add(h)}if(this._doRight){var p=new Ys(u+l,c-s);i.add(p)}},tf.prototype.interfaces_=function(){return[]},tf.prototype.getClass=function(){return tf};var ef=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Yl;var e=arguments[0],n=arguments[1],i=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,i],this._locFinder=[new Qp(this._geom[0],this._boundaryDistanceTolerance),new Qp(this._geom[1],this._boundaryDistanceTolerance),new Qp(this._geom[2],this._boundaryDistanceTolerance)]},nf={TOLERANCE:{configurable:!0}};ef.prototype.reportResult=function(t,e,n){ml.out.println("Overlay result invalid - A:"+$s.toLocationSymbol(e[0])+" B:"+$s.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+$s.toLocationSymbol(e[2]))},ef.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},ef.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._location[0]=this._locFinder[0].getLocation(r),this._location[1]=this._locFinder[1].getLocation(r),this._location[2]=this._locFinder[2].getLocation(r),!!ef.hasLocation(this._location,$s.BOUNDARY)||this.isValidResult(i,this._location)}},ef.prototype.addTestPts=function(t){var e=new tf(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},ef.prototype.isValidResult=function(t,e){var n=Jp.isResultOfOp(e[0],e[1],t),i=!(n^e[2]===$s.INTERIOR);return i||this.reportResult(t,e,n),i},ef.prototype.getInvalidLocation=function(){return this._invalidLocation},ef.prototype.interfaces_=function(){return[]},ef.prototype.getClass=function(){return ef},ef.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},ef.computeBoundaryDistanceTolerance=function(t,e){return Math.min(xp.computeSizeBasedSnapTolerance(t),xp.computeSizeBasedSnapTolerance(e))},ef.isValid=function(t,e,n,i){return new ef(t,e,i).isValid(n)},nf.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(ef,nf);var rf=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};rf.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this._skipEmpty&&i.isEmpty()||e.add(i)}},rf.prototype.combine=function(){for(var t=new Yl,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},rf.prototype.interfaces_=function(){return[]},rf.prototype.getClass=function(){return rf},rf.combine=function(){if(1===arguments.length){var t=arguments[0];return new rf(t).combine()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new rf(rf.createList(e,n)).combine()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];return new rf(rf.createList(i,r,o)).combine()}},rf.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},rf.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Yl;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=new Yl;return a.add(i),a.add(r),a.add(o),a}};var of=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Yl)},af={STRTREE_NODE_CAPACITY:{configurable:!0}};of.prototype.reduceToGeometries=function(t){for(var e=new Yl,n=t.iterator();n.hasNext();){var i=n.next(),r=null;el(i,Wl)?r=this.unionTree(i):i instanceof Dl&&(r=i),e.add(r)}return e},of.prototype.extractByEnvelope=function(t,e,n){for(var i=new Yl,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this._geomFactory.buildGeometry(i)},of.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i))return rf.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r)},of.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Lc(of.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},of.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=of.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(of.getGeometry(e,n),of.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,i);return this.unionSafe(a,s)}},of.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},of.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},of.prototype.unionActual=function(t,e){return of.restrictToPolygons(t.union(e))},of.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},of.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var i=new Yl,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),a=this.unionActual(r,o);return i.add(a),rf.combine(i)},of.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},of.prototype.interfaces_=function(){return[]},of.prototype.getClass=function(){return of},of.restrictToPolygons=function(t){if(el(t,ku))return t;var e=Wh.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(qu.toPolygonArray(e))},of.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},of.union=function(t){return new of(t).union()},af.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(of,af);var sf=function(){};sf.prototype.interfaces_=function(){return[]},sf.prototype.getClass=function(){return sf},sf.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Jp.createEmptyResult(Jp.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ap.overlayOp(t,e,Jp.UNION)};var lf=function(){return new Mr};Mr.prototype={constructor:Mr,reset:function(){this.s=this.t=0},add:function(t){Rr(uf,t,this.t),Rr(this,uf.s,this.s),this.s?this.t+=uf.t:this.s=uf.t},valueOf:function(){return this.s}};var uf=new Mr,cf=1e-6,hf=Math.PI,pf=hf/2,ff=hf/4,df=2*hf,mf=180/hf,gf=hf/180,yf=Math.abs,vf=Math.atan,_f=Math.atan2,bf=Math.cos,xf=Math.exp,wf=Math.log,Cf=Math.sin,kf=Math.sqrt,Ef=Math.tan,Sf={Feature:function(t,e){Nr(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Nr(n[i].geometry,e)}},If={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)e.point((t=n[i])[0],t[1],t[2])},LineString:function(t,e){Fr(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Fr(n[i],e,0)},Polygon:function(t,e){zr(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)zr(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Nr(n[i],e)}},Tf=function(t,e){t&&Sf.hasOwnProperty(t.type)?Sf[t.type](t,e):Nr(t,e)},Pf=(lf(),lf(),lf(),function(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n});Xr.invert=Xr;var Af=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Dr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},Lf=function(t,e,n,i,r,o){var a,s=t[0],l=t[1],u=0,c=1,h=e[0]-s,p=e[1]-l;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<u)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>u&&(u=a)}if(a=r-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>u&&(u=a)}else if(h>0){if(a<u)return;a<c&&(c=a)}if(a=i-l,p||!(a>0)){if(a/=p,p<0){if(a<u)return;a<c&&(c=a)}else if(p>0){if(a>c)return;a>u&&(u=a)}if(a=o-l,p||!(a<0)){if(a/=p,p<0){if(a>c)return;a>u&&(u=a)}else if(p>0){if(a<u)return;a<c&&(c=a)}return u>0&&(t[0]=s+u*h,t[1]=l+u*p),c<1&&(e[0]=s+c*h,e[1]=l+c*p),!0}}}}},Mf=function(t,e){return yf(t[0]-e[0])<cf&&yf(t[1]-e[1])<cf},Rf=function(t,e,n,i,r){var o,a,s=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],a=t[e];if(Mf(i,a)){for(r.lineStart(),o=0;o<e;++o)r.point((i=t[o])[0],i[1]);r.lineEnd()}else s.push(n=new Qr(i,t,null,!0)),l.push(n.o=new Qr(i,null,n,!1)),s.push(n=new Qr(a,t,null,!1)),l.push(n.o=new Qr(a,null,n,!0))}})),s.length){for(l.sort(e),$r(s),$r(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var u,c,h=s[0];;){for(var p=h,f=!0;p.v;)if((p=p.n)===h)return;u=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(o=0,a=u.length;o<a;++o)r.point((c=u[o])[0],c[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(f)for(o=(u=p.p.z).length-1;o>=0;--o)r.point((c=u[o])[0],c[1]);else i(p.x,p.p.x,-1,r);p=p.p}u=(p=p.o).z,f=!f}while(!p.v);r.lineEnd()}}},Of=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Df=(function(t){1===t.length&&(t=function(t){return function(e,n){return Of(t(e),n)}}(t))}(Of),function(t){for(var e,n,i,r=t.length,o=-1,a=0;++o<r;)a+=t[o].length;for(n=new Array(a);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--a]=i[e];return n}),Nf=1e9,Ff=-Nf,zf=lf(),Bf=(lf(),function(t){return t}),Vf=(lf(),lf(),1/0),Uf=Vf,jf=-Vf,qf=jf,Gf={point:function(t,e){t<Vf&&(Vf=t),t>jf&&(jf=t),e<Uf&&(Uf=e),e>qf&&(qf=e)},lineStart:Dr,lineEnd:Dr,polygonStart:Dr,polygonEnd:Dr,result:function(){var t=[[Vf,Uf],[jf,qf]];return jf=qf=-(Uf=Vf=1/0),t}},Hf=(lf(),function(t,e,n,i){return function(r,o){function a(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&o.point(e,n)}function s(t,e){var n=r(t,e);g.point(n[0],n[1])}function l(){x.point=s,g.lineStart()}function u(){x.point=a,g.lineEnd()}function c(t,e){m.push([t,e]);var n=r(t,e);_.point(n[0],n[1])}function h(){_.lineStart(),m=[]}function p(){c(m[0][0],m[0][1]),_.lineEnd();var t,e,n,i,r=_.clean(),a=v.result(),s=a.length;if(m.pop(),f.push(m),m=null,s)if(1&r){if((e=(n=a[0]).length-1)>0){for(b||(o.polygonStart(),b=!0),o.lineStart(),t=0;t<e;++t)o.point((i=n[t])[0],i[1]);o.lineEnd()}}else s>1&&2&r&&a.push(a.pop().concat(a.shift())),d.push(a.filter(eo))}var f,d,m,g=e(o),y=r.invert(i[0],i[1]),v=Af(),_=e(v),b=!1,x={point:a,lineStart:l,lineEnd:u,polygonStart:function(){x.point=c,x.lineStart=h,x.lineEnd=p,d=[],f=[]},polygonEnd:function(){x.point=a,x.lineStart=l,x.lineEnd=u,d=Df(d);var t=function(t,e){var n=e[0],i=e[1],r=[Cf(n),-bf(n),0],o=0,a=0;zf.reset();for(var s=0,l=t.length;s<l;++s)if(c=(u=t[s]).length)for(var u,c,h=u[c-1],p=h[0],f=h[1]/2+ff,d=Cf(f),m=bf(f),g=0;g<c;++g,p=v,d=b,m=x,h=y){var y=u[g],v=y[0],_=y[1]/2+ff,b=Cf(_),x=bf(_),w=v-p,C=w>=0?1:-1,k=C*w,E=k>hf,S=d*b;if(zf.add(_f(S*C*Cf(k),m*x+S*bf(k))),o+=E?w+C*df:w,E^p>=n^v>=n){var I=jr(Vr(h),Vr(y));Hr(I);var T=jr(r,I);Hr(T);var P=(E^w>=0?-1:1)*Or(T[2]);(i>P||i===P&&(I[0]||I[1]))&&(a+=E^w>=0?1:-1)}}return(o<-cf||o<cf&&zf<-cf)^1&a}(f,y);d.length?(b||(o.polygonStart(),b=!0),Rf(d,no,t,n,o)):t&&(b||(o.polygonStart(),b=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),d=f=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return x}}),Xf=Hf((function(){return!0}),(function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?hf:-hf,l=yf(o-n);yf(l-hf)<cf?(t.point(n,i=(i+a)/2>0?pf:-pf),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(o,i),e=0):r!==s&&l>=hf&&(yf(n-r)<cf&&(n-=r*cf),yf(o-s)<cf&&(o-=s*cf),i=function(t,e,n,i){var r,o,a=Cf(t-n);return yf(a)>cf?vf((Cf(e)*(o=bf(i))*Cf(n)-Cf(i)*(r=bf(e))*Cf(t))/(r*o*a)):(e+i)/2}(n,i,o,a),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=o,i=a),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var r;if(null==t)i.point(-hf,r=n*pf),i.point(0,r),i.point(hf,r),i.point(hf,0),i.point(hf,-r),i.point(0,-r),i.point(-hf,-r),i.point(-hf,0),i.point(-hf,r);else if(yf(t[0]-e[0])>cf){var o=t[0]<e[0]?hf:-hf;i.point(-o,r=n*o/2),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}),[-hf,-pf]),Zf=function(t,e){function n(t,e){return bf(t)*bf(e)>o}function i(t,e,n){var i=[1,0,0],r=jr(Vr(t),Vr(e)),a=Ur(r,r),s=r[0],l=a-s*s;if(!l)return!n&&t;var u=o*a/l,c=-o*s/l,h=jr(i,r),p=Gr(i,u);qr(p,Gr(r,c));var f=h,d=Ur(p,f),m=Ur(f,f),g=d*d-m*(Ur(p,p)-1);if(!(g<0)){var y=kf(g),v=Gr(f,(-d-y)/m);if(qr(v,p),v=Br(v),!n)return v;var _,b=t[0],x=e[0],w=t[1],C=e[1];x<b&&(_=b,b=x,x=_);var k=x-b,E=yf(k-hf)<cf;if(!E&&C<w&&(_=w,w=C,C=_),E||k<cf?E?w+C>0^v[1]<(yf(v[0]-b)<cf?w:C):w<=v[1]&&v[1]<=C:k>hf^(b<=v[0]&&v[0]<=x)){var S=Gr(f,(-d+y)/m);return qr(S,p),[v,Br(S)]}}}function r(e,n){var i=a?t:hf-t,r=0;return e<-i?r|=1:e>i&&(r|=2),n<-i?r|=4:n>i&&(r|=8),r}var o=bf(t),a=o>0,s=yf(o)>cf;return Hf(n,(function(t){var e,o,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,p){var f,d=[h,p],m=n(h,p),g=a?m?0:r(h,p):m?r(h+(h<0?hf:-hf),p):0;if(!e&&(u=l=m)&&t.lineStart(),m!==l&&(!(f=i(e,d))||Mf(e,f)||Mf(d,f))&&(d[0]+=cf,d[1]+=cf,m=n(d[0],d[1])),m!==l)c=0,m?(t.lineStart(),f=i(d,e),t.point(f[0],f[1])):(f=i(e,d),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(s&&e&&a^m){var y;g&o||!(y=i(d,e,!0))||(c=0,a?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!m||e&&Mf(e,d)||t.point(d[0],d[1]),e=d,l=m,o=g},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(u&&l)<<1}}}),(function(n,i,r,o){!function(t,e,n,i,r,o){if(n){var a=bf(e),s=Cf(e),l=i*n;null==r?(r=e+i*df,o=e-l/2):(r=Jr(a,r),o=Jr(a,o),(i>0?r<o:r>o)&&(r+=i*df));for(var u,c=r;i>0?c>o:c<o;c-=l)u=Br([a,-s*bf(c),-s*Cf(c)]),t.point(u[0],u[1])}}(o,t,e,r,n,i)}),a?[0,-t]:[-hf,t-hf])};ro.prototype={constructor:ro,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Wf=bf(30*gf),Yf=function(t,e){return+e?function(t,e){function n(i,r,o,a,s,l,u,c,h,p,f,d,m,g){var y=u-i,v=c-r,_=y*y+v*v;if(_>4*e&&m--){var b=a+p,x=s+f,w=l+d,C=kf(b*b+x*x+w*w),k=Or(w/=C),E=yf(yf(w)-1)<cf||yf(o-h)<cf?(o+h)/2:_f(x,b),S=t(E,k),I=S[0],T=S[1],P=I-i,A=T-r,L=v*P-y*A;(L*L/_>e||yf((y*P+v*A)/_-.5)>.3||a*p+s*f+l*d<Wf)&&(n(i,r,o,a,s,l,I,T,E,b/=C,x/=C,w,m,g),g.point(I,T),n(I,T,E,b,x,w,u,c,h,p,f,d,m,g))}}return function(e){function i(n,i){n=t(n,i),e.point(n[0],n[1])}function r(){y=NaN,w.point=o,e.lineStart()}function o(i,r){var o=Vr([i,r]),a=t(i,r);n(y,v,g,_,b,x,y=a[0],v=a[1],g=i,_=o[0],b=o[1],x=o[2],16,e),e.point(y,v)}function a(){w.point=i,e.lineEnd()}function s(){r(),w.point=l,w.lineEnd=u}function l(t,e){o(c=t,e),h=y,p=v,f=_,d=b,m=x,w.point=o}function u(){n(y,v,g,_,b,x,h,p,c,f,d,m,16,e),w.lineEnd=a,a()}var c,h,p,f,d,m,g,y,v,_,b,x,w={point:i,lineStart:r,lineEnd:a,polygonStart:function(){e.polygonStart(),w.lineStart=s},polygonEnd:function(){e.polygonEnd(),w.lineStart=r}};return w}}(t,e):function(t){return io({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)},Kf=io({point:function(t,e){this.stream.point(t*gf,e*gf)}});ao.invert=function(t,e){return[t,2*vf(xf(e))-pf]},so.invert=function(t,e){return[-e,2*vf(xf(t))-pf]};var Jf=function(){var t=function(t){function e(){var e=hf*s(),a=o(function(t){function e(e){return(e=t(e[0]*gf,e[1]*gf))[0]*=mf,e[1]*=mf,e}return t=Zr(t[0]*gf,t[1]*gf,t.length>2?t[2]*gf:0),e.invert=function(e){return(e=t.invert(e[0]*gf,e[1]*gf))[0]*=mf,e[1]*=mf,e},e}(o.rotate()).invert([0,0]));return u(null==c?[[a[0]-e,a[1]-e],[a[0]+e,a[1]+e]]:t===ao?[[Math.max(a[0]-e,c),n],[Math.min(a[0]+e,i),r]]:[[c,Math.max(a[1]-e,n)],[i,Math.min(a[1]+e,r)]])}var n,i,r,o=function(t){return function(t){function e(t){return[(t=u(t[0]*gf,t[1]*gf))[0]*m+a,s-t[1]*m]}function n(t,e){return[(t=o(t,e))[0]*m+a,s-t[1]*m]}function i(){u=Pf(l=Zr(b,x,w),o);var t=o(v,_);return a=g-t[0]*m,s=y+t[1]*m,r()}function r(){return f=d=null,e}var o,a,s,l,u,c,h,p,f,d,m=150,g=480,y=250,v=0,_=0,b=0,x=0,w=0,C=null,k=Xf,E=null,S=Bf,I=.5,T=Yf(n,I);return e.stream=function(t){return f&&d===t?f:f=Kf(k(l,T(S(d=t))))},e.clipAngle=function(t){return arguments.length?(k=+t?Zf(C=t*gf,6*gf):(C=null,Xf),r()):C*mf},e.clipExtent=function(t){return arguments.length?(S=null==t?(E=c=h=p=null,Bf):to(E=+t[0][0],c=+t[0][1],h=+t[1][0],p=+t[1][1]),r()):null==E?null:[[E,c],[h,p]]},e.scale=function(t){return arguments.length?(m=+t,i()):m},e.translate=function(t){return arguments.length?(g=+t[0],y=+t[1],i()):[g,y]},e.center=function(t){return arguments.length?(v=t[0]%360*gf,_=t[1]%360*gf,i()):[v*mf,_*mf]},e.rotate=function(t){return arguments.length?(b=t[0]%360*gf,x=t[1]%360*gf,w=t.length>2?t[2]%360*gf:0,i()):[b*mf,x*mf,w*mf]},e.precision=function(t){return arguments.length?(T=Yf(n,I=t*t),r()):kf(I)},e.fitExtent=function(t,n){return oo(e,t,n)},e.fitSize=function(t,n){return function(t,e,n){return oo(t,[[0,0],e],n)}(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&function(t){return(t=u.invert((t[0]-a)/m,(s-t[1])/m))&&[t[0]*mf,t[1]*mf]},i()}}((function(){return t}))()}(t),a=o.center,s=o.scale,l=o.translate,u=o.clipExtent,c=null;return o.scale=function(t){return arguments.length?(s(t),e()):s()},o.translate=function(t){return arguments.length?(l(t),e()):l()},o.center=function(t){return arguments.length?(a(t),e()):a()},o.clipExtent=function(t){return arguments.length?(null==t?c=n=i=r=null:(c=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),e()):null==c?null:[[c,n],[i,r]]},e()}(so),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};t.projection=oa,t.random=Vs,t.clusters=Us,t.helpers=Eo,t.invariant=Io,t.meta=So,t.isolines=function(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var i=n.zProperty||"elevation",r=n.commonProperties||{},o=n.breaksProperties||[];if(W(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!k(r))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var a=function(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",i=e.flip,r=e.flags;W(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return L(t,(function(t){var e=G(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return G(t)[0]-G(e)[0]}))})).sort((function(t,n){return e?G(t[0])[1]-G(n[0])[1]:G(n[0])[1]-G(t[0])[1]}))}(t,i),a=[],s=0;s<o.length;s++){for(var l=o[s],u=[],c=0;c<l.length;c++){var h=l[c];u.push(h.properties[n]?h.properties[n]:0),!0===r&&(h.properties.matrixPosition=[s,c])}a.push(u)}return a}(t,{zProperty:i,flip:!0});return u(function(t,e,n){var i=j(n),r=i[0],o=i[1],a=(i[2]-i[0])/(e[0].length-1),s=(i[3]-i[1])/(e.length-1),l=function(t){t[0]=t[0]*a+r,t[1]=t[1]*s+o};return t.forEach((function(t){I(t,l)})),t}(function(t,e,n,i,r){for(var o=[],a=1;a<e.length;a++){var s=+e[a],l=Object.assign({},i,r[a]);l[n]=s;var u=c(Q(t,s),l);o.push(u)}return o}(a,e,i,r,o),a,t))},t.convex=It,t.pointsWithinPolygon=At,t.concave=function(t,n){if(!k(n=n||{}))throw new Error("options is invalid");if(!t)throw new Error("points is required");var i=n.maxEdge||1/0;if(!C(i))throw new Error("maxEdge is invalid");var r=Lt(function(t){var e=[],n={};return L(t,(function(t){if(t.geometry){var i=t.geometry.coordinates.join("-");n.hasOwnProperty(i)||(e.push(t),n[i]=!0)}})),u(e)}(t));if(r.features=r.features.filter((function(t){var e=t.geometry.coordinates[0][0],r=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],a=Dt(e,r,n),s=Dt(r,o,n),l=Dt(e,o,n);return a<=i&&s<=i&&l<=i})),r.features.length<1)return null;var o=function(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Nt(t));var i=function(t){var e={};N(t,(function(t){e[t.geometry.type]=!0}));var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!i)throw new Error("geojson must be homogenous");switch(i){case"LineString":return function(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Nt(t));var i=[],r=U(t,(function(t,e){return function(t,e){var n,i=t.geometry.coordinates,r=e.geometry.coordinates,o=Zt(i[0]),a=Zt(i[i.length-1]),l=Zt(r[0]),u=Zt(r[r.length-1]);if(o===u)n=r.concat(i.slice(1));else if(l===a)n=i.concat(r.slice(1));else if(o===l)n=i.slice(1).reverse().concat(r);else{if(a!==u)return null;n=i.concat(r.reverse().slice(1))}return s(n)}(t,e)||(i.push(t),e)}));return r&&i.push(r),i.length?1===i.length?i[0]:c(i.map((function(t){return t.coordinates}))):null}(t,e);case"Polygon":return function(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Nt(t));var i=[];N(t,(function(t){i.push(t.geometry)}));var r=function(t,e){function n(t){t&&u.hasOwnProperty(t.type)&&u[t.type](t)}function i(t){var e=[];do{var n=l.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function r(t){return t.map(i)}var o=function(t){function e(t){null!=t&&u.hasOwnProperty(t.type)&&u[t.type](t)}function n(t){var e=t[0],n=t[1];e<o&&(o=e),e>s&&(s=e),n<a&&(a=n),n>l&&(l=n)}function i(t){t.forEach(n)}function r(t){t.forEach(i)}var o=1/0,a=1/0,s=-1/0,l=-1/0,u={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){i(t.arcs)},MultiLineString:function(t){t.arcs.forEach(i)},Polygon:function(t){t.arcs.forEach(i)},MultiPolygon:function(t){t.arcs.forEach(r)}};for(var c in t)e(t[c]);return s>=o&&l>=a?[o,a,s,l]:void 0}(t=function(t){var e,n={};for(e in t)n[e]=jt(t[e]);return n}(t)),a=function(t){function e(t){var e,n,i,r,o,a,s,l;if(i=f.get(e=u[t[0]]))for(s=0,l=i.length;s<l;++s)if(function(t,e){var n=t[0],i=e[0],r=t[1];if(n-r!=i-e[1])return!1;for(;n<=r;++n,++i)if(!Jo(u[n],u[i]))return!1;return!0}(r=i[s],t))return t[0]=r[0],void(t[1]=r[1]);if(o=f.get(n=u[t[1]]))for(s=0,l=o.length;s<l;++s)if(function(t,e){var n=t[0],i=t[1],r=e[1];if(n-i!=e[0]-r)return!1;for(;n<=i;++n,--r)if(!Jo(u[n],u[r]))return!1;return!0}(a=o[s],t))return t[1]=a[0],void(t[0]=a[1]);i?i.push(t):f.set(e,[t]),o?o.push(t):f.set(n,[t]),d.push(t)}function n(t,e){var n=t[0],i=e[0],o=t[1]-n;if(o!==e[1]-i)return!1;for(var a=r(t),s=r(e),l=0;l<o;++l)if(!Jo(u[n+(l+a)%o],u[i+(l+s)%o]))return!1;return!0}function i(t,e){var n=t[0],i=e[1],o=t[1]-n;if(o!==i-e[0])return!1;for(var a=r(t),s=o-r(e),l=0;l<o;++l)if(!Jo(u[n+(l+a)%o],u[i-(l+s)%o]))return!1;return!0}function r(t){for(var e=t[0],n=t[1],i=e,r=i,o=u[i];++i<n;){var a=u[i];(a[0]<o[0]||a[0]===o[0]&&a[1]<o[1])&&(r=i,o=a)}return r-e}var o,a,s,l,u=t.coordinates,c=t.lines,h=t.rings,p=c.length+h.length;for(delete t.lines,delete t.rings,s=0,l=c.length;s<l;++s)for(o=c[s];o=o.next;)++p;for(s=0,l=h.length;s<l;++s)for(a=h[s];a=a.next;)++p;var f=Ko(2*p*1.4,ea,Jo),d=t.arcs=[];for(s=0,l=c.length;s<l;++s){o=c[s];do{e(o)}while(o=o.next)}for(s=0,l=h.length;s<l;++s)if((a=h[s]).next)do{e(a)}while(a=a.next);else!function(t){var e,o,a,s,l;if(o=f.get(u[t[0]]))for(s=0,l=o.length;s<l;++s){if(n(a=o[s],t))return t[0]=a[0],void(t[1]=a[1]);if(i(a,t))return t[0]=a[1],void(t[1]=a[0])}if(o=f.get(e=u[t[0]+r(t)]))for(s=0,l=o.length;s<l;++s){if(n(a=o[s],t))return t[0]=a[0],void(t[1]=a[1]);if(i(a,t))return t[0]=a[1],void(t[1]=a[0])}o?o.push(t):f.set(e,[t]),d.push(t)}(a);return t}(function(t){var e,n,i,r=function(t){function e(t,e,n,i){if(p[n]!==t){p[n]=t;var r=f[n];if(r>=0){var o=d[n];r===e&&o===i||r===i&&o===e||(++g,m[n]=1)}else f[n]=e,d[n]=i}}function n(t){return ea(l[t])}function i(t,e){return Jo(l[t],l[e])}var r,o,a,s,l=t.coordinates,u=t.lines,c=t.rings,h=function(){for(var t=Ko(1.4*l.length,n,i,Int32Array,-1,Int32Array),e=new Int32Array(l.length),r=0,o=l.length;r<o;++r)e[r]=t.maybeSet(r,r);return e}(),p=new Int32Array(l.length),f=new Int32Array(l.length),d=new Int32Array(l.length),m=new Int8Array(l.length),g=0;for(r=0,o=l.length;r<o;++r)p[r]=f[r]=d[r]=-1;for(r=0,o=u.length;r<o;++r){var y=u[r],v=y[0],_=y[1];for(a=h[v],s=h[++v],++g,m[a]=1;++v<=_;)e(r,a,a=s,s=h[v]);++g,m[s]=1}for(r=0,o=l.length;r<o;++r)p[r]=-1;for(r=0,o=c.length;r<o;++r){var b=c[r],x=b[0]+1,w=b[1];for(e(r,h[w-1],a=h[x-1],s=h[x]);++x<=w;)e(r,a,a=s,s=h[x])}p=f=d=null;var C,k=function(t,e,n,i,r){3===arguments.length&&(i=Array,r=null);for(var o=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=t-1,s=0;s<t;++s)o[s]=r;return{add:function(i){for(var s=e(i)&a,l=o[s],u=0;l!=r;){if(n(l,i))return!0;if(++u>=t)throw new Error("full hashset");l=o[s=s+1&a]}return o[s]=i,!0},has:function(i){for(var s=e(i)&a,l=o[s],u=0;l!=r;){if(n(l,i))return!0;if(++u>=t)break;l=o[s=s+1&a]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var i=o[e];i!=r&&t.push(i)}return t}}}(1.4*g,ea,Jo);for(r=0,o=l.length;r<o;++r)m[C=h[r]]&&k.add(l[C]);return k}(t),o=t.coordinates,a=t.lines,s=t.rings;for(n=0,i=a.length;n<i;++n)for(var l=a[n],u=l[0],c=l[1];++u<c;)r.has(o[u])&&(e={0:u,1:l[1]},l[1]=u,l=l.next=e);for(n=0,i=s.length;n<i;++n)for(var h=s[n],p=h[0],f=p,d=h[1],m=r.has(o[p]);++f<d;)r.has(o[f])&&(m?(e={0:f,1:h[1]},h[1]=f,h=h.next=e):(function(t,e,n,i){Ut(t,e,n),Ut(t,e,e+i),Ut(t,e+i,n)}(o,p,d,d-f),o[d]=o[p],m=!0,f=p));return t}(function(t){function e(t){t&&u.hasOwnProperty(t.type)&&u[t.type](t)}function n(t){for(var e=0,n=t.length;e<n;++e)l[++o]=t[e];var i={0:o-n+1,1:o};return a.push(i),i}function i(t){for(var e=0,n=t.length;e<n;++e)l[++o]=t[e];var i={0:o-n+1,1:o};return s.push(i),i}function r(t){return t.map(i)}var o=-1,a=[],s=[],l=[],u={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(i)},MultiPolygon:function(t){t.arcs=t.arcs.map(r)}};for(var c in t)e(t[c]);return{type:"Topology",coordinates:l,lines:a,rings:s,objects:t}}(t))),s=a.coordinates,l=Ko(1.4*a.arcs.length,Ht,Xt);t=a.objects,a.bbox=o,a.arcs=a.arcs.map((function(t,e){return l.set(t,e),s.slice(t[0],t[1]+1)})),delete a.coordinates,s=null;var u={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){t.arcs=i(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(i)},Polygon:function(t){t.arcs=t.arcs.map(i)},MultiPolygon:function(t){t.arcs=t.arcs.map(r)}};for(var c in t)n(t[c]);return a}({geoms:f(i).geometry});return function(t){return Bt(t,Vt.apply(this,arguments))}(r,r.objects.geoms.geometries)}(t,e);default:throw new Error(i+" is not supported")}}(r,n);return 1===o.coordinates.length&&(o.coordinates=o.coordinates[0],o.type="Polygon"),e(o)},t.collect=function(t,e,n,i){var r=Lo(6),o=e.features.map((function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[n]}}));return r.load(o),t.features.forEach((function(t){t.properties||(t.properties={});var e=j(t),n=[];r.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).forEach((function(e){Tt([e.minX,e.minY],t)&&n.push(e.property)})),t.properties[i]=n})),t},t.flip=function(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Nt(t)),I(t,(function(t){var e=t[0];t[0]=t[1],t[1]=e})),t},t.simplify=function(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,i=e.highQuality||!1,r=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==r&&(t=Nt(t)),O(t,(function(t){!function(t,e,n){var i=t.type;if("Point"===i||"MultiPoint"===i)return t;Wt(t,!0);var r=t.coordinates;switch(i){case"LineString":t.coordinates=$t(r,e,n);break;case"MultiLineString":t.coordinates=r.map((function(t){return $t(t,e,n)}));break;case"Polygon":t.coordinates=te(r,e,n);break;case"MultiPolygon":t.coordinates=r.map((function(t){return te(t,e,n)}))}}(t,n,i)})),t},t.bezierSpline=ee,t.tag=function(t,e,n,i){return t=Nt(t),e=Nt(e),L(t,(function(t){t.properties||(t.properties={}),L(e,(function(e){void 0===t.properties[i]&&Tt(t,e)&&(t.properties[i]=e.properties[n])}))})),t},t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return u(function(t,e){for(var n,i,r=t.slice(0),o=t.length,a=o-e;o-- >a;)n=r[i=Math.floor((o+1)*Math.random())],r[i]=r[o],r[o]=n;return r.slice(a)}(t.features,e))},t.envelope=ie,t.square=re,t.circle=ae,t.midpoint=function(t,e){return oe(t,Dt(t,e)/2,se(t,e))},t.center=le,t.centerOfMass=function t(e,n){switch(J(e)){case"Point":return e;case"Polygon":var r=[];I(e,(function(t){r.push(t)}));var o,a,s,l,u,c,h,p,f=ue(e,n),d=f.geometry.coordinates,m=0,g=0,y=0,v=r.map((function(t){return[t[0]-d[0],t[1]-d[1]]}));for(o=0;o<r.length-1;o++)l=(a=v[o])[0],u=(s=v[o+1])[0],y+=p=l*(h=s[1])-u*(c=a[1]),m+=(l+u)*p,g+=(c+h)*p;if(0===y)return f;var _=1/(.5*y*6);return i([d[0]+_*m,d[1]+_*g],n);default:var b=It(e);return b?t(b,n):ue(e,n)}},t.centroid=ue,t.combine=function(t){function n(t,e,n){n?i[e].coordinates=i[e].coordinates.concat(t.geometry.coordinates):i[e].coordinates.push(t.geometry.coordinates),i[e].properties.push(t.properties)}var i={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},r=Object.keys(i).reduce((function(t,e){return t[e.replace("Multi","")]=e,t}),{});return L(t,(function(t){t.geometry&&(i[t.geometry.type]?n(t,t.geometry.type,!0):r[t.geometry.type]&&n(t,r[t.geometry.type],!1))})),u(Object.keys(i).filter((function(t){return i[t].coordinates.length})).sort().map((function(t){return e({type:t,coordinates:i[t].coordinates},{collectedProperties:i[t].properties})})))},t.distance=Dt,t.explode=ce,t.bbox=j,t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Se(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(Se(t))})),e},t.bboxPolygon=ne,t.booleanPointInPolygon=Tt,t.nearestPoint=Ie,t.nearestPointOnLine=We,t.nearestPointToLine=function(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var i=n.units,r=n.properties||{};if(!t)throw new Error("points is required");if(!(t=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return O(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==J(e))throw new Error("line must be a LineString");var o=1/0,a=null;return L(t,(function(t){var n=rn(t,e,{units:i});n<o&&(o=n,a=t)})),a&&(a.properties=Object.assign({dist:o},a.properties,r)),a},t.planepoint=function(t,e){var n=q(t),i=Y(e).coordinates[0];if(i.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var r=e.properties||{},o=r.a,a=r.b,s=r.c,l=n[0],u=n[1],c=i[0][0],h=i[0][1],p=void 0!==o?o:i[0][2],f=i[1][0],d=i[1][1],m=void 0!==a?a:i[1][2],g=i[2][0],y=i[2][1],v=void 0!==s?s:i[2][2];return(v*(l-c)*(u-d)+p*(l-f)*(u-y)+m*(l-g)*(u-h)-m*(l-c)*(u-y)-v*(l-f)*(u-h)-p*(l-g)*(u-d))/((l-c)*(u-d)+(l-f)*(u-y)+(l-g)*(u-h)-(l-c)*(u-y)-(l-f)*(u-h)-(l-g)*(u-d))},t.tin=Lt,t.bearing=se,t.destination=oe,t.kinks=function(t){var e,n,r={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var n=0;n<t.length-1;n++)for(var o=n;o<e.length-1;o++){if(t===e){if(1===Math.abs(n-o))continue;if(0===n&&o===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var a=function(t,e,n,i,r,o,a,s){var l,u,c,h,p={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(l=(s-o)*(n-t)-(a-r)*(i-e))?null!==p.x&&null!==p.y&&p:(h=(a-r)*(u=e-o)-(s-o)*(c=t-r),c=((n-t)*u-(i-e)*c)/l,p.x=t+(u=h/l)*(n-t),p.y=e+u*(i-e),u>=0&&u<=1&&(p.onLine1=!0),c>=0&&c<=1&&(p.onLine2=!0),!(!p.onLine1||!p.onLine2)&&[p.x,p.y])}(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);a&&r.features.push(i([a[0],a[1]]))}}))})),r},t.pointOnFeature=an,t.area=ln,t.along=function(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var r;if("Feature"===t.type)r=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");r=t.coordinates}if(!C(e))throw new Error("distance must be a number");for(var o=0,a=0;a<r.length&&!(e>=o&&a===r.length-1);a++){if(o>=e){var s=e-o;if(s){var l=se(r[a],r[a-1])-180;return oe(r[a],s,l,n)}return i(r[a])}o+=Dt(r[a],r[a+1],n)}return i(r[r.length-1])},t.length=pn,t.lineSlice=function(t,e,n){var i=G(n);if("LineString"!==J(n))throw new Error("line must be a LineString");for(var r,o=We(n,t),a=We(n,e),l=[(r=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],u=r[0].properties.index+1;u<r[1].properties.index+1;u++)l.push(i[u]);return l.push(r[1].geometry.coordinates),s(l,n.properties)},t.lineSliceAlong=fn,t.pointGrid=vn,t.truncate=_n,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return N(t,(function(t){e.push(t)})),u(e)},t.lineIntersect=Xe,t.lineChunk=function(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var i=n.units,r=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return N(t,(function(t){r&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,i){var r=pn(t,{units:n});if(r<=e)return i(t);var o=r/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var a=0;a<o;a++)i(fn(t,e*a,e*(a+1),{units:n}))}(t,e,i,(function(t){o.push(t)}))})),u(o)},t.unkinkPolygon=function(t){var e=[];return N(t,(function(t){"Polygon"===t.geometry.type&&L(function(t){function e(){for(var t=[],e=0;e<d.features.length;e++)-1==d.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,i=0;i<d.features.length;i++)t[e]!=i&&Tt(d.features[t[e]].geometry.coordinates[0][0],d.features[i],{ignoreBoundary:!0})&&ln(d.features[i])<1/0&&(n=i);d.features[t[e]].properties.parent=n}}function n(){for(var t=0;t<d.features.length;t++)if(-1==d.features[t].properties.parent){var e=d.features[t].properties.winding;d.features[t].properties.netWinding=e,i(t,e)}}function i(t,e){for(var n=0;n<d.features.length;n++)if(d.features[n].properties.parent==t){var r=e+d.features[n].properties.winding;d.features[n].properties.netWinding=r,i(n,r)}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var r=t.geometry.coordinates.length,a=[],s=0;s<r;s++){var l=t.geometry.coordinates[s];wn(l[0],l[l.length-1])||l.push(l[0]),a.push.apply(a,l.slice(0,l.length-1))}if(!function(t){for(var e={},n=1,i=0,r=t.length;i<r;++i){if(e.hasOwnProperty(t[i])){n=0;break}e[t[i]]=1}return n}(a))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var c=a.length,h=function(t,e,n){function i(t,n,i,r){var l,u,c=o[t][n],h=o[t][n+1],p=o[i][r],f=o[i][r+1],d=function(t,e,n,i){if(bn(t,n)||bn(t,i)||bn(e,n)||bn(i,n))return null;var r=t[0],o=t[1],a=e[0],s=e[1],l=n[0],u=n[1],c=i[0],h=i[1],p=(r-a)*(u-h)-(o-s)*(l-c);return 0===p?null:[((r*s-o*a)*(l-c)-(r-a)*(l*h-u*c))/p,((r*s-o*a)*(u-h)-(o-s)*(l*h-u*c))/p]}(c,h,p,f);if(null!==d&&(u=f[0]!==p[0]?(d[0]-p[0])/(f[0]-p[0]):(d[1]-p[1])/(f[1]-p[1]),!((l=h[0]!==c[0]?(d[0]-c[0])/(h[0]-c[0]):(d[1]-c[1])/(h[1]-c[1]))>=1||l<=0||u>=1||u<=0))){var m=!s[d];m&&(s[d]=!0),a.push(e?e(d,t,n,c,h,l,i,r,p,f,u,m):d)}}function r(t,e){var n,i,r,a,s=o[t][e],l=o[t][e+1];return s[0]<l[0]?(n=s[0],i=l[0]):(n=l[0],i=s[0]),s[1]<l[1]?(r=s[1],a=l[1]):(r=l[1],a=s[1]),{minX:n,minY:r,maxX:i,maxY:a,ring:t,edge:e}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var o=t.geometry.coordinates,a=[],s={};if(n){for(var l=[],u=0;u<o.length;u++)for(var c=0;c<o[u].length-1;c++)l.push(r(u,c));var h=Lo();h.load(l)}for(var p=0;p<o.length;p++)for(var f=0;f<o[p].length-1;f++)if(n)h.search(r(p,f)).forEach((function(t){i(p,f,t.ring,t.edge)}));else for(var d=0;d<o.length;d++)for(var m=0;m<o[d].length-1;m++)i(p,f,d,m);return e||(a={type:"Feature",geometry:{type:"MultiPoint",coordinates:a}}),a}(t,(function(t,e,n,i,r,o,a,s,l,u,c,h){return[t,e,n,i,r,o,a,s,l,u,c,h]})),p=h.length;if(0==p){var f=[];for(s=0;s<r;s++)f.push(o([t.geometry.coordinates[s]],{parent:-1,winding:function(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(xn([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0))var i=1;else i=-1;return i}(t.geometry.coordinates[s])}));var d=u(f);return e(),n(),d}var m=[],g=[];for(s=0;s<r;s++){m.push([]);for(var y=0;y<t.geometry.coordinates[s].length-1;y++)m[s].push([new sa(t.geometry.coordinates[s][(y+1).modulo(t.geometry.coordinates[s].length-1)],1,[s,y],[s,(y+1).modulo(t.geometry.coordinates[s].length-1)],void 0)]),g.push(new la(t.geometry.coordinates[s][y],[s,(y-1).modulo(t.geometry.coordinates[s].length-1)],[s,y],void 0,void 0,!1,!0))}for(s=0;s<p;s++)m[h[s][1]][h[s][2]].push(new sa(h[s][0],h[s][5],[h[s][1],h[s][2]],[h[s][6],h[s][7]],void 0)),h[s][11]&&g.push(new la(h[s][0],[h[s][1],h[s][2]],[h[s][6],h[s][7]],void 0,void 0,!0,!0));var v=g.length;for(s=0;s<m.length;s++)for(y=0;y<m[s].length;y++)m[s][y].sort((function(t,e){return t.param<e.param?-1:1}));var _=[];for(s=0;s<v;s++)_.push({minX:g[s].coord[0],minY:g[s].coord[1],maxX:g[s].coord[0],maxY:g[s].coord[1],index:s});var b=Lo();for(b.load(_),s=0;s<m.length;s++)for(y=0;y<m[s].length;y++)for(var x=0;x<m[s][y].length;x++){C=x==m[s][y].length-1?m[s][(y+1).modulo(t.geometry.coordinates[s].length-1)][0].coord:m[s][y][x+1].coord;var w=b.search({minX:C[0],minY:C[1],maxX:C[0],maxY:C[1]})[0];m[s][y][x].nxtIsectAlongEdgeIn=w.index}for(s=0;s<m.length;s++)for(y=0;y<m[s].length;y++)for(x=0;x<m[s][y].length;x++){var C=m[s][y][x].coord,k=(w=b.search({minX:C[0],minY:C[1],maxX:C[0],maxY:C[1]})[0]).index;k<c?g[k].nxtIsectAlongRingAndEdge2=m[s][y][x].nxtIsectAlongEdgeIn:wn(g[k].ringAndEdge1,m[s][y][x].ringAndEdgeIn)?g[k].nxtIsectAlongRingAndEdge1=m[s][y][x].nxtIsectAlongEdgeIn:g[k].nxtIsectAlongRingAndEdge2=m[s][y][x].nxtIsectAlongEdgeIn}var E=[];for(s=0,y=0;y<r;y++){var S=s;for(x=0;x<t.geometry.coordinates[y].length-1;x++)g[s].coord[0]<g[S].coord[0]&&(S=s),s++;var I=g[S].nxtIsectAlongRingAndEdge2;for(x=0;x<g.length;x++)if(g[x].nxtIsectAlongRingAndEdge1==S||g[x].nxtIsectAlongRingAndEdge2==S){var T=x;break}var P=xn([g[T].coord,g[S].coord,g[I].coord],!0)?1:-1;E.push({isect:S,parent:-1,winding:P})}for(E.sort((function(t,e){return g[t.isect].coord>g[e.isect].coord?-1:1})),f=[];E.length>0;){var A=E.pop(),L=A.isect,M=A.parent,R=A.winding,O=f.length,D=[g[L].coord],N=L;if(g[L].ringAndEdge1Walkable)var F=g[L].ringAndEdge1,z=g[L].nxtIsectAlongRingAndEdge1;else F=g[L].ringAndEdge2,z=g[L].nxtIsectAlongRingAndEdge2;for(;!wn(g[L].coord,g[z].coord);){D.push(g[z].coord);var B=void 0;for(s=0;s<E.length;s++)if(E[s].isect==z){B=s;break}if(null!=B&&E.splice(B,1),wn(F,g[z].ringAndEdge1)){if(F=g[z].ringAndEdge2,g[z].ringAndEdge2Walkable=!1,g[z].ringAndEdge1Walkable){var V={isect:z};xn([g[N].coord,g[z].coord,g[g[z].nxtIsectAlongRingAndEdge2].coord],1==R)?(V.parent=M,V.winding=-R):(V.parent=O,V.winding=R),E.push(V)}N=z,z=g[z].nxtIsectAlongRingAndEdge2}else F=g[z].ringAndEdge1,g[z].ringAndEdge1Walkable=!1,g[z].ringAndEdge2Walkable&&(V={isect:z},xn([g[N].coord,g[z].coord,g[g[z].nxtIsectAlongRingAndEdge1].coord],1==R)?(V.parent=M,V.winding=-R):(V.parent=O,V.winding=R),E.push(V)),N=z,z=g[z].nxtIsectAlongRingAndEdge1}D.push(g[z].coord),f.push(o([D],{index:O,parent:M,winding:R,netWinding:void 0}))}return d=u(f),e(),n(),d}(t),(function(n){e.push(o(n.geometry.coordinates,t.properties))}))})),u(e)},t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.properties,r=n.npoints,o=n.offset;return t=q(t),e=q(e),r=r||100,o=o||10,new da({x:t[0],y:t[1]},{x:e[0],y:e[1]},i=i||{}).Arc(r,{offset:o}).json()},t.lineSegment=He,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=J(t),i=J(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===i)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===i)throw new Error("splitter cannot be a GeometryCollection");var r=_n(e,{precision:7});switch(i){case"Point":return kn(t,r);case"MultiPoint":return Cn(t,r);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Cn(t,Xe(t,r))}},t.lineArc=In,t.polygonToLine=Pn,t.lineToPolygon=Ln,t.bboxClip=function(t,e){var n=function(t){return t.geometry?t.geometry.type:t.type}(t),i=G(t),r=t.properties;switch(n){case"LineString":case"MultiLineString":var a=[];return"LineString"===n&&(i=[i]),i.forEach((function(t){ma(t,e,a)})),1===a.length?s(a[0],r):c(a,r);case"Polygon":return o(Fn(i,e),r);case"MultiPolygon":return p(i.map((function(t){return Fn(t,e)})),r);default:throw new Error("geometry "+n+" not supported")}},t.lineOverlap=jn,t.sector=function(t,e,n,i,r){if(!k(r=r||{}))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==i)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof r)throw new Error("options must be an object");if(Gn(n)===Gn(i))return ae(t,e,r);var a=G(t),s=[[a]];return I(In(t,e,n,i,r),(function(t){s[0].push(t)})),s[0].push(a),o(s)},t.rhumbBearing=Ye,t.rhumbDistance=Je,t.rhumbDestination=Hn,t.polygonTangents=function(t,e){var n,r,o,a=G(t),s=G(e);switch(J(e)){case"Polygon":n=s[0][0],r=s[0][0],o=Zn(s[0][0],s[0][s[0].length-1],a);var l=Xn(s[0],a,o,void 0,n,r);n=l[0],r=l[1];break;case"MultiPolygon":n=s[0][0][0],r=s[0][0][0],o=Zn(s[0][0][0],s[0][0][s[0][0].length-1],a),s.forEach((function(t){var e=Xn(t[0],a,o,void 0,n,r);n=e[0],r=e[1]}))}return u([i(n),i(r)])},t.rewind=function(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,i=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof i)throw new Error("<mutate> must be a boolean");!1===i&&(t=Nt(t));var r=[];switch(t.type){case"GeometryCollection":return O(t,(function(t){Yn(t,n)})),t;case"FeatureCollection":return L(t,(function(t){L(Yn(t,n),(function(t){r.push(t)}))})),u(r)}return Yn(t,n)},t.isobands=function(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var i=n.zProperty||"elevation",r=n.commonProperties||{},a=n.breaksProperties||[];if(W(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!k(r))throw new Error("commonProperties is not an Object");if(!Array.isArray(a))throw new Error("breaksProperties is not an Array");var s=function(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",i=e.flip,r=e.flags;W(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return L(t,(function(t){var e=G(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return G(t)[0]-G(e)[0]}))})).sort((function(t,n){return e?G(t[0])[1]-G(n[0])[1]:G(n[0])[1]-G(t[0])[1]}))}(t,i),a=[],s=0;s<o.length;s++){for(var l=o[s],u=[],c=0;c<l.length;c++){var h=l[c];u.push(h.properties[n]?h.properties[n]:0),!0===r&&(h.properties.matrixPosition=[s,c])}a.push(u)}return a}(t,{zProperty:i,flip:!0}),l=function(t,e,n){for(var i=[],r=1;r<e.length;r++){var a=+e[r-1],s=+e[r],l=function(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),n=[];!function(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}(e);)for(var i=0;i<e.length;i++)if(!e[i].grouped){var r=[];r.push(e[i].lrCoordinates),e[i].grouped=!0;for(var a=o([e[i].lrCoordinates]),s=i+1;s<e.length;s++)e[s].grouped||function(t,e){for(var n=ce(t),i=0;i<n.features.length;i++)if(!Tt(n.features[i],e))return!1;return!0}(o([e[s].lrCoordinates]),a)&&(r.push(e[s].lrCoordinates),e[s].grouped=!0);n.push(r)}return n}(function(t){var e=[],n=[];t.forEach((function(t){var i=ln(o([t]));n.push(i),e.push({ring:t,area:i})})),n.sort((function(t,e){return e-t}));var i=[];return n.forEach((function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){i.push(e[n].ring),e.splice(n,1);break}})),i}(Qn(t,a,s-a))),u={};u.groupedRings=l,u[n]=a+"-"+s,i.push(u)}return i}(s,e,i);return u((l=function(t,e,n){var i=j(n),r=i[0],o=i[1],a=(i[2]-i[0])/(e[0].length-1),s=(i[3]-i[1])/(e.length-1),l=function(t){t[0]=t[0]*a+r,t[1]=t[1]*s+o};return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(l)}))}))})),t}(l,s,t)).map((function(t,e){if(a[e]&&!k(a[e]))throw new Error("Each mappedProperty is required to be an Object");var n=Object.assign({},r,a[e]);return n[i]=t[i],p(t.groupedRings,n)})))},t.transformRotate=ei,t.transformScale=ni,t.transformTranslate=function(t,e,n,i){if(!k(i=i||{}))throw new Error("options is invalid");var r=i.units,o=i.zTranslation,a=i.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n=-n),!1!==a&&void 0!==a||(t=Nt(t)),I(t,(function(t){var i=G(Hn(t,e,n,{units:r}));t[0]=i[0],t[1]=i[1],o&&3===t.length&&(t[2]+=o)})),t},t.lineOffset=function(t,e,n){if(!k(n=n||{}))throw new Error("options is invalid");var i=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var r=J(t),o=t.properties;switch(r){case"LineString":return ai(t,e,i);case"MultiLineString":var a=[];return N(t,(function(t){a.push(ai(t,e,i).geometry.coordinates)})),c(a,o);default:throw new Error("geometry "+r+" is not supported")}},t.polygonize=function(t){var e=ds.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],i=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?n.push(t):i.push(t)})),n.forEach((function(t){ps.findEdgeRingContaining(t,i)&&i.push(t)})),u(i.map((function(t){return t.toPolygon()})))},t.booleanDisjoint=function(t,e){var n;return N(t,(function(t){N(e,(function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t.coordinates,e.coordinates);case"LineString":return!ui(e,t);case"Polygon":return!Tt(t,e)}break;case"LineString":switch(e.type){case"Point":return!ui(t,e);case"LineString":return!function(t,e){return Xe(t,e).features.length>0}(t,e);case"Polygon":return!ci(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Tt(e,t);case"LineString":return!ci(t,e);case"Polygon":return!function(t,e){for(var n=0;n<t.coordinates[0].length;n++)if(Tt(t.coordinates[0][n],e))return!0;for(var i=0;i<e.coordinates[0].length;i++)if(Tt(e.coordinates[0][i],t))return!0;return!1}(e,t)}}}(t.geometry,e.geometry)}))})),n},t.booleanContains=function(t,e){var n=J(t),i=J(e),r=Y(t),o=Y(e),a=G(t),s=G(e);switch(n){case"Point":switch(i){case"Point":return pi(a,s);default:throw new Error("feature2 "+i+" geometry not supported")}case"MultiPoint":switch(i){case"Point":return function(t,e){var n,i=!1;for(n=0;n<t.coordinates.length;n++)if(pi(t.coordinates[n],e.coordinates)){i=!0;break}return i}(r,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++){for(var i=!1,r=0;r<t.coordinates.length;r++)if(pi(e.coordinates[n],t.coordinates[r])){i=!0;break}if(!i)return!1}return!0}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"Point":return dn(o,r,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,i=0;i<e.coordinates.length;i++)if(dn({type:"Point",coordinates:e.coordinates[i]},t,{ignoreEndVertices:!0})&&(n=!0),!dn({type:"Point",coordinates:e.coordinates[i]},t,{ignoreEndVertices:!1}))return!1;return n}(r,o);case"MultiPoint":return function(t,e){for(var n=!1,i=0;i<e.coordinates.length;i++)if(dn(e.coordinates[i],t,{ignoreEndVertices:!0})&&(n=!0),!dn(e.coordinates[i],t))return!1;return!!n}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"Point":return Tt(o,r,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,i=0;if(!hi(j(t),j(e)))return!1;for(;i<e.coordinates.length-1;i++)if(Tt({type:"Point",coordinates:function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(e.coordinates[i],e.coordinates[i+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(r,o);case"Polygon":return function(t,e){if(!hi(j(t),j(e)))return!1;for(var n=0;n<e.coordinates[0].length;n++)if(!Tt(e.coordinates[0][n],t))return!1;return!0}(r,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++)if(!Tt(e.coordinates[n],t,{ignoreBoundary:!0}))return!1;return!0}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=J(t),i=J(e),r=Y(t),o=Y(e);switch(n){case"MultiPoint":switch(i){case"LineString":return fi(r,o);case"Polygon":return mi(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"MultiPoint":return fi(o,r);case"LineString":return function(t,e){if(Xe(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var i=0;i<e.coordinates.length-1;i++){var r=!0;if(0!==i&&i!==e.coordinates.length-2||(r=!1),gi(t.coordinates[n],t.coordinates[n+1],e.coordinates[i],r))return!0}return!1}(r,o);case"Polygon":return di(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"MultiPoint":return mi(o,r);case"LineString":return di(o,r);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanClockwise=Wn,t.booleanOverlap=bi,t.booleanPointOnLine=dn,t.booleanEqual=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");return J(t)===J(e)&&new _s({precision:6}).compare(Wt(t),Wt(e))},t.booleanWithin=mn,t.clone=Nt,t.cleanCoords=Wt,t.clustersDbscan=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.minPoints,r=n.units;if(W(t,"Point","Input must contain Points"),null==e)throw new Error("maxDistance is required");if(!(Math.sign(e)>0))throw new Error("Invalid maxDistance");if(!(null==i||Math.sign(i)>0))throw new Error("Invalid minPoints");t=Nt(t),i=i||3;var o=new ks.DBSCAN,a=-1;return o.run(R(t),x(e,r),i,Dt).forEach((function(e){a++,e.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=a,n.properties.dbscan="core"}))})),o.noise.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.dbscan=n.properties.cluster?"edge":"noise"})),t},t.clustersKmeans=function(t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var n=e.numberOfClusters,i=e.mutate;W(t,"Point","Input must contain Points");var r=t.features.length;(n=n||Math.round(Math.sqrt(r/2)))>r&&(n=r),!1!==i&&void 0!==i||(t=Nt(t));var o=R(t),a=o.slice(0,n),s=function(t,e,n,i){var r=[],o=[],a=[],s=[],l=!1,u=1e4,c=t.length,h=t[0].length,p=h>0,f=[];if(n)r="kmrand"==n?function(t,e){for(var n={},i=[],r=e<<2,o=t.length,a=t[0].length>0;i.length<e&&r-- >0;){var s=t[Math.floor(Math.random()*o)],l=a?s.join("_"):""+s;n[l]||(n[l]=!0,i.push(s))}if(i.length<e)throw new Error("Error initializating clusters");return i}(t,e):"kmpp"==n?function(t,e){var n=t[0].length?Ss:Is,i=[],r=t.length,o=t[0].length>0,a=t[Math.floor(Math.random()*r)];for(o&&a.join("_"),i.push(a);i.length<e;){for(var s=[],l=i.length,u=0,c=[],h=0;h<r;h++){for(var p=1/0,f=0;f<l;f++){var d=n(t[h],i[f]);d<=p&&(p=d)}s[h]=p}for(var m=0;m<r;m++)u+=s[m];for(var g=0;g<r;g++)c[g]={i:g,v:t[g],pr:s[g]/u,cs:0};c.sort((function(t,e){return t.pr-e.pr})),c[0].cs=c[0].pr;for(var y=1;y<r;y++)c[y].cs=c[y-1].cs+c[y].pr;for(var v=Math.random(),_=0;_<r-1&&c[_++].cs<v;);i.push(c[_-1].v)}return i}(t,e):n;else for(var d={};r.length<e;){var m=Math.floor(Math.random()*c);d[m]||(d[m]=!0,r.push(t[m]))}do{xi(e,0,f);for(var g=0;g<c;g++){for(var y=1/0,v=0,_=0;_<e;_++)(s=p?Ts(t[g],r[_]):Math.abs(t[g]-r[_]))<=y&&(y=s,v=_);a[g]=v,f[v]++}for(var b=[],x=(o=[],0);x<e;x++)b[x]=p?xi(h,0,b[x]):0,o[x]=r[x];if(p){for(var w=0;w<e;w++)r[w]=[];for(var C=0;C<c;C++)for(var k=b[a[C]],E=t[C],S=0;S<h;S++)k[S]+=E[S];l=!0;for(var I=0;I<e;I++){for(var T=r[I],P=b[I],A=o[I],L=f[I],M=0;M<h;M++)T[M]=P[M]/L||0;if(l)for(var R=0;R<h;R++)if(A[R]!=T[R]){l=!1;break}}}else{for(var O=0;O<c;O++)b[a[O]]+=t[O];for(var D=0;D<e;D++)r[D]=b[D]/f[D]||0;l=!0;for(var N=0;N<e;N++)if(o[N]!=r[N]){l=!1;break}}l=l||--u<=0}while(!l);return{it:1e4-u,k:e,idxs:a,centroids:r}}(o,n,a),l={};return s.centroids.forEach((function(t,e){l[e]=t})),L(t,(function(t,e){var n=s.idxs[e];t.properties.cluster=n,t.properties.centroid=l[n]})),t},t.pointToLineDistance=rn,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==wi(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==wi(e,"line2"))throw new Error("line2 must be a LineString");for(var n=He(Wt(t)).features,i=He(Wt(e)).features,r=0;r<n.length;r++){var o=n[r].geometry.coordinates;if(!i[r])break;if(!function(t,e){return v(Ye(t[0],t[1]))===v(Ye(e[0],e[1]))}(o,i[r].geometry.coordinates))return!1}return!0},t.shortestPath=function(t,n,r){if(!k(r=r||{}))throw new Error("options is invalid");var o=r.resolution,a=r.minDistance,l=r.obstacles||u([]);if(!t)throw new Error("start is required");if(!n)throw new Error("end is required");if(o&&!C(o)||o<=0)throw new Error("options.resolution must be a number, greater than 0");if(a)throw new Error("options.minDistance is not yet implemented");var c=q(t),h=q(n);switch(t=i(c),n=i(h),J(l)){case"FeatureCollection":if(0===l.features.length)return s([c,h]);break;case"Polygon":l=u([e(Y(l))]);break;default:throw new Error("invalid obstacles")}var p=l;p.features.push(t),p.features.push(n);var f=j(ni(ne(j(p)),1.15));o||(o=Dt([f[0],f[1]],[f[2],f[1]],r)/100),p.features.pop(),p.features.pop();for(var d=f[0],m=f[1],g=f[2],y=f[3],v=o/Dt([d,m],[g,m],r)*(g-d),_=o/Dt([d,m],[d,y],r)*(y-m),b=g-d,x=y-m,w=(b-Math.floor(b/v)*v)/2,E=[],S=[],I=[],T=[],P=1/0,A=1/0,L=y-(x-Math.floor(x/_)*_)/2,M=0;L>=m;){for(var R=[],O=[],D=d+w,N=0;D<=g;){var F=i([D,L]),z=function(t,e){for(var n=0;n<e.features.length;n++)if(Tt(t,e.features[n]))return!0;return!1}(F,l);R.push(z?0:1),O.push(D+"|"+L);var B=Dt(F,t);!z&&B<P&&(P=B,I={x:N,y:M});var V=Dt(F,n);!z&&V<A&&(A=V,T={x:N,y:M}),D+=v,N++}S.push(R),E.push(O),L-=_,M++}var U=new ki(S,{diagonal:!0}),G=[c];return Ps.search(U,U.grid[I.y][I.x],U.grid[T.y][T.x]).forEach((function(t){var e=E[t.x][t.y].split("|");G.push([+e[0],+e[1]])})),G.push(h),Wt(s(G))},t.voronoi=function(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return W(t,"Point","points"),u(function(){function t(t){return new Ji(t.map((function(i,r){var o=[Math.round(e(i,r,t)/zs)*zs,Math.round(n(i,r,t)/zs)*zs];return o.index=r,o.data=i,o})),i)}var e=Ii,n=Ti,i=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:As(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:As(+e),t):n},t.extent=function(e){return arguments.length?(i=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):i&&[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},t.size=function(e){return arguments.length?(i=null==e?null:[[0,0],[+e[0],+e[1]]],t):i&&[i[1][0]-i[0][0],i[1][1]-i[0][1]]},t}().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(Qi))},t.ellipse=$i,t.centerMean=er,t.centerMedian=function(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!C(n))throw new Error("counter must be a number");var i=e.weight,r=er(t,{weight:e.weight}),o=u([]);return L(t,(function(t){o.features.push(ue(t,{weight:t.properties[i]}))})),o.properties={tolerance:e.tolerance,medianCandidates:[]},nr(r.geometry.coordinates,[0,0],o,n)},t.standardDeviationalEllipse=function(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,i=e.weight,r=e.properties||{};if(!C(n))throw new Error("steps must be a number");if(!k(r))throw new Error("properties must be a number");var o=R(t).length,a=er(t,{weight:i}),s=0,l=0,c=0;L(t,(function(t){var e=t.properties[i]||1,n=ir(G(t),G(a));s+=Math.pow(n.x,2)*e,l+=Math.pow(n.y,2)*e,c+=n.x*n.y*e}));var h=s-l,p=Math.sqrt(Math.pow(h,2)+4*Math.pow(c,2)),f=Math.atan((h+p)/(2*c)),d=180*f/Math.PI,m=0,g=0,y=0;L(t,(function(t){var e=t.properties[i]||1,n=ir(G(t),G(a));m+=Math.pow(n.x*Math.cos(f)-n.y*Math.sin(f),2)*e,g+=Math.pow(n.x*Math.sin(f)+n.y*Math.cos(f),2)*e,y+=e}));var v=Math.sqrt(2*m/y),_=Math.sqrt(2*g/y),b=$i(a,v,_,{units:"degrees",angle:d,steps:n,properties:r}),x=At(t,u([b])),w={meanCenterCoordinates:G(a),semiMajorAxis:v,semiMinorAxis:_,numberOfFeatures:o,angle:d,percentageWithinEllipse:100*R(x).length/o};return b.properties.standardDeviationalEllipse=w,b},t.difference=function(t,n){var i=Y(t),r=Y(n),o=t.properties||{};if(i=Lr(i),r=Lr(r),!i)return null;if(!r)return e(i,o);var a=new Yu,s=a.read(i),l=a.read(r),u=Jp.difference(s,l);return u.isEmpty()?null:e((new Ku).write(u),o)},t.buffer=function(t,e,n){var i=(n=n||{}).units,r=n.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");r=r||64,i=i||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return O(t,(function(t){var n=lo(t,e,i,r);n&&o.push(n)})),u(o);case"FeatureCollection":return L(t,(function(t){var n=lo(t,e,i,r);n&&L(n,(function(t){t&&o.push(t)}))})),u(o)}return lo(t,e,i,r)},t.union=po,t.intersect=fo,t.dissolve=function(t,e){if(!k(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;W(t,"Polygon","dissolve");var i=Nt(t),r=i.features,o=[];r.forEach((function(t,e){t.properties.origIndexPosition=e}));var a=je();for(var l in a.load(i),r){var u=r[l],c=!1;if(a.search(u).features.forEach((function(t){u=r[l];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var i=mo(e,o);0!==i&&(e-=i)}if(e!==+l){var h=r[e];h&&u&&(void 0!==n&&h.properties[n]!==u.properties[n]||bi(u,h)&&function(t,e){return Xe(s(R(t)),s(R(e))).features.length>0}(u,h)&&(r[l]=po(u,h),o.push(t.properties.origIndexPosition),o.sort((function(t,e){return t-e})),a.remove(t),r.splice(e,1),u.properties.origIndexPosition=l,a.remove(u,(function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition})),c=!0))}})),c){if(!u)continue;u.properties.origIndexPosition=l,a.insert(u),l--}}return r.forEach((function(t){delete t.properties.origIndexPosition,delete t.bbox})),i},t.hexGrid=go,t.mask=function(t,e){var n=function(t){return o(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e),i=function(t){var e=[],n=[];return N(t,(function(t){var i=t.geometry.coordinates,r=i[0],a=i.slice(1);e.push(o([r])),a.forEach((function(t){n.push(o([t]))}))})),[u(e),u(n)]}(t),r=i[0],a=i[1];return function(t,e,n){var i=[];return i.push(t.geometry.coordinates[0]),N(e,(function(t){i.push(t.geometry.coordinates[0])})),N(n,(function(t){i.push(t.geometry.coordinates[0])})),o(i)}(n,r=yo(r),a=yo(a))},t.squareGrid=_o,t.triangleGrid=bo,t.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.gridType,r=n.property,o=n.weight;if(!t)throw new Error("points is required");if(W(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");r=r||"elevation",i=i||"square",o=o||1;var a,s=j(t);switch(i){case"point":case"points":a=vn(s,e,n);break;case"square":case"squares":a=_o(s,e,n);break;case"hex":case"hexes":a=go(s,e,n);break;case"triangle":case"triangles":a=bo(s,e,n);break;default:throw new Error("invalid gridType")}var l=[];return L(a,(function(e){var a=0,s=0;L(t,(function(t){var l,u=Dt("point"===i?e:ue(e),t,n);if(void 0!==r&&(l=t.properties[r]),void 0===l&&(l=t.geometry.coordinates[2]),void 0===l)throw new Error("zValue is missing");0===u&&(a=l);var c=1/Math.pow(u,o);s+=c,a+=c*l}));var u=Nt(e);u.properties[r]=a/s,l.push(u)})),u(l)},t.pointOnSurface=an,t.polygonToLineString=Pn,t.lineStringToPolygon=Ln,t.inside=Tt,t.within=At,t.bezier=ee,t.nearest=Ie,t.pointOnLine=We,t.lineDistance=pn,t.radians2degrees=_,t.degrees2radians=b,t.distanceToDegrees=y,t.distanceToRadians=g,t.radiansToDistance=m,t.bearingToAngle=v,t.convertDistance=x,t.toMercator=Qe,t.toWgs84=$e,t.randomPosition=rr,t.randomPoint=or,t.randomPolygon=ar,t.randomLineString=sr,t.getCluster=ur,t.clusterEach=cr,t.clusterReduce=hr,t.createBins=pr,t.applyFilter=fr,t.propertiesContainsFilter=dr,t.filterProperties=mr,t.earthRadius=xo,t.factors=wo,t.unitsFactors=Co,t.areaFactors=ko,t.feature=e,t.geometry=n,t.point=i,t.points=r,t.polygon=o,t.polygons=a,t.lineString=s,t.lineStrings=l,t.featureCollection=u,t.multiLineString=c,t.multiPoint=h,t.multiPolygon=p,t.geometryCollection=f,t.round=d,t.radiansToLength=m,t.lengthToRadians=g,t.lengthToDegrees=y,t.bearingToAzimuth=v,t.radiansToDegrees=_,t.degreesToRadians=b,t.convertLength=x,t.convertArea=w,t.isNumber=C,t.isObject=k,t.validateBBox=E,t.validateId=S,t.getCoord=q,t.getCoords=G,t.containsNumber=H,t.geojsonType=X,t.featureOf=Z,t.collectionOf=W,t.getGeom=Y,t.getGeomType=K,t.getType=J,t.coordEach=I,t.coordReduce=T,t.propEach=P,t.propReduce=A,t.featureEach=L,t.featureReduce=M,t.coordAll=R,t.geomEach=O,t.geomReduce=D,t.flattenEach=N,t.flattenReduce=F,t.segmentEach=z,t.segmentReduce=B,t.lineEach=V,t.lineReduce=U,Object.defineProperty(t,"__esModule",{value:!0})}(e)},XaGS:function(t,e,n){(function(t){var n="[object Arguments]",i="[object Map]",r="[object Object]",o="[object Set]",a=/^\[object .+?Constructor\]$/,s=/^(?:0|[1-9]\d*)$/,l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l[n]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l["[object Function]"]=l[i]=l["[object Number]"]=l[r]=l["[object RegExp]"]=l[o]=l["[object String]"]=l["[object WeakMap]"]=!1;var u="object"==typeof global&&global&&global.Object===Object&&global,c="object"==typeof self&&self&&self.Object===Object&&self,h=u||c||Function("return this")(),p=e&&!e.nodeType&&e,f=p&&"object"==typeof t&&t&&!t.nodeType&&t,d=f&&f.exports===p,m=d&&u.process,g=function(){try{return m&&m.binding&&m.binding("util")}catch(t){}}(),y=g&&g.isTypedArray;function v(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function _(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function b(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var x,w,C,k=Array.prototype,E=Object.prototype,S=h["__core-js_shared__"],I=Function.prototype.toString,T=E.hasOwnProperty,P=(x=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+x:"",A=E.toString,L=RegExp("^"+I.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=d?h.Buffer:void 0,R=h.Symbol,O=h.Uint8Array,D=E.propertyIsEnumerable,N=k.splice,F=R?R.toStringTag:void 0,z=Object.getOwnPropertySymbols,B=M?M.isBuffer:void 0,V=(w=Object.keys,C=Object,function(t){return w(C(t))}),U=pt(h,"DataView"),j=pt(h,"Map"),q=pt(h,"Promise"),G=pt(h,"Set"),H=pt(h,"WeakMap"),X=pt(Object,"create"),Z=gt(U),W=gt(j),Y=gt(q),K=gt(G),J=gt(H),Q=R?R.prototype:void 0,$=Q?Q.valueOf:void 0;function tt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function et(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function it(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new nt;++e<n;)this.add(t[e])}function rt(t){var e=this.__data__=new et(t);this.size=e.size}function ot(t,e){for(var n=t.length;n--;)if(yt(t[n][0],e))return n;return-1}function at(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":F&&F in Object(t)?function(t){var e=T.call(t,F),n=t[F];try{t[F]=void 0;var i=!0}catch(o){}var r=A.call(t);return i&&(e?t[F]=n:delete t[F]),r}(t):function(t){return A.call(t)}(t)}function st(t){return kt(t)&&at(t)==n}function lt(t,e,a,s,l){return t===e||(null==t||null==e||!kt(t)&&!kt(e)?t!=t&&e!=e:function(t,e,a,s,l,u){var c=_t(t),h=_t(e),p=c?"[object Array]":dt(t),f=h?"[object Array]":dt(e),d=(p=p==n?r:p)==r,m=(f=f==n?r:f)==r,g=p==f;if(g&&bt(t)){if(!bt(e))return!1;c=!0,d=!1}if(g&&!d)return u||(u=new rt),c||Et(t)?ut(t,e,a,s,l,u):function(t,e,n,r,a,s,l){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!s(new O(t),new O(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return yt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case i:var u=_;case o:if(u||(u=b),t.size!=e.size&&!(1&r))return!1;var c=l.get(t);if(c)return c==e;r|=2,l.set(t,e);var h=ut(u(t),u(e),r,a,s,l);return l.delete(t),h;case"[object Symbol]":if($)return $.call(t)==$.call(e)}return!1}(t,e,p,a,s,l,u);if(!(1&a)){var y=d&&T.call(t,"__wrapped__"),v=m&&T.call(e,"__wrapped__");if(y||v){var x=y?t.value():t,w=v?e.value():e;return u||(u=new rt),l(x,w,a,s,u)}}return!!g&&(u||(u=new rt),function(t,e,n,i,r,o){var a=1&n,s=ct(t),l=s.length;if(l!=ct(e).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in e:T.call(e,c)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var p=!0;o.set(t,e),o.set(e,t);for(var f=a;++u<l;){var d=t[c=s[u]],m=e[c];if(i)var g=a?i(m,d,c,e,t,o):i(d,m,c,t,e,o);if(!(void 0===g?d===m||r(d,m,n,i,o):g)){p=!1;break}f||(f="constructor"==c)}if(p&&!f){var y=t.constructor,v=e.constructor;y==v||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v||(p=!1)}return o.delete(t),o.delete(e),p}(t,e,a,s,l,u))}(t,e,a,s,lt,l))}function ut(t,e,n,i,r,o){var a=1&n,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(t);if(u&&o.get(e))return u==e;var c=-1,h=!0,p=2&n?new it:void 0;for(o.set(t,e),o.set(e,t);++c<s;){var f=t[c],d=e[c];if(i)var m=a?i(d,f,c,e,t,o):i(f,d,c,t,e,o);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!v(e,(function(t,e){if(!p.has(e)&&(f===t||r(f,t,n,i,o)))return p.push(e)}))){h=!1;break}}else if(f!==d&&!r(f,d,n,i,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function ct(t){return function(t,e,n){var i=e(t);return _t(t)?i:function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}(i,n(t))}(t,St,ft)}function ht(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function pt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Ct(t)||function(t){return!!P&&P in t}(t))&&(xt(t)?L:a).test(gt(t))}(n)?n:void 0}tt.prototype.clear=function(){this.__data__=X?X(null):{},this.size=0},tt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},tt.prototype.get=function(t){var e=this.__data__;if(X){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return T.call(e,t)?e[t]:void 0},tt.prototype.has=function(t){var e=this.__data__;return X?void 0!==e[t]:T.call(e,t)},tt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=X&&void 0===e?"__lodash_hash_undefined__":e,this},et.prototype.clear=function(){this.__data__=[],this.size=0},et.prototype.delete=function(t){var e=this.__data__,n=ot(e,t);return!(n<0||(n==e.length-1?e.pop():N.call(e,n,1),--this.size,0))},et.prototype.get=function(t){var e=this.__data__,n=ot(e,t);return n<0?void 0:e[n][1]},et.prototype.has=function(t){return ot(this.__data__,t)>-1},et.prototype.set=function(t,e){var n=this.__data__,i=ot(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},nt.prototype.clear=function(){this.size=0,this.__data__={hash:new tt,map:new(j||et),string:new tt}},nt.prototype.delete=function(t){var e=ht(this,t).delete(t);return this.size-=e?1:0,e},nt.prototype.get=function(t){return ht(this,t).get(t)},nt.prototype.has=function(t){return ht(this,t).has(t)},nt.prototype.set=function(t,e){var n=ht(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},it.prototype.add=it.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},it.prototype.has=function(t){return this.__data__.has(t)},rt.prototype.clear=function(){this.__data__=new et,this.size=0},rt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},rt.prototype.get=function(t){return this.__data__.get(t)},rt.prototype.has=function(t){return this.__data__.has(t)},rt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof et){var i=n.__data__;if(!j||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new nt(i)}return n.set(t,e),this.size=n.size,this};var ft=z?function(t){return null==t?[]:(t=Object(t),function(e,n){for(var i=-1,r=null==e?0:e.length,o=0,a=[];++i<r;){var s=e[i];D.call(t,s)&&(a[o++]=s)}return a}(z(t)))}:function(){return[]},dt=at;function mt(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||s.test(t))&&t>-1&&t%1==0&&t<e}function gt(t){if(null!=t){try{return I.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function yt(t,e){return t===e||t!=t&&e!=e}(U&&"[object DataView]"!=dt(new U(new ArrayBuffer(1)))||j&&dt(new j)!=i||q&&"[object Promise]"!=dt(q.resolve())||G&&dt(new G)!=o||H&&"[object WeakMap]"!=dt(new H))&&(dt=function(t){var e=at(t),n=e==r?t.constructor:void 0,a=n?gt(n):"";if(a)switch(a){case Z:return"[object DataView]";case W:return i;case Y:return"[object Promise]";case K:return o;case J:return"[object WeakMap]"}return e});var vt=st(function(){return arguments}())?st:function(t){return kt(t)&&T.call(t,"callee")&&!D.call(t,"callee")},_t=Array.isArray,bt=B||function(){return!1};function xt(t){if(!Ct(t))return!1;var e=at(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function wt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Ct(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function kt(t){return null!=t&&"object"==typeof t}var Et=y?function(t){return function(e){return t(e)}}(y):function(t){return kt(t)&&wt(t.length)&&!!l[at(t)]};function St(t){return null!=(e=t)&&wt(e.length)&&!xt(e)?function(t,e){var n=_t(t),i=!n&&vt(t),r=!n&&!i&&bt(t),o=!n&&!i&&!r&&Et(t),a=n||i||r||o,s=a?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],l=s.length;for(var u in t)!T.call(t,u)||a&&("length"==u||r&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||mt(u,l))||s.push(u);return s}(t):function(t){if((e=t)!==("function"==typeof(n=e&&e.constructor)&&n.prototype||E))return V(t);var e,n,i=[];for(var r in Object(t))T.call(t,r)&&"constructor"!=r&&i.push(r);return i}(t);var e}t.exports=function(t,e){return lt(t,e)}}).call(this,n("YuTi")(t))},YuTi:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},ZK94:function(t,e){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},cKVx:function(t,e,n){var i=n("lJFB"),r=n("Gxqf"),o=n("iVUf");t.exports=function(t){if(!t)return[];var e=r(i(t)),n=[];return e.features.forEach((function(t){t.geometry&&(n=n.concat(o(t.geometry.coordinates)))})),n}},eGrx:function(t,e){var n=t.exports=function(t){return new i(t)};function i(t){this.value=t}function r(t,e,n){var i=[],r=[],s=!0;return function t(h){var p=n?o(h):h,f={},d=!0,m={node:p,node_:h,path:[].concat(i),parent:r[r.length-1],parents:r,key:i.slice(-1)[0],isRoot:0===i.length,level:i.length,circular:null,update:function(t,e){m.isRoot||(m.parent.node[m.key]=t),m.node=t,e&&(d=!1)},delete:function(t){delete m.parent.node[m.key],t&&(d=!1)},remove:function(t){l(m.parent.node)?m.parent.node.splice(m.key,1):delete m.parent.node[m.key],t&&(d=!1)},keys:null,before:function(t){f.before=t},after:function(t){f.after=t},pre:function(t){f.pre=t},post:function(t){f.post=t},stop:function(){s=!1},block:function(){d=!1}};if(!s)return m;function g(){if("object"==typeof m.node&&null!==m.node){m.keys&&m.node_===m.node||(m.keys=a(m.node)),m.isLeaf=0==m.keys.length;for(var t=0;t<r.length;t++)if(r[t].node_===h){m.circular=r[t];break}}else m.isLeaf=!0,m.keys=null;m.notLeaf=!m.isLeaf,m.notRoot=!m.isRoot}g();var y=e.call(m,m.node);return void 0!==y&&m.update&&m.update(y),f.before&&f.before.call(m,m.node),d?("object"!=typeof m.node||null===m.node||m.circular||(r.push(m),g(),u(m.keys,(function(e,r){i.push(e),f.pre&&f.pre.call(m,m.node[e],e);var o=t(m.node[e]);n&&c.call(m.node,e)&&(m.node[e]=o.node),o.isLast=r==m.keys.length-1,o.isFirst=0==r,f.post&&f.post.call(m,o),i.pop()})),r.pop()),f.after&&f.after.call(m,m.node),m):m}(t).node}function o(t){if("object"==typeof t&&null!==t){var e;if(l(t))e=[];else if("[object Date]"===s(t))e=new Date(t.getTime?t.getTime():t);else if("[object RegExp]"===s(t))e=new RegExp(t);else if(function(t){return"[object Error]"===s(t)}(t))e={message:t.message};else if(function(t){return"[object Boolean]"===s(t)}(t))e=new Boolean(t);else if(function(t){return"[object Number]"===s(t)}(t))e=new Number(t);else if(function(t){return"[object String]"===s(t)}(t))e=new String(t);else if(Object.create&&Object.getPrototypeOf)e=Object.create(Object.getPrototypeOf(t));else if(t.constructor===Object)e={};else{var n=function(){};n.prototype=t.constructor&&t.constructor.prototype||t.__proto__||{},e=new n}return u(a(t),(function(n){e[n]=t[n]})),e}return t}i.prototype.get=function(t){for(var e=this.value,n=0;n<t.length;n++){var i=t[n];if(!e||!c.call(e,i)){e=void 0;break}e=e[i]}return e},i.prototype.has=function(t){for(var e=this.value,n=0;n<t.length;n++){var i=t[n];if(!e||!c.call(e,i))return!1;e=e[i]}return!0},i.prototype.set=function(t,e){for(var n=this.value,i=0;i<t.length-1;i++){var r=t[i];c.call(n,r)||(n[r]={}),n=n[r]}return n[t[i]]=e,e},i.prototype.map=function(t){return r(this.value,t,!0)},i.prototype.forEach=function(t){return this.value=r(this.value,t,!1),this.value},i.prototype.reduce=function(t,e){var n=1===arguments.length,i=n?this.value:e;return this.forEach((function(e){this.isRoot&&n||(i=t.call(this,i,e))})),i},i.prototype.paths=function(){var t=[];return this.forEach((function(e){t.push(this.path)})),t},i.prototype.nodes=function(){var t=[];return this.forEach((function(e){t.push(this.node)})),t},i.prototype.clone=function(){var t=[],e=[];return function n(i){for(var r=0;r<t.length;r++)if(t[r]===i)return e[r];if("object"==typeof i&&null!==i){var s=o(i);return t.push(i),e.push(s),u(a(i),(function(t){s[t]=n(i[t])})),t.pop(),e.pop(),s}return i}(this.value)};var a=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};function s(t){return Object.prototype.toString.call(t)}var l=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},u=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)};u(a(i.prototype),(function(t){n[t]=function(e){var n=[].slice.call(arguments,1),r=new i(e);return r[t].apply(r,n)}}));var c=Object.hasOwnProperty||function(t,e){return e in t}},epIz:function(t,e){function n(t){if(!(this instanceof n))return new n(t);this._bbox=t||[1/0,1/0,-1/0,-1/0],this._valid=!!t}t.exports=n,n.prototype.include=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[0]),this._bbox[3]=Math.max(this._bbox[3],t[1]),this},n.prototype.equals=function(t){var e;return e=t instanceof n?t.bbox():t,this._bbox[0]==e[0]&&this._bbox[1]==e[1]&&this._bbox[2]==e[2]&&this._bbox[3]==e[3]},n.prototype.center=function(t){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},n.prototype.union=function(t){var e;return this._valid=!0,e=t instanceof n?t.bbox():t,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[2]),this._bbox[3]=Math.max(this._bbox[3],e[3]),this},n.prototype.bbox=function(){return this._valid?this._bbox:null},n.prototype.contains=function(t){if(!t)return this._fastContains();if(!this._valid)return null;var e=t[0],n=t[1];return this._bbox[0]<=e&&this._bbox[1]<=n&&this._bbox[2]>=e&&this._bbox[3]>=n},n.prototype.intersect=function(t){return this._valid?(e=t instanceof n?t.bbox():t,!(this._bbox[0]>e[2]||this._bbox[2]<e[0]||this._bbox[3]<e[1]||this._bbox[1]>e[3])):null;var e},n.prototype._fastContains=function(){return this._valid?new Function("ll","return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]"):new Function("return null;")},n.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null}},"f3+a":function(t,e,n){(function(t){var i=function(){var t=function(t,e,n,i){for(n=n||{},i=t.length;i--;n[t[i]]=e);return n},e=[1,12],n=[1,13],i=[1,9],r=[1,10],o=[1,11],a=[1,14],s=[1,15],l=[14,18,22,24],u=[18,22],c=[22,24],h={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,n,i,r,o,a){var s=o.length-1;switch(r){case 1:this.$=t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(t);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=o[s-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=o[s-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[o[s-2],o[s]];break;case 16:this.$={},this.$[o[s][0]]=o[s][1];break;case 17:this.$=o[s-2],void 0!==o[s-2][o[s][0]]&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push(o[s][0])),o[s-2][o[s][0]]=o[s][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[o[s]];break;case 21:this.$=o[s-2],o[s-2].push(o[s])}},table:[{3:5,4:e,5:6,6:n,7:3,8:i,9:4,10:r,11:o,12:1,13:2,15:7,16:8,17:a,23:s},{1:[3]},{14:[1,16]},t(l,[2,7]),t(l,[2,8]),t(l,[2,9]),t(l,[2,10]),t(l,[2,11]),t(l,[2,12]),t(l,[2,3]),t(l,[2,4]),t(l,[2,5]),t([14,18,21,22,24],[2,1]),t(l,[2,2]),{3:20,4:e,18:[1,17],19:18,20:19},{3:5,4:e,5:6,6:n,7:3,8:i,9:4,10:r,11:o,13:23,15:7,16:8,17:a,23:s,24:[1,21],25:22},{1:[2,6]},t(l,[2,13]),{18:[1,24],22:[1,25]},t(u,[2,16]),{21:[1,26]},t(l,[2,18]),{22:[1,28],24:[1,27]},t(c,[2,20]),t(l,[2,14]),{3:20,4:e,20:29},{3:5,4:e,5:6,6:n,7:3,8:i,9:4,10:r,11:o,13:30,15:7,16:8,17:a,23:s},t(l,[2,19]),{3:5,4:e,5:6,6:n,7:3,8:i,9:4,10:r,11:o,13:31,15:7,16:8,17:a,23:s},t(u,[2,17]),t(u,[2,15]),t(c,[2,21])],defaultActions:{16:[2,6]},parseError:function(t,e){if(!e.recoverable){var n=function(t,e){this.message=t,this.hash=e};throw n.prototype=Error,new n(t,e)}this.trace(t)},parse:function(t){var e=this,n=[0],i=[null],r=[],o=this.table,a="",s=0,l=0,u=0,c=2,h=1,p=r.slice.call(arguments,1),f=Object.create(this.lexer),d={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(d.yy[m]=this.yy[m]);f.setInput(t,d.yy),d.yy.lexer=f,d.yy.parser=this,void 0===f.yylloc&&(f.yylloc={});var g=f.yylloc;r.push(g);var y=f.options&&f.options.ranges;this.parseError="function"==typeof d.yy.parseError?d.yy.parseError:Object.getPrototypeOf(this).parseError;for(var v,_,b,x,w,C,k,E,S=function(){var t;return"number"!=typeof(t=f.lex()||h)&&(t=e.symbols_[t]||t),t},I={};;){if(this.defaultActions[b=n[n.length-1]]?x=this.defaultActions[b]:(null==v&&(v=S()),x=o[b]&&o[b][v]),void 0===x||!x.length||!x[0]){var T="";for(C in E=[],o[b])this.terminals_[C]&&C>c&&E.push("'"+this.terminals_[C]+"'");T=f.showPosition?"Parse error on line "+(s+1)+":\n"+f.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(s+1)+": Unexpected "+(v==h?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError(T,{text:f.match,token:this.terminals_[v]||v,line:f.yylineno,loc:g,expected:E})}if(x[0]instanceof Array&&x.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+v);switch(x[0]){case 1:n.push(v),i.push(f.yytext),r.push(f.yylloc),n.push(x[1]),v=null,_?(v=_,_=null):(l=f.yyleng,a=f.yytext,s=f.yylineno,g=f.yylloc,u>0&&u--);break;case 2:if(I.$=i[i.length-(k=this.productions_[x[1]][1])],I._$={first_line:r[r.length-(k||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(k||1)].first_column,last_column:r[r.length-1].last_column},y&&(I._$.range=[r[r.length-(k||1)].range[0],r[r.length-1].range[1]]),void 0!==(w=this.performAction.apply(I,[a,l,s,d.yy,x[1],i,r].concat(p))))return w;k&&(n=n.slice(0,-1*k*2),i=i.slice(0,-1*k),r=r.slice(0,-1*k)),n.push(this.productions_[x[1]][0]),i.push(I.$),r.push(I._$),n.push(o[n[n.length-2]][n[n.length-1]]);break;case 3:return!0}}return!0}};function p(){this.yy={}}return h.lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in r)this[o]=r[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;o<r.length;o++)if((n=this._input.match(this.rules[r[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,i=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,r[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,r[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,i){switch(n){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}},p.prototype=h,h.Parser=p,new p}();e.parser=i,e.Parser=i.Parser,e.parse=function(){return i.parse.apply(i,arguments)},e.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),process.exit(1));var i=n(1).readFileSync(n(2).normalize(t[1]),"utf8");return e.parser.parse(i)},n.c[n.s]===t&&e.main(process.argv.slice(1))}).call(this,n("YuTi")(t))},iVUf:function(t,e){t.exports=function(t){return function t(e){return Array.isArray(e)&&e.length&&"number"==typeof e[0]?[e]:e.reduce((function(e,n){return Array.isArray(n)&&Array.isArray(n[0])?e.concat(t(n)):(e.push(n),e)}),[])}(t)}},lJFB:function(t,e){t.exports=function(t){if(!t||!t.type)return null;var e=n[t.type];return e?"geometry"===e?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===e?{type:"FeatureCollection",features:[t]}:"featurecollection"===e?t:void 0:null};var n={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},mhV4:function(t,e,n){var i=n("ZK94");function r(t){var e=0;if(t&&t.length>0){e+=Math.abs(o(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(o(t[n]))}return e}function o(t){var e,n,r,o,s,l,u=0,c=t.length;if(c>2){for(l=0;l<c;l++)l===c-2?(r=c-2,o=c-1,s=0):l===c-1?(r=c-1,o=0,s=1):(r=l,o=l+1,s=l+2),e=t[r],n=t[o],u+=(a(t[s][0])-a(e[0]))*Math.sin(a(n[1]));u=u*i.RADIUS*i.RADIUS/2}return u}function a(t){return t*Math.PI/180}t.exports.geometry=function t(e){var n,i=0;switch(e.type){case"Polygon":return r(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)i+=r(e.coordinates[n]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)i+=t(e.geometries[n]);return i}},t.exports.ring=o},qKyw:function(t,e,n){var i=n("f3+a"),r=n("stJQ");t.exports.hint=function(t,e){var n;if("object"==typeof t)n=t;else{if("string"!=typeof t)return[{message:"Expected string or object as input",line:0}];try{n=i.parse(t)}catch(a){var o=a.message.match(/line (\d+)/);return[{line:parseInt(o[1],10)-1,message:a.message,error:a}]}}return[].concat(r.hint(n,e))}},stJQ:function(t,e,n){var i=n("tWm4");t.exports.hint=function(t,e){var n=[],r=0;function o(t){if(e&&!1===e.noDuplicateMembers||!t.__duplicateProperties__||n.push({message:"An object contained duplicate members, making parsing ambigous: "+t.__duplicateProperties__.join(", "),line:t.__line__}),!s(t,"type","string"))if(f[t.type])t&&f[t.type](t);else{var i=d[t.type.toLowerCase()];n.push(void 0!==i?{message:"Expected "+i+" but got "+t.type+" (case sensitive)",line:t.__line__}:{message:"The type "+t.type+" is unknown",line:t.__line__})}}function a(t,e){return t.every((function(t){return null!==t&&typeof t===e}))}function s(t,e,i){if(void 0===t[e])return n.push({message:'"'+e+'" member required',line:t.__line__});if("array"===i){if(!Array.isArray(t[e]))return n.push({message:'"'+e+'" member should be an array, but is an '+typeof t[e]+" instead",line:t.__line__})}else{if("object"===i&&t[e]&&t[e].constructor!==Object)return n.push({message:'"'+e+'" member should be '+i+", but is an "+t[e].constructor.name+" instead",line:t.__line__});if(i&&typeof t[e]!==i)return n.push({message:'"'+e+'" member should be '+i+", but is an "+typeof t[e]+" instead",line:t.__line__})}}function l(t,i){if(!Array.isArray(t))return n.push({message:"position should be an array, is a "+typeof t+" instead",line:t.__line__||i});if(t.length<2)return n.push({message:"position must have 2 or more elements",line:t.__line__||i});if(t.length>3)return n.push({message:"position should not have more than 3 elements",level:"message",line:t.__line__||i});if(!a(t,"number"))return n.push({message:"each element in a position must be a number",line:t.__line__||i});if(e&&e.precisionWarning){if(10===r)return r+=1,n.push({message:"truncated warnings: we've encountered coordinate precision warning 10 times, no more warnings will be reported",level:"message",line:t.__line__||i});r<10&&t.forEach((function(e){var o=0,a=String(e).split(".")[1];if(void 0!==a&&(o=a.length),o>6)return r+=1,n.push({message:"precision of coordinates should be reduced",level:"message",line:t.__line__||i})}))}}function u(t,e,i,r){if(void 0===r&&void 0!==t.__line__&&(r=t.__line__),0===i)return l(t,r);if(1===i&&e)if("LinearRing"===e){if(!Array.isArray(t[t.length-1]))return n.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:r}),!0;if(t.length<4&&n.push({message:"a LinearRing of coordinates needs to have four or more positions",line:r}),t.length&&(t[t.length-1].length!==t[0].length||!t[t.length-1].every((function(e,n){return t[0][n]===e}))))return n.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:r}),!0}else if("Line"===e&&t.length<2)return n.push({message:"a line needs to have two or more coordinates to be valid",line:r});if(Array.isArray(t))return t.map((function(t){return u(t,e,i-1,t.__line__||r)})).some((function(t){return t}));n.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:r})}function c(t){t.crs&&n.push("object"==typeof t.crs&&t.crs.properties&&"urn:ogc:def:crs:OGC:1.3:CRS84"===t.crs.properties.name?{message:"old-style crs member is not recommended, this object is equivalent to the default and should be removed",line:t.__line__}:{message:"old-style crs member is not recommended",line:t.__line__})}function h(t){if(t.bbox)return Array.isArray(t.bbox)?(a(t.bbox,"number")||n.push({message:"each element in a bbox member must be a number",line:t.bbox.__line__}),4!==t.bbox.length&&6!==t.bbox.length&&n.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:t.bbox.__line__}),n.length):void n.push({message:"bbox member must be an array of numbers, but is a "+typeof t.bbox,line:t.__line__})}function p(t){c(t),h(t),void 0!==t.id&&"string"!=typeof t.id&&"number"!=typeof t.id&&n.push({message:'Feature "id" member must have a string or number value',line:t.__line__}),void 0!==t.features&&n.push({message:'Feature object cannot contain a "features" member',line:t.__line__}),void 0!==t.coordinates&&n.push({message:'Feature object cannot contain a "coordinates" member',line:t.__line__}),"Feature"!==t.type&&n.push({message:"GeoJSON features must have a type=feature member",line:t.__line__}),s(t,"properties","object"),s(t,"geometry","object")||t.geometry&&o(t.geometry)}var f={Point:function(t){var e;c(t),h(t),void 0!==(e=t).properties&&n.push({message:'geometry object cannot contain a "properties" member',line:e.__line__}),void 0!==e.geometry&&n.push({message:'geometry object cannot contain a "geometry" member',line:e.__line__}),void 0!==e.features&&n.push({message:'geometry object cannot contain a "features" member',line:e.__line__}),s(t,"coordinates","array")||l(t.coordinates)},Feature:p,MultiPoint:function(t){c(t),h(t),s(t,"coordinates","array")||u(t.coordinates,"",1)},LineString:function(t){c(t),h(t),s(t,"coordinates","array")||u(t.coordinates,"Line",1)},MultiLineString:function(t){c(t),h(t),s(t,"coordinates","array")||u(t.coordinates,"Line",2)},FeatureCollection:function(t){if(c(t),h(t),void 0!==t.properties&&n.push({message:'FeatureCollection object cannot contain a "properties" member',line:t.__line__}),void 0!==t.coordinates&&n.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:t.__line__}),!s(t,"features","array")){if(!a(t.features,"object"))return n.push({message:"Every feature must be an object",line:t.__line__});t.features.forEach(p)}},GeometryCollection:function(t){c(t),h(t),s(t,"geometries","array")||(a(t.geometries,"object")||n.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:t.__line__}),1===t.geometries.length&&n.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:t.geometries.__line__}),t.geometries.forEach((function(e){e&&("GeometryCollection"===e.type&&n.push({message:"GeometryCollection should avoid nested geometry collections",line:t.geometries.__line__}),o(e))})))},Polygon:function(t){c(t),h(t),s(t,"coordinates","array")||u(t.coordinates,"LinearRing",2)||i(t,n)},MultiPolygon:function(t){c(t),h(t),s(t,"coordinates","array")||u(t.coordinates,"LinearRing",3)||i(t,n)}},d=Object.keys(f).reduce((function(t,e){return t[e.toLowerCase()]=e,t}),{});return"object"!=typeof t||null==t?(n.push({message:"The root of a GeoJSON object must be an object.",line:0}),n):(o(t),n.forEach((function(t){({}).hasOwnProperty.call(t,"line")&&void 0===t.line&&delete t.line})),n)}},tWm4:function(t,e){function n(t){return t*Math.PI/180}function i(t){var e=0;if(t.length>2)for(var i,r,o=0;o<t.length-1;o++)e+=n((r=t[o+1])[0]-(i=t[o])[0])*(2+Math.sin(n(i[1]))+Math.sin(n(r[1])));return e>=0}function r(t){if(t&&t.length>0){if(i(t[0]))return!1;if(!t.slice(1,t.length).every(i))return!1}return!0}t.exports=function(t,e){(function(t){return"Polygon"===t.type?r(t.coordinates):"MultiPolygon"===t.type?t.coordinates.every(r):void 0})(t)||e.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:t.__line__})}},xnQO:function(t,e,n){"use strict";function i(t,e){this.x=t,this.y=e}t.exports=i,i.prototype={clone:function(){return new i(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),i=Math.sin(t),r=e.y+i*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-i*(this.y-e.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(t){return t instanceof i?t:Array.isArray(t)?new i(t[0],t[1]):t}},yLV6:function(t,e,n){var i;!function(r,o,a,s){"use strict";var l,u=["","webkit","Moz","MS","ms","o"],c=o.createElement("div"),h=Math.round,p=Math.abs,f=Date.now;function d(t,e,n){return setTimeout(x(t,n),e)}function m(t,e,n){return!!Array.isArray(t)&&(g(t,n[e],n),!0)}function g(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function y(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,i,n),t.apply(this,arguments)}}l="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign;var v=y((function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&void 0===t[i[r]])&&(t[i[r]]=e[i[r]]),r++;return t}),"extend","Use `assign`."),_=y((function(t,e){return v(t,e,!0)}),"merge","Use `assign`.");function b(t,e,n){var i,r=e.prototype;(i=t.prototype=Object.create(r)).constructor=t,i._super=r,n&&l(i,n)}function x(t,e){return function(){return t.apply(e,arguments)}}function w(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function C(t,e){return void 0===t?e:t}function k(t,e,n){g(T(e),(function(e){t.addEventListener(e,n,!1)}))}function E(t,e,n){g(T(e),(function(e){t.removeEventListener(e,n,!1)}))}function S(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function I(t,e){return t.indexOf(e)>-1}function T(t){return t.trim().split(/\s+/g)}function P(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function A(t){return Array.prototype.slice.call(t,0)}function L(t,e,n){for(var i=[],r=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];P(r,a)<0&&i.push(t[o]),r[o]=a,o++}return n&&(i=e?i.sort((function(t,n){return t[e]>n[e]})):i.sort()),i}function M(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),o=0;o<u.length;){if((i=(n=u[o])?n+r:e)in t)return i;o++}}var R=1;function O(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}var D="ontouchstart"in r,N=void 0!==M(r,"PointerEvent"),F=D&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),z=["x","y"],B=["clientX","clientY"];function V(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){w(t.options.enable,[t])&&n.handler(e)},this.init()}function U(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,o=1&e&&i-r==0,a=12&e&&i-r==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=j(e)),r>1&&!n.firstMultiple?n.firstMultiple=j(e):1===r&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,l=e.center=q(i);e.timeStamp=f(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=Z(s,l),e.distance=X(s,l),function(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}(n,e),e.offsetDirection=H(e.deltaX,e.deltaY);var u,c,h=G(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=p(h.x)>p(h.y)?h.x:h.y,e.scale=a?(u=a.pointers,X((c=i)[0],c[1],B)/X(u[0],u[1],B)):1,e.rotation=a?function(t,e){return Z(e[1],e[0],B)+Z(t[1],t[0],B)}(a.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,i,r,o,a=t.lastInterval||e,s=e.timeStamp-a.timeStamp;if(8!=e.eventType&&(s>25||void 0===a.velocity)){var l=e.deltaX-a.deltaX,u=e.deltaY-a.deltaY,c=G(s,l,u);i=c.x,r=c.y,n=p(c.x)>p(c.y)?c.x:c.y,o=H(l,u),t.lastInterval=e}else n=a.velocity,i=a.velocityX,r=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=o}(n,e);var d=t.element;S(e.srcEvent.target,d)&&(d=e.srcEvent.target),e.target=d}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function j(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:h(t.pointers[n].clientX),clientY:h(t.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:e,center:q(e),deltaX:t.deltaX,deltaY:t.deltaY}}function q(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:h(n/e),y:h(i/e)}}function G(t,e,n){return{x:e/t||0,y:n/t||0}}function H(t,e){return t===e?1:p(t)>=p(e)?t<0?2:4:e<0?8:16}function X(t,e,n){n||(n=z);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function Z(t,e,n){return n||(n=z),180*Math.atan2(e[n[1]]-t[n[1]],e[n[0]]-t[n[0]])/Math.PI}V.prototype={handler:function(){},init:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(O(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(O(this.element),this.evWin,this.domHandler)}};var W={mousedown:1,mousemove:2,mouseup:4};function Y(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,V.apply(this,arguments)}b(Y,V,{handler:function(t){var e=W[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var K={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},J={2:"touch",3:"pen",4:"mouse",5:"kinect"},Q="pointerdown",$="pointermove pointerup pointercancel";function tt(){this.evEl=Q,this.evWin=$,V.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(Q="MSPointerDown",$="MSPointerMove MSPointerUp MSPointerCancel"),b(tt,V,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=K[i],o=J[t.pointerType]||t.pointerType,a="touch"==o,s=P(e,t.pointerId,"pointerId");1&r&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):12&r&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var et={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function nt(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,V.apply(this,arguments)}function it(t,e){var n=A(t.touches),i=A(t.changedTouches);return 12&e&&(n=L(n.concat(i),"identifier",!0)),[n,i]}b(nt,V,{handler:function(t){var e=et[t.type];if(1===e&&(this.started=!0),this.started){var n=it.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var rt={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ot(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},V.apply(this,arguments)}function at(t,e){var n=A(t.touches),i=this.targetIds;if(3&e&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,a=A(t.changedTouches),s=[],l=this.target;if(o=n.filter((function(t){return S(t.target,l)})),1===e)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;for(r=0;r<a.length;)i[a[r].identifier]&&s.push(a[r]),12&e&&delete i[a[r].identifier],r++;return s.length?[L(o.concat(s),"identifier",!0),s]:void 0}function st(){V.apply(this,arguments);var t=x(this.handler,this);this.touch=new ot(this.manager,t),this.mouse=new Y(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function lt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,ut.call(this,e)):12&t&&ut.call(this,e)}function ut(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout((function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)}),2500)}}function ct(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(e-r.x),a=Math.abs(n-r.y);if(o<=25&&a<=25)return!0}return!1}b(ot,V,{handler:function(t){var e=rt[t.type],n=at.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}),b(st,V,{handler:function(t,e,n){var i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if("touch"==n.pointerType)lt.call(this,e,n);else if(i&&ct.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ht=M(c.style,"touchAction"),pt=void 0!==ht,ft=function(){if(!pt)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||r.CSS.supports("touch-action",n)})),t}();function dt(t,e){this.manager=t,this.set(e)}function mt(t){this.options=l({},this.defaults,t||{}),this.id=R++,this.manager=null,this.options.enable=C(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function gt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function yt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function vt(t,e){var n=e.manager;return n?n.get(t):t}function _t(){mt.apply(this,arguments)}function bt(){_t.apply(this,arguments),this.pX=null,this.pY=null}function xt(){_t.apply(this,arguments)}function wt(){mt.apply(this,arguments),this._timer=null,this._input=null}function Ct(){_t.apply(this,arguments)}function kt(){_t.apply(this,arguments)}function Et(){mt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function St(t,e){return(e=e||{}).recognizers=C(e.recognizers,St.defaults.preset),new It(t,e)}function It(t,e){var n;this.options=l({},St.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(N?tt:F?ot:D?st:Y))(n,U),this.touchAction=new dt(this,this.options.touchAction),Tt(this,!0),g(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Tt(t,e){var n,i=t.element;i.style&&(g(t.options.cssProps,(function(r,o){n=M(i.style,o),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}dt.prototype={set:function(t){"compute"==t&&(t=this.compute()),pt&&this.manager.element.style&&ft[t]&&(this.manager.element.style[ht]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return g(this.manager.recognizers,(function(e){w(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(I(t,"none"))return"none";var e=I(t,"pan-x"),n=I(t,"pan-y");return e&&n?"none":e||n?e?"pan-x":"pan-y":I(t,"manipulation")?"manipulation":"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,r=I(i,"none")&&!ft.none,o=I(i,"pan-y")&&!ft["pan-y"],a=I(i,"pan-x")&&!ft["pan-x"];if(r&&1===t.pointers.length&&t.distance<2&&t.deltaTime<250)return;if(!a||!o)return r||o&&6&n||a&&24&n?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}},mt.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(m(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=vt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return m(t,"dropRecognizeWith",this)||(t=vt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(m(t,"requireFailure",this))return this;var e=this.requireFail;return-1===P(e,t=vt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(m(t,"dropRequireFailure",this))return this;t=vt(t,this);var e=P(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function i(n){e.manager.emit(n,t)}n<8&&i(e.options.event+gt(n)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),n>=8&&i(e.options.event+gt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!w(this.options.enable,[this,e]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},b(_t,mt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=6&e,r=this.attrTest(t);return i&&(8&n||!r)?16|e:i||r?4&n?8|e:2&e?4|e:2:32}}),b(bt,_t,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push("pan-y"),24&t&&e.push("pan-x"),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,o=t.deltaX,a=t.deltaY;return r&e.direction||(6&e.direction?(r=0===o?1:o<0?2:4,n=o!=this.pX,i=Math.abs(t.deltaX)):(r=0===a?1:a<0?8:16,n=a!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return _t.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=yt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),b(xt,_t,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){1!==t.scale&&(t.additionalEvent=this.options.event+(t.scale<1?"in":"out")),this._super.emit.call(this,t)}}),b(wt,mt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||12&t.eventType&&!r)this.reset();else if(1&t.eventType)this.reset(),this._timer=d((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),b(Ct,_t,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),b(kt,_t,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return bt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:24&n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&p(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=yt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),b(Et,mt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(i&&r&&n){if(4!=t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||X(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=d((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return 32},failTimeout:function(){return this._timer=d((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),St.VERSION="2.0.7",St.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Ct,{enable:!1}],[xt,{enable:!1},["rotate"]],[kt,{direction:6}],[bt,{direction:6},["swipe"]],[Et],[Et,{event:"doubletap",taps:2},["tap"]],[wt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},It.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(r=e.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===e.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&14&n.state&&(r=e.curRecognizer=n),o++}},get:function(t){if(t instanceof mt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(m(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(m(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=P(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(void 0!==t&&void 0!==e){var n=this.handlers;return g(T(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(void 0!==t){var n=this.handlers;return g(T(t),(function(t){e?n[t]&&n[t].splice(P(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&Tt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(St,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:It,Input:V,TouchAction:dt,TouchInput:ot,MouseInput:Y,PointerEventInput:tt,TouchMouseInput:st,SingleTouchInput:nt,Recognizer:mt,AttrRecognizer:_t,Tap:Et,Pan:bt,Swipe:kt,Pinch:xt,Rotate:Ct,Press:wt,on:k,off:E,each:g,merge:_,extend:v,assign:l,inherit:b,bindFn:x,prefixed:M}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=St,void 0===(i=(function(){return St}).call(e,n,e,t))||(t.exports=i)}(window,document)},zUnb:function(t,e,n){"use strict";n.r(e);var i={};function r(t){return"function"==typeof t}n.r(i),n.d(i,"classes",(function(){return LC})),n.d(i,"sources",(function(){return MC})),n.d(i,"cursors",(function(){return RC})),n.d(i,"types",(function(){return OC})),n.d(i,"geojsonTypes",(function(){return DC})),n.d(i,"modes",(function(){return NC})),n.d(i,"events",(function(){return FC})),n.d(i,"updateActions",(function(){return zC})),n.d(i,"meta",(function(){return BC})),n.d(i,"activeStates",(function(){return VC})),n.d(i,"interactions",(function(){return UC})),n.d(i,"LAT_MIN",(function(){return jC})),n.d(i,"LAT_RENDERED_MIN",(function(){return qC})),n.d(i,"LAT_MAX",(function(){return GC})),n.d(i,"LAT_RENDERED_MAX",(function(){return HC})),n.d(i,"LNG_MIN",(function(){return XC})),n.d(i,"LNG_MAX",(function(){return ZC})),n("yLV6");var o=!1,a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else o&&console.log("RxJS: Back to a better error behavior. Thank you. <3");o=t},get useDeprecatedSynchronousErrorHandling(){return o}};function s(t){setTimeout((function(){throw t}))}var l={closed:!0,next:function(t){},error:function(t){if(a.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete:function(){}},u=Array.isArray||function(t){return t&&"number"==typeof t.length};function c(t){return null!==t&&"object"==typeof t}function h(t){return Error.call(this),this.message=t?"".concat(t.length," errors occurred during unsubscription:\n").concat(t.map((function(t,e){return"".concat(e+1,") ").concat(t.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=t,this}h.prototype=Object.create(Error.prototype);var p,f=h,d=((p=function(){function t(e){_classCallCheck(this,t),this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return _createClass(t,[{key:"unsubscribe",value:function(){var t,e=!1;if(!this.closed){var n=this._parent,i=this._parents,o=this._unsubscribe,a=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,l=i?i.length:0;n;)n.remove(this),n=++s<l&&i[s]||null;if(r(o))try{o.call(this)}catch(p){e=!0,t=p instanceof f?m(p.errors):[p]}if(u(a))for(s=-1,l=a.length;++s<l;){var h=a[s];if(c(h))try{h.unsubscribe()}catch(p){e=!0,t=t||[],p instanceof f?t=t.concat(m(p.errors)):t.push(p)}}if(e)throw new f(t)}}},{key:"add",value:function(e){var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var i=n;(n=new t)._subscriptions=[i]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(n._addParent(this)){var r=this._subscriptions;r?r.push(n):this._subscriptions=[n]}return n}},{key:"remove",value:function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}},{key:"_addParent",value:function(t){var e=this._parent,n=this._parents;return e!==t&&(e?n?-1===n.indexOf(t)&&(n.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))}}]),t}()).EMPTY=function(t){return t.closed=!0,t}(new p),p);function m(t){return t.reduce((function(t,e){return t.concat(e instanceof f?e.errors:e)}),[])}var g="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),y=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;switch(_classCallCheck(this,n),(o=e.call(this)).syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=l;break;case 1:if(!t){o.destination=l;break}if("object"==typeof t){t instanceof n?(o.syncErrorThrowable=t.syncErrorThrowable,o.destination=t,t.add(_assertThisInitialized(o))):(o.syncErrorThrowable=!0,o.destination=new v(_assertThisInitialized(o),t));break}default:o.syncErrorThrowable=!0,o.destination=new v(_assertThisInitialized(o),t,i,r)}return o}return _createClass(n,[{key:g,value:function(){return this}},{key:"next",value:function(t){this.isStopped||this._next(t)}},{key:"error",value:function(t){this.isStopped||(this.isStopped=!0,this._error(t))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get(_getPrototypeOf(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(t){this.destination.next(t)}},{key:"_error",value:function(t){this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this}}],[{key:"create",value:function(t,e,i){var r=new n(t,e,i);return r.syncErrorThrowable=!1,r}}]),n}(d),v=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o,a){var s,u;_classCallCheck(this,n),(s=e.call(this))._parentSubscriber=t;var c=_assertThisInitialized(s);return r(i)?u=i:i&&(u=i.next,o=i.error,a=i.complete,i!==l&&(r((c=Object.create(i)).unsubscribe)&&s.add(c.unsubscribe.bind(c)),c.unsubscribe=s.unsubscribe.bind(_assertThisInitialized(s)))),s._context=c,s._next=u,s._error=o,s._complete=a,s}return _createClass(n,[{key:"next",value:function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}},{key:"error",value:function(t){if(!this.isStopped){var e=this._parentSubscriber,n=a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;s(t)}}}},{key:"complete",value:function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}},{key:"__tryOrSetError",value:function(t,e,n){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(i){return a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(s(i),!0)}return!1}},{key:"_unsubscribe",value:function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}]),n}(y),_="function"==typeof Symbol&&Symbol.observable||"@@observable";function b(){}function x(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return w(e)}function w(t){return t?1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}:b}var C,k=((C=function(){function t(e){_classCallCheck(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return _createClass(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(t,e,n){var i=this.operator,r=function(t,e,n){if(t){if(t instanceof y)return t;if(t[g])return t[g]()}return t||e||n?new y(t,e,n):new y(l)}(t,e,n);if(r.add(i?i.call(r,this.source):this.source||a.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),a.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}},{key:"_trySubscribe",value:function(t){try{return this._subscribe(t)}catch(e){a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,n=e.closed,i=e.destination,r=e.isStopped;if(n||r)return!1;t=i&&i instanceof y?i:null}return!0}(t)?t.error(e):console.warn(e)}}},{key:"forEach",value:function(t,e){var n=this;return new(e=E(e))((function(e,i){var r;r=n.subscribe((function(e){try{t(e)}catch(n){i(n),r&&r.unsubscribe()}}),i,e)}))}},{key:"_subscribe",value:function(t){var e=this.source;return e&&e.subscribe(t)}},{key:_,value:function(){return this}},{key:"pipe",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?this:w(e)(this)}},{key:"toPromise",value:function(t){var e=this;return new(t=E(t))((function(t,n){var i;e.subscribe((function(t){return i=t}),(function(t){return n(t)}),(function(){return t(i)}))}))}}]),t}()).create=function(t){return new C(t)},C);function E(t){if(t||(t=a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function S(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}S.prototype=Object.create(Error.prototype);var I,T=S,P=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this)).subject=t,r.subscriber=i,r.closed=!1,r}return _createClass(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}}}]),n}(d),A=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var i;return _classCallCheck(this,n),(i=e.call(this,t)).destination=t,i}return n}(y),L=((I=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.call(this)).observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return _createClass(n,[{key:g,value:function(){return new A(this)}},{key:"lift",value:function(t){var e=new M(this,this);return e.operator=t,e}},{key:"next",value:function(t){if(this.closed)throw new T;if(!this.isStopped)for(var e=this.observers,n=e.length,i=e.slice(),r=0;r<n;r++)i[r].next(t)}},{key:"error",value:function(t){if(this.closed)throw new T;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),r=0;r<n;r++)i[r].error(t);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new T;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),i=0;i<e;i++)n[i].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(t){if(this.closed)throw new T;return _get(_getPrototypeOf(n.prototype),"_trySubscribe",this).call(this,t)}},{key:"_subscribe",value:function(t){if(this.closed)throw new T;return this.hasError?(t.error(this.thrownError),d.EMPTY):this.isStopped?(t.complete(),d.EMPTY):(this.observers.push(t),new P(this,t))}},{key:"asObservable",value:function(){var t=new k;return t.source=this,t}}]),n}(k)).create=function(t,e){return new M(t,e)},I),M=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this)).destination=t,r.source=i,r}return _createClass(n,[{key:"next",value:function(t){var e=this.destination;e&&e.next&&e.next(t)}},{key:"error",value:function(t){var e=this.destination;e&&e.error&&this.destination.error(t)}},{key:"complete",value:function(){var t=this.destination;t&&t.complete&&this.destination.complete()}},{key:"_subscribe",value:function(t){return this.source?this.source.subscribe(t):d.EMPTY}}]),n}(L);function R(t){return t&&"function"==typeof t.schedule}var O=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;return _classCallCheck(this,n),(o=e.call(this)).parent=t,o.outerValue=i,o.outerIndex=r,o.index=0,o}return _createClass(n,[{key:"_next",value:function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}},{key:"_error",value:function(t){this.parent.notifyError(t,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(y),D=function(t){return function(e){for(var n=0,i=t.length;n<i&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}},N=function(t){return function(e){return t.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,s),e}};var F="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",z=function(t){return function(e){for(var n=t[F]();;){var i=n.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e}},B=function(t){return function(e){var n=t[_]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},V=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function U(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var j=function(t){if(t instanceof k)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[_])return B(t);if(V(t))return D(t);if(U(t))return N(t);if(t&&"function"==typeof t[F])return z(t);var e=c(t)?"an invalid object":"'".concat(t,"'");throw new TypeError("You provided ".concat(e," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))};function q(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new O(t,n,i);if(!r.closed)return j(e)(r)}var G=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"notifyNext",value:function(t,e,n,i,r){this.destination.next(e)}},{key:"notifyError",value:function(t,e){this.destination.error(t)}},{key:"notifyComplete",value:function(t){this.destination.complete()}}]),n}(y);function H(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new X(t,e))}}var X=function(){function t(e,n){_classCallCheck(this,t),this.project=e,this.thisArg=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Z(t,this.project,this.thisArg))}}]),t}(),Z=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;return _classCallCheck(this,n),(o=e.call(this,t)).project=i,o.count=0,o.thisArg=r||_assertThisInitialized(o),o}return _createClass(n,[{key:"_next",value:function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(y);function W(t,e){return new k(e?function(n){var i=new d,r=0;return i.add(e.schedule((function(){r!==t.length?(n.next(t[r++]),n.closed||i.add(this.schedule())):n.complete()}))),i}:D(t))}function Y(t,e){if(!e)return t instanceof k?t:new k(j(t));if(null!=t){if(function(t){return t&&"function"==typeof t[_]}(t))return function(t,e){return new k(e?function(n){var i=new d;return i.add(e.schedule((function(){var r=t[_]();i.add(r.subscribe({next:function(t){i.add(e.schedule((function(){return n.next(t)})))},error:function(t){i.add(e.schedule((function(){return n.error(t)})))},complete:function(){i.add(e.schedule((function(){return n.complete()})))}}))}))),i}:B(t))}(t,e);if(U(t))return function(t,e){return new k(e?function(n){var i=new d;return i.add(e.schedule((function(){return t.then((function(t){i.add(e.schedule((function(){n.next(t),i.add(e.schedule((function(){return n.complete()})))})))}),(function(t){i.add(e.schedule((function(){return n.error(t)})))}))}))),i}:N(t))}(t,e);if(V(t))return W(t,e);if(function(t){return t&&"function"==typeof t[F]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new k(e?function(n){var i,r=new d;return r.add((function(){i&&"function"==typeof i.return&&i.return()})),r.add(e.schedule((function(){i=t[F](),r.add(e.schedule((function(){if(!n.closed){var t,e;try{var r=i.next();t=r.value,e=r.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}})))}))),r}:z(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function K(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof e?function(i){return i.pipe(K((function(n,i){return Y(t(n,i)).pipe(H((function(t,r){return e(n,t,i,r)})))}),n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new J(t,n))})}var J=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;_classCallCheck(this,t),this.project=e,this.concurrent=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Q(t,this.project,this.concurrent))}}]),t}(),Q=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return _classCallCheck(this,n),(r=e.call(this,t)).project=i,r.concurrent=o,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return _createClass(n,[{key:"_next",value:function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(e,t,n)}},{key:"_innerSub",value:function(t,e,n){var i=new O(this,void 0,void 0);this.destination.add(i),q(this,t,e,n,i)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(t,e,n,i,r){this.destination.next(e)}},{key:"notifyComplete",value:function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(G);function $(t){return t}function tt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return K($,t)}function et(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=Number.POSITIVE_INFINITY,r=null,o=e[e.length-1];return R(o)?(r=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(i=e.pop())):"number"==typeof o&&(i=e.pop()),null===r&&1===e.length&&e[0]instanceof k?e[0]:tt(i)(W(e,r))}function nt(){return function(t){return t.lift(new it(t))}}var it=function(){function t(e){_classCallCheck(this,t),this.connectable=e}return _createClass(t,[{key:"call",value:function(t,e){var n=this.connectable;n._refCount++;var i=new rt(t,n),r=e.subscribe(i);return i.closed||(i.connection=n.connect()),r}}]),t}(),rt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,t)).connectable=i,r}return _createClass(n,[{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}else this.connection=null}}]),n}(y),ot=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this)).source=t,r.subjectFactory=i,r._refCount=0,r._isComplete=!1,r}return _createClass(n,[{key:"_subscribe",value:function(t){return this.getSubject().subscribe(t)}},{key:"getSubject",value:function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new d).add(this.source.subscribe(new st(this.getSubject(),this))),t.closed?(this._connection=null,t=d.EMPTY):this._connection=t),t}},{key:"refCount",value:function(){return nt()(this)}}]),n}(k).prototype,at={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ot._subscribe},_isComplete:{value:ot._isComplete,writable:!0},getSubject:{value:ot.getSubject},connect:{value:ot.connect},refCount:{value:ot.refCount}},st=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,t)).connectable=i,r}return _createClass(n,[{key:"_error",value:function(t){this._unsubscribe(),_get(_getPrototypeOf(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),_get(_getPrototypeOf(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}]),n}(A);function lt(){return new L}function ut(){return function(t){return nt()((e=lt,function(t){var n;n="function"==typeof e?e:function(){return e};var i=Object.create(t,at);return i.source=t,i.subjectFactory=n,i})(t));var e}}function ct(t,e,n){var i=function(t){return function(){if(t){var e=t.apply(void 0,arguments);for(var n in e)this[n]=e[n]}}}(e);function r(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this instanceof r)return i.apply(this,e),this;var o=_construct(r,e);return a.annotation=o,a;function a(t,e,n){for(var i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;i.length<=n;)i.push(null);return(i[n]=i[n]||[]).push(o),t}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r}var ht=ct("Inject",(function(t){return{token:t}})),pt=ct("Optional"),ft=ct("Self"),dt=ct("SkipSelf"),mt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function gt(t){for(var e in t)if(t[e]===gt)return e;throw Error("Could not find renamed property on target object.")}function yt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function vt(t){var e=t[_t];return e&&e.token===t?e:null}var _t=gt({ngInjectableDef:gt});function bt(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(bt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}var xt=gt({__forward_ref__:gt});function wt(t){return t.__forward_ref__=wt,t.toString=function(){return bt(this())},t}function Ct(t){var e=t;return"function"==typeof e&&e.hasOwnProperty(xt)&&e.__forward_ref__===wt?e():t}var kt="undefined"!=typeof globalThis&&globalThis,Et="undefined"!=typeof window&&window,St="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,It="undefined"!=typeof global&&global,Tt=kt||It||Et||St,Pt=function(){function t(e,n){_classCallCheck(this,t),this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.ngInjectableDef=yt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return _createClass(t,[{key:"toString",value:function(){return"InjectionToken "+this._desc}}]),t}(),At=new Pt("INJECTOR",-1),Lt=new Object,Mt=/\n/gm,Rt=gt({provide:String,useValue:gt}),Ot=void 0;function Dt(t){var e=Ot;return Ot=t,e}function Nt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mt.Default;return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mt.Default;if(void 0===Ot)throw new Error("inject() must be called from an injection context");return null===Ot?function(t,e,n){var i=vt(t);if(i&&"root"==i.providedIn)return void 0===i.value?i.value=i.factory():i.value;if(n&mt.Optional)return null;throw new Error("Injector: NOT_FOUND [".concat(bt(t),"]"))}(t,0,e):Ot.get(t,e&mt.Optional?null:void 0,e)}(t,e)}var Ft=Nt,zt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt;if(e===Lt){var n=new Error("NullInjectorError: No provider for ".concat(bt(t),"!"));throw n.name="NullInjectorError",n}return e}}]),t}();function Bt(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;var r=bt(e);if(e instanceof Array)r=e.map(bt).join(" -> ");else if("object"==typeof e){var o=[];for(var a in e)if(e.hasOwnProperty(a)){var s=e[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):bt(s)))}r="{".concat(o.join(", "),"}")}return"".concat(n).concat(i?"("+i+")":"","[").concat(r,"]: ").concat(t.replace(Mt,"\n  "))}var Vt=function t(){_classCallCheck(this,t)},Ut=function t(){_classCallCheck(this,t)};function jt(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function qt(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Gt=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),Ht=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Tt);function Xt(t){return t.ngDebugContext}function Zt(t){return t.ngOriginalError}function Wt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];t.error.apply(t,n)}var Yt=function(){function t(){_classCallCheck(this,t),this._console=console}return _createClass(t,[{key:"handleError",value:function(t){var e=this._findOriginalError(t),n=this._findContext(t),i=function(t){return t.ngErrorLogger||Wt}(t);i(this._console,"ERROR",t),e&&i(this._console,"ORIGINAL ERROR",e),n&&i(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(t){return t?Xt(t)?Xt(t):this._findContext(Zt(t)):null}},{key:"_findOriginalError",value:function(t){for(var e=Zt(t);e&&Zt(e);)e=Zt(e);return e}}]),t}(),Kt=!0,Jt=!1;function Qt(){return Jt=!0,Kt}var $t=function(){function t(e){if(_classCallCheck(this,t),this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n),this.inertBodyElement=this.inertDocument.createElement("body"),n.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return _createClass(t,[{key:"getInertBodyElement_XHR",value:function(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(i){return null}var e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);var n=e.response.body;return n.removeChild(n.firstChild),n}},{key:"getInertBodyElement_DOMParser",value:function(t){t="<body><remove></remove>"+t+"</body>";try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(n){return null}}},{key:"getInertBodyElement_InertDocument",value:function(t){var e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}},{key:"stripCustomNsAttrs",value:function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var i=e.item(n).name;"xmlns:ns1"!==i&&0!==i.indexOf("ns1:")||t.removeAttribute(i)}for(var r=t.firstChild;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}]),t}(),te=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,ee=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ne(t){return(t=String(t)).match(te)||t.match(ee)?t:(Qt()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(t," (see http://g.co/ng/security#xss)")),"unsafe:"+t)}function ie(t){var e,n={},i=_createForOfIteratorHelper(t.split(","));try{for(i.s();!(e=i.n()).done;){n[e.value]=!0}}catch(r){i.e(r)}finally{i.f()}return n}function re(){for(var t={},e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(var r=0,o=n;r<o.length;r++){var a=o[r];for(var s in a)a.hasOwnProperty(s)&&(t[s]=!0)}return t}var oe,ae=ie("area,br,col,hr,img,wbr"),se=ie("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),le=ie("rp,rt"),ue=re(le,se),ce=re(ae,re(se,ie("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),re(le,ie("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ue),he=ie("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),pe=ie("srcset"),fe=re(he,pe,ie("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ie("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),de=ie("script,style,template"),me=function(){function t(){_classCallCheck(this,t),this.sanitizedSomething=!1,this.buf=[]}return _createClass(t,[{key:"sanitizeChildren",value:function(t){for(var e=t.firstChild,n=!0;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var i=this.checkClobberedElement(e,e.nextSibling);if(i){e=i;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(t){var e=t.nodeName.toLowerCase();if(!ce.hasOwnProperty(e))return this.sanitizedSomething=!0,!de.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);for(var n,i=t.attributes,r=0;r<i.length;r++){var o=i.item(r),a=o.name,s=a.toLowerCase();if(fe.hasOwnProperty(s)){var l=o.value;he[s]&&(l=ne(l)),pe[s]&&(n=l,l=(n=String(n)).split(",").map((function(t){return ne(t.trim())})).join(", ")),this.buf.push(" ",a,'="',ve(l),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(t){var e=t.nodeName.toLowerCase();ce.hasOwnProperty(e)&&!ae.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}},{key:"chars",value:function(t){this.buf.push(ve(t))}},{key:"checkClobberedElement",value:function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}]),t}(),ge=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ye=/([^\#-~ |!])/g;function ve(t){return t.replace(/&/g,"&amp;").replace(ge,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(ye,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function _e(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var be=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}(),xe=function t(){_classCallCheck(this,t)},we=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Ce=/^url\(([^)]+)\)$/,ke=/([A-Z])/g;function Ee(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return"[ERROR] Exception while trying to serialize the value"}}var Se=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return Ie()},t}(),Ie=function(){},Te=new Pt("The presence of this token marks an injector as being the root injector."),Pe=function(t,e,n){return new De(t,e,n)},Ae=function(){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"create",value:function(t,e){return Array.isArray(t)?Pe(t,e,""):Pe(t.providers,t.parent,t.name||"")}}]),t}();return t.THROW_IF_NOT_FOUND=Lt,t.NULL=new zt,t.ngInjectableDef=yt({token:t,providedIn:"any",factory:function(){return Nt(At)}}),t.__NG_ELEMENT_ID__=-1,t}(),Le=function(t){return t},Me=[],Re=Le,Oe=function(){return Array.prototype.slice.call(arguments)},De=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae.NULL,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,t),this.parent=n,this.source=i;var r=this._records=new Map;r.set(Ae,{token:Ae,fn:Le,deps:Me,value:this,useNew:!1}),r.set(At,{token:At,fn:Le,deps:Me,value:this,useNew:!1}),function t(e,n){if(n)if((n=Ct(n))instanceof Array)for(var i=0;i<n.length;i++)t(e,n[i]);else{if("function"==typeof n)throw Fe("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Fe("Unexpected provider",n);var r=Ct(n.provide),o=function(t){var e=function(t){var e=Me,n=t.deps;if(n&&n.length){e=[];for(var i=0;i<n.length;i++){var r=6,o=Ct(n[i]);if(o instanceof Array)for(var a=0,s=o;a<s.length;a++){var l=s[a];l instanceof pt||l==pt?r|=1:l instanceof dt||l==dt?r&=-3:l instanceof ft||l==ft?r&=-5:o=l instanceof ht?l.token:Ct(l)}e.push({token:o,options:r})}}else if(t.useExisting)e=[{token:Ct(t.useExisting),options:6}];else if(!(n||Rt in t))throw Fe("'deps' required",t);return e}(t),n=Le,i=Me,r=!1,o=Ct(t.provide);if(Rt in t)i=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)r=!0,n=Ct(t.useClass);else{if("function"!=typeof o)throw Fe("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);r=!0,n=o}return{deps:e,fn:n,useNew:r,value:i}}(n);if(!0===n.multi){var a=e.get(r);if(a){if(a.fn!==Oe)throw Ne(r)}else e.set(r,a={token:n.provide,deps:[],useNew:!1,fn:Oe,value:Me});r=n,a.deps.push({token:r,options:6})}var s=e.get(r);if(s&&s.fn==Oe)throw Ne(r);e.set(r,o)}}(r,e)}return _createClass(t,[{key:"get",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mt.Default,i=this._records.get(t);try{return function t(e,n,i,r,o,a){try{return function(e,n,i,r,o,a){var s;if(!n||a&mt.SkipSelf)a&mt.Self||(s=r.get(e,o,mt.Default));else{if((s=n.value)==Re)throw Error("\u0275Circular dependency");if(s===Me){n.value=Re;var l=n.useNew,u=n.fn,c=n.deps,h=Me;if(c.length){h=[];for(var p=0;p<c.length;p++){var f=c[p],d=f.options,m=2&d?i.get(f.token):void 0;h.push(t(f.token,m,i,m||4&d?r:Ae.NULL,1&d?null:Ae.THROW_IF_NOT_FOUND,mt.Default))}}n.value=s=l?_construct(u,_toConsumableArray(h)):u.apply(void 0,h)}}return s}(e,n,i,r,o,a)}catch(s){throw s instanceof Error||(s=new Error(s)),(s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(e),n&&n.value==Re&&(n.value=Me),s}}(t,i,this._records,this.parent,e,n)}catch(r){return function(t,e,n,i){var r=t.ngTempTokenPath;throw e.__source&&r.unshift(e.__source),t.message=Bt("\n"+t.message,r,"StaticInjectorError",i),t.ngTokenPath=r,t.ngTempTokenPath=null,t}(r,t,0,this.source)}}},{key:"toString",value:function(){var t=[];return this._records.forEach((function(e,n){return t.push(bt(n))})),"StaticInjector[".concat(t.join(", "),"]")}}]),t}();function Ne(t){return Fe("Cannot mix multi providers and regular providers",t)}function Fe(t,e){return new Error(Bt(t,e,"StaticInjectorError"))}var ze=new Pt("AnalyzeForEntryComponents"),Be=null;function Ve(){if(!Be){var t=Tt.Symbol;if(t&&t.iterator)Be=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var i=e[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Be=i)}}return Be}function Ue(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function je(t,e){var n=Ge(t),i=Ge(e);return n&&i?function(t,e,n){for(var i=t[Ve()](),r=e[Ve()]();;){var o=i.next(),a=r.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!n(o.value,a.value))return!1}}(t,e,je):!(n||!(t&&("object"==typeof t||"function"==typeof t))||i||!(e&&("object"==typeof e||"function"==typeof e)))||Ue(t,e)}var qe=function(){function t(e){_classCallCheck(this,t),this.wrapped=e}return _createClass(t,null,[{key:"wrap",value:function(e){return new t(e)}},{key:"unwrap",value:function(e){return t.isWrapped(e)?e.wrapped:e}},{key:"isWrapped",value:function(e){return e instanceof t}}]),t}();function Ge(t){return!!He(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ve()in t)}function He(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Xe(t){return!!t&&"function"==typeof t.then}function Ze(t){return!!t&&"function"==typeof t.subscribe}var We=function(){function t(e,n,i){_classCallCheck(this,t),this.previousValue=e,this.currentValue=n,this.firstChange=i}return _createClass(t,[{key:"isFirstChange",value:function(){return this.firstChange}}]),t}(),Ye=function t(){_classCallCheck(this,t)};function Ke(t){var e=Error("No component factory found for ".concat(bt(t),". Did you add it to @NgModule.entryComponents?"));return e[Je]=t,e}var Je="ngComponent",Qe=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"resolveComponentFactory",value:function(t){throw Ke(t)}}]),t}(),$e=function(){var t=function t(){_classCallCheck(this,t)};return t.NULL=new Qe,t}(),tn=function(){function t(e,n,i){_classCallCheck(this,t),this._parent=n,this._ngModule=i,this._factories=new Map;for(var r=0;r<e.length;r++){var o=e[r];this._factories.set(o.componentType,o)}}return _createClass(t,[{key:"resolveComponentFactory",value:function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw Ke(t);return new en(e,this._ngModule)}}]),t}(),en=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this)).factory=t,r.ngModule=i,r.selector=t.selector,r.componentType=t.componentType,r.ngContentSelectors=t.ngContentSelectors,r.inputs=t.inputs,r.outputs=t.outputs,r}return _createClass(n,[{key:"create",value:function(t,e,n,i){return this.factory.create(t,e,n,i||this.ngModule)}}]),n}(Ye);function nn(){}var rn=function(){var t=function t(e){_classCallCheck(this,t),this.nativeElement=e};return t.__NG_ELEMENT_ID__=function(){return on(t)},t}(),on=nn,an=function t(){_classCallCheck(this,t)},sn=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}(),ln=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return un()},t}(),un=nn,cn=function t(e){_classCallCheck(this,t),this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")},hn=new cn("8.2.14"),pn=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"supports",value:function(t){return Ge(t)}},{key:"create",value:function(t){return new dn(t)}}]),t}(),fn=function(t,e){return e},dn=function(){function t(e){_classCallCheck(this,t),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||fn}return _createClass(t,[{key:"forEachItem",value:function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)}},{key:"forEachOperation",value:function(t){for(var e=this._itHead,n=this._removalsHead,i=0,r=null;e||n;){var o=!n||e&&e.currentIndex<vn(n,i,r)?e:n,a=vn(o,i,r),s=o.currentIndex;if(o===n)i--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)i++;else{r||(r=[]);var l=a-i,u=s-i;if(l!=u){for(var c=0;c<l;c++){var h=c<r.length?r[c]:r[c]=0,p=h+c;u<=p&&p<l&&(r[c]=h+1)}r[o.previousIndex]=u-l}}a!==s&&t(o,a,s)}}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachMovedItem",value:function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"forEachIdentityChange",value:function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}},{key:"diff",value:function(t){if(null==t&&(t=[]),!Ge(t))throw new Error("Error trying to diff '".concat(bt(t),"'. Only arrays and iterables are allowed"));return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n,i,r,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)i=t[s],r=this._trackByFn(s,i),null!==o&&Ue(o.trackById,r)?(a&&(o=this._verifyReinsertion(o,i,r,s)),Ue(o.item,i)||this._addIdentityChange(o,i)):(o=this._mismatch(o,i,r,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var i,r=t[Ve()]();!(i=r.next()).done;)e(i.value)}(t,(function(t){r=e._trackByFn(n,t),null!==o&&Ue(o.trackById,r)?(a&&(o=e._verifyReinsertion(o,t,r,n)),Ue(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,r,n),a=!0),o=o._next,n++})),this.length=n;return this._truncate(o),this.collection=t,this.isDirty}},{key:"_reset",value:function(){if(this.isDirty){var t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(t,e,n,i){var r;return null===t?r=this._itTail:(r=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Ue(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,i)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Ue(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,i)):t=this._addAfter(new mn(e,n),r,i),t}},{key:"_verifyReinsertion",value:function(t,e,n,i){var r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?t=this._reinsertAfter(r,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}},{key:"_truncate",value:function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var i=t._prevRemoved,r=t._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_moveAfter",value:function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_addAfter",value:function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}},{key:"_insertAfter",value:function(t,e,n){var i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new yn),this._linkedRecords.put(t),t.currentIndex=n,t}},{key:"_remove",value:function(t){return this._addToRemovals(this._unlink(t))}},{key:"_unlink",value:function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}},{key:"_addToMoves",value:function(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}},{key:"_addToRemovals",value:function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new yn),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}},{key:"_addIdentityChange",value:function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}}]),t}(),mn=function t(e,n){_classCallCheck(this,t),this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},gn=function(){function t(){_classCallCheck(this,t),this._head=null,this._tail=null}return _createClass(t,[{key:"add",value:function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}},{key:"get",value:function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Ue(n.trackById,t))return n;return null}},{key:"remove",value:function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}]),t}(),yn=function(){function t(){_classCallCheck(this,t),this.map=new Map}return _createClass(t,[{key:"put",value:function(t){var e=t.trackById,n=this.map.get(e);n||(n=new gn,this.map.set(e,n)),n.add(t)}},{key:"get",value:function(t,e){var n=this.map.get(t);return n?n.get(t,e):null}},{key:"remove",value:function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}},{key:"clear",value:function(){this.map.clear()}},{key:"isEmpty",get:function(){return 0===this.map.size}}]),t}();function vn(t,e,n){var i=t.previousIndex;if(null===i)return i;var r=0;return n&&i<n.length&&(r=n[i]),i+e+r}var _n=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"supports",value:function(t){return t instanceof Map||He(t)}},{key:"create",value:function(){return new bn}}]),t}(),bn=function(){function t(){_classCallCheck(this,t),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _createClass(t,[{key:"forEachItem",value:function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachChangedItem",value:function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"diff",value:function(t){if(t){if(!(t instanceof Map||He(t)))throw new Error("Error trying to diff '".concat(bt(t),"'. Only maps and objects are allowed"))}else t=new Map;return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(function(t,i){if(n&&n.key===i)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var r=e._getOrCreateRecordForKey(i,t);n=e._insertBeforeOrAppend(n,r)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}},{key:"_getOrCreateRecordForKey",value:function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}var o=new xn(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(t,e){Ue(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}},{key:"_addToAdditions",value:function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}},{key:"_addToChanges",value:function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}},{key:"_forEach",value:function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach((function(n){return e(t[n],n)}))}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}}]),t}(),xn=function t(e){_classCallCheck(this,t),this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},wn=function(){var t=function(){function t(e){_classCallCheck(this,t),this.factories=e}return _createClass(t,[{key:"find",value:function(t){var e,n=this.factories.find((function(e){return e.supports(t)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'"))}}],[{key:"create",value:function(e,n){if(null!=n){var i=n.factories.slice();e=e.concat(i)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new dt,new pt]]}}}]),t}();return t.ngInjectableDef=yt({token:t,providedIn:"root",factory:function(){return new t([new pn])}}),t}(),Cn=function(){var t=function(){function t(e){_classCallCheck(this,t),this.factories=e}return _createClass(t,[{key:"find",value:function(t){var e=this.factories.find((function(e){return e.supports(t)}));if(e)return e;throw new Error("Cannot find a differ supporting object '".concat(t,"'"))}}],[{key:"create",value:function(e,n){if(n){var i=n.factories.slice();e=e.concat(i)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new dt,new pt]]}}}]),t}();return t.ngInjectableDef=yt({token:t,providedIn:"root",factory:function(){return new t([new _n])}}),t}(),kn=[new _n],En=new wn([new pn]),Sn=new Cn(kn),In=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return Tn(t,rn)},t}(),Tn=nn,Pn=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return An(t,rn)},t}(),An=nn;function Ln(t,e,n,i){var r="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '".concat(e,"'. Current value: '").concat(n,"'.");return i&&(r+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return Mn(n,e),n}(r,t)}function Mn(t,e){t.ngDebugContext=e,t.ngErrorLogger=e.logError.bind(e)}function Rn(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+t)}function On(t,e,n){var i=t.state,r=1792&i;return r===e?(t.state=-1793&i|n,t.initIndex=-1,!0):r===n}function Dn(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Nn(t,e){return t.nodes[e]}function Fn(t,e){return t.nodes[e]}function zn(t,e){return t.nodes[e]}function Bn(t,e){return t.nodes[e]}function Vn(t,e){return t.nodes[e]}var Un={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},jn=function(){},qn=new Map;function Gn(t){var e=qn.get(t);return e||(e=bt(t)+"_"+qn.size,qn.set(t,e)),e}function Hn(t){return{id:"$$undefined",styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var Xn=0;function Zn(t,e,n,i){return!(!(2&t.state)&&Ue(t.oldValues[e.bindingIndex+n],i))}function Wn(t,e,n,i){return!!Zn(t,e,n,i)&&(t.oldValues[e.bindingIndex+n]=i,!0)}function Yn(t,e,n,i){var r=t.oldValues[e.bindingIndex+n];if(1&t.state||!je(r,i)){var o=e.bindings[n].name;throw Ln(Un.createDebugContext(t,e.nodeIndex),"".concat(o,": ").concat(r),"".concat(o,": ").concat(i),0!=(1&t.state))}}function Kn(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function Jn(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function Qn(t,e,n,i){try{return Kn(33554432&t.def.nodes[e].flags?Fn(t,e).componentView:t),Un.handleEvent(t,e,n,i)}catch(r){t.root.errorHandler.handleError(r)}}function $n(t){return t.parent?Fn(t.parent,t.parentNodeDef.nodeIndex):null}function ti(t){return t.parent?t.parentNodeDef.parent:null}function ei(t,e){switch(201347067&e.flags){case 1:return Fn(t,e.nodeIndex).renderElement;case 2:return Nn(t,e.nodeIndex).renderText}}function ni(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function ii(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function ri(t){return 1<<t%32}function oi(t){var e={},n=0,i={};return t&&t.forEach((function(t){var r=_slicedToArray(t,2),o=r[0],a=r[1];"number"==typeof o?(e[o]=a,n|=ri(o)):i[o]=a})),{matchedQueries:e,references:i,matchedQueryIds:n}}function ai(t,e){return t.map((function(t){var n,i,r;return Array.isArray(t)?(r=(n=_slicedToArray(t,2))[0],i=n[1]):(r=0,i=t),i&&("function"==typeof i||"object"==typeof i)&&e&&Object.defineProperty(i,"__source",{value:e,configurable:!0}),{flags:r,token:i,tokenKey:Gn(i)}}))}function si(t,e,n){var i=n.renderParent;return i?0==(1&i.flags)||0==(33554432&i.flags)||i.element.componentRendererType&&i.element.componentRendererType.encapsulation===Gt.Native?Fn(t,n.renderParent.nodeIndex).renderElement:void 0:e}var li=new WeakMap;function ui(t){var e=li.get(t);return e||((e=t((function(){return jn}))).factory=t,li.set(t,e)),e}function ci(t,e,n,i,r){3===e&&(n=t.renderer.parentNode(ei(t,t.def.lastRenderRootNode))),hi(t,e,0,t.def.nodes.length-1,n,i,r)}function hi(t,e,n,i,r,o,a){for(var s=n;s<=i;s++){var l=t.def.nodes[s];11&l.flags&&fi(t,l,e,r,o,a),s+=l.childCount}}function pi(t,e,n,i,r,o){for(var a=t;a&&!ni(a);)a=a.parent;for(var s=a.parent,l=ti(a),u=l.nodeIndex+l.childCount,c=l.nodeIndex+1;c<=u;c++){var h=s.def.nodes[c];h.ngContentIndex===e&&fi(s,h,n,i,r,o),c+=h.childCount}if(!s.parent){var p=t.root.projectableNodes[e];if(p)for(var f=0;f<p.length;f++)di(t,p[f],n,i,r,o)}}function fi(t,e,n,i,r,o){if(8&e.flags)pi(t,e.ngContent.index,n,i,r,o);else{var a=ei(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&di(t,a,n,i,r,o),32&e.bindingFlags&&di(Fn(t,e.nodeIndex).componentView,a,n,i,r,o)):di(t,a,n,i,r,o),16777216&e.flags)for(var s=Fn(t,e.nodeIndex).viewContainer._embeddedViews,l=0;l<s.length;l++)ci(s[l],n,i,r,o);1&e.flags&&!e.element.name&&hi(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,i,r,o)}}function di(t,e,n,i,r,o){var a=t.renderer;switch(n){case 1:a.appendChild(i,e);break;case 2:a.insertBefore(i,e,r);break;case 3:a.removeChild(i,e);break;case 0:o.push(e)}}var mi=/^:([^:]+):(.+)$/;function gi(t){if(":"===t[0]){var e=t.match(mi);return[e[1],e[2]]}return["",t]}function yi(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}var vi=new Object,_i=Gn(Ae),bi=Gn(At),xi=Gn(Vt);function wi(t,e,n,i){return n=Ct(n),{index:-1,deps:ai(i,bt(e)),flags:t,token:e,value:n}}function Ci(t,e){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ae.THROW_IF_NOT_FOUND,o=Dt(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(r=null),1&e.flags)return t._parent.get(e.token,r);var a=e.tokenKey;switch(a){case _i:case bi:case xi:return t}var s,l=t._def.providersByKey[a];if(l){var u=t._providers[l.index];return void 0===u&&(u=t._providers[l.index]=ki(t,l)),u===vi?void 0:u}if((s=vt(e.token))&&(n=t,null!=(i=s).providedIn&&(function(t,e){return t._def.modules.indexOf(e)>-1}(n,i.providedIn)||"root"===i.providedIn&&n._def.isRoot))){var c=t._providers.length;return t._def.providers[c]=t._def.providersByKey[e.tokenKey]={flags:5120,value:s.factory,deps:[],index:c,token:e.token},t._providers[c]=vi,t._providers[c]=ki(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?r:t._parent.get(e.token,r)}finally{Dt(o)}}function ki(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var i=n.length;switch(i){case 0:return new e;case 1:return new e(Ci(t,n[0]));case 2:return new e(Ci(t,n[0]),Ci(t,n[1]));case 3:return new e(Ci(t,n[0]),Ci(t,n[1]),Ci(t,n[2]));default:for(var r=new Array(i),o=0;o<i;o++)r[o]=Ci(t,n[o]);return _construct(e,r)}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var i=n.length;switch(i){case 0:return e();case 1:return e(Ci(t,n[0]));case 2:return e(Ci(t,n[0]),Ci(t,n[1]));case 3:return e(Ci(t,n[0]),Ci(t,n[1]),Ci(t,n[2]));default:for(var r=Array(i),o=0;o<i;o++)r[o]=Ci(t,n[o]);return e.apply(void 0,r)}}(t,e.value,e.deps);break;case 2048:n=Ci(t,e.deps[0]);break;case 256:n=e.value}return n===vi||null===n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?vi:n}function Ei(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var i=n[e];return i.viewContainerParent=null,qt(n,e),Un.dirtyParentQueries(i),Ii(i),i}function Si(t,e,n){var i=e?ei(e,e.def.lastRenderRootNode):t.renderElement,r=n.renderer.parentNode(i),o=n.renderer.nextSibling(i);ci(n,2,r,o,void 0)}function Ii(t){ci(t,3,null,null,void 0)}var Ti=new Object;function Pi(t,e,n,i,r,o){return new Ai(t,e,n,i,r,o)}var Ai=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o,a,s){var l;return _classCallCheck(this,n),(l=e.call(this)).selector=t,l.componentType=i,l._inputs=o,l._outputs=a,l.ngContentSelectors=s,l.viewDefFactory=r,l}return _createClass(n,[{key:"create",value:function(t,e,n,i){if(!i)throw new Error("ngModule should be provided");var r=ui(this.viewDefFactory),o=r.nodes[0].element.componentProvider.nodeIndex,a=Un.createRootView(t,e||[],n,r,i,Ti),s=zn(a,o).instance;return n&&a.renderer.setAttribute(Fn(a,0).renderElement,"ng-version",hn.full),new Li(a,new Di(a),s)}},{key:"inputs",get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t}},{key:"outputs",get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t}}]),n}(Ye),Li=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;return _classCallCheck(this,n),(o=e.call(this))._view=t,o._viewRef=i,o._component=r,o._elDef=o._view.def.nodes[0],o.hostView=i,o.changeDetectorRef=i,o.instance=r,o}return _createClass(n,[{key:"destroy",value:function(){this._viewRef.destroy()}},{key:"onDestroy",value:function(t){this._viewRef.onDestroy(t)}},{key:"location",get:function(){return new rn(Fn(this._view,this._elDef.nodeIndex).renderElement)}},{key:"injector",get:function(){return new Bi(this._view,this._elDef)}},{key:"componentType",get:function(){return this._component.constructor}}]),n}(function(){return function t(){_classCallCheck(this,t)}}());function Mi(t,e,n){return new Ri(t,e,n)}var Ri=function(){function t(e,n,i){_classCallCheck(this,t),this._view=e,this._elDef=n,this._data=i,this._embeddedViews=[]}return _createClass(t,[{key:"clear",value:function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=Ei(this._data,t);Un.destroyView(e)}}},{key:"get",value:function(t){var e=this._embeddedViews[t];if(e){var n=new Di(e);return n.attachToViewContainerRef(this),n}return null}},{key:"createEmbeddedView",value:function(t,e,n){var i=t.createEmbeddedView(e||{});return this.insert(i,n),i}},{key:"createComponent",value:function(t,e,n,i,r){var o=n||this.parentInjector;r||t instanceof en||(r=o.get(Vt));var a=t.create(o,i,void 0,r);return this.insert(a.hostView,e),a}},{key:"insert",value:function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,i,r,o,a,s=t;return n=this._view,i=this._data,r=e,o=s._view,a=i.viewContainer._embeddedViews,null==r&&(r=a.length),o.viewContainerParent=n,jt(a,r,o),function(t,e){var n=$n(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var i=n.template._projectedViews;i||(i=n.template._projectedViews=[]),i.push(e),function(t,e){if(!(4&e.flags)){t.nodeFlags|=4,e.flags|=4;for(var n=e.parent;n;)n.childFlags|=4,n=n.parent}}(e.parent.def,e.parentNodeDef)}}(i,o),Un.dirtyParentQueries(o),Si(i,r>0?a[r-1]:null,o),s.attachToViewContainerRef(this),t}},{key:"move",value:function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,i,r,o,a,s=this._embeddedViews.indexOf(t._view);return n=this._data,i=s,r=e,o=n.viewContainer._embeddedViews,a=o[i],qt(o,i),null==r&&(r=o.length),jt(o,r,a),Un.dirtyParentQueries(a),Ii(a),Si(n,r>0?o[r-1]:null,a),t}},{key:"indexOf",value:function(t){return this._embeddedViews.indexOf(t._view)}},{key:"remove",value:function(t){var e=Ei(this._data,t);e&&Un.destroyView(e)}},{key:"detach",value:function(t){var e=Ei(this._data,t);return e?new Di(e):null}},{key:"element",get:function(){return new rn(this._data.renderElement)}},{key:"injector",get:function(){return new Bi(this._view,this._elDef)}},{key:"parentInjector",get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=ti(t),t=t.parent;return t?new Bi(t,e):new Bi(this._view,null)}},{key:"length",get:function(){return this._embeddedViews.length}}]),t}();function Oi(t){return new Di(t)}var Di=function(){function t(e){_classCallCheck(this,t),this._view=e,this._viewContainerRef=null,this._appRef=null}return _createClass(t,[{key:"markForCheck",value:function(){Kn(this._view)}},{key:"detach",value:function(){this._view.state&=-5}},{key:"detectChanges",value:function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{Un.checkAndUpdateView(this._view)}finally{t.end&&t.end()}}},{key:"checkNoChanges",value:function(){Un.checkNoChangesView(this._view)}},{key:"reattach",value:function(){this._view.state|=4}},{key:"onDestroy",value:function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)}},{key:"destroy",value:function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Un.destroyView(this._view)}},{key:"detachFromAppRef",value:function(){this._appRef=null,Ii(this._view),Un.dirtyParentQueries(this._view)}},{key:"attachToAppRef",value:function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}},{key:"attachToViewContainerRef",value:function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}},{key:"rootNodes",get:function(){return ci(this._view,0,void 0,void 0,t=[]),t;var t}},{key:"context",get:function(){return this._view.context}},{key:"destroyed",get:function(){return 0!=(128&this._view.state)}}]),t}();function Ni(t,e){return new Fi(t,e)}var Fi=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this))._parentView=t,r._def=i,r}return _createClass(n,[{key:"createEmbeddedView",value:function(t){return new Di(Un.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))}},{key:"elementRef",get:function(){return new rn(Fn(this._parentView,this._def.nodeIndex).renderElement)}}]),n}(In);function zi(t,e){return new Bi(t,e)}var Bi=function(){function t(e,n){_classCallCheck(this,t),this.view=e,this.elDef=n}return _createClass(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae.THROW_IF_NOT_FOUND;return Un.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:Gn(t)},e)}}]),t}();function Vi(t,e){var n=t.def.nodes[e];if(1&n.flags){var i=Fn(t,n.nodeIndex);return n.element.template?i.template:i.renderElement}if(2&n.flags)return Nn(t,n.nodeIndex).renderText;if(20240&n.flags)return zn(t,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+e)}function Ui(t){return new ji(t.renderer)}var ji=function(){function t(e){_classCallCheck(this,t),this.delegate=e}return _createClass(t,[{key:"selectRootElement",value:function(t){return this.delegate.selectRootElement(t)}},{key:"createElement",value:function(t,e){var n=_slicedToArray(gi(e),2),i=n[0],r=n[1],o=this.delegate.createElement(r,i);return t&&this.delegate.appendChild(t,o),o}},{key:"createViewRoot",value:function(t){return t}},{key:"createTemplateAnchor",value:function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e}},{key:"createText",value:function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n}},{key:"projectNodes",value:function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])}},{key:"attachViewAfter",value:function(t,e){for(var n=this.delegate.parentNode(t),i=this.delegate.nextSibling(t),r=0;r<e.length;r++)this.delegate.insertBefore(n,e[r],i)}},{key:"detachView",value:function(t){for(var e=0;e<t.length;e++){var n=t[e],i=this.delegate.parentNode(n);this.delegate.removeChild(i,n)}}},{key:"destroyView",value:function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])}},{key:"listen",value:function(t,e,n){return this.delegate.listen(t,e,n)}},{key:"listenGlobal",value:function(t,e,n){return this.delegate.listen(t,e,n)}},{key:"setElementProperty",value:function(t,e,n){this.delegate.setProperty(t,e,n)}},{key:"setElementAttribute",value:function(t,e,n){var i=_slicedToArray(gi(e),2),r=i[0],o=i[1];null!=n?this.delegate.setAttribute(t,o,n,r):this.delegate.removeAttribute(t,o,r)}},{key:"setBindingDebugInfo",value:function(t,e,n){}},{key:"setElementClass",value:function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)}},{key:"setElementStyle",value:function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)}},{key:"invokeElementMethod",value:function(t,e,n){t[e].apply(t,n)}},{key:"setText",value:function(t,e){this.delegate.setValue(t,e)}},{key:"animate",value:function(){throw new Error("Renderer.animate is no longer supported!")}}]),t}();function qi(t,e,n,i){return new Gi(t,e,n,i)}var Gi=function(){function t(e,n,i,r){_classCallCheck(this,t),this._moduleType=e,this._parent=n,this._bootstrapComponents=i,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),i=0;i<e.providers.length;i++){var r=e.providers[i];4096&r.flags||void 0===n[i]&&(n[i]=ki(t,r))}}(this)}return _createClass(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mt.Default,i=0;return n&mt.SkipSelf?i|=1:n&mt.Self&&(i|=4),Ci(this,{token:t,tokenKey:Gn(t),flags:i},e)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The ng module ".concat(bt(this.instance.constructor)," has already been destroyed."));this._destroyed=!0,function(t,e){for(var n=t._def,i=new Set,r=0;r<n.providers.length;r++)if(131072&n.providers[r].flags){var o=t._providers[r];if(o&&o!==vi){var a=o.ngOnDestroy;"function"!=typeof a||i.has(o)||(a.apply(o),i.add(o))}}}(this),this._destroyListeners.forEach((function(t){return t()}))}},{key:"onDestroy",value:function(t){this._destroyListeners.push(t)}},{key:"instance",get:function(){return this.get(this._moduleType)}},{key:"componentFactoryResolver",get:function(){return this.get($e)}}]),t}(),Hi=Gn((function t(){_classCallCheck(this,t)})),Xi=Gn(ln),Zi=Gn(rn),Wi=Gn(Pn),Yi=Gn(In),Ki=Gn(Se),Ji=Gn(Ae),Qi=Gn(At);function $i(t,e,n,i,r,o,a,s){var l=[];if(a)for(var u in a){var c=_slicedToArray(a[u],2),h=c[0],p=c[1];l[h]={flags:8,name:u,nonMinifiedName:p,ns:null,securityContext:null,suffix:null}}var f=[];if(s)for(var d in s)f.push({type:1,propName:d,target:null,eventName:s[d]});return er(t,e|=16384,n,i,r,r,o,l,f)}function tr(t,e,n,i,r){return er(-1,t,e,0,n,i,r)}function er(t,e,n,i,r,o,a,s,l){var u=oi(n),c=u.matchedQueries,h=u.references,p=u.matchedQueryIds;l||(l=[]),s||(s=[]),o=Ct(o);var f=ai(a,bt(r));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:p,references:h,ngContentIndex:-1,childCount:i,bindings:s,bindingFlags:yi(s),outputs:l,element:null,provider:{token:r,value:o,deps:f},text:null,query:null,ngContent:null}}function nr(t,e){return ar(t,e)}function ir(t,e){for(var n=t;n.parent&&!ni(n);)n=n.parent;return sr(n.parent,ti(n),!0,e.provider.value,e.provider.deps)}function rr(t,e){var n=sr(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var i=0;i<e.outputs.length;i++){var r=e.outputs[i],o=n[r.propName];if(!Ze(o))throw new Error("@Output ".concat(r.propName," not initialized in '").concat(n.constructor.name,"'."));var a=o.subscribe(or(t,e.parent.nodeIndex,r.eventName));t.disposables[e.outputIndex+i]=a.unsubscribe.bind(a)}return n}function or(t,e,n){return function(i){return Qn(t,e,n,i)}}function ar(t,e){var n=(8192&e.flags)>0,i=e.provider;switch(201347067&e.flags){case 512:return sr(t,e.parent,n,i.value,i.deps);case 1024:return function(t,e,n,i,r){var o=r.length;switch(o){case 0:return i();case 1:return i(ur(t,e,n,r[0]));case 2:return i(ur(t,e,n,r[0]),ur(t,e,n,r[1]));case 3:return i(ur(t,e,n,r[0]),ur(t,e,n,r[1]),ur(t,e,n,r[2]));default:for(var a=Array(o),s=0;s<o;s++)a[s]=ur(t,e,n,r[s]);return i.apply(void 0,a)}}(t,e.parent,n,i.value,i.deps);case 2048:return ur(t,e.parent,n,i.deps[0]);case 256:return i.value}}function sr(t,e,n,i,r){var o=r.length;switch(o){case 0:return new i;case 1:return new i(ur(t,e,n,r[0]));case 2:return new i(ur(t,e,n,r[0]),ur(t,e,n,r[1]));case 3:return new i(ur(t,e,n,r[0]),ur(t,e,n,r[1]),ur(t,e,n,r[2]));default:for(var a=new Array(o),s=0;s<o;s++)a[s]=ur(t,e,n,r[s]);return _construct(i,a)}}var lr={};function ur(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ae.THROW_IF_NOT_FOUND;if(8&i.flags)return i.token;var o=t;2&i.flags&&(r=null);var a=i.tokenKey;a===Ki&&(n=!(!e||!e.element.componentView)),e&&1&i.flags&&(n=!1,e=e.parent);for(var s=t;s;){if(e)switch(a){case Hi:return Ui(cr(s,e,n));case Xi:return cr(s,e,n).renderer;case Zi:return new rn(Fn(s,e.nodeIndex).renderElement);case Wi:return Fn(s,e.nodeIndex).viewContainer;case Yi:if(e.element.template)return Fn(s,e.nodeIndex).template;break;case Ki:return Oi(cr(s,e,n));case Ji:case Qi:return zi(s,e);default:var l=(n?e.element.allProviders:e.element.publicProviders)[a];if(l){var u=zn(s,l.nodeIndex);return u||(u={instance:ar(s,l)},s.nodes[l.nodeIndex]=u),u.instance}}n=ni(s),e=ti(s),s=s.parent,4&i.flags&&(s=null)}var c=o.root.injector.get(i.token,lr);return c!==lr||r===lr?c:o.root.ngModule.injector.get(i.token,r)}function cr(t,e,n){var i;if(n)i=Fn(t,e.nodeIndex).componentView;else for(i=t;i.parent&&!ni(i);)i=i.parent;return i}function hr(t,e,n,i,r,o){if(32768&n.flags){var a=Fn(t,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(e.instance[n.bindings[i].name]=r,524288&n.flags){o=o||{};var s=qe.unwrap(t.oldValues[n.bindingIndex+i]);o[n.bindings[i].nonMinifiedName]=new We(s,r,0!=(2&t.state))}return t.oldValues[n.bindingIndex+i]=r,o}function pr(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,i=0,r=0;r<n.length;r++){var o=n[r],a=o.parent;for(!a&&o.flags&e&&dr(t,r,o.flags&e,i++),0==(o.childFlags&e)&&(r+=o.childCount);a&&1&a.flags&&r===a.nodeIndex+a.childCount;)a.directChildFlags&e&&(i=fr(t,a,e,i)),a=a.parent}}function fr(t,e,n,i){for(var r=e.nodeIndex+1;r<=e.nodeIndex+e.childCount;r++){var o=t.def.nodes[r];o.flags&n&&dr(t,r,o.flags&n,i++),r+=o.childCount}return i}function dr(t,e,n,i){var r=zn(t,e);if(r){var o=r.instance;o&&(Un.setCurrentNode(t,e),1048576&n&&Dn(t,512,i)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&Dn(t,768,i)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}var mr=new Pt("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return Ht}}),gr={},yr=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}(),vr=void 0,_r=["en",[["a","p"],["AM","PM"],vr],[["AM","PM"],vr,vr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vr,"{1} 'at' {0}",vr],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],br=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _classCallCheck(this,n),(t=e.call(this)).__isAsync=i,t}return _createClass(n,[{key:"emit",value:function(t){_get(_getPrototypeOf(n.prototype),"next",this).call(this,t)}},{key:"subscribe",value:function(t,e,i){var r,o=function(t){return null},a=function(){return null};t&&"object"==typeof t?(r=this.__isAsync?function(e){setTimeout((function(){return t.next(e)}))}:function(e){t.next(e)},t.error&&(o=this.__isAsync?function(e){setTimeout((function(){return t.error(e)}))}:function(e){t.error(e)}),t.complete&&(a=this.__isAsync?function(){setTimeout((function(){return t.complete()}))}:function(){t.complete()})):(r=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)},e&&(o=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)}),i&&(a=this.__isAsync?function(){setTimeout((function(){return i()}))}:function(){i()}));var s=_get(_getPrototypeOf(n.prototype),"subscribe",this).call(this,r,o,a);return t instanceof d&&t.add(s),s}}]),n}(L);function xr(){return this._results[Ve()]()}var wr=function(){function t(){_classCallCheck(this,t),this.dirty=!0,this._results=[],this.changes=new br,this.length=0;var e=Ve(),n=t.prototype;n[e]||(n[e]=xr)}return _createClass(t,[{key:"map",value:function(t){return this._results.map(t)}},{key:"filter",value:function(t){return this._results.filter(t)}},{key:"find",value:function(t){return this._results.find(t)}},{key:"reduce",value:function(t,e){return this._results.reduce(t,e)}},{key:"forEach",value:function(t){this._results.forEach(t)}},{key:"some",value:function(t){return this._results.some(t)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(t){this._results=function t(e,n){void 0===n&&(n=e);for(var i=0;i<e.length;i++){var r=e[i];Array.isArray(r)?(n===e&&(n=e.slice(0,i)),t(r,n)):n!==e&&n.push(r)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),t}(),Cr=new Pt("Application Initializer"),kr=function(){function t(e){var n=this;_classCallCheck(this,t),this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(t,e){n.resolve=t,n.reject=e}))}return _createClass(t,[{key:"runInitializers",value:function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var i=0;i<this.appInits.length;i++){var r=this.appInits[i]();Xe(r)&&e.push(r)}Promise.all(e).then((function(){n()})).catch((function(e){t.reject(e)})),0===e.length&&n(),this.initialized=!0}}}]),t}(),Er=new Pt("AppId");function Sr(){return"".concat(Ir()).concat(Ir()).concat(Ir())}function Ir(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Tr=new Pt("Platform Initializer"),Pr=new Pt("Platform ID"),Ar=new Pt("appBootstrapListener"),Lr=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"log",value:function(t){console.log(t)}},{key:"warn",value:function(t){console.warn(t)}}]),t}(),Mr=new Pt("LocaleId");function Rr(){throw new Error("Runtime compiler is not loaded")}var Or,Dr,Nr=Rr,Fr=Rr,zr=Rr,Br=Rr,Vr=function(){function t(){_classCallCheck(this,t),this.compileModuleSync=Nr,this.compileModuleAsync=Fr,this.compileModuleAndAllComponentsSync=zr,this.compileModuleAndAllComponentsAsync=Br}return _createClass(t,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(t){}},{key:"getModuleId",value:function(t){}}]),t}(),Ur=function t(){_classCallCheck(this,t)};var jr,qr=!(!(jr=Tt.wtf)||(Or=jr.trace,!Or)||(Dr=Or.events,0));function Gr(t,e){return null}var Hr=qr?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Dr.createScope(t,e)}:function(t,e){return Gr},Xr=qr?function(t,e){return Or.leaveScope(t,e),e}:function(t,e){return e},Zr=Promise.resolve(0);function Wr(t){"undefined"==typeof Zone?Zr.then((function(){t&&t.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}var Yr=function(){function t(e){var n,i=e.enableLongStackTrace,r=void 0!==i&&i;if(_classCallCheck(this,t),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new br(!1),this.onMicrotaskEmpty=new br(!1),this.onStable=new br(!1),this.onError=new br(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,e,i,r,o,a){try{return $r(n),t.invokeTask(i,r,o,a)}finally{to(n)}},onInvoke:function(t,e,i,r,o,a,s){try{return $r(n),t.invoke(i,r,o,a,s)}finally{to(n)}},onHasTask:function(t,e,i,r){t.hasTask(i,r),e===i&&("microTask"==r.change?(n.hasPendingMicrotasks=r.microTask,Qr(n)):"macroTask"==r.change&&(n.hasPendingMacrotasks=r.macroTask))},onHandleError:function(t,e,i,r){return t.handleError(i,r),n.runOutsideAngular((function(){return n.onError.emit(r)})),!1}})}return _createClass(t,[{key:"run",value:function(t,e,n){return this._inner.run(t,e,n)}},{key:"runTask",value:function(t,e,n,i){var r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+i,t,Jr,Kr,Kr);try{return r.runTask(o,e,n)}finally{r.cancelTask(o)}}},{key:"runGuarded",value:function(t,e,n){return this._inner.runGuarded(t,e,n)}},{key:"runOutsideAngular",value:function(t){return this._outer.run(t)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),t}();function Kr(){}var Jr={};function Qr(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular((function(){return t.onStable.emit(null)}))}finally{t.isStable=!0}}}function $r(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function to(t){t._nesting--,Qr(t)}var eo,no=function(){function t(){_classCallCheck(this,t),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new br,this.onMicrotaskEmpty=new br,this.onStable=new br,this.onError=new br}return _createClass(t,[{key:"run",value:function(t){return t()}},{key:"runGuarded",value:function(t){return t()}},{key:"runOutsideAngular",value:function(t){return t()}},{key:"runTask",value:function(t){return t()}}]),t}(),io=function(){function t(e){var n=this;_classCallCheck(this,t),this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return _createClass(t,[{key:"_watchAngularEvents",value:function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){t._ngZone.onStable.subscribe({next:function(){Yr.assertNotInAngularZone(),Wr((function(){t._isZoneStable=!0,t._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var t=this;if(this.isStable())Wr((function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1}));else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(t){return{source:t.source,creationLocation:t.creationLocation,data:t.data}})):[]}},{key:"addCallback",value:function(t,e,n){var i=this,r=-1;e&&e>0&&(r=setTimeout((function(){i._callbacks=i._callbacks.filter((function(t){return t.timeoutId!==r})),t(i._didWork,i.getPendingTasks())}),e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}},{key:"whenStable",value:function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(t,e,n){return[]}}]),t}(),ro=function(){function t(){_classCallCheck(this,t),this._applications=new Map,oo.addToWindow(this)}return _createClass(t,[{key:"registerApplication",value:function(t,e){this._applications.set(t,e)}},{key:"unregisterApplication",value:function(t){this._applications.delete(t)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(t){return this._applications.get(t)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return oo.findTestabilityInTree(this,t,e)}}]),t}(),oo=new(function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"addToWindow",value:function(t){}},{key:"findTestabilityInTree",value:function(t,e,n){return null}}]),t}()),ao=new Pt("AllowMultipleToken"),so=function t(e,n){_classCallCheck(this,t),this.name=e,this.token=n};function lo(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i="Platform: "+e,r=new Pt(i);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=uo();if(!o||o.injector.get(ao,!1))if(t)t(n.concat(e).concat({provide:r,useValue:!0}));else{var a=n.concat(e).concat({provide:r,useValue:!0});!function(t){if(eo&&!eo.destroyed&&!eo.injector.get(ao,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");eo=t.get(co);var e=t.get(Tr,null);e&&e.forEach((function(t){return t()}))}(Ae.create({providers:a,name:i}))}return function(t){var e=uo();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function uo(){return eo&&!eo.destroyed?eo:null}var co=function(){function t(e){_classCallCheck(this,t),this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _createClass(t,[{key:"bootstrapModuleFactory",value:function(t,e){var n,i=this,r="noop"===(n=e?e.ngZone:void 0)?new no:("zone.js"===n?void 0:n)||new Yr({enableLongStackTrace:Qt()}),o=[{provide:Yr,useValue:r}];return r.run((function(){var e=Ae.create({providers:o,parent:i.injector,name:t.moduleType.name}),n=t.create(e),a=n.injector.get(Yt,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return mo(i._modules,n)})),r.runOutsideAngular((function(){return r.onError.subscribe({next:function(t){a.handleError(t)}})})),function(t,e,r){try{var o=((a=n.injector.get(kr)).runInitializers(),a.donePromise.then((function(){return i._moduleDoBootstrap(n),n})));return Xe(o)?o.catch((function(n){throw e.runOutsideAngular((function(){return t.handleError(n)})),n})):o}catch(s){throw e.runOutsideAngular((function(){return t.handleError(s)})),s}var a}(a,r)}))}},{key:"bootstrapModule",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=ho({},n);return function(t,e,n){return t.get(Ur).createCompiler([e]).compileModuleAsync(n)}(this.injector,i,t).then((function(t){return e.bootstrapModuleFactory(t,i)}))}},{key:"_moduleDoBootstrap",value:function(t){var e=t.injector.get(fo);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach((function(t){return e.bootstrap(t)}));else{if(!t.instance.ngDoBootstrap)throw new Error("The module ".concat(bt(t.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));t.instance.ngDoBootstrap(e)}this._modules.push(t)}},{key:"onDestroy",value:function(t){this._destroyListeners.push(t)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(t){return t.destroy()})),this._destroyListeners.forEach((function(t){return t()})),this._destroyed=!0}},{key:"injector",get:function(){return this._injector}},{key:"destroyed",get:function(){return this._destroyed}}]),t}();function ho(t,e){return Array.isArray(e)?e.reduce(ho,t):Object.assign({},t,e)}var po,fo=((po=function(){function t(e,n,i,r,o,a){var s=this;_classCallCheck(this,t),this._zone=e,this._console=n,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=o,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Qt(),this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run((function(){s.tick()}))}});var l=new k((function(t){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular((function(){t.next(s._stable),t.complete()}))})),u=new k((function(t){var e;s._zone.runOutsideAngular((function(){e=s._zone.onStable.subscribe((function(){Yr.assertNotInAngularZone(),Wr((function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,t.next(!0))}))}))}));var n=s._zone.onUnstable.subscribe((function(){Yr.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular((function(){t.next(!1)})))}));return function(){e.unsubscribe(),n.unsubscribe()}}));this.isStable=et(l,u.pipe(ut()))}return _createClass(t,[{key:"bootstrap",value:function(t,e){var n,i=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof Ye?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var r=n instanceof en?null:this._injector.get(Vt),o=n.create(Ae.NULL,[],e||n.selector,r);o.onDestroy((function(){i._unloadComponent(o)}));var a=o.injector.get(io,null);return a&&o.injector.get(ro).registerApplication(o.location.nativeElement,a),this._loadComponent(o),Qt()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=t._tickScope();try{this._runningTick=!0;var i,r=_createForOfIteratorHelper(this._views);try{for(r.s();!(i=r.n()).done;)i.value.detectChanges()}catch(s){r.e(s)}finally{r.f()}if(this._enforceNoNewChanges){var o,a=_createForOfIteratorHelper(this._views);try{for(a.s();!(o=a.n()).done;)o.value.checkNoChanges()}catch(s){a.e(s)}finally{a.f()}}}catch(l){this._zone.runOutsideAngular((function(){return e._exceptionHandler.handleError(l)}))}finally{this._runningTick=!1,Xr(n)}}},{key:"attachView",value:function(t){var e=t;this._views.push(e),e.attachToAppRef(this)}},{key:"detachView",value:function(t){var e=t;mo(this._views,e),e.detachFromAppRef()}},{key:"_loadComponent",value:function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ar,[]).concat(this._bootstrapListeners).forEach((function(e){return e(t)}))}},{key:"_unloadComponent",value:function(t){this.detachView(t.hostView),mo(this.components,t)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(t){return t.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),t}())._tickScope=Hr("ApplicationRef#tick()"),po);function mo(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var go=function t(){_classCallCheck(this,t)},yo=function t(){_classCallCheck(this,t)},vo={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},_o=function(){function t(e,n){_classCallCheck(this,t),this._compiler=e,this._config=n||vo}return _createClass(t,[{key:"load",value:function(t){return this._compiler instanceof Vr?this.loadFactory(t):this.loadAndCompile(t)}},{key:"loadAndCompile",value:function(t){var e=this,i=_slicedToArray(t.split("#"),2),r=i[0],o=i[1];return void 0===o&&(o="default"),n("zn8P")(r).then((function(t){return t[o]})).then((function(t){return bo(t,r,o)})).then((function(t){return e._compiler.compileModuleAsync(t)}))}},{key:"loadFactory",value:function(t){var e=_slicedToArray(t.split("#"),2),i=e[0],r=e[1],o="NgFactory";return void 0===r&&(r="default",o=""),n("zn8P")(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then((function(t){return t[r+o]})).then((function(t){return bo(t,i,r)}))}}]),t}();function bo(t,e,n){if(!t)throw new Error("Cannot find '".concat(n,"' in '").concat(e,"'"));return t}var xo=function t(e,n){_classCallCheck(this,t),this.name=e,this.callback=n},wo=function(){function t(e,n,i){_classCallCheck(this,t),this.listeners=[],this.parent=null,this._debugContext=i,this.nativeNode=e,n&&n instanceof Co&&n.addChild(this)}return _createClass(t,[{key:"injector",get:function(){return this._debugContext.injector}},{key:"componentInstance",get:function(){return this._debugContext.component}},{key:"context",get:function(){return this._debugContext.context}},{key:"references",get:function(){return this._debugContext.references}},{key:"providerTokens",get:function(){return this._debugContext.providerTokens}}]),t}(),Co=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;return _classCallCheck(this,n),(o=e.call(this,t,i,r)).properties={},o.attributes={},o.classes={},o.styles={},o.childNodes=[],o.nativeElement=t,o}return _createClass(n,[{key:"addChild",value:function(t){t&&(this.childNodes.push(t),t.parent=this)}},{key:"removeChild",value:function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))}},{key:"insertChildrenAfter",value:function(t,e){var n,i=this,r=this.childNodes.indexOf(t);-1!==r&&((n=this.childNodes).splice.apply(n,[r+1,0].concat(_toConsumableArray(e))),e.forEach((function(e){e.parent&&e.parent.removeChild(e),t.parent=i})))}},{key:"insertBefore",value:function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))}},{key:"query",value:function(t){return this.queryAll(t)[0]||null}},{key:"queryAll",value:function(t){var e=[];return function t(e,i,r){e.childNodes.forEach((function(e){e instanceof n&&(i(e)&&r.push(e),t(e,i,r))}))}(this,t,e),e}},{key:"queryAllNodes",value:function(t){var e=[];return function t(e,i,r){e instanceof n&&e.childNodes.forEach((function(e){i(e)&&r.push(e),e instanceof n&&t(e,i,r)}))}(this,t,e),e}},{key:"triggerEventHandler",value:function(t,e){this.listeners.forEach((function(n){n.name==t&&n.callback(e)}))}},{key:"children",get:function(){return this.childNodes.filter((function(t){return t instanceof n}))}}]),n}(wo),ko=new Map,Eo=function(t){return ko.get(t)||null};function So(t){ko.set(t.nativeNode,t)}var Io=lo(null,"core",[{provide:Pr,useValue:"unknown"},{provide:co,deps:[Ae]},{provide:ro,deps:[]},{provide:Lr,deps:[]}]);function To(){return En}function Po(){return Sn}function Ao(t){return t||"en-US"}function Lo(t){var e=[];return t.onStable.subscribe((function(){for(;e.length;)e.pop()()})),function(t){e.push(t)}}var Mo=function t(e){_classCallCheck(this,t)};function Ro(t,e,n,i,r,o){t|=1;var a=oi(e),s=a.matchedQueries,l=a.references;return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s,matchedQueryIds:a.matchedQueryIds,references:l,ngContentIndex:n,childCount:i,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?ui(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:r||jn},provider:null,text:null,query:null,ngContent:null}}function Oo(t,e,n,i,r,o){var a,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],l=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,h=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0;c||(c=jn);var f=oi(n),d=f.matchedQueries,m=f.references,g=f.matchedQueryIds,y=null,v=null;o&&(y=(a=_slicedToArray(gi(o),2))[0],v=a[1]),l=l||[];for(var _=new Array(l.length),b=0;b<l.length;b++){var x=_slicedToArray(l[b],3),w=x[0],C=x[1],k=x[2],E=gi(C),S=_slicedToArray(E,2),I=S[0],T=S[1],P=void 0,A=void 0;switch(15&w){case 4:A=k;break;case 1:case 8:P=k}_[b]={flags:w,ns:I,name:T,nonMinifiedName:T,securityContext:P,suffix:A}}u=u||[];for(var L=new Array(u.length),M=0;M<u.length;M++){var R=_slicedToArray(u[M],2),O=R[0],D=R[1];L[M]={type:0,target:O,eventName:D,propName:null}}var N=(s=s||[]).map((function(t){var e=_slicedToArray(t,2),n=e[0],i=e[1],r=_slicedToArray(gi(n),2);return[r[0],r[1],i]}));return p=function(t){if(t&&"$$undefined"===t.id){var e=null!=t.encapsulation&&t.encapsulation!==Gt.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+Xn++:"$$empty"}return t&&"$$empty"===t.id&&(t=null),t||null}(p),h&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:g,references:m,ngContentIndex:i,childCount:r,bindings:_,bindingFlags:yi(_),outputs:L,element:{ns:y,name:v,attrs:N,template:null,componentProvider:null,componentView:h||null,componentRendererType:p,publicProviders:null,allProviders:null,handleEvent:c||jn},provider:null,text:null,query:null,ngContent:null}}function Do(t,e,n){var i,r=n.element,o=t.root.selectorOrNode,a=t.renderer;if(t.parent||!o){i=r.name?a.createElement(r.name,r.ns):a.createComment("");var s=si(t,e,n);s&&a.appendChild(s,i)}else i=a.selectRootElement(o,!!r.componentRendererType&&r.componentRendererType.encapsulation===Gt.ShadowDom);if(r.attrs)for(var l=0;l<r.attrs.length;l++){var u=_slicedToArray(r.attrs[l],3),c=u[0],h=u[1],p=u[2];a.setAttribute(i,h,p,c)}return i}function No(t,e,n,i){for(var r=0;r<n.outputs.length;r++){var o=n.outputs[r],a=Fo(t,n.nodeIndex,(h=o.eventName,(c=o.target)?"".concat(c,":").concat(h):h)),s=o.target,l=t;"component"===o.target&&(s=null,l=e);var u=l.renderer.listen(s||i,o.eventName,a);t.disposables[n.outputIndex+r]=u}var c,h}function Fo(t,e,n){return function(i){return Qn(t,e,n,i)}}function zo(t,e,n,i){if(!Wn(t,e,n,i))return!1;var r=e.bindings[n],o=Fn(t,e.nodeIndex),a=o.renderElement,s=r.name;switch(15&r.flags){case 1:!function(t,e,n,i,r,o){var a=e.securityContext,s=a?t.root.sanitizer.sanitize(a,o):o;s=null!=s?s.toString():null;var l=t.renderer;null!=o?l.setAttribute(n,r,s,i):l.removeAttribute(n,r,i)}(t,r,a,r.ns,s,i);break;case 2:!function(t,e,n,i){var r=t.renderer;i?r.addClass(e,n):r.removeClass(e,n)}(t,a,s,i);break;case 4:!function(t,e,n,i,r){var o=t.root.sanitizer.sanitize(be.STYLE,r);if(null!=o){o=o.toString();var a=e.suffix;null!=a&&(o+=a)}else o=null;var s=t.renderer;null!=o?s.setStyle(n,i,o):s.removeStyle(n,i)}(t,r,a,s,i);break;case 8:!function(t,e,n,i,r){var o=e.securityContext,a=o?t.root.sanitizer.sanitize(o,r):r;t.renderer.setProperty(n,i,a)}(33554432&e.flags&&32&r.flags?o.componentView:t,r,a,s,i)}return!0}function Bo(t,e,n){var i=[];for(var r in n)i.push({propName:r,bindingType:n[r]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:ri(e),bindings:i},ngContent:null}}function Vo(t){for(var e=t.def.nodeMatchedQueries;t.parent&&ii(t);){var n=t.parentNodeDef;t=t.parent;for(var i=n.nodeIndex+n.childCount,r=0;r<=i;r++){var o=t.def.nodes[r];67108864&o.flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&Vn(t,r).setDirty(),!(1&o.flags&&r+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(r+=o.childCount)}}if(134217728&t.def.nodeFlags)for(var a=0;a<t.def.nodes.length;a++){var s=t.def.nodes[a];134217728&s.flags&&536870912&s.flags&&Vn(t,a).setDirty(),a+=s.childCount}}function Uo(t,e){var n=Vn(t,e.nodeIndex);if(n.dirty){var i,r=void 0;if(67108864&e.flags){var o=e.parent.parent;r=jo(t,o.nodeIndex,o.nodeIndex+o.childCount,e.query,[]),i=zn(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(r=jo(t,0,t.def.nodes.length-1,e.query,[]),i=t.component);n.reset(r);for(var a=e.query.bindings,s=!1,l=0;l<a.length;l++){var u=a[l],c=void 0;switch(u.bindingType){case 0:c=n.first;break;case 1:c=n,s=!0}i[u.propName]=c}s&&n.notifyOnChanges()}}function jo(t,e,n,i,r){for(var o=e;o<=n;o++){var a=t.def.nodes[o],s=a.matchedQueries[i.id];if(null!=s&&r.push(qo(t,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&i.filterId)===i.filterId){var l=Fn(t,o);if((a.childMatchedQueries&i.filterId)===i.filterId&&(jo(t,o+1,o+a.childCount,i,r),o+=a.childCount),16777216&a.flags)for(var u=l.viewContainer._embeddedViews,c=0;c<u.length;c++){var h=u[c],p=$n(h);p&&p===l&&jo(h,0,h.def.nodes.length-1,i,r)}var f=l.template._projectedViews;if(f)for(var d=0;d<f.length;d++){var m=f[d];jo(m,0,m.def.nodes.length-1,i,r)}}(a.childMatchedQueries&i.filterId)!==i.filterId&&(o+=a.childCount)}return r}function qo(t,e,n){if(null!=n)switch(n){case 1:return Fn(t,e.nodeIndex).renderElement;case 0:return new rn(Fn(t,e.nodeIndex).renderElement);case 2:return Fn(t,e.nodeIndex).template;case 3:return Fn(t,e.nodeIndex).viewContainer;case 4:return zn(t,e.nodeIndex).instance}}function Go(t,e){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:e}}}function Ho(t,e,n){var i=si(t,e,n);i&&pi(t,n.ngContent.index,1,i,null,void 0)}function Xo(t,e){for(var n=Object.keys(e),i=n.length,r=new Array(i),o=0;o<i;o++){var a=n[o];r[e[a]]=a}return Zo(64,t,r)}function Zo(t,e,n){for(var i=new Array(n.length),r=0;r<n.length;r++){var o=n[r];i[r]={flags:8,name:o,ns:null,nonMinifiedName:o,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:i,bindingFlags:yi(i),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function Wo(t,e,n){for(var i=new Array(n.length-1),r=1;r<n.length;r++)i[r-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[r]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:i,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Yo(t,e,n){var i,r=t.renderer;i=r.createText(n.text.prefix);var o=si(t,e,n);return o&&r.appendChild(o,i),{renderText:i}}function Ko(t,e){return(null!=t?t.toString():"")+e.suffix}function Jo(t,e,n,i){for(var r=0,o=0,a=0,s=0,l=0,u=null,c=null,h=!1,p=!1,f=null,d=0;d<e.length;d++){var m=e[d];if(m.nodeIndex=d,m.parent=u,m.bindingIndex=r,m.outputIndex=o,m.renderParent=c,a|=m.flags,l|=m.matchedQueryIds,m.element){var g=m.element;g.publicProviders=u?u.element.publicProviders:Object.create(null),g.allProviders=g.publicProviders,h=!1,p=!1,m.element.template&&(l|=m.element.template.nodeMatchedQueries)}if($o(u,m,e.length),r+=m.bindings.length,o+=m.outputs.length,!c&&3&m.flags&&(f=m),20224&m.flags){h||(h=!0,u.element.publicProviders=Object.create(u.element.publicProviders),u.element.allProviders=u.element.publicProviders);var y=0!=(32768&m.flags);0==(8192&m.flags)||y?u.element.publicProviders[Gn(m.provider.token)]=m:(p||(p=!0,u.element.allProviders=Object.create(u.element.publicProviders)),u.element.allProviders[Gn(m.provider.token)]=m),y&&(u.element.componentProvider=m)}if(u?(u.childFlags|=m.flags,u.directChildFlags|=m.flags,u.childMatchedQueries|=m.matchedQueryIds,m.element&&m.element.template&&(u.childMatchedQueries|=m.element.template.nodeMatchedQueries)):s|=m.flags,m.childCount>0)u=m,Qo(m)||(c=m);else for(;u&&d===u.nodeIndex+u.childCount;){var v=u.parent;v&&(v.childFlags|=u.childFlags,v.childMatchedQueries|=u.childMatchedQueries),c=(u=v)&&Qo(u)?u.renderParent:u}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:l,flags:t,nodes:e,updateDirectives:n||jn,updateRenderer:i||jn,handleEvent:function(t,n,i,r){return e[n].element.handleEvent(t,i,r)},bindingCount:r,outputCount:o,lastRenderRootNode:f}}function Qo(t){return 0!=(1&t.flags)&&null===t.element.name}function $o(t,e,n){var i=e.element&&e.element.template;if(i){if(!i.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(i.lastRenderRootNode&&16777216&i.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index ".concat(e.nodeIndex,"!"))}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ".concat(e.nodeIndex,"!"));if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index ".concat(e.nodeIndex,"!"));if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index ".concat(e.nodeIndex,"!"))}if(e.childCount){var r=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=r&&e.nodeIndex+e.childCount>r)throw new Error("Illegal State: childCount of node leads outside of parent, at index ".concat(e.nodeIndex,"!"))}}function ta(t,e,n,i){var r=ia(t.root,t.renderer,t,e,n);return ra(r,t.component,i),oa(r),r}function ea(t,e,n){var i=ia(t,t.renderer,null,null,e);return ra(i,n,n),oa(i),i}function na(t,e,n,i){var r,o=e.element.componentRendererType;return r=o?t.root.rendererFactory.createRenderer(i,o):t.root.renderer,ia(t.root,r,t,e.element.componentProvider,n)}function ia(t,e,n,i,r){var o=new Array(r.nodes.length),a=r.outputCount?new Array(r.outputCount):null;return{def:r,parent:n,viewContainerParent:null,parentNodeDef:i,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(r.bindingCount),disposables:a,initIndex:-1}}function ra(t,e,n){t.component=e,t.context=n}function oa(t){var e;ni(t)&&(e=Fn(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,i=t.nodes,r=0;r<n.nodes.length;r++){var o=n.nodes[r],a=void 0;switch(Un.setCurrentNode(t,r),201347067&o.flags){case 1:var s=Do(t,e,o),l=void 0;if(33554432&o.flags){var u=ui(o.element.componentView);l=Un.createComponentView(t,o,u,s)}No(t,l,o,s),a={renderElement:s,componentView:l,viewContainer:null,template:o.element.template?Ni(t,o):void 0},16777216&o.flags&&(a.viewContainer=Mi(t,o,a));break;case 2:a=Yo(t,e,o);break;case 512:case 1024:case 2048:case 256:(a=i[r])||4096&o.flags||(a={instance:nr(t,o)});break;case 16:a={instance:ir(t,o)};break;case 16384:(a=i[r])||(a={instance:rr(t,o)}),32768&o.flags&&ra(Fn(t,o.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new wr;break;case 8:Ho(t,e,o),a=void 0}i[r]=a}da(t,fa.CreateViewNodes),va(t,201326592,268435456,0)}function aa(t){ua(t),Un.updateDirectives(t,1),ma(t,fa.CheckNoChanges),Un.updateRenderer(t,1),da(t,fa.CheckNoChanges),t.state&=-97}function sa(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,On(t,0,256),ua(t),Un.updateDirectives(t,0),ma(t,fa.CheckAndUpdate),va(t,67108864,536870912,0);var e=On(t,256,512);pr(t,2097152|(e?1048576:0)),Un.updateRenderer(t,0),da(t,fa.CheckAndUpdate),va(t,134217728,536870912,0),pr(t,8388608|((e=On(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,On(t,768,1024)}function la(t,e,n,i,r,o,a,s,l,u,c,h,p){return 0===n?function(t,e,n,i,r,o,a,s,l,u,c,h){switch(201347067&e.flags){case 1:return function(t,e,n,i,r,o,a,s,l,u,c,h){var p=e.bindings.length,f=!1;return p>0&&zo(t,e,0,n)&&(f=!0),p>1&&zo(t,e,1,i)&&(f=!0),p>2&&zo(t,e,2,r)&&(f=!0),p>3&&zo(t,e,3,o)&&(f=!0),p>4&&zo(t,e,4,a)&&(f=!0),p>5&&zo(t,e,5,s)&&(f=!0),p>6&&zo(t,e,6,l)&&(f=!0),p>7&&zo(t,e,7,u)&&(f=!0),p>8&&zo(t,e,8,c)&&(f=!0),p>9&&zo(t,e,9,h)&&(f=!0),f}(t,e,n,i,r,o,a,s,l,u,c,h);case 2:return function(t,e,n,i,r,o,a,s,l,u,c,h){var p=!1,f=e.bindings,d=f.length;if(d>0&&Wn(t,e,0,n)&&(p=!0),d>1&&Wn(t,e,1,i)&&(p=!0),d>2&&Wn(t,e,2,r)&&(p=!0),d>3&&Wn(t,e,3,o)&&(p=!0),d>4&&Wn(t,e,4,a)&&(p=!0),d>5&&Wn(t,e,5,s)&&(p=!0),d>6&&Wn(t,e,6,l)&&(p=!0),d>7&&Wn(t,e,7,u)&&(p=!0),d>8&&Wn(t,e,8,c)&&(p=!0),d>9&&Wn(t,e,9,h)&&(p=!0),p){var m=e.text.prefix;d>0&&(m+=Ko(n,f[0])),d>1&&(m+=Ko(i,f[1])),d>2&&(m+=Ko(r,f[2])),d>3&&(m+=Ko(o,f[3])),d>4&&(m+=Ko(a,f[4])),d>5&&(m+=Ko(s,f[5])),d>6&&(m+=Ko(l,f[6])),d>7&&(m+=Ko(u,f[7])),d>8&&(m+=Ko(c,f[8])),d>9&&(m+=Ko(h,f[9]));var g=Nn(t,e.nodeIndex).renderText;t.renderer.setValue(g,m)}return p}(t,e,n,i,r,o,a,s,l,u,c,h);case 16384:return function(t,e,n,i,r,o,a,s,l,u,c,h){var p=zn(t,e.nodeIndex),f=p.instance,d=!1,m=void 0,g=e.bindings.length;return g>0&&Zn(t,e,0,n)&&(d=!0,m=hr(t,p,e,0,n,m)),g>1&&Zn(t,e,1,i)&&(d=!0,m=hr(t,p,e,1,i,m)),g>2&&Zn(t,e,2,r)&&(d=!0,m=hr(t,p,e,2,r,m)),g>3&&Zn(t,e,3,o)&&(d=!0,m=hr(t,p,e,3,o,m)),g>4&&Zn(t,e,4,a)&&(d=!0,m=hr(t,p,e,4,a,m)),g>5&&Zn(t,e,5,s)&&(d=!0,m=hr(t,p,e,5,s,m)),g>6&&Zn(t,e,6,l)&&(d=!0,m=hr(t,p,e,6,l,m)),g>7&&Zn(t,e,7,u)&&(d=!0,m=hr(t,p,e,7,u,m)),g>8&&Zn(t,e,8,c)&&(d=!0,m=hr(t,p,e,8,c,m)),g>9&&Zn(t,e,9,h)&&(d=!0,m=hr(t,p,e,9,h,m)),m&&f.ngOnChanges(m),65536&e.flags&&Dn(t,256,e.nodeIndex)&&f.ngOnInit(),262144&e.flags&&f.ngDoCheck(),d}(t,e,n,i,r,o,a,s,l,u,c,h);case 32:case 64:case 128:return function(t,e,n,i,r,o,a,s,l,u,c,h){var p=e.bindings,f=!1,d=p.length;if(d>0&&Wn(t,e,0,n)&&(f=!0),d>1&&Wn(t,e,1,i)&&(f=!0),d>2&&Wn(t,e,2,r)&&(f=!0),d>3&&Wn(t,e,3,o)&&(f=!0),d>4&&Wn(t,e,4,a)&&(f=!0),d>5&&Wn(t,e,5,s)&&(f=!0),d>6&&Wn(t,e,6,l)&&(f=!0),d>7&&Wn(t,e,7,u)&&(f=!0),d>8&&Wn(t,e,8,c)&&(f=!0),d>9&&Wn(t,e,9,h)&&(f=!0),f){var m,g=Bn(t,e.nodeIndex);switch(201347067&e.flags){case 32:m=new Array(p.length),d>0&&(m[0]=n),d>1&&(m[1]=i),d>2&&(m[2]=r),d>3&&(m[3]=o),d>4&&(m[4]=a),d>5&&(m[5]=s),d>6&&(m[6]=l),d>7&&(m[7]=u),d>8&&(m[8]=c),d>9&&(m[9]=h);break;case 64:m={},d>0&&(m[p[0].name]=n),d>1&&(m[p[1].name]=i),d>2&&(m[p[2].name]=r),d>3&&(m[p[3].name]=o),d>4&&(m[p[4].name]=a),d>5&&(m[p[5].name]=s),d>6&&(m[p[6].name]=l),d>7&&(m[p[7].name]=u),d>8&&(m[p[8].name]=c),d>9&&(m[p[9].name]=h);break;case 128:var y=n;switch(d){case 1:m=y.transform(n);break;case 2:m=y.transform(i);break;case 3:m=y.transform(i,r);break;case 4:m=y.transform(i,r,o);break;case 5:m=y.transform(i,r,o,a);break;case 6:m=y.transform(i,r,o,a,s);break;case 7:m=y.transform(i,r,o,a,s,l);break;case 8:m=y.transform(i,r,o,a,s,l,u);break;case 9:m=y.transform(i,r,o,a,s,l,u,c);break;case 10:m=y.transform(i,r,o,a,s,l,u,c,h)}}g.value=m}return f}(t,e,n,i,r,o,a,s,l,u,c,h);default:throw"unreachable"}}(t,e,i,r,o,a,s,l,u,c,h,p):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var i=!1,r=0;r<n.length;r++)zo(t,e,r,n[r])&&(i=!0);return i}(t,e,n);case 2:return function(t,e,n){for(var i=e.bindings,r=!1,o=0;o<n.length;o++)Wn(t,e,o,n[o])&&(r=!0);if(r){for(var a="",s=0;s<n.length;s++)a+=Ko(n[s],i[s]);a=e.text.prefix+a;var l=Nn(t,e.nodeIndex).renderText;t.renderer.setValue(l,a)}return r}(t,e,n);case 16384:return function(t,e,n){for(var i=zn(t,e.nodeIndex),r=i.instance,o=!1,a=void 0,s=0;s<n.length;s++)Zn(t,e,s,n[s])&&(o=!0,a=hr(t,i,e,s,n[s],a));return a&&r.ngOnChanges(a),65536&e.flags&&Dn(t,256,e.nodeIndex)&&r.ngOnInit(),262144&e.flags&&r.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var i=e.bindings,r=!1,o=0;o<n.length;o++)Wn(t,e,o,n[o])&&(r=!0);if(r){var a,s=Bn(t,e.nodeIndex);switch(201347067&e.flags){case 32:a=n;break;case 64:a={};for(var l=0;l<n.length;l++)a[i[l].name]=n[l];break;case 128:var u=n[0],c=n.slice(1);a=u.transform.apply(u,_toConsumableArray(c))}s.value=a}return r}(t,e,n);default:throw"unreachable"}}(t,e,i)}function ua(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var i=e.nodes[n];if(4&i.flags){var r=Fn(t,n).template._projectedViews;if(r)for(var o=0;o<r.length;o++){var a=r[o];a.state|=32,Jn(a,t)}}else 0==(4&i.childFlags)&&(n+=i.childCount)}}function ca(t,e,n,i,r,o,a,s,l,u,c,h,p){return 0===n?function(t,e,n,i,r,o,a,s,l,u,c,h){var p=e.bindings.length;p>0&&Yn(t,e,0,n),p>1&&Yn(t,e,1,i),p>2&&Yn(t,e,2,r),p>3&&Yn(t,e,3,o),p>4&&Yn(t,e,4,a),p>5&&Yn(t,e,5,s),p>6&&Yn(t,e,6,l),p>7&&Yn(t,e,7,u),p>8&&Yn(t,e,8,c),p>9&&Yn(t,e,9,h)}(t,e,i,r,o,a,s,l,u,c,h,p):function(t,e,n){for(var i=0;i<n.length;i++)Yn(t,e,i,n[i])}(t,e,i),!1}function ha(t,e){if(Vn(t,e.nodeIndex).dirty)throw Ln(Un.createDebugContext(t,e.nodeIndex),"Query ".concat(e.query.id," not dirty"),"Query ".concat(e.query.id," dirty"),0!=(1&t.state))}function pa(t){if(!(128&t.state)){if(ma(t,fa.Destroy),da(t,fa.Destroy),pr(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=$n(t);if(e){var n=e.template._projectedViews;n&&(qt(n,n.indexOf(t)),Un.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var i=t.def.nodes[n];1&i.flags?t.renderer.destroyNode(Fn(t,n).renderElement):2&i.flags?t.renderer.destroyNode(Nn(t,n).renderText):(67108864&i.flags||134217728&i.flags)&&Vn(t,n).destroy()}}(t),ni(t)&&t.renderer.destroy(),t.state|=128}}var fa=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function da(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var i=0;i<n.nodes.length;i++){var r=n.nodes[i];33554432&r.flags?ga(Fn(t,i).componentView,e):0==(33554432&r.childFlags)&&(i+=r.childCount)}}function ma(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var i=0;i<n.nodes.length;i++){var r=n.nodes[i];if(16777216&r.flags)for(var o=Fn(t,i).viewContainer._embeddedViews,a=0;a<o.length;a++)ga(o[a],e);else 0==(16777216&r.childFlags)&&(i+=r.childCount)}}function ga(t,e){var n=t.state;switch(e){case fa.CheckNoChanges:0==(128&n)&&(12==(12&n)?aa(t):64&n&&ya(t,fa.CheckNoChangesProjectedViews));break;case fa.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?aa(t):64&n&&ya(t,e));break;case fa.CheckAndUpdate:0==(128&n)&&(12==(12&n)?sa(t):64&n&&ya(t,fa.CheckAndUpdateProjectedViews));break;case fa.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?sa(t):64&n&&ya(t,e));break;case fa.Destroy:pa(t);break;case fa.CreateViewNodes:oa(t)}}function ya(t,e){ma(t,e),da(t,e)}function va(t,e,n,i){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var r=t.def.nodes.length,o=0;o<r;o++){var a=t.def.nodes[o];if(a.flags&e&&a.flags&n)switch(Un.setCurrentNode(t,a.nodeIndex),i){case 0:Uo(t,a);break;case 1:ha(t,a)}a.childFlags&e&&a.childFlags&n||(o+=a.childCount)}}var _a=!1;function ba(t,e,n,i,r,o){var a=r.injector.get(an);return ea(wa(t,r,a,e,n),i,o)}function xa(t,e,n,i,r,o){var a=r.injector.get(an),s=wa(t,r,new ts(a),e,n),l=Ma(i);return Qa(Ua.create,ea,null,[s,l,o])}function wa(t,e,n,i,r){var o=e.injector.get(xe),a=e.injector.get(Yt),s=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:i,selectorOrNode:r,sanitizer:o,rendererFactory:n,renderer:s,errorHandler:a}}function Ca(t,e,n,i){var r=Ma(n);return Qa(Ua.create,ta,null,[t,e,r,i])}function ka(t,e,n,i){return n=Ta.get(e.element.componentProvider.provider.token)||Ma(n),Qa(Ua.create,na,null,[t,e,n,i])}function Ea(t,e,n,i){return qi(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===Sa.size||(t.providers.forEach((function(t){var i=Sa.get(t.token);3840&t.flags&&i&&(e=!0,n=n||i.deprecatedBehavior)})),t.modules.forEach((function(t){Ia.forEach((function(i,r){vt(r).providedIn===t&&(e=!0,n=n||i.deprecatedBehavior)}))}))),{hasOverrides:e,hasDeprecatedOverrides:n}}(t),n=e.hasOverrides,i=e.hasDeprecatedOverrides;return n?(function(t){for(var e=0;e<t.providers.length;e++){var n=t.providers[e];i&&(n.flags|=4096);var r=Sa.get(n.token);r&&(n.flags=-3841&n.flags|r.flags,n.deps=ai(r.deps),n.value=r.value)}if(Ia.size>0){var o=new Set(t.modules);Ia.forEach((function(e,n){if(o.has(vt(n).providedIn)){var r={token:n,flags:e.flags|(i?4096:0),deps:ai(e.deps),value:e.value,index:t.providers.length};t.providers.push(r),t.providersByKey[Gn(n)]=r}}))}}(t=t.factory((function(){return jn}))),t):t}(i))}var Sa=new Map,Ia=new Map,Ta=new Map;function Pa(t){var e;Sa.set(t.token,t),"function"==typeof t.token&&(e=vt(t.token))&&"function"==typeof e.providedIn&&Ia.set(t.token,t)}function Aa(t,e){var n=ui(e.viewDefFactory),i=ui(n.nodes[0].element.componentView);Ta.set(t,i)}function La(){Sa.clear(),Ia.clear(),Ta.clear()}function Ma(t){if(0===Sa.size)return t;var e=function(t){for(var e=[],n=null,i=0;i<t.nodes.length;i++){var r=t.nodes[i];1&r.flags&&(n=r),n&&3840&r.flags&&Sa.has(r.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory((function(){return jn}));for(var n=0;n<e.length;n++)i(t,e[n]);return t;function i(t,e){for(var n=e+1;n<t.nodes.length;n++){var i=t.nodes[n];if(1&i.flags)return;if(3840&i.flags){var r=i.provider,o=Sa.get(r.token);o&&(i.flags=-3841&i.flags|o.flags,r.deps=ai(o.deps),r.value=o.value)}}}}function Ra(t,e,n,i,r,o,a,s,l,u,c,h,p){var f=t.def.nodes[e];return la(t,f,n,i,r,o,a,s,l,u,c,h,p),224&f.flags?Bn(t,e).value:void 0}function Oa(t,e,n,i,r,o,a,s,l,u,c,h,p){var f=t.def.nodes[e];return ca(t,f,n,i,r,o,a,s,l,u,c,h,p),224&f.flags?Bn(t,e).value:void 0}function Da(t){return Qa(Ua.detectChanges,sa,null,[t])}function Na(t){return Qa(Ua.checkNoChanges,aa,null,[t])}function Fa(t){return Qa(Ua.destroy,pa,null,[t])}var za,Ba,Va,Ua=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();function ja(t,e){Ba=t,Va=e}function qa(t,e,n,i){return ja(t,e),Qa(Ua.handleEvent,t.def.handleEvent,null,[t,e,n,i])}function Ga(t,e){if(128&t.state)throw Rn(Ua[za]);return ja(t,Wa(t,0)),t.def.updateDirectives((function(t,n,i){for(var r=t.def.nodes[n],o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return 0===e?Xa(t,r,i,a):Za(t,r,i,a),16384&r.flags&&ja(t,Wa(t,n)),224&r.flags?Bn(t,r.nodeIndex).value:void 0}),t)}function Ha(t,e){if(128&t.state)throw Rn(Ua[za]);return ja(t,Ya(t,0)),t.def.updateRenderer((function(t,n,i){for(var r=t.def.nodes[n],o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return 0===e?Xa(t,r,i,a):Za(t,r,i,a),3&r.flags&&ja(t,Ya(t,n)),224&r.flags?Bn(t,r.nodeIndex).value:void 0}),t)}function Xa(t,e,n,i){if(la.apply(void 0,[t,e,n].concat(_toConsumableArray(i)))){var r=1===n?i[0]:i;if(16384&e.flags){for(var o={},a=0;a<e.bindings.length;a++){var s=e.bindings[a],l=r[a];8&s.flags&&(o[(f=s.nonMinifiedName,"ng-reflect-"+f.replace(/[$@]/g,"_").replace(ke,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"-"+e[1].toLowerCase()})))]=Ee(l))}var u=e.parent,c=Fn(t,u.nodeIndex).renderElement;if(u.element.name)for(var h in o){var p=o[h];null!=p?t.renderer.setAttribute(c,h,p):t.renderer.removeAttribute(c,h)}else t.renderer.setValue(c,"bindings="+JSON.stringify(o,null,2))}}var f}function Za(t,e,n,i){ca.apply(void 0,[t,e,n].concat(_toConsumableArray(i)))}function Wa(t,e){for(var n=e;n<t.def.nodes.length;n++){var i=t.def.nodes[n];if(16384&i.flags&&i.bindings&&i.bindings.length)return n}return null}function Ya(t,e){for(var n=e;n<t.def.nodes.length;n++){var i=t.def.nodes[n];if(3&i.flags&&i.bindings&&i.bindings.length)return n}return null}var Ka=function(){function t(e,n){_classCallCheck(this,t),this.view=e,this.nodeIndex=n,null==n&&(this.nodeIndex=n=0),this.nodeDef=e.def.nodes[n];for(var i=this.nodeDef,r=e;i&&0==(1&i.flags);)i=i.parent;if(!i)for(;!i&&r;)i=ti(r),r=r.parent;this.elDef=i,this.elView=r}return _createClass(t,[{key:"logError",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r,o;2&this.nodeDef.flags?(r=this.view.def,o=this.nodeDef.nodeIndex):(r=this.elView.def,o=this.elDef.nodeIndex);var a=function(t,e){for(var n=-1,i=0;i<=e;i++)3&t.nodes[i].flags&&n++;return n}(r,o),s=-1;r.factory((function(){var e;return++s===a?(e=t.error).bind.apply(e,[t].concat(n)):jn})),s<a&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,n))}},{key:"elOrCompView",get:function(){return Fn(this.elView,this.elDef.nodeIndex).componentView||this.view}},{key:"injector",get:function(){return zi(this.elView,this.elDef)}},{key:"component",get:function(){return this.elOrCompView.component}},{key:"context",get:function(){return this.elOrCompView.context}},{key:"providerTokens",get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t}},{key:"references",get:function(){var t={};if(this.elDef){Ja(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&Ja(this.elView,n,t),e+=n.childCount}}return t}},{key:"componentRenderElement",get:function(){var t=function(t){for(;t&&!ni(t);)t=t.parent;return t.parent?Fn(t.parent,ti(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0}},{key:"renderNode",get:function(){return 2&this.nodeDef.flags?ei(this.view,this.nodeDef):ei(this.elView,this.elDef)}}]),t}();function Ja(t,e,n){for(var i in e.references)n[i]=qo(t,e,e.references[i])}function Qa(t,e,n,i){var r,o,a=za,s=Ba,l=Va;try{za=t;var u=e.apply(n,i);return Ba=s,Va=l,za=a,u}catch(c){if(Xt(c)||!Ba)throw c;throw r=c,o=$a(),r instanceof Error||(r=new Error(r.toString())),Mn(r,o),r}}function $a(){return Ba?new Ka(Ba,Va):null}var ts=function(){function t(e){_classCallCheck(this,t),this.delegate=e}return _createClass(t,[{key:"createRenderer",value:function(t,e){return new es(this.delegate.createRenderer(t,e))}},{key:"begin",value:function(){this.delegate.begin&&this.delegate.begin()}},{key:"end",value:function(){this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}]),t}(),es=function(){function t(e){_classCallCheck(this,t),this.delegate=e,this.debugContextFactory=$a,this.data=this.delegate.data}return _createClass(t,[{key:"createDebugContext",value:function(t){return this.debugContextFactory(t)}},{key:"destroyNode",value:function(t){var e=Eo(t);!function(t){ko.delete(t.nativeNode)}(e),e instanceof wo&&(e.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(t)}},{key:"destroy",value:function(){this.delegate.destroy()}},{key:"createElement",value:function(t,e){var n=this.delegate.createElement(t,e),i=this.createDebugContext(n);if(i){var r=new Co(n,null,i);r.name=t,So(r)}return n}},{key:"createComment",value:function(t){var e=this.delegate.createComment(t),n=this.createDebugContext(e);return n&&So(new wo(e,null,n)),e}},{key:"createText",value:function(t){var e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&So(new wo(e,null,n)),e}},{key:"appendChild",value:function(t,e){var n=Eo(t),i=Eo(e);n&&i&&n instanceof Co&&n.addChild(i),this.delegate.appendChild(t,e)}},{key:"insertBefore",value:function(t,e,n){var i=Eo(t),r=Eo(e),o=Eo(n);i&&r&&i instanceof Co&&i.insertBefore(o,r),this.delegate.insertBefore(t,e,n)}},{key:"removeChild",value:function(t,e){var n=Eo(t),i=Eo(e);n&&i&&n instanceof Co&&n.removeChild(i),this.delegate.removeChild(t,e)}},{key:"selectRootElement",value:function(t,e){var n=this.delegate.selectRootElement(t,e),i=$a();return i&&So(new Co(n,null,i)),n}},{key:"setAttribute",value:function(t,e,n,i){var r=Eo(t);r&&r instanceof Co&&(r.attributes[i?i+":"+e:e]=n),this.delegate.setAttribute(t,e,n,i)}},{key:"removeAttribute",value:function(t,e,n){var i=Eo(t);i&&i instanceof Co&&(i.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)}},{key:"addClass",value:function(t,e){var n=Eo(t);n&&n instanceof Co&&(n.classes[e]=!0),this.delegate.addClass(t,e)}},{key:"removeClass",value:function(t,e){var n=Eo(t);n&&n instanceof Co&&(n.classes[e]=!1),this.delegate.removeClass(t,e)}},{key:"setStyle",value:function(t,e,n,i){var r=Eo(t);r&&r instanceof Co&&(r.styles[e]=n),this.delegate.setStyle(t,e,n,i)}},{key:"removeStyle",value:function(t,e,n){var i=Eo(t);i&&i instanceof Co&&(i.styles[e]=null),this.delegate.removeStyle(t,e,n)}},{key:"setProperty",value:function(t,e,n){var i=Eo(t);i&&i instanceof Co&&(i.properties[e]=n),this.delegate.setProperty(t,e,n)}},{key:"listen",value:function(t,e,n){if("string"!=typeof t){var i=Eo(t);i&&i.listeners.push(new xo(e,n))}return this.delegate.listen(t,e,n)}},{key:"parentNode",value:function(t){return this.delegate.parentNode(t)}},{key:"nextSibling",value:function(t){return this.delegate.nextSibling(t)}},{key:"setValue",value:function(t,e){return this.delegate.setValue(t,e)}}]),t}();var ns=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;return _classCallCheck(this,n),(o=e.call(this)).moduleType=t,o._bootstrapComponents=i,o._ngModuleDefFactory=r,o}return _createClass(n,[{key:"create",value:function(t){!function(){if(!_a){_a=!0;var t=Qt()?{setCurrentNode:ja,createRootView:xa,createEmbeddedView:Ca,createComponentView:ka,createNgModuleRef:Ea,overrideProvider:Pa,overrideComponentView:Aa,clearOverrides:La,checkAndUpdateView:Da,checkNoChangesView:Na,destroyView:Fa,createDebugContext:function(t,e){return new Ka(t,e)},handleEvent:qa,updateDirectives:Ga,updateRenderer:Ha}:{setCurrentNode:function(){},createRootView:ba,createEmbeddedView:ta,createComponentView:na,createNgModuleRef:qi,overrideProvider:jn,overrideComponentView:jn,clearOverrides:jn,checkAndUpdateView:sa,checkNoChangesView:aa,destroyView:pa,createDebugContext:function(t,e){return new Ka(t,e)},handleEvent:function(t,e,n,i){return t.def.handleEvent(t,e,n,i)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?Ra:Oa,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?Ra:Oa,t)}};Un.setCurrentNode=t.setCurrentNode,Un.createRootView=t.createRootView,Un.createEmbeddedView=t.createEmbeddedView,Un.createComponentView=t.createComponentView,Un.createNgModuleRef=t.createNgModuleRef,Un.overrideProvider=t.overrideProvider,Un.overrideComponentView=t.overrideComponentView,Un.clearOverrides=t.clearOverrides,Un.checkAndUpdateView=t.checkAndUpdateView,Un.checkNoChangesView=t.checkNoChangesView,Un.destroyView=t.destroyView,Un.resolveDep=ur,Un.createDebugContext=t.createDebugContext,Un.handleEvent=t.handleEvent,Un.updateDirectives=t.updateDirectives,Un.updateRenderer=t.updateRenderer,Un.dirtyParentQueries=Vo}}();var e=function(t){var e=Array.from(t.providers),n=Array.from(t.modules),i={};for(var r in t.providersByKey)i[r]=t.providersByKey[r];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:i}}(ui(this._ngModuleDefFactory));return Un.createNgModuleRef(this.moduleType,t||Ae.NULL,this._bootstrapComponents,e)}}]),n}(Ut),is="https://fmnbackend.nw.r.appspot.com/",rs=function t(){_classCallCheck(this,t)},os=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}(),as=function t(){_classCallCheck(this,t)},ss=new Pt("Location Initialized"),ls=function t(){_classCallCheck(this,t)},us=new Pt("appBaseHref"),cs=function(){function t(e,n){var i=this;_classCallCheck(this,t),this._subject=new br,this._urlChangeListeners=[],this._platformStrategy=e;var r=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=t.stripTrailingSlash(hs(r)),this._platformStrategy.onPopState((function(t){i._subject.emit({url:i.path(!0),pop:!0,state:t.state,type:t.type})}))}return _createClass(t,[{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(t))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+t.normalizeQueryParams(n))}},{key:"normalize",value:function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,hs(e)))}},{key:"prepareExternalUrl",value:function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}},{key:"go",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(i,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+t.normalizeQueryParams(n)),i)}},{key:"replaceState",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(i,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+t.normalizeQueryParams(n)),i)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(t){var e=this;this._urlChangeListeners.push(t),this.subscribe((function(t){e._notifyUrlChangeListeners(t.url,t.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach((function(n){return n(t,e)}))}},{key:"subscribe",value:function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}],[{key:"normalizeQueryParams",value:function(t){return t&&"?"!==t[0]?"?"+t:t}},{key:"joinWithSlash",value:function(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}},{key:"stripTrailingSlash",value:function(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}}]),t}();function hs(t){return t.replace(/\/index.html$/,"")}var ps=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this))._platformLocation=t,r._baseHref="",null!=i&&(r._baseHref=i),r}return _createClass(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}},{key:"prepareExternalUrl",value:function(t){var e=cs.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e}},{key:"pushState",value:function(t,e,n,i){var r=this.prepareExternalUrl(n+cs.normalizeQueryParams(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(t,e,r)}},{key:"replaceState",value:function(t,e,n,i){var r=this.prepareExternalUrl(n+cs.normalizeQueryParams(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,r)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(ls),fs=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;if(_classCallCheck(this,n),(r=e.call(this))._platformLocation=t,null==i&&(i=r._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=i,_possibleConstructorReturn(r)}return _createClass(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(t){return cs.joinWithSlash(this._baseHref,t)}},{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._platformLocation.pathname+cs.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?"".concat(e).concat(n):e}},{key:"pushState",value:function(t,e,n,i){var r=this.prepareExternalUrl(n+cs.normalizeQueryParams(i));this._platformLocation.pushState(t,e,r)}},{key:"replaceState",value:function(t,e,n,i){var r=this.prepareExternalUrl(n+cs.normalizeQueryParams(i));this._platformLocation.replaceState(t,e,r)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(ls),ds=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),ms=new Pt("UseV4Plurals"),gs=function t(){_classCallCheck(this,t)},ys=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this)).locale=t,r.deprecatedPluralFn=i,r}return _createClass(n,[{key:"getPluralCategory",value:function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return function(t){var e=t.toLowerCase().replace(/_/g,"-"),n=gr[e];if(n)return n;var i=e.split("-")[0];if(n=gr[i])return n;if("en"===i)return _r;throw new Error('Missing locale data for the locale "'.concat(t,'".'))}(t)[yr.PluralCase]}(e||this.locale)(t)){case ds.Zero:return"zero";case ds.One:return"one";case ds.Two:return"two";case ds.Few:return"few";case ds.Many:return"many";default:return"other"}}}]),n}(gs);function vs(t,e){e=encodeURIComponent(e);var n,i=_createForOfIteratorHelper(t.split(";"));try{for(i.s();!(n=i.n()).done;){var r=n.value,o=r.indexOf("="),a=_slicedToArray(-1==o?[r,""]:[r.slice(0,o),r.slice(o+1)],2),s=a[0],l=a[1];if(s.trim()===e)return decodeURIComponent(l)}}catch(u){i.e(u)}finally{i.f()}return null}var _s=function t(){_classCallCheck(this,t)},bs=function(){function t(e,n,i,r){_classCallCheck(this,t),this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=i,this._renderer=r,this._initialClasses=[]}return _createClass(t,[{key:"getValue",value:function(){return null}},{key:"setClass",value:function(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"setNgClass",value:function(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Ge(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}},{key:"applyChanges",value:function(){if(this._iterableDiffer){var t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){var e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}},{key:"_applyKeyValueChanges",value:function(t){var e=this;t.forEachAddedItem((function(t){return e._toggleClass(t.key,t.currentValue)})),t.forEachChangedItem((function(t){return e._toggleClass(t.key,t.currentValue)})),t.forEachRemovedItem((function(t){t.previousValue&&e._toggleClass(t.key,!1)}))}},{key:"_applyIterableChanges",value:function(t){var e=this;t.forEachAddedItem((function(t){if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+bt(t.item));e._toggleClass(t.item,!0)})),t.forEachRemovedItem((function(t){return e._toggleClass(t.item,!1)}))}},{key:"_applyClasses",value:function(t){var e=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach((function(t){return e._toggleClass(t,!0)})):Object.keys(t).forEach((function(n){return e._toggleClass(n,!!t[n])})))}},{key:"_removeClasses",value:function(t){var e=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach((function(t){return e._toggleClass(t,!1)})):Object.keys(t).forEach((function(t){return e._toggleClass(t,!1)})))}},{key:"_toggleClass",value:function(t,e){var n=this;(t=t.trim())&&t.split(/\s+/g).forEach((function(t){e?n._renderer.addClass(n._ngEl.nativeElement,t):n._renderer.removeClass(n._ngEl.nativeElement,t)}))}}]),t}(),xs=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){return _classCallCheck(this,n),e.call(this,t)}return _createClass(n,[{key:"ngDoCheck",value:function(){this._delegate.applyChanges()}},{key:"klass",set:function(t){this._delegate.setClass(t)}},{key:"ngClass",set:function(t){this._delegate.setNgClass(t)}}]),n}(function(){var t=function(){function t(e){_classCallCheck(this,t),this._delegate=e}return _createClass(t,[{key:"getValue",value:function(){return this._delegate.getValue()}}]),t}();return t.ngDirectiveDef=void 0,t}()),ws=function(){function t(e,n,i,r){_classCallCheck(this,t),this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}return _createClass(t,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),t}(),Cs=function(){function t(e,n,i){_classCallCheck(this,t),this._viewContainer=e,this._template=n,this._differs=i,this._ngForOfDirty=!0,this._differ=null}return _createClass(t,[{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(i){throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'. NgFor only supports binding to Iterables such as Arrays."))}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(t){var e=this,n=[];t.forEachOperation((function(t,i,r){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new ws(null,e._ngForOf,-1,-1),null===r?void 0:r),a=new ks(t,o);n.push(a)}else if(null==r)e._viewContainer.remove(null===i?void 0:i);else if(null!==i){var s=e._viewContainer.get(i);e._viewContainer.move(s,r);var l=new ks(t,s);n.push(l)}}));for(var i=0;i<n.length;i++)this._perViewChange(n[i].view,n[i].record);for(var r=0,o=this._viewContainer.length;r<o;r++){var a=this._viewContainer.get(r);a.context.index=r,a.context.count=o,a.context.ngForOf=this._ngForOf}t.forEachIdentityChange((function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item}))}},{key:"_perViewChange",value:function(t,e){t.context.$implicit=e.item}},{key:"ngForOf",set:function(t){this._ngForOf=t,this._ngForOfDirty=!0}},{key:"ngForTrackBy",set:function(t){Qt()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received ".concat(JSON.stringify(t),". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information.")),this._trackByFn=t},get:function(){return this._trackByFn}},{key:"ngForTemplate",set:function(t){t&&(this._template=t)}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}(),ks=function t(e,n){_classCallCheck(this,t),this.record=e,this.view=n},Es=function(){function t(e,n){_classCallCheck(this,t),this._viewContainer=e,this._context=new Ss,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return _createClass(t,[{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}},{key:"ngIf",set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}},{key:"ngIfThen",set:function(t){Is("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(t){Is("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}}]),t}(),Ss=function t(){_classCallCheck(this,t),this.$implicit=null,this.ngIf=null};function Is(t,e){if(e&&!e.createEmbeddedView)throw new Error("".concat(t," must be a TemplateRef, but received '").concat(bt(e),"'."))}var Ts,Ps=function(){function t(e,n){_classCallCheck(this,t),this._viewContainerRef=e,this._templateRef=n,this._created=!1}return _createClass(t,[{key:"create",value:function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}},{key:"destroy",value:function(){this._created=!1,this._viewContainerRef.clear()}},{key:"enforceState",value:function(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}]),t}(),As=function(){function t(){_classCallCheck(this,t),this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return _createClass(t,[{key:"_addCase",value:function(){return this._caseCount++}},{key:"_addDefault",value:function(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}},{key:"_matchCase",value:function(t){var e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}},{key:"_updateDefaultCases",value:function(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(var e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}},{key:"ngSwitch",set:function(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}}]),t}(),Ls=function(){function t(e,n,i){_classCallCheck(this,t),this.ngSwitch=i,i._addCase(),this._view=new Ps(e,n)}return _createClass(t,[{key:"ngDoCheck",value:function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}]),t}(),Ms=function t(){_classCallCheck(this,t)},Rs=function(){function t(e,n,i){_classCallCheck(this,t),this._ngEl=e,this._differs=n,this._renderer=i}return _createClass(t,[{key:"getValue",value:function(){return null}},{key:"setNgStyle",value:function(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}},{key:"applyChanges",value:function(){if(this._differ){var t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}},{key:"_applyChanges",value:function(t){var e=this;t.forEachRemovedItem((function(t){return e._setStyle(t.key,null)})),t.forEachAddedItem((function(t){return e._setStyle(t.key,t.currentValue)})),t.forEachChangedItem((function(t){return e._setStyle(t.key,t.currentValue)}))}},{key:"_setStyle",value:function(t,e){var n=_slicedToArray(t.split("."),2),i=n[0],r=n[1];null!=(e=null!=e&&r?"".concat(e).concat(r):e)?this._renderer.setStyle(this._ngEl.nativeElement,i,e):this._renderer.removeStyle(this._ngEl.nativeElement,i)}}]),t}(),Os=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){return _classCallCheck(this,n),e.call(this,t)}return _createClass(n,[{key:"ngDoCheck",value:function(){this._delegate.applyChanges()}},{key:"ngStyle",set:function(t){this._delegate.setNgStyle(t)}}]),n}(function(){var t=function(){function t(e){_classCallCheck(this,t),this._delegate=e}return _createClass(t,[{key:"getValue",value:function(){return this._delegate.getValue()}}]),t}();return t.ngDirectiveDef=void 0,t}()),Ds=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"createSubscription",value:function(t,e){return t.subscribe({next:e,error:function(t){throw t}})}},{key:"dispose",value:function(t){t.unsubscribe()}},{key:"onDestroy",value:function(t){t.unsubscribe()}}]),t}(),Ns=new(function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"createSubscription",value:function(t,e){return t.then(e,(function(t){throw t}))}},{key:"dispose",value:function(t){}},{key:"onDestroy",value:function(t){}}]),t}()),Fs=new Ds,zs=function(){function t(e){_classCallCheck(this,t),this._ref=e,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}return _createClass(t,[{key:"ngOnDestroy",value:function(){this._subscription&&this._dispose()}},{key:"transform",value:function(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):Ue(this._latestValue,this._latestReturnedValue)?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,qe.wrap(this._latestValue)):(t&&this._subscribe(t),this._latestReturnedValue=this._latestValue,this._latestValue)}},{key:"_subscribe",value:function(t){var e=this;this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,(function(n){return e._updateLatestValue(t,n)}))}},{key:"_selectStrategy",value:function(e){if(Xe(e))return Ns;if(Ze(e))return Fs;throw Error("InvalidPipeArgument: '".concat(e,"' for pipe '").concat(bt(t),"'"))}},{key:"_dispose",value:function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}},{key:"_updateLatestValue",value:function(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}]),t}(),Bs=function t(){_classCallCheck(this,t)},Vs=new Pt("DocumentToken"),Us=((Ts=function t(){_classCallCheck(this,t)}).ngInjectableDef=yt({token:Ts,providedIn:"root",factory:function(){return new js(Nt(Vs),window,Nt(Yt))}}),Ts),js=function(){function t(e,n,i){_classCallCheck(this,t),this.document=e,this.window=n,this.errorHandler=i,this.offset=function(){return[0,0]}}return _createClass(t,[{key:"setOffset",value:function(t){this.offset=Array.isArray(t)?function(){return t}:t}},{key:"getScrollPosition",value:function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}},{key:"scrollToPosition",value:function(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}},{key:"scrollToAnchor",value:function(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var e=this.document.querySelector("#"+t);if(e)return void this.scrollToElement(e);var n=this.document.querySelector("[name='".concat(t,"']"));if(n)return void this.scrollToElement(n)}catch(i){this.errorHandler.handleError(i)}}}},{key:"setHistoryScrollRestoration",value:function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}},{key:"scrollToElement",value:function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],i-r[1])}},{key:"supportScrollRestoration",value:function(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}]),t}(),qs=new k((function(t){return t.complete()}));function Gs(t){return t?function(t){return new k((function(e){return t.schedule((function(){return e.complete()}))}))}(t):qs}function Hs(t){var e=new k((function(e){e.next(t),e.complete()}));return e._isScalar=!0,e.value=t,e}function Xs(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e[e.length-1];switch(R(i)?e.pop():i=void 0,e.length){case 0:return Gs(i);case 1:return i?W(e,i):Hs(e[0]);default:return W(e,i)}}var Zs=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var i;return _classCallCheck(this,n),(i=e.call(this))._value=t,i}return _createClass(n,[{key:"_subscribe",value:function(t){var e=_get(_getPrototypeOf(n.prototype),"_subscribe",this).call(this,t);return e&&!e.closed&&t.next(this._value),e}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new T;return this._value}},{key:"next",value:function(t){_get(_getPrototypeOf(n.prototype),"next",this).call(this,this._value=t)}},{key:"value",get:function(){return this.getValue()}}]),n}(L);function Ws(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}Ws.prototype=Object.create(Error.prototype);var Ys=Ws,Ks={};function Js(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=null,r=null;return R(e[e.length-1])&&(r=e.pop()),"function"==typeof e[e.length-1]&&(i=e.pop()),1===e.length&&u(e[0])&&(e=e[0]),W(e,r).lift(new Qs(i))}var Qs=function(){function t(e){_classCallCheck(this,t),this.resultSelector=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new $s(t,this.resultSelector))}}]),t}(),$s=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,t)).resultSelector=i,r.active=0,r.values=[],r.observables=[],r}return _createClass(n,[{key:"_next",value:function(t){this.values.push(Ks),this.observables.push(t)}},{key:"_complete",value:function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var i=t[n];this.add(q(this,i,i,n))}}}},{key:"notifyComplete",value:function(t){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(t,e,n,i,r){var o=this.values,a=this.toRespond?o[n]===Ks?--this.toRespond:this.toRespond:0;o[n]=e,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}},{key:"_tryResultSelector",value:function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(G);function tl(t){return new k((function(e){var n;try{n=t()}catch(i){return void e.error(i)}return(n?Y(n):Gs()).subscribe(e)}))}function el(){return tt(1)}function nl(t,e){return function(n){return n.lift(new il(t,e))}}var il=function(){function t(e,n){_classCallCheck(this,t),this.predicate=e,this.thisArg=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new rl(t,this.predicate,this.thisArg))}}]),t}(),rl=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;return _classCallCheck(this,n),(o=e.call(this,t)).predicate=i,o.thisArg=r,o.count=0,o}return _createClass(n,[{key:"_next",value:function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}]),n}(y);function ol(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}ol.prototype=Object.create(Error.prototype);var al=ol;function sl(t){return function(e){return 0===t?Gs():e.lift(new ll(t))}}var ll=function(){function t(e){if(_classCallCheck(this,t),this.total=e,this.total<0)throw new al}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new ul(t,this.total))}}]),t}(),ul=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,t)).total=i,r.ring=new Array,r.count=0,r}return _createClass(n,[{key:"_next",value:function(t){var e=this.ring,n=this.total,i=this.count++;e.length<n?e.push(t):e[i%n]=t}},{key:"_complete",value:function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,i=this.ring,r=0;r<n;r++){var o=e++%n;t.next(i[o])}t.complete()}}]),n}(y);function cl(t,e,n){return function(i){return i.lift(new hl(t,e,n))}}var hl=function(){function t(e,n,i){_classCallCheck(this,t),this.nextOrObserver=e,this.error=n,this.complete=i}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new pl(t,this.nextOrObserver,this.error,this.complete))}}]),t}(),pl=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o,a){var s;return _classCallCheck(this,n),(s=e.call(this,t))._tapNext=b,s._tapError=b,s._tapComplete=b,s._tapError=o||b,s._tapComplete=a||b,r(i)?(s._context=_assertThisInitialized(s),s._tapNext=i):i&&(s._context=i,s._tapNext=i.next||b,s._tapError=i.error||b,s._tapComplete=i.complete||b),s}return _createClass(n,[{key:"_next",value:function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}},{key:"_error",value:function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}]),n}(y),fl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dl;return cl({hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw t()}})};function dl(){return new Ys}function ml(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e){return e.lift(new gl(t))}}var gl=function(){function t(e){_classCallCheck(this,t),this.defaultValue=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new yl(t,this.defaultValue))}}]),t}(),yl=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,t)).defaultValue=i,r.isEmpty=!0,r}return _createClass(n,[{key:"_next",value:function(t){this.isEmpty=!1,this.destination.next(t)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(y);function vl(t,e){var n=arguments.length>=2;return function(i){return i.pipe(t?nl((function(e,n){return t(e,n,i)})):$,sl(1),n?ml(e):fl((function(){return new Ys})))}}function _l(t){return function(e){var n=new bl(t),i=e.lift(n);return n.caught=i}}var bl=function(){function t(e){_classCallCheck(this,t),this.selector=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new xl(t,this.selector,this.caught))}}]),t}(),xl=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;return _classCallCheck(this,n),(o=e.call(this,t)).selector=i,o.caught=r,o}return _createClass(n,[{key:"error",value:function(t){if(!this.isStopped){var e;try{e=this.selector(t,this.caught)}catch(r){return void _get(_getPrototypeOf(n.prototype),"error",this).call(this,r)}this._unsubscribeAndRecycle();var i=new O(this,void 0,void 0);this.add(i),q(this,e,void 0,void 0,i)}}}]),n}(G);function wl(t){return function(e){return 0===t?Gs():e.lift(new Cl(t))}}var Cl=function(){function t(e){if(_classCallCheck(this,t),this.total=e,this.total<0)throw new al}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new kl(t,this.total))}}]),t}(),kl=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,t)).total=i,r.count=0,r}return _createClass(n,[{key:"_next",value:function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}]),n}(y);function El(t,e){var n=arguments.length>=2;return function(i){return i.pipe(t?nl((function(e,n){return t(e,n,i)})):$,wl(1),n?ml(e):fl((function(){return new Ys})))}}var Sl=function(){function t(e,n,i){_classCallCheck(this,t),this.predicate=e,this.thisArg=n,this.source=i}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Il(t,this.predicate,this.thisArg,this.source))}}]),t}(),Il=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o){var a;return _classCallCheck(this,n),(a=e.call(this,t)).predicate=i,a.thisArg=r,a.source=o,a.index=0,a.thisArg=r||_assertThisInitialized(a),a}return _createClass(n,[{key:"notifyComplete",value:function(t){this.destination.next(t),this.destination.complete()}},{key:"_next",value:function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),n}(y);function Tl(t,e){return"function"==typeof e?function(n){return n.pipe(Tl((function(n,i){return Y(t(n,i)).pipe(H((function(t,r){return e(n,t,i,r)})))})))}:function(e){return e.lift(new Pl(t))}}var Pl=function(){function t(e){_classCallCheck(this,t),this.project=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Al(t,this.project))}}]),t}(),Al=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,t)).project=i,r.index=0,r}return _createClass(n,[{key:"_next",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this._innerSub(e,t,n)}},{key:"_innerSub",value:function(t,e,n){var i=this.innerSubscription;i&&i.unsubscribe();var r=new O(this,void 0,void 0);this.destination.add(r),this.innerSubscription=q(this,t,e,n,r)}},{key:"_complete",value:function(){var t=this.innerSubscription;t&&!t.closed||_get(_getPrototypeOf(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=null}},{key:"notifyComplete",value:function(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&_get(_getPrototypeOf(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(t,e,n,i,r){this.destination.next(e)}}]),n}(G);function Ll(){return el()(Xs.apply(void 0,arguments))}function Ml(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){var n=e[e.length-1];R(n)?e.pop():n=null;var i=e.length;return Ll(1!==i||n?i>0?W(e,n):Gs(n):Hs(e[0]),t)}}function Rl(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new Ol(t,e,n))}}var Ol=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,t),this.accumulator=e,this.seed=n,this.hasSeed=i}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Dl(t,this.accumulator,this.seed,this.hasSeed))}}]),t}(),Dl=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o){var a;return _classCallCheck(this,n),(a=e.call(this,t)).accumulator=i,a._seed=r,a.hasSeed=o,a.index=0,a}return _createClass(n,[{key:"_next",value:function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(i){this.destination.error(i)}this.seed=e,this.destination.next(e)}},{key:"seed",get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t}}]),n}(y);function Nl(t,e){return K(t,e,1)}function Fl(t){return function(e){return e.lift(new zl(t))}}var zl=function(){function t(e){_classCallCheck(this,t),this.callback=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Bl(t,this.callback))}}]),t}(),Bl=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,t)).add(new d(i)),r}return n}(y),Vl=null;function Ul(){return Vl}var jl,ql={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Gl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Hl={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Xl=function(){if(Tt.Node)return Tt.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))}}(),Zl=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"parse",value:function(t){throw new Error("parse not implemented")}},{key:"hasProperty",value:function(t,e){return e in t}},{key:"setProperty",value:function(t,e,n){t[e]=n}},{key:"getProperty",value:function(t,e){return t[e]}},{key:"invoke",value:function(t,e,n){t[e].apply(t,_toConsumableArray(n))}},{key:"logError",value:function(t){window.console&&(console.error?console.error(t):console.log(t))}},{key:"log",value:function(t){window.console&&window.console.log&&window.console.log(t)}},{key:"logGroup",value:function(t){window.console&&window.console.group&&window.console.group(t)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"contains",value:function(t,e){return Xl.call(t,e)}},{key:"querySelector",value:function(t,e){return t.querySelector(e)}},{key:"querySelectorAll",value:function(t,e){return t.querySelectorAll(e)}},{key:"on",value:function(t,e,n){t.addEventListener(e,n,!1)}},{key:"onAndCancel",value:function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}}},{key:"dispatchEvent",value:function(t,e){t.dispatchEvent(e)}},{key:"createMouseEvent",value:function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e}},{key:"createEvent",value:function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e}},{key:"preventDefault",value:function(t){t.preventDefault(),t.returnValue=!1}},{key:"isPrevented",value:function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue}},{key:"getInnerHTML",value:function(t){return t.innerHTML}},{key:"getTemplateContent",value:function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null}},{key:"getOuterHTML",value:function(t){return t.outerHTML}},{key:"nodeName",value:function(t){return t.nodeName}},{key:"nodeValue",value:function(t){return t.nodeValue}},{key:"type",value:function(t){return t.type}},{key:"content",value:function(t){return this.hasProperty(t,"content")?t.content:t}},{key:"firstChild",value:function(t){return t.firstChild}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"parentElement",value:function(t){return t.parentNode}},{key:"childNodes",value:function(t){return t.childNodes}},{key:"childNodesAsList",value:function(t){for(var e=t.childNodes,n=new Array(e.length),i=0;i<e.length;i++)n[i]=e[i];return n}},{key:"clearNodes",value:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"removeChild",value:function(t,e){t.removeChild(e)}},{key:"replaceChild",value:function(t,e,n){t.replaceChild(e,n)}},{key:"remove",value:function(t){return t.parentNode&&t.parentNode.removeChild(t),t}},{key:"insertBefore",value:function(t,e,n){t.insertBefore(n,e)}},{key:"insertAllBefore",value:function(t,e,n){n.forEach((function(n){return t.insertBefore(n,e)}))}},{key:"insertAfter",value:function(t,e,n){t.insertBefore(n,e.nextSibling)}},{key:"setInnerHTML",value:function(t,e){t.innerHTML=e}},{key:"getText",value:function(t){return t.textContent}},{key:"setText",value:function(t,e){t.textContent=e}},{key:"getValue",value:function(t){return t.value}},{key:"setValue",value:function(t,e){t.value=e}},{key:"getChecked",value:function(t){return t.checked}},{key:"setChecked",value:function(t,e){t.checked=e}},{key:"createComment",value:function(t){return this.getDefaultDocument().createComment(t)}},{key:"createTemplate",value:function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e}},{key:"createElement",value:function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}},{key:"createElementNS",value:function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)}},{key:"createTextNode",value:function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)}},{key:"createScriptTag",value:function(t,e,n){var i=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return i.setAttribute(t,e),i}},{key:"createStyleElement",value:function(t,e){var n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n}},{key:"createShadowRoot",value:function(t){return t.createShadowRoot()}},{key:"getShadowRoot",value:function(t){return t.shadowRoot}},{key:"getHost",value:function(t){return t.host}},{key:"clone",value:function(t){return t.cloneNode(!0)}},{key:"getElementsByClassName",value:function(t,e){return t.getElementsByClassName(e)}},{key:"getElementsByTagName",value:function(t,e){return t.getElementsByTagName(e)}},{key:"classList",value:function(t){return Array.prototype.slice.call(t.classList,0)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"hasClass",value:function(t,e){return t.classList.contains(e)}},{key:"setStyle",value:function(t,e,n){t.style[e]=n}},{key:"removeStyle",value:function(t,e){t.style[e]=""}},{key:"getStyle",value:function(t,e){return t.style[e]}},{key:"hasStyle",value:function(t,e,n){var i=this.getStyle(t,e)||"";return n?i==n:i.length>0}},{key:"tagName",value:function(t){return t.tagName}},{key:"attributeMap",value:function(t){for(var e=new Map,n=t.attributes,i=0;i<n.length;i++){var r=n.item(i);e.set(r.name,r.value)}return e}},{key:"hasAttribute",value:function(t,e){return t.hasAttribute(e)}},{key:"hasAttributeNS",value:function(t,e,n){return t.hasAttributeNS(e,n)}},{key:"getAttribute",value:function(t,e){return t.getAttribute(e)}},{key:"getAttributeNS",value:function(t,e,n){return t.getAttributeNS(e,n)}},{key:"setAttribute",value:function(t,e,n){t.setAttribute(e,n)}},{key:"setAttributeNS",value:function(t,e,n,i){t.setAttributeNS(e,n,i)}},{key:"removeAttribute",value:function(t,e){t.removeAttribute(e)}},{key:"removeAttributeNS",value:function(t,e,n){t.removeAttributeNS(e,n)}},{key:"templateAwareRoot",value:function(t){return this.isTemplateElement(t)?this.content(t):t}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"getBoundingClientRect",value:function(t){try{return t.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}},{key:"getTitle",value:function(t){return t.title}},{key:"setTitle",value:function(t,e){t.title=e||""}},{key:"elementMatches",value:function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))}},{key:"isTemplateElement",value:function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName}},{key:"isTextNode",value:function(t){return t.nodeType===Node.TEXT_NODE}},{key:"isCommentNode",value:function(t){return t.nodeType===Node.COMMENT_NODE}},{key:"isElementNode",value:function(t){return t.nodeType===Node.ELEMENT_NODE}},{key:"hasShadowRoot",value:function(t){return null!=t.shadowRoot&&t instanceof HTMLElement}},{key:"isShadowRoot",value:function(t){return t instanceof DocumentFragment}},{key:"importIntoDoc",value:function(t){return document.importNode(this.templateAwareRoot(t),!0)}},{key:"adoptNode",value:function(t){return document.adoptNode(t)}},{key:"getHref",value:function(t){return t.getAttribute("href")}},{key:"getEventKey",value:function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Hl.hasOwnProperty(e)&&(e=Hl[e]))}return Gl[e]||e}},{key:"getGlobalEventTarget",value:function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(t){var e,n=Wl||(Wl=document.querySelector("base"))?Wl.getAttribute("href"):null;return null==n?null:(e=n,jl||(jl=document.createElement("a")),jl.setAttribute("href",e),"/"===jl.pathname.charAt(0)?jl.pathname:"/"+jl.pathname)}},{key:"resetBaseElement",value:function(){Wl=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"setData",value:function(t,e,n){this.setAttribute(t,"data-"+e,n)}},{key:"getData",value:function(t,e){return this.getAttribute(t,"data-"+e)}},{key:"getComputedStyle",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return getComputedStyle(t)}))},{key:"supportsWebAnimation",value:function(){return"function"==typeof Element.prototype.animate}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(t){return vs(document.cookie,t)}},{key:"setCookie",value:function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)}},{key:"attrToPropMap",get:function(){return ql}}],[{key:"makeCurrent",value:function(){var t;t=new n,Vl||(Vl=t)}}]),n}(function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;_classCallCheck(this,n),(t=e.call(this))._animationPrefix=null,t._transitionEnd=null;try{var i=t.createElement("div",document);if(null!=t.getStyle(i,"animationName"))t._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],o=0;o<r.length;o++)if(null!=t.getStyle(i,r[o]+"AnimationName")){t._animationPrefix="-"+r[o].toLowerCase()+"-";break}var a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(a).forEach((function(e){null!=t.getStyle(i,e)&&(t._transitionEnd=a[e])}))}catch(s){t._animationPrefix=null,t._transitionEnd=null}return t}return _createClass(n,[{key:"getDistributedNodes",value:function(t){return t.getDistributedNodes()}},{key:"resolveAndSetHref",value:function(t,e,n){t.href=null==n?e:e+"/../"+n}},{key:"supportsDOMEvents",value:function(){return!0}},{key:"supportsNativeShadowDOM",value:function(){return"function"==typeof document.body.createShadowRoot}},{key:"getAnimationPrefix",value:function(){return this._animationPrefix?this._animationPrefix:""}},{key:"getTransitionEnd",value:function(){return this._transitionEnd?this._transitionEnd:""}},{key:"supportsAnimation",value:function(){return null!=this._animationPrefix&&null!=this._transitionEnd}}]),n}(function(){function t(){_classCallCheck(this,t),this.resourceLoaderType=null}return _createClass(t,[{key:"attrToPropMap",get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t}}]),t}())),Wl=null;function Yl(){return!!window.history.pushState}var Kl=new Pt("TRANSITION_ID"),Jl=[{provide:Cr,useFactory:function(t,e,n){return function(){n.get(kr).donePromise.then((function(){var n=Ul();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter((function(e){return n.getAttribute(e,"ng-transition")===t})).forEach((function(t){return n.remove(t)}))}))}},deps:[Kl,Vs,Ae],multi:!0}],Ql=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"addToWindow",value:function(t){Tt.getAngularTestability=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t.findTestabilityInTree(e,n);if(null==i)throw new Error("Could not find testability for element.");return i},Tt.getAllAngularTestabilities=function(){return t.getAllTestabilities()},Tt.getAllAngularRootElements=function(){return t.getAllRootElements()},Tt.frameworkStabilizers||(Tt.frameworkStabilizers=[]),Tt.frameworkStabilizers.push((function(t){var e=Tt.getAllAngularTestabilities(),n=e.length,i=!1,r=function(e){i=i||e,0==--n&&t(i)};e.forEach((function(t){t.whenStable(r)}))}))}},{key:"findTestabilityInTree",value:function(t,e,n){if(null==e)return null;var i=t.getTestability(e);return null!=i?i:n?Ul().isShadowRoot(e)?this.findTestabilityInTree(t,Ul().getHost(e),!0):this.findTestabilityInTree(t,Ul().parentElement(e),!0):null}}],[{key:"init",value:function(){var e;e=new t,oo=e}}]),t}();function $l(t,e){"undefined"!=typeof COMPILED&&COMPILED||((Tt.ng=Tt.ng||{})[t]=e)}var tu={ApplicationRef:fo,NgZone:Yr};function eu(t){return Eo(t)}var nu=new Pt("EventManagerPlugins"),iu=function(){function t(e,n){var i=this;_classCallCheck(this,t),this._zone=n,this._eventNameToPlugin=new Map,e.forEach((function(t){return t.manager=i})),this._plugins=e.slice().reverse()}return _createClass(t,[{key:"addEventListener",value:function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}},{key:"addGlobalEventListener",value:function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,i=0;i<n.length;i++){var r=n[i];if(r.supports(t))return this._eventNameToPlugin.set(t,r),r}throw new Error("No event manager plugin found for event "+t)}}]),t}(),ru=function(){function t(e){_classCallCheck(this,t),this._doc=e}return _createClass(t,[{key:"addGlobalEventListener",value:function(t,e,n){var i=Ul().getGlobalEventTarget(this._doc,t);if(!i)throw new Error("Unsupported event target ".concat(i," for event ").concat(e));return this.addEventListener(i,e,n)}}]),t}(),ou=function(){function t(){_classCallCheck(this,t),this._stylesSet=new Set}return _createClass(t,[{key:"addStyles",value:function(t){var e=this,n=new Set;t.forEach((function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(t){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),t}(),au=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var i;return _classCallCheck(this,n),(i=e.call(this))._doc=t,i._hostNodes=new Set,i._styleNodes=new Set,i._hostNodes.add(t.head),i}return _createClass(n,[{key:"_addStylesToHost",value:function(t,e){var n=this;t.forEach((function(t){var i=n._doc.createElement("style");i.textContent=t,n._styleNodes.add(e.appendChild(i))}))}},{key:"addHost",value:function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}},{key:"removeHost",value:function(t){this._hostNodes.delete(t)}},{key:"onStylesAdded",value:function(t){var e=this;this._hostNodes.forEach((function(n){return e._addStylesToHost(t,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(t){return Ul().remove(t)}))}}]),n}(ou),su={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},lu=/%COMP%/g;function uu(t,e,n){for(var i=0;i<e.length;i++){var r=e[i];Array.isArray(r)?uu(t,r,n):(r=r.replace(lu,t),n.push(r))}return n}function cu(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var hu=function(){function t(e,n,i){_classCallCheck(this,t),this.eventManager=e,this.sharedStylesHost=n,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new pu(e)}return _createClass(t,[{key:"createRenderer",value:function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Gt.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new mu(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case Gt.Native:case Gt.ShadowDom:return new gu(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var i=uu(e.id,e.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),t}(),pu=function(){function t(e){_classCallCheck(this,t),this.eventManager=e,this.data=Object.create(null)}return _createClass(t,[{key:"destroy",value:function(){}},{key:"createElement",value:function(t,e){return e?document.createElementNS(su[e]||e,t):document.createElement(t)}},{key:"createComment",value:function(t){return document.createComment(t)}},{key:"createText",value:function(t){return document.createTextNode(t)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"insertBefore",value:function(t,e,n){t&&t.insertBefore(e,n)}},{key:"removeChild",value:function(t,e){t&&t.removeChild(e)}},{key:"selectRootElement",value:function(t,e){var n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error('The selector "'.concat(t,'" did not match any elements'));return e||(n.textContent=""),n}},{key:"parentNode",value:function(t){return t.parentNode}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"setAttribute",value:function(t,e,n,i){if(i){e=i+":"+e;var r=su[i];r?t.setAttributeNS(r,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}},{key:"removeAttribute",value:function(t,e,n){if(n){var i=su[n];i?t.removeAttributeNS(i,e):t.removeAttribute("".concat(n,":").concat(e))}else t.removeAttribute(e)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"setStyle",value:function(t,e,n,i){i&sn.DashCase?t.style.setProperty(e,n,i&sn.Important?"important":""):t.style[e]=n}},{key:"removeStyle",value:function(t,e,n){n&sn.DashCase?t.style.removeProperty(e):t.style[e]=""}},{key:"setProperty",value:function(t,e,n){du(e,"property"),t[e]=n}},{key:"setValue",value:function(t,e){t.nodeValue=e}},{key:"listen",value:function(t,e,n){return du(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,cu(n)):this.eventManager.addEventListener(t,e,cu(n))}}]),t}(),fu="@".charCodeAt(0);function du(t,e){if(t.charCodeAt(0)===fu)throw new Error("Found the synthetic ".concat(e," ").concat(t,'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.'))}var mu=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o){var a;_classCallCheck(this,n),(a=e.call(this,t)).component=r;var s,l=uu(o+"-"+r.id,r.styles,[]);return i.addStyles(l),a.contentAttr="_ngcontent-%COMP%".replace(lu,o+"-"+r.id),a.hostAttr=(s=o+"-"+r.id,"_nghost-%COMP%".replace(lu,s)),a}return _createClass(n,[{key:"applyToHost",value:function(t){_get(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,t,this.hostAttr,"")}},{key:"createElement",value:function(t,e){var i=_get(_getPrototypeOf(n.prototype),"createElement",this).call(this,t,e);return _get(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,i,this.contentAttr,""),i}}]),n}(pu),gu=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o){var a;_classCallCheck(this,n),(a=e.call(this,t)).sharedStylesHost=i,a.hostEl=r,a.component=o,a.shadowRoot=o.encapsulation===Gt.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),a.sharedStylesHost.addHost(a.shadowRoot);for(var s=uu(o.id,o.styles,[]),l=0;l<s.length;l++){var u=document.createElement("style");u.textContent=s[l],a.shadowRoot.appendChild(u)}return a}return _createClass(n,[{key:"nodeOrShadowRoot",value:function(t){return t===this.hostEl?this.shadowRoot:t}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(t,e){return _get(_getPrototypeOf(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"insertBefore",value:function(t,e,i){return _get(_getPrototypeOf(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(t),e,i)}},{key:"removeChild",value:function(t,e){return _get(_getPrototypeOf(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"parentNode",value:function(t){return this.nodeOrShadowRoot(_get(_getPrototypeOf(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(t)))}}]),n}(pu),yu="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},vu=yu("addEventListener"),_u=yu("removeEventListener"),bu={},xu="__zone_symbol__propagationStopped",wu=function(){var t="undefined"!=typeof Zone&&Zone[yu("BLACK_LISTED_EVENTS")];if(t){var e={};return t.forEach((function(t){e[t]=t})),e}}(),Cu=function(t){return!!wu&&wu.hasOwnProperty(t)},ku=function(t){var e=bu[t.type];if(e){var n=this[e];if(n){var i=[t];if(1===n.length){var r=n[0];return r.zone!==Zone.current?r.zone.run(r.handler,this,i):r.handler.apply(this,i)}for(var o=n.slice(),a=0;a<o.length&&!0!==t[xu];a++){var s=o[a];s.zone!==Zone.current?s.zone.run(s.handler,this,i):s.handler.apply(this,i)}}}},Eu=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;return _classCallCheck(this,n),(o=e.call(this,t)).ngZone=i,r&&function(t){return"server"===t}(r)||o.patchEvent(),o}return _createClass(n,[{key:"patchEvent",value:function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[xu]=!0),t&&t.apply(this,arguments)}}}},{key:"supports",value:function(t){return!0}},{key:"addEventListener",value:function(t,e,n){var i=this,r=n;if(!t[vu]||Yr.isInAngularZone()&&!Cu(e))t.addEventListener(e,r,!1);else{var o=bu[e];o||(o=bu[e]=yu("ANGULAR"+e+"FALSE"));var a=t[o],s=a&&a.length>0;a||(a=t[o]=[]);var l=Cu(e)?Zone.root:Zone.current;if(0===a.length)a.push({zone:l,handler:r});else{for(var u=!1,c=0;c<a.length;c++)if(a[c].handler===r){u=!0;break}u||a.push({zone:l,handler:r})}s||t[vu](e,ku,!1)}return function(){return i.removeEventListener(t,e,r)}}},{key:"removeEventListener",value:function(t,e,n){var i=t[_u];if(!i)return t.removeEventListener.apply(t,[e,n,!1]);var r=bu[e],o=r&&t[r];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);for(var a=!1,s=0;s<o.length;s++)if(o[s].handler===n){a=!0,o.splice(s,1);break}a?0===o.length&&i.apply(t,[e,ku,!1]):t.removeEventListener.apply(t,[e,n,!1])}}]),n}(ru),Su={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Iu=new Pt("HammerGestureConfig"),Tu=new Pt("HammerLoader"),Pu=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o){var a;return _classCallCheck(this,n),(a=e.call(this,t))._config=i,a.console=r,a.loader=o,a}return _createClass(n,[{key:"supports",value:function(t){return!(!Su.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn('The "'.concat(t,'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.')),1))}},{key:"addEventListener",value:function(t,e,n){var i=this,r=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){var o=!1,a=function(){o=!0};return this.loader().then((function(){if(!window.Hammer)return i.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(a=function(){});o||(a=i.addEventListener(t,e,n))})).catch((function(){i.console.warn('The "'.concat(e,'" event cannot be bound because the custom Hammer.JS loader failed.')),a=function(){}})),function(){a()}}return r.runOutsideAngular((function(){var o=i._config.buildHammer(t),a=function(t){r.runGuarded((function(){n(t)}))};return o.on(e,a),function(){o.off(e,a),"function"==typeof o.destroy&&o.destroy()}}))}},{key:"isCustomEvent",value:function(t){return this._config.events.indexOf(t)>-1}}]),n}(ru),Au=["alt","control","meta","shift"],Lu={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},Mu=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){return _classCallCheck(this,n),e.call(this,t)}return _createClass(n,[{key:"supports",value:function(t){return null!=n.parseEventName(t)}},{key:"addEventListener",value:function(t,e,i){var r=n.parseEventName(e),o=n.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return Ul().onAndCancel(t,r.domEventName,o)}))}}],[{key:"parseEventName",value:function(t){var e=t.toLowerCase().split("."),i=e.shift();if(0===e.length||"keydown"!==i&&"keyup"!==i)return null;var r=n._normalizeKey(e.pop()),o="";if(Au.forEach((function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),o+=t+".")})),o+=r,0!=e.length||0===r.length)return null;var a={};return a.domEventName=i,a.fullKey=o,a}},{key:"getEventFullKey",value:function(t){var e="",n=Ul().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Au.forEach((function(i){i!=n&&(0,Lu[i])(t)&&(e+=i+".")})),e+=n}},{key:"eventCallback",value:function(t,e,i){return function(r){n.getEventFullKey(r)===t&&i.runGuarded((function(){return e(r)}))}}},{key:"_normalizeKey",value:function(t){switch(t){case"esc":return"escape";default:return t}}}]),n}(ru),Ru=function t(){_classCallCheck(this,t)},Ou=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var i;return _classCallCheck(this,n),(i=e.call(this))._doc=t,i}return _createClass(n,[{key:"sanitize",value:function(t,e){if(null==e)return null;switch(t){case be.NONE:return e;case be.HTML:return e instanceof Nu?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){var n=null;try{oe=oe||new $t(t);var i=e?String(e):"";n=oe.getInertBodyElement(i);var r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=n.innerHTML,n=oe.getInertBodyElement(i)}while(i!==o);var a=new me,s=a.sanitizeChildren(_e(n)||n);return Qt()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(n)for(var l=_e(n)||n;l.firstChild;)l.removeChild(l.firstChild)}}(this._doc,String(e)));case be.STYLE:return e instanceof Fu?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";var e=t.match(Ce);return e&&ne(e[1])===e[1]||t.match(we)&&function(t){for(var e=!0,n=!0,i=0;i<t.length;i++){var r=t.charAt(i);"'"===r&&n?e=!e:'"'===r&&e&&(n=!n)}return e&&n}(t)?t:(Qt()&&console.warn("WARNING: sanitizing unsafe style value ".concat(t," (see http://g.co/ng/security#xss).")),"unsafe")}(e));case be.SCRIPT:if(e instanceof zu)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case be.URL:return e instanceof Vu||e instanceof Bu?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),ne(String(e)));case be.RESOURCE_URL:if(e instanceof Vu)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(t," (see http://g.co/ng/security#xss)"))}}},{key:"checkNotSafeValue",value:function(t,e){if(t instanceof Du)throw new Error("Required a safe ".concat(e,", got a ").concat(t.getTypeName()," (see http://g.co/ng/security#xss)"))}},{key:"bypassSecurityTrustHtml",value:function(t){return new Nu(t)}},{key:"bypassSecurityTrustStyle",value:function(t){return new Fu(t)}},{key:"bypassSecurityTrustScript",value:function(t){return new zu(t)}},{key:"bypassSecurityTrustUrl",value:function(t){return new Bu(t)}},{key:"bypassSecurityTrustResourceUrl",value:function(t){return new Vu(t)}}]),n}(Ru),Du=function(){function t(e){_classCallCheck(this,t),this.changingThisBreaksApplicationSecurity=e}return _createClass(t,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}]),t}(),Nu=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(Du),Fu=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(Du),zu=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(Du),Bu=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(Du),Vu=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(Du),Uu=lo(Io,"browser",[{provide:Pr,useValue:"browser"},{provide:Tr,useValue:function(){Zl.makeCurrent(),Ql.init()},multi:!0},{provide:as,useClass:function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var i;return _classCallCheck(this,n),(i=e.call(this))._doc=t,i._init(),i}return _createClass(n,[{key:"_init",value:function(){this.location=Ul().getLocation(),this._history=Ul().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return Ul().getBaseHref(this._doc)}},{key:"onPopState",value:function(t){Ul().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}},{key:"onHashChange",value:function(t){Ul().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}},{key:"pushState",value:function(t,e,n){Yl()?this._history.pushState(t,e,n):this.location.hash=n}},{key:"replaceState",value:function(t,e,n){Yl()?this._history.replaceState(t,e,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(t){this.location.pathname=t}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}}]),n}(as),deps:[Vs]},{provide:Vs,useFactory:function(){return document},deps:[]}]);function ju(){return new Yt}var qu=function(){function t(e){if(_classCallCheck(this,t),e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _createClass(t,null,[{key:"withServerTransition",value:function(e){return{ngModule:t,providers:[{provide:Er,useValue:e.appId},{provide:Kl,useExisting:Er},Jl]}}}]),t}();"undefined"!=typeof window&&window;var Gu=function t(e,n){_classCallCheck(this,t),this.id=e,this.url=n},Hu=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _classCallCheck(this,n),(r=e.call(this,t,i)).navigationTrigger=o,r.restoredState=a,r}return _createClass(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Gu),Xu=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;return _classCallCheck(this,n),(o=e.call(this,t,i)).urlAfterRedirects=r,o}return _createClass(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(Gu),Zu=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;return _classCallCheck(this,n),(o=e.call(this,t,i)).reason=r,o}return _createClass(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Gu),Wu=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;return _classCallCheck(this,n),(o=e.call(this,t,i)).error=r,o}return _createClass(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(Gu),Yu=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o){var a;return _classCallCheck(this,n),(a=e.call(this,t,i)).urlAfterRedirects=r,a.state=o,a}return _createClass(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Gu),Ku=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o){var a;return _classCallCheck(this,n),(a=e.call(this,t,i)).urlAfterRedirects=r,a.state=o,a}return _createClass(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Gu),Ju=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o,a){var s;return _classCallCheck(this,n),(s=e.call(this,t,i)).urlAfterRedirects=r,s.state=o,s.shouldActivate=a,s}return _createClass(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(Gu),Qu=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o){var a;return _classCallCheck(this,n),(a=e.call(this,t,i)).urlAfterRedirects=r,a.state=o,a}return _createClass(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Gu),$u=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o){var a;return _classCallCheck(this,n),(a=e.call(this,t,i)).urlAfterRedirects=r,a.state=o,a}return _createClass(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Gu),tc=function(){function t(e){_classCallCheck(this,t),this.route=e}return _createClass(t,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),t}(),ec=function(){function t(e){_classCallCheck(this,t),this.route=e}return _createClass(t,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),t}(),nc=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),ic=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),rc=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),oc=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),ac=function(){function t(e,n,i){_classCallCheck(this,t),this.routerEvent=e,this.position=n,this.anchor=i}return _createClass(t,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),t}(),sc=function t(){_classCallCheck(this,t)},lc=function(){function t(e){_classCallCheck(this,t),this.params=e||{}}return _createClass(t,[{key:"has",value:function(t){return this.params.hasOwnProperty(t)}},{key:"get",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null}},{key:"getAll",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),t}();function uc(t){return new lc(t)}function cc(t){var e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function hc(t,e,n){var i=n.path.split("/");if(i.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||i.length<t.length))return null;for(var r={},o=0;o<i.length;o++){var a=i[o],s=t[o];if(a.startsWith(":"))r[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}var pc=function t(e,n){_classCallCheck(this,t),this.routes=e,this.module=n};function fc(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<t.length;n++){var i=t[n];dc(i,mc(e,i))}}function dc(t,e){if(!t)throw new Error("\n      Invalid configuration of route '".concat(e,"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    "));if(Array.isArray(t))throw new Error("Invalid configuration of route '".concat(e,"': Array cannot be specified"));if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error("Invalid configuration of route '".concat(e,"': a componentless route without children or loadChildren cannot have a named outlet set"));if(t.redirectTo&&t.children)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and children cannot be used together"));if(t.redirectTo&&t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and loadChildren cannot be used together"));if(t.children&&t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"': children and loadChildren cannot be used together"));if(t.redirectTo&&t.component)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and component cannot be used together"));if(t.path&&t.matcher)throw new Error("Invalid configuration of route '".concat(e,"': path and matcher cannot be used together"));if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"'. One of the following must be provided: component, redirectTo, children or loadChildren"));if(void 0===t.path&&void 0===t.matcher)throw new Error("Invalid configuration of route '".concat(e,"': routes must have either a path or a matcher specified"));if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error("Invalid configuration of route '".concat(e,"': path cannot start with a slash"));if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error("Invalid configuration of route '{path: \"".concat(e,'", redirectTo: "').concat(t.redirectTo,"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'."));if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error("Invalid configuration of route '".concat(e,"': pathMatch can only be set to 'prefix' or 'full'"));t.children&&fc(t.children,e)}function mc(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:"".concat(t,"/").concat(e.path):"":t}function gc(t){var e=t.children&&t.children.map(gc),n=e?Object.assign({},t,{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=sc),n}function yc(t,e){var n,i=Object.keys(t),r=Object.keys(e);if(!i||!r||i.length!=r.length)return!1;for(var o=0;o<i.length;o++)if(t[n=i[o]]!==e[n])return!1;return!0}function vc(t){return Array.prototype.concat.apply([],t)}function _c(t){return t.length>0?t[t.length-1]:null}function bc(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function xc(t){return Ze(t)?t:Xe(t)?Y(Promise.resolve(t)):Xs(t)}function wc(t,e,n){return n?function(t,e){return yc(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Sc(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every((function(n){return e[n]===t[n]}))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,i,r){if(n.segments.length>r.length)return!!Sc(n.segments.slice(0,r.length),r)&&!i.hasChildren();if(n.segments.length===r.length){if(!Sc(n.segments,r))return!1;for(var o in i.children){if(!n.children[o])return!1;if(!t(n.children[o],i.children[o]))return!1}return!0}var a=r.slice(0,n.segments.length),s=r.slice(n.segments.length);return!!Sc(n.segments,a)&&!!n.children.primary&&e(n.children.primary,i,s)}(e,n,n.segments)}(t.root,e.root)}var Cc=function(){function t(e,n,i){_classCallCheck(this,t),this.root=e,this.queryParams=n,this.fragment=i}return _createClass(t,[{key:"toString",value:function(){return Ac.serialize(this)}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=uc(this.queryParams)),this._queryParamMap}}]),t}(),kc=function(){function t(e,n){var i=this;_classCallCheck(this,t),this.segments=e,this.children=n,this.parent=null,bc(n,(function(t,e){return t.parent=i}))}return _createClass(t,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"toString",value:function(){return Lc(this)}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}}]),t}(),Ec=function(){function t(e,n){_classCallCheck(this,t),this.path=e,this.parameters=n}return _createClass(t,[{key:"toString",value:function(){return Fc(this)}},{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=uc(this.parameters)),this._parameterMap}}]),t}();function Sc(t,e){return t.length===e.length&&t.every((function(t,n){return t.path===e[n].path}))}function Ic(t,e){var n=[];return bc(t.children,(function(t,i){"primary"===i&&(n=n.concat(e(t,i)))})),bc(t.children,(function(t,i){"primary"!==i&&(n=n.concat(e(t,i)))})),n}var Tc=function t(){_classCallCheck(this,t)},Pc=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"parse",value:function(t){var e=new jc(t);return new Cc(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}},{key:"serialize",value:function(t){return"".concat("/"+function t(e,n){if(!e.hasChildren())return Lc(e);if(n){var i=e.children.primary?t(e.children.primary,!1):"",r=[];return bc(e.children,(function(e,n){"primary"!==n&&r.push("".concat(n,":").concat(t(e,!1)))})),r.length>0?"".concat(i,"(").concat(r.join("//"),")"):i}var o=Ic(e,(function(n,i){return"primary"===i?[t(e.children.primary,!1)]:["".concat(i,":").concat(t(n,!1))]}));return"".concat(Lc(e),"/(").concat(o.join("//"),")")}(t.root,!0)).concat((e=t.queryParams,n=Object.keys(e).map((function(t){var n=e[t];return Array.isArray(n)?n.map((function(e){return"".concat(Rc(t),"=").concat(Rc(e))})).join("&"):"".concat(Rc(t),"=").concat(Rc(n))})),n.length?"?"+n.join("&"):"")).concat("string"==typeof t.fragment?"#"+encodeURI(t.fragment):"");var e,n}}]),t}(),Ac=new Pc;function Lc(t){return t.segments.map((function(t){return Fc(t)})).join("/")}function Mc(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rc(t){return Mc(t).replace(/%3B/gi,";")}function Oc(t){return Mc(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dc(t){return decodeURIComponent(t)}function Nc(t){return Dc(t.replace(/\+/g,"%20"))}function Fc(t){return"".concat(Oc(t.path)).concat((e=t.parameters,Object.keys(e).map((function(t){return";".concat(Oc(t),"=").concat(Oc(e[t]))})).join("")));var e}var zc=/^[^\/()?;=#]+/;function Bc(t){var e=t.match(zc);return e?e[0]:""}var Vc=/^[^=?&#]+/,Uc=/^[^?&#]+/,jc=function(){function t(e){_classCallCheck(this,t),this.url=e,this.remaining=e}return _createClass(t,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new kc([],{}):new kc([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new kc(t,e)),n}},{key:"parseSegment",value:function(){var t=Bc(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(t),new Ec(Dc(t),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t}},{key:"parseParam",value:function(t){var e=Bc(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var i=Bc(this.remaining);i&&(n=i,this.capture(n))}t[Dc(e)]=Dc(n)}}},{key:"parseQueryParam",value:function(t){var e=function(t){var e=t.match(Vc);return e?e[0]:""}(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var i=function(t){var e=t.match(Uc);return e?e[0]:""}(this.remaining);i&&(n=i,this.capture(n))}var r=Nc(e),o=Nc(n);if(t.hasOwnProperty(r)){var a=t[r];Array.isArray(a)||(a=[a],t[r]=a),a.push(o)}else t[r]=o}}},{key:"parseParens",value:function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Bc(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error("Cannot parse url '".concat(this.url,"'"));var r=void 0;n.indexOf(":")>-1?(r=n.substr(0,n.indexOf(":")),this.capture(r),this.capture(":")):t&&(r="primary");var o=this.parseChildren();e[r]=1===Object.keys(o).length?o.primary:new kc([],o),this.consumeOptional("//")}return e}},{key:"peekStartsWith",value:function(t){return this.remaining.startsWith(t)}},{key:"consumeOptional",value:function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}},{key:"capture",value:function(t){if(!this.consumeOptional(t))throw new Error('Expected "'.concat(t,'".'))}}]),t}(),qc=function(){function t(e){_classCallCheck(this,t),this._root=e}return _createClass(t,[{key:"parent",value:function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}},{key:"children",value:function(t){var e=Gc(t,this._root);return e?e.children.map((function(t){return t.value})):[]}},{key:"firstChild",value:function(t){var e=Gc(t,this._root);return e&&e.children.length>0?e.children[0].value:null}},{key:"siblings",value:function(t){var e=Hc(t,this._root);return e.length<2?[]:e[e.length-2].children.map((function(t){return t.value})).filter((function(e){return e!==t}))}},{key:"pathFromRoot",value:function(t){return Hc(t,this._root).map((function(t){return t.value}))}},{key:"root",get:function(){return this._root.value}}]),t}();function Gc(t,e){if(t===e.value)return e;var n,i=_createForOfIteratorHelper(e.children);try{for(i.s();!(n=i.n()).done;){var r=Gc(t,n.value);if(r)return r}}catch(o){i.e(o)}finally{i.f()}return null}function Hc(t,e){if(t===e.value)return[e];var n,i=_createForOfIteratorHelper(e.children);try{for(i.s();!(n=i.n()).done;){var r=Hc(t,n.value);if(r.length)return r.unshift(e),r}}catch(o){i.e(o)}finally{i.f()}return[]}var Xc=function(){function t(e,n){_classCallCheck(this,t),this.value=e,this.children=n}return _createClass(t,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),t}();function Zc(t){var e={};return t&&t.children.forEach((function(t){return e[t.value.outlet]=t})),e}var Wc=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,t)).snapshot=i,th(_assertThisInitialized(r),t),r}return _createClass(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(qc);function Yc(t,e){var n=function(t,e){var n=new Qc([],{},{},"",{},"primary",e,null,t.root,-1,{});return new $c("",new Xc(n,[]))}(t,e),i=new Zs([new Ec("",{})]),r=new Zs({}),o=new Zs({}),a=new Zs({}),s=new Zs(""),l=new Kc(i,r,a,s,o,"primary",e,n.root);return l.snapshot=n.root,new Wc(new Xc(l,[]),n)}var Kc=function(){function t(e,n,i,r,o,a,s,l){_classCallCheck(this,t),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=s,this._futureSnapshot=l}return _createClass(t,[{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}},{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(H((function(t){return uc(t)})))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(H((function(t){return uc(t)})))),this._queryParamMap}}]),t}();function Jc(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=t.pathFromRoot,i=0;if("always"!==e)for(i=n.length-1;i>=1;){var r=n[i],o=n[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function(t){return t.reduce((function(t,e){return{params:Object.assign({},t.params,e.params),data:Object.assign({},t.data,e.data),resolve:Object.assign({},t.resolve,e._resolvedData)}}),{params:{},data:{},resolve:{}})}(n.slice(i))}var Qc=function(){function t(e,n,i,r,o,a,s,l,u,c,h){_classCallCheck(this,t),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=s,this.routeConfig=l,this._urlSegment=u,this._lastPathIndex=c,this._resolve=h}return _createClass(t,[{key:"toString",value:function(){return"Route(url:'".concat(this.url.map((function(t){return t.toString()})).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=uc(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=uc(this.queryParams)),this._queryParamMap}}]),t}(),$c=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,i)).url=t,th(_assertThisInitialized(r),i),r}return _createClass(n,[{key:"toString",value:function(){return eh(this._root)}}]),n}(qc);function th(t,e){e.value._routerState=t,e.children.forEach((function(e){return th(t,e)}))}function eh(t){var e=t.children.length>0?" { ".concat(t.children.map(eh).join(", ")," } "):"";return"".concat(t.value).concat(e)}function nh(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,yc(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),yc(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!yc(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),yc(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function ih(t,e){var n,i;return yc(t.params,e.params)&&Sc(n=t.url,i=e.url)&&n.every((function(t,e){return yc(t.parameters,i[e].parameters)}))&&!(!t.parent!=!e.parent)&&(!t.parent||ih(t.parent,e.parent))}function rh(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function oh(t,e,n,i,r){var o={};return i&&bc(i,(function(t,e){o[e]=Array.isArray(t)?t.map((function(t){return""+t})):""+t})),new Cc(n.root===t?e:function t(e,n,i){var r={};return bc(e.children,(function(e,o){r[o]=e===n?i:t(e,n,i)})),new kc(e.segments,r)}(n.root,t,e),o,r)}var ah=function(){function t(e,n,i){if(_classCallCheck(this,t),this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&rh(i[0]))throw new Error("Root segment cannot have matrix parameters");var r=i.find((function(t){return"object"==typeof t&&null!=t&&t.outlets}));if(r&&r!==_c(i))throw new Error("{outlets:{}} has to be the last command")}return _createClass(t,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),t}(),sh=function t(e,n,i){_classCallCheck(this,t),this.segmentGroup=e,this.processChildren=n,this.index=i};function lh(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:""+t}function uh(t,e,n){if(t||(t=new kc([],{})),0===t.segments.length&&t.hasChildren())return ch(t,e,n);var i=function(t,e,n){for(var i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};r<t.segments.length;){if(i>=n.length)return o;var a=t.segments[r],s=lh(n[i]),l=i<n.length-1?n[i+1]:null;if(r>0&&void 0===s)break;if(s&&l&&"object"==typeof l&&void 0===l.outlets){if(!dh(s,l,a))return o;i+=2}else{if(!dh(s,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){var o=new kc(t.segments.slice(0,i.pathIndex),{});return o.children.primary=new kc(t.segments.slice(i.pathIndex),t.children),ch(o,0,r)}return i.match&&0===r.length?new kc(t.segments,{}):i.match&&!t.hasChildren()?hh(t,e,n):i.match?ch(t,0,r):hh(t,e,n)}function ch(t,e,n){if(0===n.length)return new kc(t.segments,{});var i=function(t){return"object"!=typeof t[0]||void 0===t[0].outlets?{primary:t}:t[0].outlets}(n),r={};return bc(i,(function(n,i){null!==n&&(r[i]=uh(t.children[i],e,n))})),bc(t.children,(function(t,e){void 0===i[e]&&(r[e]=t)})),new kc(t.segments,r)}function hh(t,e,n){for(var i=t.segments.slice(0,e),r=0;r<n.length;){if("object"==typeof n[r]&&void 0!==n[r].outlets){var o=ph(n[r].outlets);return new kc(i,o)}if(0===r&&rh(n[0]))i.push(new Ec(t.segments[e].path,n[0])),r++;else{var a=lh(n[r]),s=r<n.length-1?n[r+1]:null;a&&s&&rh(s)?(i.push(new Ec(a,fh(s))),r+=2):(i.push(new Ec(a,{})),r++)}}return new kc(i,{})}function ph(t){var e={};return bc(t,(function(t,n){null!==t&&(e[n]=hh(new kc([],{}),0,t))})),e}function fh(t){var e={};return bc(t,(function(t,n){return e[n]=""+t})),e}function dh(t,e,n){return t==n.path&&yc(e,n.parameters)}var mh=function(){function t(e,n,i,r){_classCallCheck(this,t),this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r}return _createClass(t,[{key:"activate",value:function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),nh(this.futureState.root),this.activateChildRoutes(e,n,t)}},{key:"deactivateChildRoutes",value:function(t,e,n){var i=this,r=Zc(e);t.children.forEach((function(t){var e=t.value.outlet;i.deactivateRoutes(t,r[e],n),delete r[e]})),bc(r,(function(t,e){i.deactivateRouteAndItsChildren(t,n)}))}},{key:"deactivateRoutes",value:function(t,e,n){var i=t.value,r=e?e.value:null;if(i===r)if(i.component){var o=n.getContext(i.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else r&&this.deactivateRouteAndItsChildren(e,n)}},{key:"deactivateRouteAndItsChildren",value:function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}},{key:"detachAndStoreRouteSubtree",value:function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var i=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:i,route:t,contexts:r})}}},{key:"deactivateRouteAndOutlet",value:function(t,e){var n=this,i=e.getContext(t.value.outlet);if(i){var r=Zc(t),o=t.value.component?i.children:e;bc(r,(function(t,e){return n.deactivateRouteAndItsChildren(t,o)})),i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated())}}},{key:"activateChildRoutes",value:function(t,e,n){var i=this,r=Zc(e);t.children.forEach((function(t){i.activateRoutes(t,r[t.value.outlet],n),i.forwardEvent(new oc(t.value.snapshot))})),t.children.length&&this.forwardEvent(new ic(t.value.snapshot))}},{key:"activateRoutes",value:function(t,e,n){var i=t.value,r=e?e.value:null;if(nh(i),i===r)if(i.component){var o=n.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(i.component){var a=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){var s=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),gh(s.route)}else{var l=function(t){for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(i.snapshot),u=l?l.module.componentFactoryResolver:null;a.attachRef=null,a.route=i,a.resolver=u,a.outlet&&a.outlet.activateWith(i,u),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,n)}}]),t}();function gh(t){nh(t.value),t.children.forEach(gh)}function yh(t){return"function"==typeof t}function vh(t){return t instanceof Cc}var _h=function t(e){_classCallCheck(this,t),this.segmentGroup=e||null},bh=function t(e){_classCallCheck(this,t),this.urlTree=e};function xh(t){return new k((function(e){return e.error(new _h(t))}))}function wh(t){return new k((function(e){return e.error(new bh(t))}))}function Ch(t){return new k((function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(t,"'")))}))}var kh=function(){function t(e,n,i,r,o){_classCallCheck(this,t),this.configLoader=n,this.urlSerializer=i,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=e.get(Vt)}return _createClass(t,[{key:"apply",value:function(){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(H((function(e){return t.createUrlTree(e,t.urlTree.queryParams,t.urlTree.fragment)}))).pipe(_l((function(e){if(e instanceof bh)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof _h)throw t.noMatchError(e);throw e})))}},{key:"match",value:function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(H((function(n){return e.createUrlTree(n,t.queryParams,t.fragment)}))).pipe(_l((function(t){if(t instanceof _h)throw e.noMatchError(t);throw t})))}},{key:"noMatchError",value:function(t){return new Error("Cannot match any routes. URL Segment: '".concat(t.segmentGroup,"'"))}},{key:"createUrlTree",value:function(t,e,n){var i=t.segments.length>0?new kc([],{primary:t}):t;return new Cc(i,e,n)}},{key:"expandSegmentGroup",value:function(t,e,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(H((function(t){return new kc([],t)}))):this.expandSegment(t,n,e,n.segments,i,!0)}},{key:"expandChildren",value:function(t,e,n){var i=this;return function(n,r){if(0===Object.keys(n).length)return Xs({});var o=[],a=[],s={};return bc(n,(function(n,r){var l,u,c=(l=r,u=n,i.expandSegmentGroup(t,e,u,l)).pipe(H((function(t){return s[r]=t})));"primary"===r?o.push(c):a.push(c)})),Xs.apply(null,o.concat(a)).pipe(el(),vl(),H((function(){return s})))}(n.children)}},{key:"expandSegment",value:function(t,e,n,i,r,o){var a=this;return Xs.apply(void 0,_toConsumableArray(n)).pipe(H((function(s){return a.expandSegmentAgainstRoute(t,e,n,s,i,r,o).pipe(_l((function(t){if(t instanceof _h)return Xs(null);throw t})))})),el(),El((function(t){return!!t})),_l((function(t,n){if(t instanceof Ys||"EmptyError"===t.name){if(a.noLeftoversInUrl(e,i,r))return Xs(new kc([],{}));throw new _h(e)}throw t})))}},{key:"noLeftoversInUrl",value:function(t,e,n){return 0===e.length&&!t.children[n]}},{key:"expandSegmentAgainstRoute",value:function(t,e,n,i,r,o,a){return Th(i)!==o?xh(e):void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,r):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o):xh(e)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(t,e,n,i,r,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(t,e,n,i){var r=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?wh(o):this.lineralizeSegments(n,o).pipe(K((function(n){var o=new kc(n,{});return r.expandSegment(t,o,e,n,i,!1)})))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(t,e,n,i,r,o){var a=this,s=Eh(e,i,r),l=s.matched,u=s.consumedSegments,c=s.lastChild,h=s.positionalParamSegments;if(!l)return xh(e);var p=this.applyRedirectCommands(u,i.redirectTo,h);return i.redirectTo.startsWith("/")?wh(p):this.lineralizeSegments(i,p).pipe(K((function(i){return a.expandSegment(t,e,n,i.concat(r.slice(c)),o,!1)})))}},{key:"matchSegmentAgainstRoute",value:function(t,e,n,i){var r=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(H((function(t){return n._loadedConfig=t,new kc(i,{})}))):Xs(new kc(i,{}));var o=Eh(e,n,i),a=o.matched,s=o.consumedSegments,l=o.lastChild;if(!a)return xh(e);var u=i.slice(l);return this.getChildConfig(t,n,i).pipe(K((function(t){var n=t.module,i=t.routes,o=function(t,e,n,i){return n.length>0&&function(t,e,n){return n.some((function(n){return Ih(t,e,n)&&"primary"!==Th(n)}))}(t,n,i)?{segmentGroup:Sh(new kc(e,function(t,e){var n={};n.primary=e;var i,r=_createForOfIteratorHelper(t);try{for(r.s();!(i=r.n()).done;){var o=i.value;""===o.path&&"primary"!==Th(o)&&(n[Th(o)]=new kc([],{}))}}catch(a){r.e(a)}finally{r.f()}return n}(i,new kc(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some((function(n){return Ih(t,e,n)}))}(t,n,i)?{segmentGroup:Sh(new kc(t.segments,function(t,e,n,i){var r,o={},a=_createForOfIteratorHelper(n);try{for(a.s();!(r=a.n()).done;){var s=r.value;Ih(t,e,s)&&!i[Th(s)]&&(o[Th(s)]=new kc([],{}))}}catch(l){a.e(l)}finally{a.f()}return Object.assign({},i,o)}(t,n,i,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,s,u,i),a=o.segmentGroup,l=o.slicedSegments;return 0===l.length&&a.hasChildren()?r.expandChildren(n,i,a).pipe(H((function(t){return new kc(s,t)}))):0===i.length&&0===l.length?Xs(new kc(s,{})):r.expandSegment(n,a,i,l,"primary",!0).pipe(H((function(t){return new kc(s.concat(t.segments),t.children)})))})))}},{key:"getChildConfig",value:function(t,e,n){var i=this;return e.children?Xs(new pc(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Xs(e._loadedConfig):function(t,e,n){var i,r=e.canLoad;return r&&0!==r.length?Y(r).pipe(H((function(i){var r,o=t.get(i);if(function(t){return t&&yh(t.canLoad)}(o))r=o.canLoad(e,n);else{if(!yh(o))throw new Error("Invalid CanLoad guard");r=o(e,n)}return xc(r)}))).pipe(el(),(i=function(t){return!0===t},function(t){return t.lift(new Sl(i,void 0,t))})):Xs(!0)}(t.injector,e,n).pipe(K((function(n){return n?i.configLoader.load(t.injector,e).pipe(H((function(t){return e._loadedConfig=t,t}))):function(t){return new k((function(e){return e.error(cc("Cannot load children because the guard of the route \"path: '".concat(t.path,"'\" returned false")))}))}(e)}))):Xs(new pc([],t))}},{key:"lineralizeSegments",value:function(t,e){for(var n=[],i=e.root;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return Xs(n);if(i.numberOfChildren>1||!i.children.primary)return Ch(t.redirectTo);i=i.children.primary}}},{key:"applyRedirectCommands",value:function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}},{key:"applyRedirectCreatreUrlTree",value:function(t,e,n,i){var r=this.createSegmentGroup(t,e.root,n,i);return new Cc(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}},{key:"createQueryParams",value:function(t,e){var n={};return bc(t,(function(t,i){if("string"==typeof t&&t.startsWith(":")){var r=t.substring(1);n[i]=e[r]}else n[i]=t})),n}},{key:"createSegmentGroup",value:function(t,e,n,i){var r=this,o=this.createSegments(t,e.segments,n,i),a={};return bc(e.children,(function(e,o){a[o]=r.createSegmentGroup(t,e,n,i)})),new kc(o,a)}},{key:"createSegments",value:function(t,e,n,i){var r=this;return e.map((function(e){return e.path.startsWith(":")?r.findPosParam(t,e,i):r.findOrReturn(e,n)}))}},{key:"findPosParam",value:function(t,e,n){var i=n[e.path.substring(1)];if(!i)throw new Error("Cannot redirect to '".concat(t,"'. Cannot find '").concat(e.path,"'."));return i}},{key:"findOrReturn",value:function(t,e){var n,i=0,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.path===t.path)return e.splice(i),o;i++}}catch(a){r.e(a)}finally{r.f()}return t}}]),t}();function Eh(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var i=(e.matcher||hc)(n,t,e);return i?{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,positionalParamSegments:i.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Sh(t){if(1===t.numberOfChildren&&t.children.primary){var e=t.children.primary;return new kc(t.segments.concat(e.segments),e.children)}return t}function Ih(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Th(t){return t.outlet||"primary"}var Ph=function t(e){_classCallCheck(this,t),this.path=e,this.route=this.path[this.path.length-1]},Ah=function t(e,n){_classCallCheck(this,t),this.component=e,this.route=n};function Lh(t,e,n){var i=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(i?i.module.injector:n).get(t)}function Mh(t,e,n){var i=Zc(t),r=t.value;bc(i,(function(t,i){Mh(t,r.component?e?e.children.getContext(i):null:e,n)})),n.canDeactivateChecks.push(new Ah(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}var Rh=Symbol("INITIAL_VALUE");function Oh(){return Tl((function(t){return Js.apply(void 0,_toConsumableArray(t.map((function(t){return t.pipe(wl(1),Ml(Rh))})))).pipe(Rl((function(t,e){var n=!1;return e.reduce((function(t,i,r){if(t!==Rh)return t;if(i===Rh&&(n=!0),!n){if(!1===i)return i;if(r===e.length-1||vh(i))return i}return t}),t)}),Rh),nl((function(t){return t!==Rh})),H((function(t){return vh(t)?t:!0===t})),wl(1))}))}function Dh(t,e){return null!==t&&e&&e(new rc(t)),Xs(!0)}function Nh(t,e){return null!==t&&e&&e(new nc(t)),Xs(!0)}function Fh(t,e,n){var i=e.routeConfig?e.routeConfig.canActivate:null;return i&&0!==i.length?Xs(i.map((function(i){return tl((function(){var r,o=Lh(i,e,n);if(function(t){return t&&yh(t.canActivate)}(o))r=xc(o.canActivate(e,t));else{if(!yh(o))throw new Error("Invalid CanActivate guard");r=xc(o(e,t))}return r.pipe(El())}))}))).pipe(Oh()):Xs(!0)}function zh(t,e,n){var i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map((function(t){return function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)})).filter((function(t){return null!==t})).map((function(e){return tl((function(){return Xs(e.guards.map((function(r){var o,a=Lh(r,e.node,n);if(function(t){return t&&yh(t.canActivateChild)}(a))o=xc(a.canActivateChild(i,t));else{if(!yh(a))throw new Error("Invalid CanActivateChild guard");o=xc(a(i,t))}return o.pipe(El())}))).pipe(Oh())}))}));return Xs(r).pipe(Oh())}var Bh=function t(){_classCallCheck(this,t)},Vh=function(){function t(e,n,i,r,o,a){_classCallCheck(this,t),this.rootComponentType=e,this.config=n,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a}return _createClass(t,[{key:"recognize",value:function(){try{var t=qh(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new Qc([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Xc(n,e),r=new $c(this.url,i);return this.inheritParamsAndData(r._root),Xs(r)}catch(o){return new k((function(t){return t.error(o)}))}}},{key:"inheritParamsAndData",value:function(t){var e=this,n=t.value,i=Jc(n,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),t.children.forEach((function(t){return e.inheritParamsAndData(t)}))}},{key:"processSegmentGroup",value:function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}},{key:"processChildren",value:function(t,e){var n,i=this,r=Ic(e,(function(e,n){return i.processSegmentGroup(t,e,n)}));return n={},r.forEach((function(t){var e=n[t.value.outlet];if(e){var i=e.url.map((function(t){return t.toString()})).join("/"),r=t.value.url.map((function(t){return t.toString()})).join("/");throw new Error("Two segments cannot have the same outlet name: '".concat(i,"' and '").concat(r,"'."))}n[t.value.outlet]=t.value})),r.sort((function(t,e){return"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)})),r}},{key:"processSegment",value:function(t,e,n,i){var r,o=_createForOfIteratorHelper(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;try{return this.processSegmentAgainstRoute(a,e,n,i)}catch(s){if(!(s instanceof Bh))throw s}}}catch(l){o.e(l)}finally{o.f()}if(this.noLeftoversInUrl(e,n,i))return[];throw new Bh}},{key:"noLeftoversInUrl",value:function(t,e,n){return 0===e.length&&!t.children[n]}},{key:"processSegmentAgainstRoute",value:function(t,e,n,i){if(t.redirectTo)throw new Bh;if((t.outlet||"primary")!==i)throw new Bh;var r,o=[],a=[];if("**"===t.path){var s=n.length>0?_c(n).parameters:{};r=new Qc(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xh(t),i,t.component,t,Uh(e),jh(e)+n.length,Zh(t))}else{var l=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Bh;return{consumedSegments:[],lastChild:0,parameters:{}}}var i=(e.matcher||hc)(n,t,e);if(!i)throw new Bh;var r={};bc(i.posParams,(function(t,e){r[e]=t.path}));var o=i.consumed.length>0?Object.assign({},r,i.consumed[i.consumed.length-1].parameters):r;return{consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o}}(e,t,n);o=l.consumedSegments,a=n.slice(l.lastChild),r=new Qc(o,l.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xh(t),i,t.component,t,Uh(e),jh(e)+o.length,Zh(t))}var u=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),c=qh(e,o,a,u,this.relativeLinkResolution),h=c.segmentGroup,p=c.slicedSegments;if(0===p.length&&h.hasChildren()){var f=this.processChildren(u,h);return[new Xc(r,f)]}if(0===u.length&&0===p.length)return[new Xc(r,[])];var d=this.processSegment(u,h,p,"primary");return[new Xc(r,d)]}}]),t}();function Uh(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function jh(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function qh(t,e,n,i,r){if(n.length>0&&function(t,e,n){return n.some((function(n){return Gh(t,e,n)&&"primary"!==Hh(n)}))}(t,n,i)){var o=new kc(e,function(t,e,n,i){var r={};r.primary=i,i._sourceSegment=t,i._segmentIndexShift=e.length;var o,a=_createForOfIteratorHelper(n);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(""===s.path&&"primary"!==Hh(s)){var l=new kc([],{});l._sourceSegment=t,l._segmentIndexShift=e.length,r[Hh(s)]=l}}}catch(u){a.e(u)}finally{a.f()}return r}(t,e,i,new kc(n,t.children)));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some((function(n){return Gh(t,e,n)}))}(t,n,i)){var a=new kc(t.segments,function(t,e,n,i,r,o){var a,s={},l=_createForOfIteratorHelper(i);try{for(l.s();!(a=l.n()).done;){var u=a.value;if(Gh(t,n,u)&&!r[Hh(u)]){var c=new kc([],{});c._sourceSegment=t,c._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Hh(u)]=c}}}catch(h){l.e(h)}finally{l.f()}return Object.assign({},r,s)}(t,e,n,i,t.children,r));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:n}}var s=new kc(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function Gh(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Hh(t){return t.outlet||"primary"}function Xh(t){return t.data||{}}function Zh(t){return t.resolve||{}}function Wh(t,e,n,i){var r=Lh(t,e,i);return xc(r.resolve?r.resolve(e,n):r(e,n))}function Yh(t){return function(e){return e.pipe(Tl((function(e){var n=t(e);return n?Y(n).pipe(H((function(){return e}))):Y([e])})))}}var Kh=function t(){_classCallCheck(this,t)},Jh=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"shouldDetach",value:function(t){return!1}},{key:"store",value:function(t,e){}},{key:"shouldAttach",value:function(t){return!1}},{key:"retrieve",value:function(t){return null}},{key:"shouldReuseRoute",value:function(t,e){return t.routeConfig===e.routeConfig}}]),t}(),Qh=new Pt("ROUTES"),$h=function(){function t(e,n,i,r){_classCallCheck(this,t),this.loader=e,this.compiler=n,this.onLoadStartListener=i,this.onLoadEndListener=r}return _createClass(t,[{key:"load",value:function(t,e){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(H((function(i){n.onLoadEndListener&&n.onLoadEndListener(e);var r=i.create(t);return new pc(vc(r.injector.get(Qh)).map(gc),r)})))}},{key:"loadModuleFactory",value:function(t){var e=this;return"string"==typeof t?Y(this.loader.load(t)):xc(t()).pipe(K((function(t){return t instanceof Ut?Xs(t):Y(e.compiler.compileModuleAsync(t))})))}}]),t}(),tp=function t(){_classCallCheck(this,t)},ep=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"shouldProcessUrl",value:function(t){return!0}},{key:"extract",value:function(t){return t}},{key:"merge",value:function(t,e){return t}}]),t}();function np(t){throw t}function ip(t,e,n){return e.parse("/")}function rp(t,e){return Xs(null)}var op=function(){function t(e,n,i,r,o,a,s,l){var u=this;_classCallCheck(this,t),this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=i,this.location=r,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new L,this.errorHandler=np,this.malformedUriErrorHandler=ip,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:rp,afterPreactivation:rp},this.urlHandlingStrategy=new ep,this.routeReuseStrategy=new Jh,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(Vt),this.console=o.get(Lr);var c=o.get(Yr);this.isNgZoneEnabled=c instanceof Yr,this.resetConfig(l),this.currentUrlTree=new Cc(new kc([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new $h(a,s,(function(t){return u.triggerEvent(new tc(t))}),(function(t){return u.triggerEvent(new ec(t))})),this.routerState=Yc(this.currentUrlTree,this.rootComponentType),this.transitions=new Zs({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return _createClass(t,[{key:"setupNavigations",value:function(t){var e=this,n=this.events;return t.pipe(nl((function(t){return 0!==t.id})),H((function(t){return Object.assign({},t,{extractedUrl:e.urlHandlingStrategy.extract(t.rawUrl)})})),Tl((function(t){var i,r,o,a=!1,s=!1;return Xs(t).pipe(cl((function(t){e.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:e.lastSuccessfulNavigation?Object.assign({},e.lastSuccessfulNavigation,{previousNavigation:null}):null}})),Tl((function(t){var i,r,o,a,s=!e.navigated||t.extractedUrl.toString()!==e.browserUrlTree.toString();if(("reload"===e.onSameUrlNavigation||s)&&e.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Xs(t).pipe(Tl((function(t){var i=e.transitions.getValue();return n.next(new Hu(t.id,e.serializeUrl(t.extractedUrl),t.source,t.restoredState)),i!==e.transitions.getValue()?qs:[t]})),Tl((function(t){return Promise.resolve(t)})),(i=e.ngModule.injector,r=e.configLoader,o=e.urlSerializer,a=e.config,function(t){return t.pipe(Tl((function(t){return function(t,e,n,i,r){return new kh(t,e,n,i,r).apply()}(i,r,o,t.extractedUrl,a).pipe(H((function(e){return Object.assign({},t,{urlAfterRedirects:e})})))})))}),cl((function(t){e.currentNavigation=Object.assign({},e.currentNavigation,{finalUrl:t.urlAfterRedirects})})),function(t,n,i,r,o){return function(i){return i.pipe(K((function(i){return function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";return new Vh(t,e,n,i,r,o).recognize()}(t,n,i.urlAfterRedirects,(a=i.urlAfterRedirects,e.serializeUrl(a)),r,o).pipe(H((function(t){return Object.assign({},i,{targetSnapshot:t})})));var a})))}}(e.rootComponentType,e.config,0,e.paramsInheritanceStrategy,e.relativeLinkResolution),cl((function(t){"eager"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)})),cl((function(t){var i=new Yu(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);n.next(i)})));if(s&&e.rawUrlTree&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){var l=t.id,u=t.extractedUrl,c=t.source,h=t.restoredState,p=t.extras,f=new Hu(l,e.serializeUrl(u),c,h);n.next(f);var d=Yc(u,e.rootComponentType).snapshot;return Xs(Object.assign({},t,{targetSnapshot:d,urlAfterRedirects:u,extras:Object.assign({},p,{skipLocationChange:!1,replaceUrl:!1})}))}return e.rawUrlTree=t.rawUrl,e.browserUrlTree=t.urlAfterRedirects,t.resolve(null),qs})),Yh((function(t){var n=t.targetSnapshot,i=t.id,r=t.extractedUrl,o=t.rawUrl,a=t.extras,s=a.skipLocationChange,l=a.replaceUrl;return e.hooks.beforePreactivation(n,{navigationId:i,appliedUrlTree:r,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!l})})),cl((function(t){var n=new Ku(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})),H((function(t){return Object.assign({},t,{guards:(n=t.targetSnapshot,i=t.currentSnapshot,r=e.rootContexts,o=n._root,function t(e,n,i,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=Zc(n);return e.children.forEach((function(e){!function(e,n,i,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=e.value,s=n?n.value:null,l=i?i.getContext(e.value.outlet):null;if(s&&a.routeConfig===s.routeConfig){var u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Sc(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Sc(t.url,e.url)||!yc(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ih(t,e)||!yc(t.queryParams,e.queryParams);case"paramsChange":default:return!ih(t,e)}}(s,a,a.routeConfig.runGuardsAndResolvers);u?o.canActivateChecks.push(new Ph(r)):(a.data=s.data,a._resolvedData=s._resolvedData),t(e,n,a.component?l?l.children:null:i,r,o),u&&o.canDeactivateChecks.push(new Ah(l&&l.outlet&&l.outlet.component||null,s))}else s&&Mh(n,l,o),o.canActivateChecks.push(new Ph(r)),t(e,null,a.component?l?l.children:null:i,r,o)}(e,a[e.value.outlet],i,r.concat([e.value]),o),delete a[e.value.outlet]})),bc(a,(function(t,e){return Mh(t,i.getContext(e),o)})),o}(o,i?i._root:null,r,[o.value]))});var n,i,r,o})),function(t,e){return function(n){return n.pipe(K((function(n){var i=n.targetSnapshot,r=n.currentSnapshot,o=n.guards,a=o.canActivateChecks,s=o.canDeactivateChecks;return 0===s.length&&0===a.length?Xs(Object.assign({},n,{guardsResult:!0})):function(t,e,n,i){return Y(t).pipe(K((function(t){return function(t,e,n,i,r){var o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Xs(o.map((function(o){var a,s=Lh(o,e,r);if(function(t){return t&&yh(t.canDeactivate)}(s))a=xc(s.canDeactivate(t,e,n,i));else{if(!yh(s))throw new Error("Invalid CanDeactivate guard");a=xc(s(t,e,n,i))}return a.pipe(El())}))).pipe(Oh()):Xs(!0)}(t.component,t.route,n,e,i)})),El((function(t){return!0!==t}),!0))}(s,i,r,t).pipe(K((function(n){return n&&"boolean"==typeof n?function(t,e,n,i){return Y(e).pipe(Nl((function(e){return Y([Nh(e.route.parent,i),Dh(e.route,i),zh(t,e.path,n),Fh(t,e.route,n)]).pipe(el(),El((function(t){return!0!==t}),!0))})),El((function(t){return!0!==t}),!0))}(i,a,t,e):Xs(n)})),H((function(t){return Object.assign({},n,{guardsResult:t})})))})))}}(e.ngModule.injector,(function(t){return e.triggerEvent(t)})),cl((function(t){if(vh(t.guardsResult)){var n=cc('Redirecting to "'.concat(e.serializeUrl(t.guardsResult),'"'));throw n.url=t.guardsResult,n}})),cl((function(t){var n=new Ju(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);e.triggerEvent(n)})),nl((function(t){if(!t.guardsResult){e.resetUrlToCurrentUrlTree();var i=new Zu(t.id,e.serializeUrl(t.extractedUrl),"");return n.next(i),t.resolve(!1),!1}return!0})),Yh((function(t){if(t.guards.canActivateChecks.length)return Xs(t).pipe(cl((function(t){var n=new Qu(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})),(n=e.paramsInheritanceStrategy,i=e.ngModule.injector,function(t){return t.pipe(K((function(t){var e=t.targetSnapshot,r=t.guards.canActivateChecks;return r.length?Y(r).pipe(Nl((function(t){return function(t,e,n,i){return function(t,e,n,i){var r=Object.keys(t);if(0===r.length)return Xs({});if(1===r.length){var o=r[0];return Wh(t[o],e,n,i).pipe(H((function(t){return _defineProperty({},o,t)})))}var a={};return Y(r).pipe(K((function(r){return Wh(t[r],e,n,i).pipe(H((function(t){return a[r]=t,t})))}))).pipe(vl(),H((function(){return a})))}(t._resolve,t,e,i).pipe(H((function(e){return t._resolvedData=e,t.data=Object.assign({},t.data,Jc(t,n).resolve),null})))}(t.route,e,n,i)})),function(t,e){return arguments.length>=2?function(n){return x(Rl(t,e),sl(1),ml(e))(n)}:function(e){return x(Rl((function(e,n,i){return t(e,n,i+1)})),sl(1))(e)}}((function(t,e){return t})),H((function(e){return t}))):Xs(t)})))}),cl((function(t){var n=new $u(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})));var n,i})),Yh((function(t){var n=t.targetSnapshot,i=t.id,r=t.extractedUrl,o=t.rawUrl,a=t.extras,s=a.skipLocationChange,l=a.replaceUrl;return e.hooks.afterPreactivation(n,{navigationId:i,appliedUrlTree:r,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!l})})),H((function(t){var n=function(t,e,n){var i=function t(e,n,i){if(i&&e.shouldReuseRoute(n.value,i.value.snapshot)){var r=i.value;r._futureSnapshot=n.value;var o=function(e,n,i){return n.children.map((function(n){var r,o=_createForOfIteratorHelper(i.children);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(e.shouldReuseRoute(a.value.snapshot,n.value))return t(e,n,a)}}catch(s){o.e(s)}finally{o.f()}return t(e,n)}))}(e,n,i);return new Xc(r,o)}var a=e.retrieve(n.value);if(a){var s=a.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(var i=0;i<e.children.length;++i)t(e.children[i],n.children[i])}(n,s),s}var l,u=new Kc(new Zs((l=n.value).url),new Zs(l.params),new Zs(l.queryParams),new Zs(l.fragment),new Zs(l.data),l.outlet,l.component,l),c=n.children.map((function(n){return t(e,n)}));return new Xc(u,c)}(t,e._root,n?n._root:void 0);return new Wc(i,e)}(e.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign({},t,{targetRouterState:n})})),cl((function(t){e.currentUrlTree=t.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(e.currentUrlTree,t.rawUrl),e.routerState=t.targetRouterState,"deferred"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)})),(i=e.rootContexts,r=e.routeReuseStrategy,o=function(t){return e.triggerEvent(t)},H((function(t){return new mh(r,t.targetRouterState,t.currentRouterState,o).activate(i),t}))),cl({next:function(){a=!0},complete:function(){a=!0}}),Fl((function(){if(!a&&!s){e.resetUrlToCurrentUrlTree();var i=new Zu(t.id,e.serializeUrl(t.extractedUrl),"Navigation ID ".concat(t.id," is not equal to the current navigation id ").concat(e.navigationId));n.next(i),t.resolve(!1)}e.currentNavigation=null})),_l((function(i){if(s=!0,(l=i)&&l.ngNavigationCancelingError){var r=vh(i.url);r||(e.navigated=!0,e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));var o=new Zu(t.id,e.serializeUrl(t.extractedUrl),i.message);n.next(o),t.resolve(!1),r&&e.navigateByUrl(i.url)}else{e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);var a=new Wu(t.id,e.serializeUrl(t.extractedUrl),i);n.next(a);try{t.resolve(e.errorHandler(i))}catch(u){t.reject(u)}}var l;return qs})))})))}},{key:"resetRootComponentType",value:function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}},{key:"setTransition",value:function(t){this.transitions.next(Object.assign({},this.getTransition(),t))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe((function(e){var n=t.parseUrl(e.url),i="popstate"===e.type?"popstate":"hashchange",r=e.state&&e.state.navigationId?e.state:null;setTimeout((function(){t.scheduleNavigation(n,i,r,{replaceUrl:!0})}),0)})))}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(t){this.events.next(t)}},{key:"resetConfig",value:function(t){fc(t),this.config=t.map(gc),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}},{key:"createUrlTree",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.relativeTo,i=e.queryParams,r=e.fragment,o=e.preserveQueryParams,a=e.queryParamsHandling,s=e.preserveFragment;Qt()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var l=n||this.routerState.root,u=s?this.currentUrlTree.fragment:r,c=null;if(a)switch(a){case"merge":c=Object.assign({},this.currentUrlTree.queryParams,i);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=i||null}else c=o?this.currentUrlTree.queryParams:i||null;return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,i,r){if(0===n.length)return oh(e.root,e.root,e,i,r);var o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new ah(!0,0,t);var e=0,n=!1,i=t.reduce((function(t,i,r){if("object"==typeof i&&null!=i){if(i.outlets){var o={};return bc(i.outlets,(function(t,e){o[e]="string"==typeof t?t.split("/"):t})),[].concat(_toConsumableArray(t),[{outlets:o}])}if(i.segmentPath)return[].concat(_toConsumableArray(t),[i.segmentPath])}return"string"!=typeof i?[].concat(_toConsumableArray(t),[i]):0===r?(i.split("/").forEach((function(i,r){0==r&&"."===i||(0==r&&""===i?n=!0:".."===i?e++:""!=i&&t.push(i))})),t):[].concat(_toConsumableArray(t),[i])}),[]);return new ah(n,e,i)}(n);if(o.toRoot())return oh(e.root,new kc([],{}),e,i,r);var a=function(t,e,n){if(t.isAbsolute)return new sh(e.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new sh(n.snapshot._urlSegment,!0,0);var i=rh(t.commands[0])?0:1;return function(t,e,n){for(var i=t,r=e,o=n;o>r;){if(o-=r,!(i=i.parent))throw new Error("Invalid number of '../'");r=i.segments.length}return new sh(i,!1,r-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(o,e,t),s=a.processChildren?ch(a.segmentGroup,a.index,o.commands):uh(a.segmentGroup,a.index,o.commands);return oh(a.segmentGroup,s,e,i,r)}(l,this.currentUrlTree,t,c,u)}},{key:"navigateByUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};Qt()&&this.isNgZoneEnabled&&!Yr.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=vh(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}},{key:"navigate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(e))}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}},{key:"serializeUrl",value:function(t){return this.urlSerializer.serialize(t)}},{key:"parseUrl",value:function(t){var e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}},{key:"isActive",value:function(t,e){if(vh(t))return wc(this.currentUrlTree,t,e);var n=this.parseUrl(t);return wc(this.currentUrlTree,n,e)}},{key:"removeEmptyProps",value:function(t){return Object.keys(t).reduce((function(e,n){var i=t[n];return null!=i&&(e[n]=i),e}),{})}},{key:"processNavigations",value:function(){var t=this;this.navigations.subscribe((function(e){t.navigated=!0,t.lastSuccessfulId=e.id,t.events.next(new Xu(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(t.currentUrlTree))),t.lastSuccessfulNavigation=t.currentNavigation,t.currentNavigation=null,e.resolve(!0)}),(function(e){t.console.warn("Unhandled Navigation Error: ")}))}},{key:"scheduleNavigation",value:function(t,e,n,i){var r=this.getTransition();if(r&&"imperative"!==e&&"imperative"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(r&&"hashchange"==e&&"popstate"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(r&&"popstate"==e&&"hashchange"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);var o=null,a=null,s=new Promise((function(t,e){o=t,a=e})),l=++this.navigationId;return this.setTransition({id:l,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:i,resolve:o,reject:a,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch((function(t){return Promise.reject(t)}))}},{key:"setBrowserUrl",value:function(t,e,n,i){var r=this.urlSerializer.serialize(t);i=i||{},this.location.isCurrentPathEqualTo(r)||e?this.location.replaceState(r,"",Object.assign({},i,{navigationId:n})):this.location.go(r,"",Object.assign({},i,{navigationId:n}))}},{key:"resetStateAndUrl",value:function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}}]),t}(),ap=function t(){_classCallCheck(this,t),this.outlet=null,this.route=null,this.resolver=null,this.children=new sp,this.attachRef=null},sp=function(){function t(){_classCallCheck(this,t),this.contexts=new Map}return _createClass(t,[{key:"onChildOutletCreated",value:function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}},{key:"onChildOutletDestroyed",value:function(t){var e=this.getContext(t);e&&(e.outlet=null)}},{key:"onOutletDeactivated",value:function(){var t=this.contexts;return this.contexts=new Map,t}},{key:"onOutletReAttached",value:function(t){this.contexts=t}},{key:"getOrCreateContext",value:function(t){var e=this.getContext(t);return e||(e=new ap,this.contexts.set(t,e)),e}},{key:"getContext",value:function(t){return this.contexts.get(t)||null}}]),t}(),lp=function(){function t(e,n,i,r,o){_classCallCheck(this,t),this.parentContexts=e,this.location=n,this.resolver=i,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new br,this.deactivateEvents=new br,this.name=r||"primary",e.onChildOutletCreated(this.name,this)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t}},{key:"attach",value:function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}},{key:"deactivate",value:function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}},{key:"activateWith",value:function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),i=this.parentContexts.getOrCreateContext(this.name).children,r=new up(t,i,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}}]),t}(),up=function(){function t(e,n,i){_classCallCheck(this,t),this.route=e,this.childContexts=n,this.parent=i}return _createClass(t,[{key:"get",value:function(t,e){return t===Kc?this.route:t===sp?this.childContexts:this.parent.get(t,e)}}]),t}(),cp=function t(){_classCallCheck(this,t)},hp=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"preload",value:function(t,e){return e().pipe(_l((function(){return Xs(null)})))}}]),t}(),pp=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"preload",value:function(t,e){return Xs(null)}}]),t}(),fp=function(){function t(e,n,i,r,o){_classCallCheck(this,t),this.router=e,this.injector=r,this.preloadingStrategy=o,this.loader=new $h(n,i,(function(t){return e.triggerEvent(new tc(t))}),(function(t){return e.triggerEvent(new ec(t))}))}return _createClass(t,[{key:"setUpPreloading",value:function(){var t=this;this.subscription=this.router.events.pipe(nl((function(t){return t instanceof Xu})),Nl((function(){return t.preload()}))).subscribe((function(){}))}},{key:"preload",value:function(){var t=this.injector.get(Vt);return this.processRoutes(t,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"processRoutes",value:function(t,e){var n,i=[],r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.loadChildren&&!o.canLoad&&o._loadedConfig){var a=o._loadedConfig;i.push(this.processRoutes(a.module,a.routes))}else o.loadChildren&&!o.canLoad?i.push(this.preloadConfig(t,o)):o.children&&i.push(this.processRoutes(t,o.children))}}catch(s){r.e(s)}finally{r.f()}return Y(i).pipe(tt(),H((function(t){})))}},{key:"preloadConfig",value:function(t,e){var n=this;return this.preloadingStrategy.preload(e,(function(){return n.loader.load(t.injector,e).pipe(K((function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)})))}))}}]),t}(),dp=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,t),this.router=e,this.viewportScroller=n,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}return _createClass(t,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var t=this;return this.router.events.subscribe((function(e){e instanceof Hu?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Xu&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))}))}},{key:"consumeScrollEvents",value:function(){var t=this;return this.router.events.subscribe((function(e){e instanceof ac&&(e.position?"top"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):"enabled"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))}))}},{key:"scheduleScrollEvent",value:function(t,e){this.router.triggerEvent(new ac(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),t}(),mp=new Pt("ROUTER_CONFIGURATION"),gp=new Pt("ROUTER_FORROOT_GUARD"),yp=[cs,{provide:Tc,useClass:Pc},{provide:op,useFactory:kp,deps:[fo,Tc,sp,cs,Ae,go,Vr,Qh,mp,[tp,new pt],[Kh,new pt]]},sp,{provide:Kc,useFactory:Ep,deps:[op]},{provide:go,useClass:_o},fp,pp,hp,{provide:mp,useValue:{enableTracing:!1}}];function vp(){return new so("Router",op)}var _p=function(){function t(e,n){_classCallCheck(this,t)}return _createClass(t,null,[{key:"forRoot",value:function(e,n){return{ngModule:t,providers:[yp,Cp(e),{provide:gp,useFactory:wp,deps:[[op,new pt,new dt]]},{provide:mp,useValue:n||{}},{provide:ls,useFactory:xp,deps:[as,[new ht(us),new pt],mp]},{provide:dp,useFactory:bp,deps:[op,Us,mp]},{provide:cp,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:pp},{provide:so,multi:!0,useFactory:vp},[Sp,{provide:Cr,multi:!0,useFactory:Ip,deps:[Sp]},{provide:Pp,useFactory:Tp,deps:[Sp]},{provide:Ar,multi:!0,useExisting:Pp}]]}}},{key:"forChild",value:function(e){return{ngModule:t,providers:[Cp(e)]}}}]),t}();function bp(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new dp(t,e,n)}function xp(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new ps(t,e):new fs(t,e)}function wp(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Cp(t){return[{provide:ze,multi:!0,useValue:t},{provide:Qh,multi:!0,useValue:t}]}function kp(t,e,n,i,r,o,a,s){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},u=arguments.length>9?arguments[9]:void 0,c=arguments.length>10?arguments[10]:void 0,h=new op(null,e,n,i,r,o,a,vc(s));if(u&&(h.urlHandlingStrategy=u),c&&(h.routeReuseStrategy=c),l.errorHandler&&(h.errorHandler=l.errorHandler),l.malformedUriErrorHandler&&(h.malformedUriErrorHandler=l.malformedUriErrorHandler),l.enableTracing){var p=Ul();h.events.subscribe((function(t){p.logGroup("Router Event: "+t.constructor.name),p.log(t.toString()),p.log(t),p.logGroupEnd()}))}return l.onSameUrlNavigation&&(h.onSameUrlNavigation=l.onSameUrlNavigation),l.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=l.paramsInheritanceStrategy),l.urlUpdateStrategy&&(h.urlUpdateStrategy=l.urlUpdateStrategy),l.relativeLinkResolution&&(h.relativeLinkResolution=l.relativeLinkResolution),h}function Ep(t){return t.routerState.root}var Sp=function(){function t(e){_classCallCheck(this,t),this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new L}return _createClass(t,[{key:"appInitializer",value:function(){var t=this;return this.injector.get(ss,Promise.resolve(null)).then((function(){var e=null,n=new Promise((function(t){return e=t})),i=t.injector.get(op),r=t.injector.get(mp);if(t.isLegacyDisabled(r)||t.isLegacyEnabled(r))e(!0);else if("disabled"===r.initialNavigation)i.setUpLocationChangeListener(),e(!0);else{if("enabled"!==r.initialNavigation)throw new Error("Invalid initialNavigation options: '".concat(r.initialNavigation,"'"));i.hooks.afterPreactivation=function(){return t.initNavigation?Xs(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},i.initialNavigation()}return n}))}},{key:"bootstrapListener",value:function(t){var e=this.injector.get(mp),n=this.injector.get(fp),i=this.injector.get(dp),r=this.injector.get(op),o=this.injector.get(fo);t===o.components[0]&&(this.isLegacyEnabled(e)?r.initialNavigation():this.isLegacyDisabled(e)&&r.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),r.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"isLegacyEnabled",value:function(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}},{key:"isLegacyDisabled",value:function(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}]),t}();function Ip(t){return t.appInitializer.bind(t)}function Tp(t){return t.bootstrapListener.bind(t)}var Pp=new Pt("Router Initializer"),Ap=Hn({encapsulation:2,styles:[],data:{}});function Lp(t){return Jo(0,[(t()(),Oo(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),$i(1,212992,null,0,lp,[sp,Pn,$e,[8,null],Se],null,null)],(function(t,e){t(e,1,0)}),null)}var Mp,Rp=Pi("ng-component",sc,(function(t){return Jo(0,[(t()(),Oo(0,0,null,null,1,"ng-component",[],null,null,null,Lp,Ap)),$i(1,49152,null,0,sc,[],null,null)],null,null)}),{},{},[]),Op=new cn("8.2.3");function Dp(t){return null!=t&&""+t!="false"}function Np(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function Fp(t){return Array.isArray(t)?t:[t]}function zp(t){return null==t?"":"string"==typeof t?t:t+"px"}function Bp(t){return t instanceof rn?t.nativeElement:t}try{Mp="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(oI){Mp=!1}var Vp,Up,jp,qp=((Up=function t(e){_classCallCheck(this,t),this._platformId=e,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Mp)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}).ngInjectableDef=yt({factory:function(){return new Up(Nt(Pr,8))},token:Up,providedIn:"root"}),Up),Gp=function t(){_classCallCheck(this,t)},Hp=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Xp(){if(Vp)return Vp;if("object"!=typeof document||!document)return Vp=new Set(Hp);var t=document.createElement("input");return Vp=new Set(Hp.filter((function(e){return t.setAttribute("type",e),t.type===e})))}function Zp(t){return function(){if(null==jp&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return jp=!0}}))}finally{jp=jp||!1}return jp}()?t:!!t.capture}function Wp(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.length?n.some((function(e){return t[e]})):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var Yp=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,t,i)).scheduler=t,r.work=i,r.pending=!1,r}return _createClass(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=t;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(i,this.id,e),this}},{key:"requestAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(t.flush.bind(t,this),n)}},{key:"recycleAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}},{key:"execute",value:function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(t,e){var n=!1,i=void 0;try{this.work(t)}catch(r){n=!0,i=!!r&&r||new Error(r)}if(n)return this.unsubscribe(),i}},{key:"_unsubscribe",value:function(){var t=this.id,e=this.scheduler,n=e.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}]),n}(function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){return _classCallCheck(this,n),e.call(this)}return _createClass(n,[{key:"schedule",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this}}]),n}(d)),Kp=function(){var t=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.now;_classCallCheck(this,t),this.SchedulerAction=e,this.now=n}return _createClass(t,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,t).schedule(n,e)}}]),t}();return t.now=function(){return Date.now()},t}(),Jp=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kp.now;return _classCallCheck(this,n),(i=e.call(this,t,(function(){return n.delegate&&n.delegate!==_assertThisInitialized(i)?n.delegate.now():r()}))).actions=[],i.active=!1,i.scheduled=void 0,i}return _createClass(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(t,e,i):_get(_getPrototypeOf(n.prototype),"schedule",this).call(this,t,e,i)}},{key:"flush",value:function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}}]),n}(Kp),Qp=new Jp(Yp);function $p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qp;return function(n){return n.lift(new tf(t,e))}}var tf=function(){function t(e,n){_classCallCheck(this,t),this.dueTime=e,this.scheduler=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new ef(t,this.dueTime,this.scheduler))}}]),t}(),ef=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;return _classCallCheck(this,n),(o=e.call(this,t)).dueTime=i,o.scheduler=r,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return _createClass(n,[{key:"_next",value:function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(nf,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}},{key:"clearDebounce",value:function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}]),n}(y);function nf(t){t.debouncedNext()}function rf(t,e){return(t.getAttribute(e)||"").match(/\S+/g)||[]}var of,af,sf=0,lf=new Map,uf=null,cf=((of=function(){function t(e){_classCallCheck(this,t),this._document=e}return _createClass(t,[{key:"describe",value:function(t,e){this._canBeDescribed(t,e)&&("string"!=typeof e?(this._setMessageId(e),lf.set(e,{messageElement:e,referenceCount:0})):lf.has(e)||this._createMessageElement(e),this._isElementDescribedByMessage(t,e)||this._addMessageReference(t,e))}},{key:"removeDescription",value:function(t,e){if(this._isElementNode(t)){if(this._isElementDescribedByMessage(t,e)&&this._removeMessageReference(t,e),"string"==typeof e){var n=lf.get(e);n&&0===n.referenceCount&&this._deleteMessageElement(e)}uf&&0===uf.childNodes.length&&this._deleteMessagesContainer()}}},{key:"ngOnDestroy",value:function(){for(var t=this._document.querySelectorAll("[cdk-describedby-host]"),e=0;e<t.length;e++)this._removeCdkDescribedByReferenceIds(t[e]),t[e].removeAttribute("cdk-describedby-host");uf&&this._deleteMessagesContainer(),lf.clear()}},{key:"_createMessageElement",value:function(t){var e=this._document.createElement("div");this._setMessageId(e),e.textContent=t,this._createMessagesContainer(),uf.appendChild(e),lf.set(t,{messageElement:e,referenceCount:0})}},{key:"_setMessageId",value:function(t){t.id||(t.id="cdk-describedby-message-"+sf++)}},{key:"_deleteMessageElement",value:function(t){var e=lf.get(t),n=e&&e.messageElement;uf&&n&&uf.removeChild(n),lf.delete(t)}},{key:"_createMessagesContainer",value:function(){if(!uf){var t=this._document.getElementById("cdk-describedby-message-container");t&&t.parentNode.removeChild(t),(uf=this._document.createElement("div")).id="cdk-describedby-message-container",uf.setAttribute("aria-hidden","true"),uf.style.display="none",this._document.body.appendChild(uf)}}},{key:"_deleteMessagesContainer",value:function(){uf&&uf.parentNode&&(uf.parentNode.removeChild(uf),uf=null)}},{key:"_removeCdkDescribedByReferenceIds",value:function(t){var e=rf(t,"aria-describedby").filter((function(t){return 0!=t.indexOf("cdk-describedby-message")}));t.setAttribute("aria-describedby",e.join(" "))}},{key:"_addMessageReference",value:function(t,e){var n,i,r,o,a=lf.get(e);n=t,i="aria-describedby",r=a.messageElement.id,(o=rf(n,i)).some((function(t){return t.trim()==r.trim()}))||(o.push(r.trim()),n.setAttribute(i,o.join(" "))),t.setAttribute("cdk-describedby-host",""),a.referenceCount++}},{key:"_removeMessageReference",value:function(t,e){var n,i,r,o,a=lf.get(e);a.referenceCount--,n=t,i="aria-describedby",r=a.messageElement.id,(o=rf(n,i).filter((function(t){return t!=r.trim()}))).length?n.setAttribute(i,o.join(" ")):n.removeAttribute(i),t.removeAttribute("cdk-describedby-host")}},{key:"_isElementDescribedByMessage",value:function(t,e){var n=rf(t,"aria-describedby"),i=lf.get(e),r=i&&i.messageElement.id;return!!r&&-1!=n.indexOf(r)}},{key:"_canBeDescribed",value:function(t,e){if(!this._isElementNode(t))return!1;if(e&&"object"==typeof e)return!0;var n=null==e?"":(""+e).trim(),i=t.getAttribute("aria-label");return!(!n||i&&i.trim()===n)}},{key:"_isElementNode",value:function(t){return t.nodeType===this._document.ELEMENT_NODE}}]),t}()).ngInjectableDef=yt({factory:function(){return new of(Nt(Vs))},token:of,providedIn:"root"}),of),hf=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.apply(this,arguments))._origin="program",t}return _createClass(n,[{key:"setFocusOrigin",value:function(t){return this._origin=t,this}},{key:"setActiveItem",value:function(t){_get(_getPrototypeOf(n.prototype),"setActiveItem",this).call(this,t),this.activeItem&&this.activeItem.focus(this._origin)}}]),n}(function(){function t(e){var n=this;_classCallCheck(this,t),this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new L,this._typeaheadSubscription=d.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._skipPredicateFn=function(t){return t.disabled},this._pressedLetters=[],this.tabOut=new L,this.change=new L,e instanceof wr&&e.changes.subscribe((function(t){if(n._activeItem){var e=t.toArray().indexOf(n._activeItem);e>-1&&e!==n._activeItemIndex&&(n._activeItemIndex=e)}}))}return _createClass(t,[{key:"skipPredicate",value:function(t){return this._skipPredicateFn=t,this}},{key:"withWrap",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._wrap=t,this}},{key:"withVerticalOrientation",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._vertical=t,this}},{key:"withHorizontalOrientation",value:function(t){return this._horizontal=t,this}},{key:"withAllowedModifierKeys",value:function(t){return this._allowedModifierKeys=t,this}},{key:"withTypeAhead",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;if(this._items.length&&this._items.some((function(t){return"function"!=typeof t.getLabel})))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(cl((function(e){return t._pressedLetters.push(e)})),$p(e),nl((function(){return t._pressedLetters.length>0})),H((function(){return t._pressedLetters.join("")}))).subscribe((function(e){for(var n=t._getItemsArray(),i=1;i<n.length+1;i++){var r=(t._activeItemIndex+i)%n.length,o=n[r];if(!t._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(e)){t.setActiveItem(r);break}}t._pressedLetters=[]})),this}},{key:"setActiveItem",value:function(t){var e=this._activeItemIndex;this.updateActiveItem(t),this._activeItemIndex!==e&&this.change.next(this._activeItemIndex)}},{key:"onKeydown",value:function(t){var e=this,n=t.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every((function(n){return!t[n]||e._allowedModifierKeys.indexOf(n)>-1}));switch(n){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;default:return void((i||Wp(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(n>=65&&n<=90||n>=48&&n<=57)&&this._letterKeyStream.next(String.fromCharCode(n))))}this._pressedLetters=[],t.preventDefault()}},{key:"setFirstItemActive",value:function(){this._setActiveItemByIndex(0,1)}},{key:"setLastItemActive",value:function(){this._setActiveItemByIndex(this._items.length-1,-1)}},{key:"setNextItemActive",value:function(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}},{key:"setPreviousItemActive",value:function(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}},{key:"updateActiveItem",value:function(t){var e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t),i=e[n];this._activeItem=null==i?null:i,this._activeItemIndex=n}},{key:"updateActiveItemIndex",value:function(t){this.updateActiveItem(t)}},{key:"_setActiveItemByDelta",value:function(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}},{key:"_setActiveInWrapMode",value:function(t){for(var e=this._getItemsArray(),n=1;n<=e.length;n++){var i=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[i]))return void this.setActiveItem(i)}}},{key:"_setActiveInDefaultMode",value:function(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}},{key:"_setActiveItemByIndex",value:function(t,e){var n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}},{key:"_getItemsArray",value:function(){return this._items instanceof wr?this._items.toArray():this._items}},{key:"activeItemIndex",get:function(){return this._activeItemIndex}},{key:"activeItem",get:function(){return this._activeItem}}]),t}()),pf=((af=function(){function t(e){_classCallCheck(this,t),this._platform=e}return _createClass(t,[{key:"isDisabled",value:function(t){return t.hasAttribute("disabled")}},{key:"isVisible",value:function(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}},{key:"isTabbable",value:function(t){if(!this._platform.isBrowser)return!1;var e,n=function(t){try{return t.frameElement}catch(oI){return null}}((e=t).ownerDocument&&e.ownerDocument.defaultView||window);if(n){var i=n&&n.nodeName.toLowerCase();if(-1===df(n))return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&"object"===i)return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&!this.isVisible(n))return!1}var r=t.nodeName.toLowerCase(),o=df(t);if(t.hasAttribute("contenteditable"))return-1!==o;if("iframe"===r)return!1;if("audio"===r){if(!t.hasAttribute("controls"))return!1;if(this._platform.BLINK)return!0}if("video"===r){if(!t.hasAttribute("controls")&&this._platform.TRIDENT)return!1;if(this._platform.BLINK||this._platform.FIREFOX)return!0}return("object"!==r||!this._platform.BLINK&&!this._platform.WEBKIT)&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){var e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&t.tabIndex>=0}},{key:"isFocusable",value:function(t){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){var e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||ff(t))}(t)&&!this.isDisabled(t)&&this.isVisible(t)}}]),t}()).ngInjectableDef=yt({factory:function(){return new af(Nt(qp))},token:af,providedIn:"root"}),af);function ff(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;var e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function df(t){if(!ff(t))return null;var e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}var mf,gf,yf,vf=function(){function t(e,n,i,r){var o=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,t),this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=function(){return o.focusLastTabbableElement()},this.endAnchorListener=function(){return o.focusFirstTabbableElement()},this._enabled=!0,a||this.attachAnchors()}return _createClass(t,[{key:"destroy",value:function(){var t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null}},{key:"attachAnchors",value:function(){var t=this;return!!this._hasAttached||(this._ngZone.runOutsideAngular((function(){t._startAnchor||(t._startAnchor=t._createAnchor(),t._startAnchor.addEventListener("focus",t.startAnchorListener)),t._endAnchor||(t._endAnchor=t._createAnchor(),t._endAnchor.addEventListener("focus",t.endAnchorListener))})),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}},{key:"focusInitialElementWhenReady",value:function(){var t=this;return new Promise((function(e){t._executeOnStable((function(){return e(t.focusInitialElement())}))}))}},{key:"focusFirstTabbableElementWhenReady",value:function(){var t=this;return new Promise((function(e){t._executeOnStable((function(){return e(t.focusFirstTabbableElement())}))}))}},{key:"focusLastTabbableElementWhenReady",value:function(){var t=this;return new Promise((function(e){t._executeOnStable((function(){return e(t.focusLastTabbableElement())}))}))}},{key:"_getRegionBoundary",value:function(t){for(var e=this._element.querySelectorAll("[cdk-focus-region-".concat(t,"], [cdkFocusRegion").concat(t,"], [cdk-focus-").concat(t,"]")),n=0;n<e.length;n++)e[n].hasAttribute("cdk-focus-"+t)?console.warn("Found use of deprecated attribute 'cdk-focus-".concat(t,"', use 'cdkFocusRegion").concat(t,"' instead. The deprecated attribute will be removed in 8.0.0."),e[n]):e[n].hasAttribute("cdk-focus-region-"+t)&&console.warn("Found use of deprecated attribute 'cdk-focus-region-".concat(t,"', use 'cdkFocusRegion").concat(t,"' instead. The deprecated attribute will be removed in 8.0.0."),e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}},{key:"focusInitialElement",value:function(){var t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return t?(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),Qt()&&!this._checker.isFocusable(t)&&console.warn("Element matching '[cdkFocusInitial]' is not focusable.",t),t.focus(),!0):this.focusFirstTabbableElement()}},{key:"focusFirstTabbableElement",value:function(){var t=this._getRegionBoundary("start");return t&&t.focus(),!!t}},{key:"focusLastTabbableElement",value:function(){var t=this._getRegionBoundary("end");return t&&t.focus(),!!t}},{key:"hasAttached",value:function(){return this._hasAttached}},{key:"_getFirstTabbableElement",value:function(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;for(var e=t.children||t.childNodes,n=0;n<e.length;n++){var i=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(i)return i}return null}},{key:"_getLastTabbableElement",value:function(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;for(var e=t.children||t.childNodes,n=e.length-1;n>=0;n--){var i=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(i)return i}return null}},{key:"_createAnchor",value:function(){var t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}},{key:"_toggleAnchorTabIndex",value:function(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}},{key:"_executeOnStable",value:function(t){this._ngZone.isStable?t():this._ngZone.onStable.asObservable().pipe(wl(1)).subscribe(t)}},{key:"enabled",get:function(){return this._enabled},set:function(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}}]),t}(),_f=((mf=function(){function t(e,n,i){_classCallCheck(this,t),this._checker=e,this._ngZone=n,this._document=i}return _createClass(t,[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new vf(t,this._checker,this._ngZone,this._document,e)}}]),t}()).ngInjectableDef=yt({factory:function(){return new mf(Nt(pf),Nt(Yr),Nt(Vs))},token:mf,providedIn:"root"}),mf),bf=new Pt("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),xf=new Pt("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),wf=((gf=function(){function t(e,n,i,r){_classCallCheck(this,t),this._ngZone=n,this._defaultOptions=r,this._document=i,this._liveElement=e||this._createLiveElement()}return _createClass(t,[{key:"announce",value:function(t){for(var e,n,i,r=this,o=this._defaultOptions,a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return 1===s.length&&"number"==typeof s[0]?i=s[0]:(n=(e=_slicedToArray(s,2))[0],i=e[1]),this.clear(),clearTimeout(this._previousTimeout),n||(n=o&&o.politeness?o.politeness:"polite"),null==i&&o&&(i=o.duration),this._liveElement.setAttribute("aria-live",n),this._ngZone.runOutsideAngular((function(){return new Promise((function(e){clearTimeout(r._previousTimeout),r._previousTimeout=setTimeout((function(){r._liveElement.textContent=t,e(),"number"==typeof i&&(r._previousTimeout=setTimeout((function(){return r.clear()}),i))}),100)}))}))}},{key:"clear",value:function(){this._liveElement&&(this._liveElement.textContent="")}},{key:"ngOnDestroy",value:function(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}},{key:"_createLiveElement",value:function(){for(var t=this._document.getElementsByClassName("cdk-live-announcer-element"),e=this._document.createElement("div"),n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n]);return e.classList.add("cdk-live-announcer-element"),e.classList.add("cdk-visually-hidden"),e.setAttribute("aria-atomic","true"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),e}}]),t}()).ngInjectableDef=yt({factory:function(){return new gf(Nt(bf,8),Nt(Yr),Nt(Vs),Nt(xf,8))},token:gf,providedIn:"root"}),gf),Cf=Zp({passive:!0,capture:!0}),kf=((yf=function(){function t(e,n){var i=this;_classCallCheck(this,t),this._ngZone=e,this._platform=n,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._documentKeydownListener=function(){i._lastTouchTarget=null,i._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=function(){i._lastTouchTarget||i._setOriginForCurrentEventQueue("mouse")},this._documentTouchstartListener=function(t){null!=i._touchTimeoutId&&clearTimeout(i._touchTimeoutId),i._lastTouchTarget=t.composedPath?t.composedPath()[0]:t.target,i._touchTimeoutId=setTimeout((function(){return i._lastTouchTarget=null}),650)},this._windowFocusListener=function(){i._windowFocused=!0,i._windowFocusTimeoutId=setTimeout((function(){return i._windowFocused=!1}))}}return _createClass(t,[{key:"monitor",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._platform.isBrowser)return Xs(null);var i=Bp(t);if(this._elementInfo.has(i)){var r=this._elementInfo.get(i);return r.checkChildren=n,r.subject.asObservable()}var o={unlisten:function(){},checkChildren:n,subject:new L};this._elementInfo.set(i,o),this._incrementMonitoredElementCount();var a=function(t){return e._onFocus(t,i)},s=function(t){return e._onBlur(t,i)};return this._ngZone.runOutsideAngular((function(){i.addEventListener("focus",a,!0),i.addEventListener("blur",s,!0)})),o.unlisten=function(){i.removeEventListener("focus",a,!0),i.removeEventListener("blur",s,!0)},o.subject.asObservable()}},{key:"stopMonitoring",value:function(t){var e=Bp(t),n=this._elementInfo.get(e);n&&(n.unlisten(),n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._decrementMonitoredElementCount())}},{key:"focusVia",value:function(t,e,n){var i=Bp(t);this._setOriginForCurrentEventQueue(e),"function"==typeof i.focus&&i.focus(n)}},{key:"ngOnDestroy",value:function(){var t=this;this._elementInfo.forEach((function(e,n){return t.stopMonitoring(n)}))}},{key:"_toggleClass",value:function(t,e,n){n?t.classList.add(e):t.classList.remove(e)}},{key:"_setClasses",value:function(t,e){this._elementInfo.get(t)&&(this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e))}},{key:"_setOriginForCurrentEventQueue",value:function(t){var e=this;this._ngZone.runOutsideAngular((function(){e._origin=t,e._originTimeoutId=setTimeout((function(){return e._origin=null}),1)}))}},{key:"_wasCausedByTouch",value:function(t){var e=t.target;return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}},{key:"_onFocus",value:function(t,e){var n=this._elementInfo.get(e);if(n&&(n.checkChildren||e===t.target)){var i=this._origin;i||(i=this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"),this._setClasses(e,i),this._emitOrigin(n.subject,i),this._lastFocusOrigin=i}}},{key:"_onBlur",value:function(t,e){var n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}},{key:"_emitOrigin",value:function(t,e){this._ngZone.run((function(){return t.next(e)}))}},{key:"_incrementMonitoredElementCount",value:function(){var t=this;1==++this._monitoredElementCount&&this._platform.isBrowser&&this._ngZone.runOutsideAngular((function(){document.addEventListener("keydown",t._documentKeydownListener,Cf),document.addEventListener("mousedown",t._documentMousedownListener,Cf),document.addEventListener("touchstart",t._documentTouchstartListener,Cf),window.addEventListener("focus",t._windowFocusListener)}))}},{key:"_decrementMonitoredElementCount",value:function(){--this._monitoredElementCount||(document.removeEventListener("keydown",this._documentKeydownListener,Cf),document.removeEventListener("mousedown",this._documentMousedownListener,Cf),document.removeEventListener("touchstart",this._documentTouchstartListener,Cf),window.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId))}}]),t}()).ngInjectableDef=yt({factory:function(){return new yf(Nt(Yr),Nt(qp))},token:yf,providedIn:"root"}),yf);function Ef(t){return 0===t.buttons}var Sf=function t(){_classCallCheck(this,t)},If=new cn("8.2.3"),Tf=new Pt("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}}),Pf=function(){function t(e,n){_classCallCheck(this,t),this._sanityChecksEnabled=e,this._hammerLoader=n,this._hasDoneGlobalChecks=!1,this._hasCheckedHammer=!1,this._document="object"==typeof document&&document?document:null,this._window="object"==typeof window&&window?window:null,this._areChecksEnabled()&&!this._hasDoneGlobalChecks&&(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}return _createClass(t,[{key:"_areChecksEnabled",value:function(){return this._sanityChecksEnabled&&Qt()&&!this._isTestEnv()}},{key:"_isTestEnv",value:function(){var t=this._window;return t&&(t.__karma__||t.jasmine)}},{key:"_checkDoctypeIsDefined",value:function(){this._document&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}},{key:"_checkThemeIsPresent",value:function(){if(this._document&&this._document.body&&"function"==typeof getComputedStyle){var t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);var e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}}},{key:"_checkCdkVersionMatch",value:function(){If.full!==Op.full&&console.warn("The Angular Material version ("+If.full+") does not match the Angular CDK version ("+Op.full+").\nPlease ensure the versions of these two packages exactly match.")}},{key:"_checkHammerIsAvailable",value:function(){!this._hasCheckedHammer&&this._window&&(!this._areChecksEnabled()||this._window.Hammer||this._hammerLoader||console.warn("Could not find HammerJS. Certain Angular Material components may not work correctly."),this._hasCheckedHammer=!0)}}]),t}();function Af(t){return function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;_classCallCheck(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r)))._disabled=!1,t}return _createClass(n,[{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=Dp(t)}}]),n}(t)}function Lf(t,e){return function(t){_inherits(i,t);var n=_createSuper(i);function i(){var t;_classCallCheck(this,i);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=n.call.apply(n,[this].concat(o))).color=e,t}return _createClass(i,[{key:"color",get:function(){return this._color},set:function(t){var n=t||e;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-"+this._color),n&&this._elementRef.nativeElement.classList.add("mat-"+n),this._color=n)}}]),i}(t)}function Mf(t){return function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;_classCallCheck(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r)))._disableRipple=!1,t}return _createClass(n,[{key:"disableRipple",get:function(){return this._disableRipple},set:function(t){this._disableRipple=Dp(t)}}]),n}(t)}function Rf(t){return function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;_classCallCheck(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).errorState=!1,t.stateChanges=new L,t}return _createClass(n,[{key:"updateErrorState",value:function(){var t=this.errorState,e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);e!==t&&(this.errorState=e,this.stateChanges.next())}}]),n}(t)}try{"undefined"!=typeof Intl}catch(oI){!1}var Of,Df=((Of=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"isErrorState",value:function(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))}}]),t}()).ngInjectableDef=yt({factory:function(){return new Of},token:Of,providedIn:"root"}),Of),Nf=new Pt("MAT_HAMMER_OPTIONS"),Ff=["longpress","slide","slidestart","slideend","slideright","slideleft"],zf={on:function(){},off:function(){}},Bf=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this))._hammerOptions=t,r.events=Ff,i&&i._checkHammerIsAvailable(),r}return _createClass(n,[{key:"buildHammer",value:function(t){var e="undefined"!=typeof window?window.Hammer:null;if(!e)return zf;var n=new e(t,this._hammerOptions||void 0),i=new e.Pan,r=new e.Swipe,o=new e.Press,a=this._createRecognizer(i,{event:"slide",threshold:0},r),s=this._createRecognizer(o,{event:"longpress",time:500});return i.recognizeWith(r),s.recognizeWith(a),n.add([r,o,i,a,s]),n}},{key:"_createRecognizer",value:function(t,e){for(var n=new t.constructor(e),i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];return r.push(t),r.forEach((function(t){return n.recognizeWith(t)})),n}}]),n}(function(){function t(){_classCallCheck(this,t),this.events=[],this.overrides={}}return _createClass(t,[{key:"buildHammer",value:function(t){var e=new Hammer(t,this.options);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e}}]),t}());function Vf(t,e,n){var i=t.nativeElement.classList;n?i.add(e):i.remove(e)}var Uf,jf=function t(){_classCallCheck(this,t)},qf=function(){var t={FADING_IN:0,VISIBLE:1,FADING_OUT:2,HIDDEN:3};return t[t.FADING_IN]="FADING_IN",t[t.VISIBLE]="VISIBLE",t[t.FADING_OUT]="FADING_OUT",t[t.HIDDEN]="HIDDEN",t}(),Gf=function(){function t(e,n,i){_classCallCheck(this,t),this._renderer=e,this.element=n,this.config=i,this.state=qf.HIDDEN}return _createClass(t,[{key:"fadeOut",value:function(){this._renderer.fadeOutRipple(this)}}]),t}(),Hf={enterDuration:450,exitDuration:400},Xf=Zp({passive:!0}),Zf=function(){function t(e,n,i,r){var o=this;_classCallCheck(this,t),this._target=e,this._ngZone=n,this._isPointerDown=!1,this._triggerEvents=new Map,this._activeRipples=new Set,this._onMousedown=function(t){var e=Ef(t),n=o._lastTouchStartEvent&&Date.now()<o._lastTouchStartEvent+800;o._target.rippleDisabled||e||n||(o._isPointerDown=!0,o.fadeInRipple(t.clientX,t.clientY,o._target.rippleConfig))},this._onTouchStart=function(t){if(!o._target.rippleDisabled){o._lastTouchStartEvent=Date.now(),o._isPointerDown=!0;for(var e=t.changedTouches,n=0;n<e.length;n++)o.fadeInRipple(e[n].clientX,e[n].clientY,o._target.rippleConfig)}},this._onPointerUp=function(){o._isPointerDown&&(o._isPointerDown=!1,o._activeRipples.forEach((function(t){!t.config.persistent&&(t.state===qf.VISIBLE||t.config.terminateOnPointerUp&&t.state===qf.FADING_IN)&&t.fadeOut()})))},r.isBrowser&&(this._containerElement=Bp(i),this._triggerEvents.set("mousedown",this._onMousedown).set("mouseup",this._onPointerUp).set("mouseleave",this._onPointerUp).set("touchstart",this._onTouchStart).set("touchend",this._onPointerUp).set("touchcancel",this._onPointerUp))}return _createClass(t,[{key:"fadeInRipple",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=Object.assign({},Hf,i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);var a=i.radius||function(t,e,n){var i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),s=t-r.left,l=e-r.top,u=o.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=s-a+"px",c.style.top=l-a+"px",c.style.height=2*a+"px",c.style.width=2*a+"px",c.style.backgroundColor=i.color||null,c.style.transitionDuration=u+"ms",this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";var h=new Gf(this,c,i);return h.state=qf.FADING_IN,this._activeRipples.add(h),i.persistent||(this._mostRecentTransientRipple=h),this._runTimeoutOutsideZone((function(){var t=h===n._mostRecentTransientRipple;h.state=qf.VISIBLE,i.persistent||t&&n._isPointerDown||h.fadeOut()}),u),h}},{key:"fadeOutRipple",value:function(t){var e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),e){var n=t.element,i=Object.assign({},Hf,t.config.animation);n.style.transitionDuration=i.exitDuration+"ms",n.style.opacity="0",t.state=qf.FADING_OUT,this._runTimeoutOutsideZone((function(){t.state=qf.HIDDEN,n.parentNode.removeChild(n)}),i.exitDuration)}}},{key:"fadeOutAll",value:function(){this._activeRipples.forEach((function(t){return t.fadeOut()}))}},{key:"setupTriggerEvents",value:function(t){var e=this,n=Bp(t);n&&n!==this._triggerElement&&(this._removeTriggerEvents(),this._ngZone.runOutsideAngular((function(){e._triggerEvents.forEach((function(t,e){n.addEventListener(e,t,Xf)}))})),this._triggerElement=n)}},{key:"_runTimeoutOutsideZone",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._ngZone.runOutsideAngular((function(){return setTimeout(t,e)}))}},{key:"_removeTriggerEvents",value:function(){var t=this;this._triggerElement&&this._triggerEvents.forEach((function(e,n){t._triggerElement.removeEventListener(n,e,Xf)}))}}]),t}(),Wf=new Pt("mat-ripple-global-options"),Yf=function(){function t(e,n,i,r,o){_classCallCheck(this,t),this._elementRef=e,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new Zf(this,n,e,i),"NoopAnimations"===o&&(this._globalOptions.animation={enterDuration:0,exitDuration:0})}return _createClass(t,[{key:"ngOnInit",value:function(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}},{key:"ngOnDestroy",value:function(){this._rippleRenderer._removeTriggerEvents()}},{key:"fadeOutAll",value:function(){this._rippleRenderer.fadeOutAll()}},{key:"_setupTriggerEventsIfEnabled",value:function(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}},{key:"launch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign({},this.rippleConfig,n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign({},this.rippleConfig,t))}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=t,this._setupTriggerEventsIfEnabled()}},{key:"trigger",get:function(){return this._trigger||this._elementRef.nativeElement},set:function(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}},{key:"rippleConfig",get:function(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign({},this._globalOptions.animation,this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}},{key:"rippleDisabled",get:function(){return this.disabled||!!this._globalOptions.disabled}}]),t}(),Kf=function t(){_classCallCheck(this,t)},Jf=function t(){_classCallCheck(this,t)},Qf=function t(){_classCallCheck(this,t)},$f=new Pt("mat-label-global-options"),td=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],ed=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;_classCallCheck(this,n),(o=e.call(this,t))._focusMonitor=i,o._animationMode=r,o.isRoundButton=o._hasHostAttributes("mat-fab","mat-mini-fab"),o.isIconButton=o._hasHostAttributes("mat-icon-button");var a,s=_createForOfIteratorHelper(td);try{for(s.s();!(a=s.n()).done;){var l=a.value;o._hasHostAttributes(l)&&o._getHostElement().classList.add(l)}}catch(u){s.e(u)}finally{s.f()}return t.nativeElement.classList.add("mat-button-base"),o._focusMonitor.monitor(o._elementRef,!0),o.isRoundButton&&(o.color="accent"),o}return _createClass(n,[{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef)}},{key:"focus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",e=arguments.length>1?arguments[1]:void 0;this._focusMonitor.focusVia(this._getHostElement(),t,e)}},{key:"_getHostElement",value:function(){return this._elementRef.nativeElement}},{key:"_isRippleDisabled",value:function(){return this.disableRipple||this.disabled}},{key:"_hasHostAttributes",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.some((function(e){return t._getHostElement().hasAttribute(e)}))}}]),n}(Lf(Af(Mf((function t(e){_classCallCheck(this,t),this._elementRef=e}))))),nd=function t(){_classCallCheck(this,t)},id=new Pt("cdk-dir-doc",{providedIn:"root",factory:function(){return Ft(Vs)}}),rd=((Uf=function(){function t(e){if(_classCallCheck(this,t),this.value="ltr",this.change=new br,e){var n=e.documentElement?e.documentElement.dir:null,i=(e.body?e.body.dir:null)||n;this.value="ltr"===i||"rtl"===i?i:"ltr"}}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.change.complete()}}]),t}()).ngInjectableDef=yt({factory:function(){return new Uf(Nt(id,8))},token:Uf,providedIn:"root"}),Uf),od=function t(){_classCallCheck(this,t)},ad=function t(){_classCallCheck(this,t)};function sd(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:2,steps:t,options:e}}function ld(t){return{type:6,styles:t,offset:null}}function ud(t){Promise.resolve(null).then(t)}var cd=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,t),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=e+n}return _createClass(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(t){return t()})),this._onDoneFns=[])}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"hasStarted",value:function(){return this._started}},{key:"init",value:function(){}},{key:"play",value:function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}},{key:"triggerMicrotask",value:function(){var t=this;ud((function(){return t._onFinish()}))}},{key:"_onStart",value:function(){this._onStartFns.forEach((function(t){return t()})),this._onStartFns=[]}},{key:"pause",value:function(){}},{key:"restart",value:function(){}},{key:"finish",value:function(){this._onFinish()}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach((function(t){return t()})),this._onDestroyFns=[])}},{key:"reset",value:function(){}},{key:"setPosition",value:function(t){}},{key:"getPosition",value:function(){return 0}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach((function(t){return t()})),e.length=0}}]),t}(),hd=function(){function t(e){var n=this;_classCallCheck(this,t),this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;var i=0,r=0,o=0,a=this.players.length;0==a?ud((function(){return n._onFinish()})):this.players.forEach((function(t){t.onDone((function(){++i==a&&n._onFinish()})),t.onDestroy((function(){++r==a&&n._onDestroy()})),t.onStart((function(){++o==a&&n._onStart()}))})),this.totalTime=this.players.reduce((function(t,e){return Math.max(t,e.totalTime)}),0)}return _createClass(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(t){return t()})),this._onDoneFns=[])}},{key:"init",value:function(){this.players.forEach((function(t){return t.init()}))}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"_onStart",value:function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach((function(t){return t()})),this._onStartFns=[])}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach((function(t){return t.play()}))}},{key:"pause",value:function(){this.players.forEach((function(t){return t.pause()}))}},{key:"restart",value:function(){this.players.forEach((function(t){return t.restart()}))}},{key:"finish",value:function(){this._onFinish(),this.players.forEach((function(t){return t.finish()}))}},{key:"destroy",value:function(){this._onDestroy()}},{key:"_onDestroy",value:function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach((function(t){return t.destroy()})),this._onDestroyFns.forEach((function(t){return t()})),this._onDestroyFns=[])}},{key:"reset",value:function(){this.players.forEach((function(t){return t.reset()})),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"setPosition",value:function(t){var e=t*this.totalTime;this.players.forEach((function(t){var n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)}))}},{key:"getPosition",value:function(){var t=0;return this.players.forEach((function(e){var n=e.getPosition();t=Math.min(n,t)})),t}},{key:"beforeDestroy",value:function(){this.players.forEach((function(t){t.beforeDestroy&&t.beforeDestroy()}))}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach((function(t){return t()})),e.length=0}}]),t}();function pd(){return"undefined"!=typeof process}function fd(t){switch(t.length){case 0:return new cd;case 1:return t[0];default:return new hd(t)}}function dd(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=[],s=[],l=-1,u=null;if(i.forEach((function(t){var n=t.offset,i=n==l,c=i&&u||{};Object.keys(t).forEach((function(n){var i=n,s=t[n];if("offset"!==n)switch(i=e.normalizePropertyName(i,a),s){case"!":s=r[n];break;case"*":s=o[n];break;default:s=e.normalizeStyleValue(n,i,s,a)}c[i]=s})),i||s.push(c),u=c,l=n})),a.length){var c="\n - ";throw new Error("Unable to animate due to the following errors:".concat(c).concat(a.join(c)))}return s}function md(t,e,n,i){switch(e){case"start":t.onStart((function(){return i(n&&gd(n,"start",t))}));break;case"done":t.onDone((function(){return i(n&&gd(n,"done",t))}));break;case"destroy":t.onDestroy((function(){return i(n&&gd(n,"destroy",t))}))}}function gd(t,e,n){var i=n.totalTime,r=yd(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==i?t.totalTime:i,!!n.disabled),o=t._data;return null!=o&&(r._data=o),r}function yd(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6?arguments[6]:void 0;return{element:t,triggerName:e,fromState:n,toState:i,phaseName:r,totalTime:o,disabled:!!a}}function vd(t,e,n){var i;return t instanceof Map?(i=t.get(e))||t.set(e,i=n):(i=t[e])||(i=t[e]=n),i}function _d(t){var e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}var bd=function(t,e){return!1},xd=function(t,e){return!1},wd=function(t,e,n){return[]},Cd=pd();(Cd||"undefined"!=typeof Element)&&(bd=function(t,e){return t.contains(e)},xd=function(){if(Cd||Element.prototype.matches)return function(t,e){return t.matches(e)};var t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?function(t,n){return e.apply(t,[n])}:xd}(),wd=function(t,e,n){var i=[];if(n)i.push.apply(i,_toConsumableArray(t.querySelectorAll(e)));else{var r=t.querySelector(e);r&&i.push(r)}return i});var kd=null,Ed=!1;function Sd(t){kd||(kd=("undefined"!=typeof document?document.body:null)||{},Ed=!!kd.style&&"WebkitAppearance"in kd.style);var e=!0;return kd.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(!(e=t in kd.style)&&Ed)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in kd.style),e}var Id=xd,Td=bd,Pd=wd;function Ad(t){var e={};return Object.keys(t).forEach((function(n){var i=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[i]=t[n]})),e}var Ld=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"validateStyleProperty",value:function(t){return Sd(t)}},{key:"matchesElement",value:function(t,e){return Id(t,e)}},{key:"containsElement",value:function(t,e){return Td(t,e)}},{key:"query",value:function(t,e,n){return Pd(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return n||""}},{key:"animate",value:function(t,e,n,i,r){arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&arguments[6];return new cd(n,i)}}]),t}(),Md=function(){var t=function t(){_classCallCheck(this,t)};return t.NOOP=new Ld,t}();function Rd(t){if("number"==typeof t)return t;var e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Od(parseFloat(e[1]),e[2])}function Od(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Dd(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){var i,r=0,o="";if("string"==typeof t){var a=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push('The provided timing value "'.concat(t,'" is invalid.')),{duration:0,delay:0,easing:""};i=Od(parseFloat(a[1]),a[2]);var s=a[3];null!=s&&(r=Od(parseFloat(s),a[4]));var l=a[5];l&&(o=l)}else i=t;if(!n){var u=!1,c=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),u=!0),r<0&&(e.push("Delay values below 0 are not allowed for this animation step."),u=!0),u&&e.splice(c,0,'The provided timing value "'.concat(t,'" is invalid.'))}return{duration:i,delay:r,easing:o}}(t,e,n)}function Nd(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach((function(n){e[n]=t[n]})),e}function Fd(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e)for(var i in t)n[i]=t[i];else Nd(t,n);return n}function zd(t,e,n){return n?e+":"+n+";":""}function Bd(t){for(var e="",n=0;n<t.style.length;n++){var i=t.style.item(n);e+=zd(0,i,t.style.getPropertyValue(i))}for(var r in t.style)t.style.hasOwnProperty(r)&&!r.startsWith("_")&&(e+=zd(0,r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[r]));t.setAttribute("style",e)}function Vd(t,e,n){t.style&&(Object.keys(e).forEach((function(i){var r=Wd(i);n&&!n.hasOwnProperty(i)&&(n[i]=t.style[r]),t.style[r]=e[i]})),pd()&&Bd(t))}function Ud(t,e){t.style&&(Object.keys(e).forEach((function(e){var n=Wd(e);t.style[n]=""})),pd()&&Bd(t))}function jd(t){return Array.isArray(t)?1==t.length?t[0]:sd(t):t}var qd=new RegExp("{{\\s*(.+?)\\s*}}","g");function Gd(t){var e=[];if("string"==typeof t){for(var n,i=t.toString();n=qd.exec(i);)e.push(n[1]);qd.lastIndex=0}return e}function Hd(t,e,n){var i=t.toString(),r=i.replace(qd,(function(t,i){var r=e[i];return e.hasOwnProperty(i)||(n.push("Please provide a value for the animation param "+i),r=""),r.toString()}));return r==i?t:r}function Xd(t){for(var e=[],n=t.next();!n.done;)e.push(n.value),n=t.next();return e}var Zd=/-+([a-z0-9])/g;function Wd(t){return t.replace(Zd,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e[1].toUpperCase()}))}function Yd(t,e){return 0===t||0===e}function Kd(t,e,n){var i=Object.keys(n);if(i.length&&e.length){var r=e[0],o=[];if(i.forEach((function(t){r.hasOwnProperty(t)||o.push(t),r[t]=n[t]})),o.length)for(var a=function(){var n=e[s];o.forEach((function(e){n[e]=Qd(t,e)}))},s=1;s<e.length;s++)a()}return e}function Jd(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function Qd(t,e){return window.getComputedStyle(t)[e]}var $d=new Set(["true","1"]),tm=new Set(["false","0"]);function em(t,e){var n=$d.has(t)||tm.has(t),i=$d.has(e)||tm.has(e);return function(r,o){var a="*"==t||t==r,s="*"==e||e==o;return!a&&n&&"boolean"==typeof r&&(a=r?$d.has(t):tm.has(t)),!s&&i&&"boolean"==typeof o&&(s=o?$d.has(e):tm.has(e)),a&&s}}var nm=new RegExp("s*:selfs*,?","g");function im(t,e,n){return new rm(t).build(e,n)}var rm=function(){function t(e){_classCallCheck(this,t),this._driver=e}return _createClass(t,[{key:"build",value:function(t,e){var n=new om(e);return this._resetContextStyleTimingState(n),Jd(this,jd(t),n)}},{key:"_resetContextStyleTimingState",value:function(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}},{key:"visitTrigger",value:function(t,e){var n=this,i=e.queryCount=0,r=e.depCount=0,o=[],a=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach((function(t){if(n._resetContextStyleTimingState(e),0==t.type){var s=t,l=s.name;l.toString().split(/\s*,\s*/).forEach((function(t){s.name=t,o.push(n.visitState(s,e))})),s.name=l}else if(1==t.type){var u=n.visitTransition(t,e);i+=u.queryCount,r+=u.depCount,a.push(u)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")})),{type:7,name:t.name,states:o,transitions:a,queryCount:i,depCount:r,options:null}}},{key:"visitState",value:function(t,e){var n=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(n.containsDynamicStyles){var r=new Set,o=i||{};if(n.styles.forEach((function(t){if(am(t)){var e=t;Object.keys(e).forEach((function(t){Gd(e[t]).forEach((function(t){o.hasOwnProperty(t)||r.add(t)}))}))}})),r.size){var a=Xd(r.values());e.errors.push('state("'.concat(t.name,'", ...) must define default values for all the following style substitutions: ').concat(a.join(", ")))}}return{type:0,name:t.name,style:n,options:i?{params:i}:null}}},{key:"visitTransition",value:function(t,e){e.queryCount=0,e.depCount=0;var n,i,r,o=Jd(this,jd(t.animation),e);return{type:1,matchers:(n=t.expr,i=e.errors,r=[],"string"==typeof n?n.split(/\s*,\s*/).forEach((function(t){return function(t,e,n){if(":"==t[0]){var i=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(t,e){return parseFloat(e)>parseFloat(t)};case":decrement":return function(t,e){return parseFloat(e)<parseFloat(t)};default:return e.push('The transition alias value "'.concat(t,'" is not supported')),"* => *"}}(t,n);if("function"==typeof i)return void e.push(i);t=i}var r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push('The provided transition expression "'.concat(t,'" is not supported')),e;var o=r[1],a=r[2],s=r[3];e.push(em(o,s)),"<"!=a[0]||"*"==o&&"*"==s||e.push(em(s,o))}(t,r,i)})):r.push(n),r),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:sm(t.options)}}},{key:"visitSequence",value:function(t,e){var n=this;return{type:2,steps:t.steps.map((function(t){return Jd(n,t,e)})),options:sm(t.options)}}},{key:"visitGroup",value:function(t,e){var n=this,i=e.currentTime,r=0,o=t.steps.map((function(t){e.currentTime=i;var o=Jd(n,t,e);return r=Math.max(r,e.currentTime),o}));return e.currentTime=r,{type:3,steps:o,options:sm(t.options)}}},{key:"visitAnimate",value:function(t,e){var n,i=function(t,e){var n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return lm(Dd(t,e).duration,0,"");var i=t;if(i.split(/\s+/).some((function(t){return"{"==t.charAt(0)&&"{"==t.charAt(1)}))){var r=lm(0,0,"");return r.dynamic=!0,r.strValue=i,r}return lm((n=n||Dd(i,e)).duration,n.delay,n.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;var r=t.styles?t.styles:ld({});if(5==r.type)n=this.visitKeyframes(r,e);else{var o=t.styles,a=!1;if(!o){a=!0;var s={};i.easing&&(s.easing=i.easing),o=ld(s)}e.currentTime+=i.duration+i.delay;var l=this.visitStyle(o,e);l.isEmptyStep=a,n=l}return e.currentAnimateTimings=null,{type:4,timings:i,style:n,options:null}}},{key:"visitStyle",value:function(t,e){var n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}},{key:"_makeStyleAst",value:function(t,e){var n=[];Array.isArray(t.styles)?t.styles.forEach((function(t){"string"==typeof t?"*"==t?n.push(t):e.errors.push("The provided style string value ".concat(t," is not allowed.")):n.push(t)})):n.push(t.styles);var i=!1,r=null;return n.forEach((function(t){if(am(t)){var e=t,n=e.easing;if(n&&(r=n,delete e.easing),!i)for(var o in e)if(e[o].toString().indexOf("{{")>=0){i=!0;break}}})),{type:6,styles:n,easing:r,offset:t.offset,containsDynamicStyles:i,options:null}}},{key:"_validateStyleAst",value:function(t,e){var n=this,i=e.currentAnimateTimings,r=e.currentTime,o=e.currentTime;i&&o>0&&(o-=i.duration+i.delay),t.styles.forEach((function(t){"string"!=typeof t&&Object.keys(t).forEach((function(i){if(n._driver.validateStyleProperty(i)){var a,s,l,u,c,h=e.collectedStyles[e.currentQuerySelector],p=h[i],f=!0;p&&(o!=r&&o>=p.startTime&&r<=p.endTime&&(e.errors.push('The CSS property "'.concat(i,'" that exists between the times of "').concat(p.startTime,'ms" and "').concat(p.endTime,'ms" is also being animated in a parallel animation between the times of "').concat(o,'ms" and "').concat(r,'ms"')),f=!1),o=p.startTime),f&&(h[i]={startTime:o,endTime:r}),e.options&&(a=t[i],s=e.options,l=e.errors,u=s.params||{},(c=Gd(a)).length&&c.forEach((function(t){u.hasOwnProperty(t)||l.push("Unable to resolve the local animation param ".concat(t," in the given list of values"))})))}else e.errors.push('The provided animation property "'.concat(i,'" is not a supported CSS property for animations'))}))}))}},{key:"visitKeyframes",value:function(t,e){var n=this,i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),i;var r=0,o=[],a=!1,s=!1,l=0,u=t.steps.map((function(t){var i=n._makeStyleAst(t,e),u=null!=i.offset?i.offset:function(t){if("string"==typeof t)return null;var e=null;if(Array.isArray(t))t.forEach((function(t){if(am(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}}));else if(am(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}return e}(i.styles),c=0;return null!=u&&(r++,c=i.offset=u),s=s||c<0||c>1,a=a||c<l,l=c,o.push(c),i}));s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&e.errors.push("Please ensure that all keyframe offsets are in order");var c=t.steps.length,h=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(h=1/(c-1));var p=c-1,f=e.currentTime,d=e.currentAnimateTimings,m=d.duration;return u.forEach((function(t,r){var a=h>0?r==p?1:h*r:o[r],s=a*m;e.currentTime=f+d.delay+s,d.duration=s,n._validateStyleAst(t,e),t.offset=a,i.styles.push(t)})),i}},{key:"visitReference",value:function(t,e){return{type:8,animation:Jd(this,jd(t.animation),e),options:sm(t.options)}}},{key:"visitAnimateChild",value:function(t,e){return e.depCount++,{type:9,options:sm(t.options)}}},{key:"visitAnimateRef",value:function(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:sm(t.options)}}},{key:"visitQuery",value:function(t,e){var n=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;var r=_slicedToArray(function(t){var e=!!t.split(/\s*,\s*/).find((function(t){return":self"==t}));return e&&(t=t.replace(nm,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,(function(t){return".ng-trigger-"+t.substr(1)})).replace(/:animating/g,".ng-animating"),e]}(t.selector),2),o=r[0],a=r[1];e.currentQuerySelector=n.length?n+" "+o:o,vd(e.collectedStyles,e.currentQuerySelector,{});var s=Jd(this,jd(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:a,animation:s,originalSelector:t.selector,options:sm(t.options)}}},{key:"visitStagger",value:function(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");var n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Dd(t.timings,e.errors,!0);return{type:12,animation:Jd(this,jd(t.animation),e),timings:n,options:null}}}]),t}(),om=function t(e){_classCallCheck(this,t),this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function am(t){return!Array.isArray(t)&&"object"==typeof t}function sm(t){var e;return t?(t=Nd(t)).params&&(t.params=(e=t.params)?Nd(e):null):t={},t}function lm(t,e,n){return{duration:t,delay:e,easing:n}}function um(t,e,n,i,r,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:a,subTimeline:s}}var cm=function(){function t(){_classCallCheck(this,t),this._map=new Map}return _createClass(t,[{key:"consume",value:function(t){var e=this._map.get(t);return e?this._map.delete(t):e=[],e}},{key:"append",value:function(t,e){var n,i=this._map.get(t);i||this._map.set(t,i=[]),(n=i).push.apply(n,_toConsumableArray(e))}},{key:"has",value:function(t){return this._map.has(t)}},{key:"clear",value:function(){this._map.clear()}}]),t}(),hm=new RegExp(":enter","g"),pm=new RegExp(":leave","g");function fm(t,e,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];return(new dm).buildKeyframes(t,e,n,i,r,o,a,s,l,u)}var dm=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"buildKeyframes",value:function(t,e,n,i,r,o,a,s,l){var u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];l=l||new cm;var c=new gm(t,e,l,i,r,u,[]);c.options=s,c.currentTimeline.setStyles([o],null,c.errors,s),Jd(this,n,c);var h=c.timelines.filter((function(t){return t.containsAnimation()}));if(h.length&&Object.keys(a).length){var p=h[h.length-1];p.allowOnlyTimelineStyles()||p.setStyles([a],null,c.errors,s)}return h.length?h.map((function(t){return t.buildKeyframes()})):[um(e,[],[],[],0,0,"",!1)]}},{key:"visitTrigger",value:function(t,e){}},{key:"visitState",value:function(t,e){}},{key:"visitTransition",value:function(t,e){}},{key:"visitAnimateChild",value:function(t,e){var n=e.subInstructions.consume(e.element);if(n){var i=e.createSubContext(t.options),r=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,i,i.options);r!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}},{key:"visitAnimateRef",value:function(t,e){var n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}},{key:"_visitSubInstructions",value:function(t,e,n){var i=e.currentTimeline.currentTime,r=null!=n.duration?Rd(n.duration):null,o=null!=n.delay?Rd(n.delay):null;return 0!==r&&t.forEach((function(t){var n=e.appendInstructionToTimeline(t,r,o);i=Math.max(i,n.duration+n.delay)})),i}},{key:"visitReference",value:function(t,e){e.updateOptions(t.options,!0),Jd(this,t.animation,e),e.previousNode=t}},{key:"visitSequence",value:function(t,e){var n=this,i=e.subContextCount,r=e,o=t.options;if(o&&(o.params||o.delay)&&((r=e.createSubContext(o)).transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=mm);var a=Rd(o.delay);r.delayNextStep(a)}t.steps.length&&(t.steps.forEach((function(t){return Jd(n,t,r)})),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}},{key:"visitGroup",value:function(t,e){var n=this,i=[],r=e.currentTimeline.currentTime,o=t.options&&t.options.delay?Rd(t.options.delay):0;t.steps.forEach((function(a){var s=e.createSubContext(t.options);o&&s.delayNextStep(o),Jd(n,a,s),r=Math.max(r,s.currentTimeline.currentTime),i.push(s.currentTimeline)})),i.forEach((function(t){return e.currentTimeline.mergeTimelineCollectedStyles(t)})),e.transformIntoNewTimeline(r),e.previousNode=t}},{key:"_visitTiming",value:function(t,e){if(t.dynamic){var n=t.strValue;return Dd(e.params?Hd(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}},{key:"visitAnimate",value:function(t,e){var n=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),i.snapshotCurrentStyles());var r=t.style;5==r.type?this.visitKeyframes(r,e):(e.incrementTime(n.duration),this.visitStyle(r,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}},{key:"visitStyle",value:function(t,e){var n=e.currentTimeline,i=e.currentAnimateTimings;!i&&n.getCurrentStyleProperties().length&&n.forwardFrame();var r=i&&i.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(r):n.setStyles(t.styles,r,e.errors,e.options),e.previousNode=t}},{key:"visitKeyframes",value:function(t,e){var n=e.currentAnimateTimings,i=e.currentTimeline.duration,r=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach((function(t){o.forwardTime((t.offset||0)*r),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()})),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(i+r),e.previousNode=t}},{key:"visitQuery",value:function(t,e){var n=this,i=e.currentTimeline.currentTime,r=t.options||{},o=r.delay?Rd(r.delay):0;o&&(6===e.previousNode.type||0==i&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=mm);var a=i,s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;var l=null;s.forEach((function(i,r){e.currentQueryIndex=r;var s=e.createSubContext(t.options,i);o&&s.delayNextStep(o),i===e.element&&(l=s.currentTimeline),Jd(n,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,s.currentTimeline.currentTime)})),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(a),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}},{key:"visitStagger",value:function(t,e){var n=e.parentContext,i=e.currentTimeline,r=t.timings,o=Math.abs(r.duration),a=o*(e.currentQueryTotal-1),s=o*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":s=a-s;break;case"full":s=n.currentStaggerTime}var l=e.currentTimeline;s&&l.delayNextStep(s);var u=l.currentTime;Jd(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=i.currentTime-u+(i.startTime-n.currentTimeline.startTime)}}]),t}(),mm={},gm=function(){function t(e,n,i,r,o,a,s,l){_classCallCheck(this,t),this._driver=e,this.element=n,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=a,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=mm,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new ym(this._driver,n,0),s.push(this.currentTimeline)}return _createClass(t,[{key:"updateOptions",value:function(t,e){var n=this;if(t){var i=t,r=this.options;null!=i.duration&&(r.duration=Rd(i.duration)),null!=i.delay&&(r.delay=Rd(i.delay));var o=i.params;if(o){var a=r.params;a||(a=this.options.params={}),Object.keys(o).forEach((function(t){e&&a.hasOwnProperty(t)||(a[t]=Hd(o[t],a,n.errors))}))}}}},{key:"_copyOptions",value:function(){var t={};if(this.options){var e=this.options.params;if(e){var n=t.params={};Object.keys(e).forEach((function(t){n[t]=e[t]}))}}return t}},{key:"createSubContext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,r=n||this.element,o=new t(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}},{key:"transformIntoNewTimeline",value:function(t){return this.previousNode=mm,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}},{key:"appendInstructionToTimeline",value:function(t,e,n){var i={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},r=new vm(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(r),i}},{key:"incrementTime",value:function(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}},{key:"delayNextStep",value:function(t){t>0&&this.currentTimeline.delayNextStep(t)}},{key:"invokeQuery",value:function(t,e,n,i,r,o){var a=[];if(i&&a.push(this.element),t.length>0){t=(t=t.replace(hm,"."+this._enterClassName)).replace(pm,"."+this._leaveClassName);var s=this._driver.query(this.element,t,1!=n);0!==n&&(s=n<0?s.slice(s.length+n,s.length):s.slice(0,n)),a.push.apply(a,_toConsumableArray(s))}return r||0!=a.length||o.push('`query("'.concat(e,'")` returned zero elements. (Use `query("').concat(e,'", { optional: true })` if you wish to allow this.)')),a}},{key:"params",get:function(){return this.options.params}}]),t}(),ym=function(){function t(e,n,i,r){_classCallCheck(this,t),this._driver=e,this.element=n,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}return _createClass(t,[{key:"containsAnimation",value:function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}},{key:"getCurrentStyleProperties",value:function(){return Object.keys(this._currentKeyframe)}},{key:"delayNextStep",value:function(t){var e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}},{key:"fork",value:function(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}},{key:"_loadKeyframe",value:function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}},{key:"forwardFrame",value:function(){this.duration+=1,this._loadKeyframe()}},{key:"forwardTime",value:function(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}},{key:"_updateStyle",value:function(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}},{key:"allowOnlyTimelineStyles",value:function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}},{key:"applyEmptyStep",value:function(t){var e=this;t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach((function(t){e._backFill[t]=e._globalTimelineStyles[t]||"*",e._currentKeyframe[t]="*"})),this._currentEmptyStepKeyframe=this._currentKeyframe}},{key:"setStyles",value:function(t,e,n,i){var r=this;e&&(this._previousKeyframe.easing=e);var o=i&&i.params||{},a=function(t,e){var n,i={};return t.forEach((function(t){"*"===t?(n=n||Object.keys(e)).forEach((function(t){i[t]="*"})):Fd(t,!1,i)})),i}(t,this._globalTimelineStyles);Object.keys(a).forEach((function(t){var e=Hd(a[t],o,n);r._pendingStyles[t]=e,r._localTimelineStyles.hasOwnProperty(t)||(r._backFill[t]=r._globalTimelineStyles.hasOwnProperty(t)?r._globalTimelineStyles[t]:"*"),r._updateStyle(t,e)}))}},{key:"applyStylesToKeyframe",value:function(){var t=this,e=this._pendingStyles,n=Object.keys(e);0!=n.length&&(this._pendingStyles={},n.forEach((function(n){t._currentKeyframe[n]=e[n]})),Object.keys(this._localTimelineStyles).forEach((function(e){t._currentKeyframe.hasOwnProperty(e)||(t._currentKeyframe[e]=t._localTimelineStyles[e])})))}},{key:"snapshotCurrentStyles",value:function(){var t=this;Object.keys(this._localTimelineStyles).forEach((function(e){var n=t._localTimelineStyles[e];t._pendingStyles[e]=n,t._updateStyle(e,n)}))}},{key:"getFinalKeyframe",value:function(){return this._keyframes.get(this.duration)}},{key:"mergeTimelineCollectedStyles",value:function(t){var e=this;Object.keys(t._styleSummary).forEach((function(n){var i=e._styleSummary[n],r=t._styleSummary[n];(!i||r.time>i.time)&&e._updateStyle(n,r.value)}))}},{key:"buildKeyframes",value:function(){var t=this;this.applyStylesToKeyframe();var e=new Set,n=new Set,i=1===this._keyframes.size&&0===this.duration,r=[];this._keyframes.forEach((function(o,a){var s=Fd(o,!0);Object.keys(s).forEach((function(t){var i=s[t];"!"==i?e.add(t):"*"==i&&n.add(t)})),i||(s.offset=a/t.duration),r.push(s)}));var o=e.size?Xd(e.values()):[],a=n.size?Xd(n.values()):[];if(i){var s=r[0],l=Nd(s);s.offset=0,l.offset=1,r=[s,l]}return um(this.element,r,o,a,this.duration,this.startTime,this.easing,!1)}},{key:"currentTime",get:function(){return this.startTime+this.duration}},{key:"properties",get:function(){var t=[];for(var e in this._currentKeyframe)t.push(e);return t}}]),t}(),vm=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o,a,s){var l,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return _classCallCheck(this,n),(l=e.call(this,t,i,s.delay)).element=i,l.keyframes=r,l.preStyleProps=o,l.postStyleProps=a,l._stretchStartingKeyframe=u,l.timings={duration:s.duration,delay:s.delay,easing:s.easing},l}return _createClass(n,[{key:"containsAnimation",value:function(){return this.keyframes.length>1}},{key:"buildKeyframes",value:function(){var t=this.keyframes,e=this.timings,n=e.delay,i=e.duration,r=e.easing;if(this._stretchStartingKeyframe&&n){var o=[],a=i+n,s=n/a,l=Fd(t[0],!1);l.offset=0,o.push(l);var u=Fd(t[0],!1);u.offset=_m(s),o.push(u);for(var c=t.length-1,h=1;h<=c;h++){var p=Fd(t[h],!1);p.offset=_m((n+p.offset*i)/a),o.push(p)}i=a,n=0,r="",t=o}return um(this.element,t,this.preStyleProps,this.postStyleProps,i,n,r,!0)}}]),n}(ym);function _m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Math.pow(10,e-1);return Math.round(t*n)/n}var bm,xm,wm=function t(){_classCallCheck(this,t)},Cm=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"normalizePropertyName",value:function(t,e){return Wd(t)}},{key:"normalizeStyleValue",value:function(t,e,n,i){var r="",o=n.toString().trim();if(km[e]&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{var a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push("Please provide a CSS unit value for ".concat(t,":").concat(n))}return o+r}}]),n}(wm),km=(bm="width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","),xm={},bm.forEach((function(t){return xm[t]=!0})),xm);function Em(t,e,n,i,r,o,a,s,l,u,c,h,p){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:o,toState:i,toStyles:a,timelines:s,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:h,errors:p}}var Sm={},Im=function(){function t(e,n,i){_classCallCheck(this,t),this._triggerName=e,this.ast=n,this._stateStyles=i}return _createClass(t,[{key:"match",value:function(t,e,n,i){return function(t,e,n,i,r){return t.some((function(t){return t(e,n,i,r)}))}(this.ast.matchers,t,e,n,i)}},{key:"buildStyles",value:function(t,e,n){var i=this._stateStyles["*"],r=this._stateStyles[t],o=i?i.buildStyles(e,n):{};return r?r.buildStyles(e,n):o}},{key:"build",value:function(t,e,n,i,r,o,a,s,l,u){var c=[],h=this.ast.options&&this.ast.options.params||Sm,p=this.buildStyles(n,a&&a.params||Sm,c),f=s&&s.params||Sm,d=this.buildStyles(i,f,c),m=new Set,g=new Map,y=new Map,v="void"===i,_={params:Object.assign({},h,f)},b=u?[]:fm(t,e,this.ast.animation,r,o,p,d,_,l,c),x=0;if(b.forEach((function(t){x=Math.max(t.duration+t.delay,x)})),c.length)return Em(e,this._triggerName,n,i,v,p,d,[],[],g,y,x,c);b.forEach((function(t){var n=t.element,i=vd(g,n,{});t.preStyleProps.forEach((function(t){return i[t]=!0}));var r=vd(y,n,{});t.postStyleProps.forEach((function(t){return r[t]=!0})),n!==e&&m.add(n)}));var w=Xd(m.values());return Em(e,this._triggerName,n,i,v,p,d,b,w,g,y,x)}}]),t}(),Tm=function(){function t(e,n){_classCallCheck(this,t),this.styles=e,this.defaultParams=n}return _createClass(t,[{key:"buildStyles",value:function(t,e){var n={},i=Nd(this.defaultParams);return Object.keys(t).forEach((function(e){var n=t[e];null!=n&&(i[e]=n)})),this.styles.styles.forEach((function(t){if("string"!=typeof t){var r=t;Object.keys(r).forEach((function(t){var o=r[t];o.length>1&&(o=Hd(o,i,e)),n[t]=o}))}})),n}}]),t}(),Pm=function(){function t(e,n){var i=this;_classCallCheck(this,t),this.name=e,this.ast=n,this.transitionFactories=[],this.states={},n.states.forEach((function(t){i.states[t.name]=new Tm(t.style,t.options&&t.options.params||{})})),Am(this.states,"true","1"),Am(this.states,"false","0"),n.transitions.forEach((function(t){i.transitionFactories.push(new Im(e,t,i.states))})),this.fallbackTransition=new Im(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(t,e){return!0}],options:null,queryCount:0,depCount:0},this.states)}return _createClass(t,[{key:"matchTransition",value:function(t,e,n,i){return this.transitionFactories.find((function(r){return r.match(t,e,n,i)}))||null}},{key:"matchStyles",value:function(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}},{key:"containsQueries",get:function(){return this.ast.queryCount>0}}]),t}();function Am(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}var Lm=new cm,Mm=function(){function t(e,n,i){_classCallCheck(this,t),this.bodyNode=e,this._driver=n,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}return _createClass(t,[{key:"register",value:function(t,e){var n=[],i=im(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=i}},{key:"_buildPlayer",value:function(t,e,n){var i=t.element,r=dd(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(i,r,t.duration,t.delay,t.easing,[],!0)}},{key:"create",value:function(t,e){var n,i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=[],a=this._animations[t],s=new Map;if(a?(n=fm(this._driver,e,a,"ng-enter","ng-leave",{},{},r,Lm,o)).forEach((function(t){var e=vd(s,t.element,{});t.postStyleProps.forEach((function(t){return e[t]=null}))})):(o.push("The requested animation doesn't exist or has already been destroyed"),n=[]),o.length)throw new Error("Unable to create the animation due to the following errors: "+o.join("\n"));s.forEach((function(t,e){Object.keys(t).forEach((function(n){t[n]=i._driver.computeStyle(e,n,"*")}))}));var l=fd(n.map((function(t){var e=s.get(t.element);return i._buildPlayer(t,{},e)})));return this._playersById[t]=l,l.onDestroy((function(){return i.destroy(t)})),this.players.push(l),l}},{key:"destroy",value:function(t){var e=this._getPlayer(t);e.destroy(),delete this._playersById[t];var n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}},{key:"_getPlayer",value:function(t){var e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e}},{key:"listen",value:function(t,e,n,i){var r=yd(e,"","","");return md(this._getPlayer(t),n,r,i),function(){}}},{key:"command",value:function(t,e,n,i){if("register"!=n)if("create"!=n){var r=this._getPlayer(t);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}else this.create(t,e,i[0]||{});else this.register(t,i[0])}}]),t}(),Rm=[],Om={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Dm={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Nm=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";_classCallCheck(this,t),this.namespaceId=n;var i,r=e&&e.hasOwnProperty("value");if(this.value=null!=(i=r?e.value:e)?i:null,r){var o=Nd(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}return _createClass(t,[{key:"absorbOptions",value:function(t){var e=t.params;if(e){var n=this.options.params;Object.keys(e).forEach((function(t){null==n[t]&&(n[t]=e[t])}))}}},{key:"params",get:function(){return this.options.params}}]),t}(),Fm=new Nm("void"),zm=function(){function t(e,n,i){_classCallCheck(this,t),this.id=e,this.hostElement=n,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Hm(n,this._hostClassName)}return _createClass(t,[{key:"listen",value:function(t,e,n,i){var r,o=this;if(!this._triggers.hasOwnProperty(e))throw new Error('Unable to listen on the animation trigger event "'.concat(n,'" because the animation trigger "').concat(e,"\" doesn't exist!"));if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'.concat(e,'" because the provided event is undefined!'));if("start"!=(r=n)&&"done"!=r)throw new Error('The provided animation trigger event "'.concat(n,'" for the animation trigger "').concat(e,'" is not supported!'));var a=vd(this._elementListeners,t,[]),s={name:e,phase:n,callback:i};a.push(s);var l=vd(this._engine.statesByElement,t,{});return l.hasOwnProperty(e)||(Hm(t,"ng-trigger"),Hm(t,"ng-trigger-"+e),l[e]=Fm),function(){o._engine.afterFlush((function(){var t=a.indexOf(s);t>=0&&a.splice(t,1),o._triggers[e]||delete l[e]}))}}},{key:"register",value:function(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}},{key:"_getTrigger",value:function(t){var e=this._triggers[t];if(!e)throw new Error('The provided animation trigger "'.concat(t,'" has not been registered!'));return e}},{key:"trigger",value:function(t,e,n){var i=this,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=this._getTrigger(e),a=new Vm(this.id,e,t),s=this._engine.statesByElement.get(t);s||(Hm(t,"ng-trigger"),Hm(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));var l=s[e],u=new Nm(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),s[e]=u,l||(l=Fm),"void"===u.value||l.value!==u.value){var c=vd(this._engine.playersByElement,t,[]);c.forEach((function(t){t.namespaceId==i.id&&t.triggerName==e&&t.queued&&t.destroy()}));var h=o.matchTransition(l.value,u.value,t,u.params),p=!1;if(!h){if(!r)return;h=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:h,fromState:l,toState:u,player:a,isFallbackTransition:p}),p||(Hm(t,"ng-animate-queued"),a.onStart((function(){Xm(t,"ng-animate-queued")}))),a.onDone((function(){var e=i.players.indexOf(a);e>=0&&i.players.splice(e,1);var n=i._engine.playersByElement.get(t);if(n){var r=n.indexOf(a);r>=0&&n.splice(r,1)}})),this.players.push(a),c.push(a),a}if(!function(t,e){var n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(var r=0;r<n.length;r++){var o=n[r];if(!e.hasOwnProperty(o)||t[o]!==e[o])return!1}return!0}(l.params,u.params)){var f=[],d=o.matchStyles(l.value,l.params,f),m=o.matchStyles(u.value,u.params,f);f.length?this._engine.reportError(f):this._engine.afterFlush((function(){Ud(t,d),Vd(t,m)}))}}},{key:"deregister",value:function(t){var e=this;delete this._triggers[t],this._engine.statesByElement.forEach((function(e,n){delete e[t]})),this._elementListeners.forEach((function(n,i){e._elementListeners.set(i,n.filter((function(e){return e.name!=t})))}))}},{key:"clearElementCache",value:function(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);var e=this._engine.playersByElement.get(t);e&&(e.forEach((function(t){return t.destroy()})),this._engine.playersByElement.delete(t))}},{key:"_signalRemovalForInnerTriggers",value:function(t,e){var n=this;arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._engine.driver.query(t,".ng-trigger",!0).forEach((function(t){if(!t.__ng_removed){var i=n._engine.fetchNamespacesByElement(t);i.size?i.forEach((function(n){return n.triggerLeaveAnimation(t,e,!1,!0)})):n.clearElementCache(t)}}))}},{key:"triggerLeaveAnimation",value:function(t,e,n,i){var r=this,o=this._engine.statesByElement.get(t);if(o){var a=[];if(Object.keys(o).forEach((function(e){if(r._triggers[e]){var n=r.trigger(t,e,"void",i);n&&a.push(n)}})),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&fd(a).onDone((function(){return r._engine.processLeaveNode(t)})),!0}return!1}},{key:"prepareLeaveAnimationListeners",value:function(t){var e=this,n=this._elementListeners.get(t);if(n){var i=new Set;n.forEach((function(n){var r=n.name;if(!i.has(r)){i.add(r);var o=e._triggers[r].fallbackTransition,a=e._engine.statesByElement.get(t)[r]||Fm,s=new Nm("void"),l=new Vm(e.id,r,t);e._engine.totalQueuedPlayers++,e._queue.push({element:t,triggerName:r,transition:o,fromState:a,toState:s,player:l,isFallbackTransition:!0})}}))}}},{key:"removeNode",value:function(t,e){var n=this,i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e,!0),!this.triggerLeaveAnimation(t,e,!0)){var r=!1;if(i.totalAnimations){var o=i.players.length?i.playersByQueriedElement.get(t):[];if(o&&o.length)r=!0;else for(var a=t;a=a.parentNode;)if(i.statesByElement.get(a)){r=!0;break}}this.prepareLeaveAnimationListeners(t),r?i.markElementAsRemoved(this.id,t,!1,e):(i.afterFlush((function(){return n.clearElementCache(t)})),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}},{key:"insertNode",value:function(t,e){Hm(t,this._hostClassName)}},{key:"drainQueuedTransitions",value:function(t){var e=this,n=[];return this._queue.forEach((function(i){var r=i.player;if(!r.destroyed){var o=i.element,a=e._elementListeners.get(o);a&&a.forEach((function(e){if(e.name==i.triggerName){var n=yd(o,i.triggerName,i.fromState.value,i.toState.value);n._data=t,md(i.player,e.phase,n,e.callback)}})),r.markedForDestroy?e._engine.afterFlush((function(){r.destroy()})):n.push(i)}})),this._queue=[],n.sort((function(t,n){var i=t.transition.ast.depCount,r=n.transition.ast.depCount;return 0==i||0==r?i-r:e._engine.driver.containsElement(t.element,n.element)?1:-1}))}},{key:"destroy",value:function(t){this.players.forEach((function(t){return t.destroy()})),this._signalRemovalForInnerTriggers(this.hostElement,t)}},{key:"elementContainsData",value:function(t){var e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find((function(e){return e.element===t}))||e}}]),t}(),Bm=function(){function t(e,n,i){_classCallCheck(this,t),this.bodyNode=e,this.driver=n,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(t,e){}}return _createClass(t,[{key:"_onRemovalComplete",value:function(t,e){this.onRemovalComplete(t,e)}},{key:"createNamespace",value:function(t,e){var n=new zm(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}},{key:"_balanceNamespaceList",value:function(t,e){var n=this._namespaceList.length-1;if(n>=0){for(var i=!1,r=n;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,e)){this._namespaceList.splice(r+1,0,t),i=!0;break}i||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}},{key:"register",value:function(t,e){var n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}},{key:"registerTrigger",value:function(t,e,n){var i=this._namespaceLookup[t];i&&i.register(e,n)&&this.totalAnimations++}},{key:"destroy",value:function(t,e){var n=this;if(t){var i=this._fetchNamespace(t);this.afterFlush((function(){n.namespacesByHostElement.delete(i.hostElement),delete n._namespaceLookup[t];var e=n._namespaceList.indexOf(i);e>=0&&n._namespaceList.splice(e,1)})),this.afterFlushAnimationsDone((function(){return i.destroy(e)}))}}},{key:"_fetchNamespace",value:function(t){return this._namespaceLookup[t]}},{key:"fetchNamespacesByElement",value:function(t){var e=new Set,n=this.statesByElement.get(t);if(n)for(var i=Object.keys(n),r=0;r<i.length;r++){var o=n[i[r]].namespaceId;if(o){var a=this._fetchNamespace(o);a&&e.add(a)}}return e}},{key:"trigger",value:function(t,e,n,i){if(Um(e)){var r=this._fetchNamespace(t);if(r)return r.trigger(e,n,i),!0}return!1}},{key:"insertNode",value:function(t,e,n,i){if(Um(e)){var r=e.__ng_removed;if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;var o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){var a=this._fetchNamespace(t);a&&a.insertNode(e,n)}i&&this.collectEnterElement(e)}}},{key:"collectEnterElement",value:function(t){this.collectedEnterElements.push(t)}},{key:"markElementAsDisabled",value:function(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Hm(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Xm(t,"ng-animate-disabled"))}},{key:"removeNode",value:function(t,e,n,i){if(Um(e)){var r=t?this._fetchNamespace(t):null;if(r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),n){var o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,i)}}else this._onRemovalComplete(e,i)}},{key:"markElementAsRemoved",value:function(t,e,n,i){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1}}},{key:"listen",value:function(t,e,n,i,r){return Um(e)?this._fetchNamespace(t).listen(e,n,i,r):function(){}}},{key:"_buildInstruction",value:function(t,e,n,i,r){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,i,t.fromState.options,t.toState.options,e,r)}},{key:"destroyInnerAnimations",value:function(t){var e=this,n=this.driver.query(t,".ng-trigger",!0);n.forEach((function(t){return e.destroyActiveAnimationsForElement(t)})),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,".ng-animating",!0)).forEach((function(t){return e.finishActiveQueriedAnimationOnElement(t)}))}},{key:"destroyActiveAnimationsForElement",value:function(t){var e=this.playersByElement.get(t);e&&e.forEach((function(t){t.queued?t.markedForDestroy=!0:t.destroy()}))}},{key:"finishActiveQueriedAnimationOnElement",value:function(t){var e=this.playersByQueriedElement.get(t);e&&e.forEach((function(t){return t.finish()}))}},{key:"whenRenderingDone",value:function(){var t=this;return new Promise((function(e){if(t.players.length)return fd(t.players).onDone((function(){return e()}));e()}))}},{key:"processLeaveNode",value:function(t){var e=this,n=t.__ng_removed;if(n&&n.setForRemoval){if(t.__ng_removed=Om,n.namespaceId){this.destroyInnerAnimations(t);var i=this._fetchNamespace(n.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach((function(t){e.markElementAsDisabled(t,!1)}))}},{key:"flush",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((function(e,n){return t._balanceNamespaceList(e,n)})),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var i=0;i<this.collectedEnterElements.length;i++)Hm(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var r=[];try{n=this._flushAnimations(r,e)}finally{for(var o=0;o<r.length;o++)r[o]()}}else for(var a=0;a<this.collectedLeaveElements.length;a++)this.processLeaveNode(this.collectedLeaveElements[a]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach((function(t){return t()})),this._flushFns=[],this._whenQuietFns.length){var s=this._whenQuietFns;this._whenQuietFns=[],n.length?fd(n).onDone((function(){s.forEach((function(t){return t()}))})):s.forEach((function(t){return t()}))}}},{key:"reportError",value:function(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))}},{key:"_flushAnimations",value:function(t,e){var n=this,i=new cm,r=[],o=new Map,a=[],s=new Map,l=new Map,u=new Map,c=new Set;this.disabledNodes.forEach((function(t){c.add(t);for(var e=n.driver.query(t,".ng-animate-queued",!0),i=0;i<e.length;i++)c.add(e[i])}));var h=this.bodyNode,p=Array.from(this.statesByElement.keys()),f=Gm(p,this.collectedEnterElements),d=new Map,m=0;f.forEach((function(t,e){var n="ng-enter"+m++;d.set(e,n),t.forEach((function(t){return Hm(t,n)}))}));for(var g=[],y=new Set,v=new Set,_=0;_<this.collectedLeaveElements.length;_++){var b=this.collectedLeaveElements[_],x=b.__ng_removed;x&&x.setForRemoval&&(g.push(b),y.add(b),x.hasAnimation?this.driver.query(b,".ng-star-inserted",!0).forEach((function(t){return y.add(t)})):v.add(b))}var w=new Map,C=Gm(p,Array.from(y));C.forEach((function(t,e){var n="ng-leave"+m++;w.set(e,n),t.forEach((function(t){return Hm(t,n)}))})),t.push((function(){f.forEach((function(t,e){var n=d.get(e);t.forEach((function(t){return Xm(t,n)}))})),C.forEach((function(t,e){var n=w.get(e);t.forEach((function(t){return Xm(t,n)}))})),g.forEach((function(t){n.processLeaveNode(t)}))}));for(var k=[],E=[],S=this._namespaceList.length-1;S>=0;S--)this._namespaceList[S].drainQueuedTransitions(e).forEach((function(t){var e=t.player,o=t.element;if(k.push(e),n.collectedEnterElements.length){var c=o.__ng_removed;if(c&&c.setForMove)return void e.destroy()}var p=!h||!n.driver.containsElement(h,o),f=w.get(o),m=d.get(o),g=n._buildInstruction(t,i,m,f,p);if(g.errors&&g.errors.length)E.push(g);else{if(p)return e.onStart((function(){return Ud(o,g.fromStyles)})),e.onDestroy((function(){return Vd(o,g.toStyles)})),void r.push(e);if(t.isFallbackTransition)return e.onStart((function(){return Ud(o,g.fromStyles)})),e.onDestroy((function(){return Vd(o,g.toStyles)})),void r.push(e);g.timelines.forEach((function(t){return t.stretchStartingKeyframe=!0})),i.append(o,g.timelines),a.push({instruction:g,player:e,element:o}),g.queriedElements.forEach((function(t){return vd(s,t,[]).push(e)})),g.preStyleProps.forEach((function(t,e){var n=Object.keys(t);if(n.length){var i=l.get(e);i||l.set(e,i=new Set),n.forEach((function(t){return i.add(t)}))}})),g.postStyleProps.forEach((function(t,e){var n=Object.keys(t),i=u.get(e);i||u.set(e,i=new Set),n.forEach((function(t){return i.add(t)}))}))}}));if(E.length){var I=[];E.forEach((function(t){I.push("@".concat(t.triggerName," has failed due to:\n")),t.errors.forEach((function(t){return I.push("- ".concat(t,"\n"))}))})),k.forEach((function(t){return t.destroy()})),this.reportError(I)}var T=new Map,P=new Map;a.forEach((function(t){var e=t.element;i.has(e)&&(P.set(e,e),n._beforeAnimationBuild(t.player.namespaceId,t.instruction,T))})),r.forEach((function(t){var e=t.element;n._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach((function(t){vd(T,e,[]).push(t),t.destroy()}))}));var A=g.filter((function(t){return Wm(t,l,u)})),L=new Map;qm(L,this.driver,v,u,"*").forEach((function(t){Wm(t,l,u)&&A.push(t)}));var M=new Map;f.forEach((function(t,e){qm(M,n.driver,new Set(t),l,"!")})),A.forEach((function(t){var e=L.get(t),n=M.get(t);L.set(t,Object.assign({},e,n))}));var R=[],O=[],D={};a.forEach((function(t){var e=t.element,a=t.player,s=t.instruction;if(i.has(e)){if(c.has(e))return a.onDestroy((function(){return Vd(e,s.toStyles)})),a.disabled=!0,a.overrideTotalTime(s.totalTime),void r.push(a);var l=D;if(P.size>1){for(var u=e,h=[];u=u.parentNode;){var p=P.get(u);if(p){l=p;break}h.push(u)}h.forEach((function(t){return P.set(t,l)}))}var f=n._buildAnimation(a.namespaceId,s,T,o,M,L);if(a.setRealPlayer(f),l===D)R.push(a);else{var d=n.playersByElement.get(l);d&&d.length&&(a.parentPlayer=fd(d)),r.push(a)}}else Ud(e,s.fromStyles),a.onDestroy((function(){return Vd(e,s.toStyles)})),O.push(a),c.has(e)&&r.push(a)})),O.forEach((function(t){var e=o.get(t.element);if(e&&e.length){var n=fd(e);t.setRealPlayer(n)}})),r.forEach((function(t){t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()}));for(var N=0;N<g.length;N++){var F=g[N],z=F.__ng_removed;if(Xm(F,"ng-leave"),!z||!z.hasAnimation){var B=[];if(s.size){var V=s.get(F);V&&V.length&&B.push.apply(B,_toConsumableArray(V));for(var U=this.driver.query(F,".ng-animating",!0),j=0;j<U.length;j++){var q=s.get(U[j]);q&&q.length&&B.push.apply(B,_toConsumableArray(q))}}var G=B.filter((function(t){return!t.destroyed}));G.length?Zm(this,F,G):this.processLeaveNode(F)}}return g.length=0,R.forEach((function(t){n.players.push(t),t.onDone((function(){t.destroy();var e=n.players.indexOf(t);n.players.splice(e,1)})),t.play()})),R}},{key:"elementContainsData",value:function(t,e){var n=!1,i=e.__ng_removed;return i&&i.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}},{key:"afterFlush",value:function(t){this._flushFns.push(t)}},{key:"afterFlushAnimationsDone",value:function(t){this._whenQuietFns.push(t)}},{key:"_getPreviousPlayers",value:function(t,e,n,i,r){var o=[];if(e){var a=this.playersByQueriedElement.get(t);a&&(o=a)}else{var s=this.playersByElement.get(t);if(s){var l=!r||"void"==r;s.forEach((function(t){t.queued||(l||t.triggerName==i)&&o.push(t)}))}}return(n||i)&&(o=o.filter((function(t){return!(n&&n!=t.namespaceId||i&&i!=t.triggerName)}))),o}},{key:"_beforeAnimationBuild",value:function(t,e,n){var i,r=this,o=e.element,a=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName,l=_createForOfIteratorHelper(e.timelines);try{var u=function(){var t=i.value.element,l=t!==o,u=vd(n,t,[]);r._getPreviousPlayers(t,l,a,s,e.toState).forEach((function(t){var e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)}))};for(l.s();!(i=l.n()).done;)u()}catch(c){l.e(c)}finally{l.f()}Ud(o,e.fromStyles)}},{key:"_buildAnimation",value:function(t,e,n,i,r,o){var a=this,s=e.triggerName,l=e.element,u=[],c=new Set,h=new Set,p=e.timelines.map((function(e){var p=e.element;c.add(p);var f=p.__ng_removed;if(f&&f.removedBeforeQueried)return new cd(e.duration,e.delay);var d,m,g=p!==l,y=(d=(n.get(p)||Rm).map((function(t){return t.getRealPlayer()})),m=[],function t(e,n){for(var i=0;i<e.length;i++){var r=e[i];r instanceof hd?t(r.players,n):n.push(r)}}(d,m),m).filter((function(t){return!!t.element&&t.element===p})),v=r.get(p),_=o.get(p),b=dd(0,a._normalizer,0,e.keyframes,v,_),x=a._buildPlayer(e,b,y);if(e.subTimeline&&i&&h.add(p),g){var w=new Vm(t,s,p);w.setRealPlayer(x),u.push(w)}return x}));u.forEach((function(t){vd(a.playersByQueriedElement,t.element,[]).push(t),t.onDone((function(){return function(t,e,n){var i;if(t instanceof Map){if(i=t.get(e)){if(i.length){var r=i.indexOf(n);i.splice(r,1)}0==i.length&&t.delete(e)}}else if(i=t[e]){if(i.length){var o=i.indexOf(n);i.splice(o,1)}0==i.length&&delete t[e]}return i}(a.playersByQueriedElement,t.element,t)}))})),c.forEach((function(t){return Hm(t,"ng-animating")}));var f=fd(p);return f.onDestroy((function(){c.forEach((function(t){return Xm(t,"ng-animating")})),Vd(l,e.toStyles)})),h.forEach((function(t){vd(i,t,[]).push(f)})),f}},{key:"_buildPlayer",value:function(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new cd(t.duration,t.delay)}},{key:"queuedPlayers",get:function(){var t=[];return this._namespaceList.forEach((function(e){e.players.forEach((function(e){e.queued&&t.push(e)}))})),t}}]),t}(),Vm=function(){function t(e,n,i){_classCallCheck(this,t),this.namespaceId=e,this.triggerName=n,this.element=i,this._player=new cd,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return _createClass(t,[{key:"setRealPlayer",value:function(t){var e=this;this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach((function(n){e._queuedCallbacks[n].forEach((function(e){return md(t,n,void 0,e)}))})),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}},{key:"getRealPlayer",value:function(){return this._player}},{key:"overrideTotalTime",value:function(t){this.totalTime=t}},{key:"syncPlayerEvents",value:function(t){var e=this,n=this._player;n.triggerCallback&&t.onStart((function(){return n.triggerCallback("start")})),t.onDone((function(){return e.finish()})),t.onDestroy((function(){return e.destroy()}))}},{key:"_queueEvent",value:function(t,e){vd(this._queuedCallbacks,t,[]).push(e)}},{key:"onDone",value:function(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}},{key:"onStart",value:function(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}},{key:"onDestroy",value:function(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}},{key:"init",value:function(){this._player.init()}},{key:"hasStarted",value:function(){return!this.queued&&this._player.hasStarted()}},{key:"play",value:function(){!this.queued&&this._player.play()}},{key:"pause",value:function(){!this.queued&&this._player.pause()}},{key:"restart",value:function(){!this.queued&&this._player.restart()}},{key:"finish",value:function(){this._player.finish()}},{key:"destroy",value:function(){this.destroyed=!0,this._player.destroy()}},{key:"reset",value:function(){!this.queued&&this._player.reset()}},{key:"setPosition",value:function(t){this.queued||this._player.setPosition(t)}},{key:"getPosition",value:function(){return this.queued?0:this._player.getPosition()}},{key:"triggerCallback",value:function(t){var e=this._player;e.triggerCallback&&e.triggerCallback(t)}}]),t}();function Um(t){return t&&1===t.nodeType}function jm(t,e){var n=t.style.display;return t.style.display=null!=e?e:"none",n}function qm(t,e,n,i,r){var o=[];n.forEach((function(t){return o.push(jm(t))}));var a=[];i.forEach((function(n,i){var o={};n.forEach((function(t){var n=o[t]=e.computeStyle(i,t,r);n&&0!=n.length||(i.__ng_removed=Dm,a.push(i))})),t.set(i,o)}));var s=0;return n.forEach((function(t){return jm(t,o[s++])})),a}function Gm(t,e){var n=new Map;if(t.forEach((function(t){return n.set(t,[])})),0==e.length)return n;var i=new Set(e),r=new Map;return e.forEach((function(t){var e=function t(e){if(!e)return 1;var o=r.get(e);if(o)return o;var a=e.parentNode;return o=n.has(a)?a:i.has(a)?1:t(a),r.set(e,o),o}(t);1!==e&&n.get(e).push(t)})),n}function Hm(t,e){if(t.classList)t.classList.add(e);else{var n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Xm(t,e){if(t.classList)t.classList.remove(e);else{var n=t.$$classes;n&&delete n[e]}}function Zm(t,e,n){fd(n).onDone((function(){return t.processLeaveNode(e)}))}function Wm(t,e,n){var i=n.get(t);if(!i)return!1;var r=e.get(t);return r?i.forEach((function(t){return r.add(t)})):e.set(t,i),n.delete(t),!0}var Ym=function(){function t(e,n,i){var r=this;_classCallCheck(this,t),this.bodyNode=e,this._driver=n,this._triggerCache={},this.onRemovalComplete=function(t,e){},this._transitionEngine=new Bm(e,n,i),this._timelineEngine=new Mm(e,n,i),this._transitionEngine.onRemovalComplete=function(t,e){return r.onRemovalComplete(t,e)}}return _createClass(t,[{key:"registerTrigger",value:function(t,e,n,i,r){var o=t+"-"+i,a=this._triggerCache[o];if(!a){var s=[],l=im(this._driver,r,s);if(s.length)throw new Error('The animation trigger "'.concat(i,'" has failed to build due to the following errors:\n - ').concat(s.join("\n - ")));a=function(t,e){return new Pm(t,e)}(i,l),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,i,a)}},{key:"register",value:function(t,e){this._transitionEngine.register(t,e)}},{key:"destroy",value:function(t,e){this._transitionEngine.destroy(t,e)}},{key:"onInsert",value:function(t,e,n,i){this._transitionEngine.insertNode(t,e,n,i)}},{key:"onRemove",value:function(t,e,n,i){this._transitionEngine.removeNode(t,e,i||!1,n)}},{key:"disableAnimations",value:function(t,e){this._transitionEngine.markElementAsDisabled(t,e)}},{key:"process",value:function(t,e,n,i){if("@"==n.charAt(0)){var r=_slicedToArray(_d(n),2),o=r[0],a=r[1];this._timelineEngine.command(o,e,a,i)}else this._transitionEngine.trigger(t,e,n,i)}},{key:"listen",value:function(t,e,n,i,r){if("@"==n.charAt(0)){var o=_slicedToArray(_d(n),2),a=o[0],s=o[1];return this._timelineEngine.listen(a,e,s,r)}return this._transitionEngine.listen(t,e,n,i,r)}},{key:"flush",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._transitionEngine.flush(t)}},{key:"whenRenderingDone",value:function(){return this._transitionEngine.whenRenderingDone()}},{key:"players",get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)}}]),t}();function Km(t,e){var n=null,i=null;return Array.isArray(e)&&e.length?(n=Qm(e[0]),e.length>1&&(i=Qm(e[e.length-1]))):e&&(n=Qm(e)),n||i?new Jm(t,n,i):null}var Jm=function(){var t=function(){function t(e,n,i){_classCallCheck(this,t),this._element=e,this._startStyles=n,this._endStyles=i,this._state=0;var r=t.initialStylesByElement.get(e);r||t.initialStylesByElement.set(e,r={}),this._initialStyles=r}return _createClass(t,[{key:"start",value:function(){this._state<1&&(this._startStyles&&Vd(this._element,this._startStyles,this._initialStyles),this._state=1)}},{key:"finish",value:function(){this.start(),this._state<2&&(Vd(this._element,this._initialStyles),this._endStyles&&(Vd(this._element,this._endStyles),this._endStyles=null),this._state=1)}},{key:"destroy",value:function(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Ud(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ud(this._element,this._endStyles),this._endStyles=null),Vd(this._element,this._initialStyles),this._state=3)}}]),t}();return t.initialStylesByElement=new WeakMap,t}();function Qm(t){for(var e=null,n=Object.keys(t),i=0;i<n.length;i++){var r=n[i];$m(r)&&((e=e||{})[r]=t[r])}return e}function $m(t){return"display"===t||"position"===t}var tg=function(){function t(e,n,i,r,o,a,s){var l=this;_classCallCheck(this,t),this._element=e,this._name=n,this._duration=i,this._delay=r,this._easing=o,this._fillMode=a,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(t){return l._handleCallback(t)}}return _createClass(t,[{key:"apply",value:function(){var t,e,n;t=this._element,e="".concat(this._duration,"ms ").concat(this._easing," ").concat(this._delay,"ms 1 normal ").concat(this._fillMode," ").concat(this._name),(n=ag(t,"").trim()).length&&(function(t,e){for(var n=0;n<t.length;n++)t.charAt(n)}(n),e="".concat(n,", ").concat(e)),og(t,"",e),rg(this._element,this._eventFn,!1),this._startTime=Date.now()}},{key:"pause",value:function(){eg(this._element,this._name,"paused")}},{key:"resume",value:function(){eg(this._element,this._name,"running")}},{key:"setPosition",value:function(t){var e=ng(this._element,this._name);this._position=t*this._duration,og(this._element,"Delay","-".concat(this._position,"ms"),e)}},{key:"getPosition",value:function(){return this._position}},{key:"_handleCallback",value:function(t){var e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}},{key:"finish",value:function(){this._finished||(this._finished=!0,this._onDoneFn(),rg(this._element,this._eventFn,!0))}},{key:"destroy",value:function(){var t,e,n,i;this._destroyed||(this._destroyed=!0,this.finish(),t=this._element,e=this._name,n=ag(t,"").split(","),(i=ig(n,e))>=0&&(n.splice(i,1),og(t,"",n.join(","))))}}]),t}();function eg(t,e,n){og(t,"PlayState",n,ng(t,e))}function ng(t,e){var n=ag(t,"");return n.indexOf(",")>0?ig(n.split(","),e):ig([n],e)}function ig(t,e){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function rg(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function og(t,e,n,i){var r="animation"+e;if(null!=i){var o=t.style[r];if(o.length){var a=o.split(",");a[i]=n,n=a.join(",")}}t.style[r]=n}function ag(t,e){return t.style["animation"+e]}var sg=function(){function t(e,n,i,r,o,a,s,l){_classCallCheck(this,t),this.element=e,this.keyframes=n,this.animationName=i,this._duration=r,this._delay=o,this._finalStyles=s,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=a||"linear",this.totalTime=r+o,this._buildStyler()}return _createClass(t,[{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"destroy",value:function(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach((function(t){return t()})),this._onDestroyFns=[])}},{key:"_flushDoneFns",value:function(){this._onDoneFns.forEach((function(t){return t()})),this._onDoneFns=[]}},{key:"_flushStartFns",value:function(){this._onStartFns.forEach((function(t){return t()})),this._onStartFns=[]}},{key:"finish",value:function(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}},{key:"setPosition",value:function(t){this._styler.setPosition(t)}},{key:"getPosition",value:function(){return this._styler.getPosition()}},{key:"hasStarted",value:function(){return this._state>=2}},{key:"init",value:function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}},{key:"play",value:function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}},{key:"pause",value:function(){this.init(),this._styler.pause()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"reset",value:function(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}},{key:"_buildStyler",value:function(){var t=this;this._styler=new tg(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",(function(){return t.finish()}))}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach((function(t){return t()})),e.length=0}},{key:"beforeDestroy",value:function(){var t=this;this.init();var e={};if(this.hasStarted()){var n=this._state>=3;Object.keys(this._finalStyles).forEach((function(i){"offset"!=i&&(e[i]=n?t._finalStyles[i]:Qd(t.element,i))}))}this.currentSnapshot=e}}]),t}(),lg=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this)).element=t,r._startingStyles={},r.__initialized=!1,r._styles=Ad(i),r}return _createClass(n,[{key:"init",value:function(){var t=this;!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach((function(e){t._startingStyles[e]=t.element.style[e]})),_get(_getPrototypeOf(n.prototype),"init",this).call(this))}},{key:"play",value:function(){var t=this;this._startingStyles&&(this.init(),Object.keys(this._styles).forEach((function(e){return t.element.style.setProperty(e,t._styles[e])})),_get(_getPrototypeOf(n.prototype),"play",this).call(this))}},{key:"destroy",value:function(){var t=this;this._startingStyles&&(Object.keys(this._startingStyles).forEach((function(e){var n=t._startingStyles[e];n?t.element.style.setProperty(e,n):t.element.style.removeProperty(e)})),this._startingStyles=null,_get(_getPrototypeOf(n.prototype),"destroy",this).call(this))}}]),n}(cd),ug=function(){function t(){_classCallCheck(this,t),this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}return _createClass(t,[{key:"validateStyleProperty",value:function(t){return Sd(t)}},{key:"matchesElement",value:function(t,e){return Id(t,e)}},{key:"containsElement",value:function(t,e){return Td(t,e)}},{key:"query",value:function(t,e,n){return Pd(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return window.getComputedStyle(t)[e]}},{key:"buildKeyframeElement",value:function(t,e,n){n=n.map((function(t){return Ad(t)}));var i="@keyframes ".concat(e," {\n"),r="";n.forEach((function(t){r=" ";var e=parseFloat(t.offset);i+="".concat(r).concat(100*e,"% {\n"),r+=" ",Object.keys(t).forEach((function(e){var n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(i+="".concat(r,"animation-timing-function: ").concat(n,";\n")));default:return void(i+="".concat(r).concat(e,": ").concat(n,";\n"))}})),i+=r+"}\n"})),i+="}\n";var o=document.createElement("style");return o.innerHTML=i,o}},{key:"animate",value:function(t,e,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6?arguments[6]:void 0;a&&this._notifyFaultyScrubber();var s=o.filter((function(t){return t instanceof sg})),l={};Yd(n,i)&&s.forEach((function(t){var e=t.currentSnapshot;Object.keys(e).forEach((function(t){return l[t]=e[t]}))}));var u=function(t){var e={};return t&&(Array.isArray(t)?t:[t]).forEach((function(t){Object.keys(t).forEach((function(n){"offset"!=n&&"easing"!=n&&(e[n]=t[n])}))})),e}(e=Kd(t,e,l));if(0==n)return new lg(t,u);var c="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,c,e);document.querySelector("head").appendChild(h);var p=Km(t,e),f=new sg(t,e,c,n,i,r,u,p);return f.onDestroy((function(){var t;(t=h).parentNode.removeChild(t)})),f}},{key:"_notifyFaultyScrubber",value:function(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}]),t}(),cg=function(){function t(e,n,i,r){_classCallCheck(this,t),this.element=e,this.keyframes=n,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}return _createClass(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(t){return t()})),this._onDoneFns=[])}},{key:"init",value:function(){this._buildPlayer(),this._preparePlayerBeforeStart()}},{key:"_buildPlayer",value:function(){var t=this;if(!this._initialized){this._initialized=!0;var e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",(function(){return t._onFinish()}))}}},{key:"_preparePlayerBeforeStart",value:function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}},{key:"_triggerWebAnimation",value:function(t,e,n){return t.animate(e,n)}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"play",value:function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach((function(t){return t()})),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}},{key:"pause",value:function(){this.init(),this.domPlayer.pause()}},{key:"finish",value:function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}},{key:"reset",value:function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"_resetDomPlayerState",value:function(){this.domPlayer&&this.domPlayer.cancel()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"hasStarted",value:function(){return this._started}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach((function(t){return t()})),this._onDestroyFns=[])}},{key:"setPosition",value:function(t){this.domPlayer.currentTime=t*this.time}},{key:"getPosition",value:function(){return this.domPlayer.currentTime/this.time}},{key:"beforeDestroy",value:function(){var t=this,e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach((function(n){"offset"!=n&&(e[n]=t._finished?t._finalKeyframe[n]:Qd(t.element,n))})),this.currentSnapshot=e}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach((function(t){return t()})),e.length=0}},{key:"totalTime",get:function(){return this._delay+this._duration}}]),t}(),hg=function(){function t(){_classCallCheck(this,t),this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(pg().toString()),this._cssKeyframesDriver=new ug}return _createClass(t,[{key:"validateStyleProperty",value:function(t){return Sd(t)}},{key:"matchesElement",value:function(t,e){return Id(t,e)}},{key:"containsElement",value:function(t,e){return Td(t,e)}},{key:"query",value:function(t,e,n){return Pd(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return window.getComputedStyle(t)[e]}},{key:"overrideWebAnimationsSupport",value:function(t){this._isNativeImpl=t}},{key:"animate",value:function(t,e,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6?arguments[6]:void 0;if(!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,i,r,o);var s={duration:n,delay:i,fill:0==i?"both":"forwards"};r&&(s.easing=r);var l={},u=o.filter((function(t){return t instanceof cg}));Yd(n,i)&&u.forEach((function(t){var e=t.currentSnapshot;Object.keys(e).forEach((function(t){return l[t]=e[t]}))}));var c=Km(t,e=Kd(t,e=e.map((function(t){return Fd(t,!1)})),l));return new cg(t,e,s,c)}}]),t}();function pg(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}var fg=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this))._nextAnimationId=0,r._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Gt.None,styles:[],data:{animation:[]}}),r}return _createClass(n,[{key:"build",value:function(t){var e=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(t)?sd(t):t;return gg(this._renderer,null,e,"register",[n]),new dg(e,this._renderer)}}]),n}(ad),dg=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this))._id=t,r._renderer=i,r}return _createClass(n,[{key:"create",value:function(t,e){return new mg(this._id,t,e||{},this._renderer)}}]),n}(function(){return function t(){_classCallCheck(this,t)}}()),mg=function(){function t(e,n,i,r){_classCallCheck(this,t),this.id=e,this.element=n,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}return _createClass(t,[{key:"_listen",value:function(t,e){return this._renderer.listen(this.element,"@@".concat(this.id,":").concat(t),e)}},{key:"_command",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return gg(this._renderer,this.element,this.id,t,n)}},{key:"onDone",value:function(t){this._listen("done",t)}},{key:"onStart",value:function(t){this._listen("start",t)}},{key:"onDestroy",value:function(t){this._listen("destroy",t)}},{key:"init",value:function(){this._command("init")}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this._command("play"),this._started=!0}},{key:"pause",value:function(){this._command("pause")}},{key:"restart",value:function(){this._command("restart")}},{key:"finish",value:function(){this._command("finish")}},{key:"destroy",value:function(){this._command("destroy")}},{key:"reset",value:function(){this._command("reset")}},{key:"setPosition",value:function(t){this._command("setPosition",t)}},{key:"getPosition",value:function(){return 0}}]),t}();function gg(t,e,n,i,r){return t.setProperty(e,"@@".concat(n,":").concat(i),r)}var yg=function(){function t(e,n,i){_classCallCheck(this,t),this.delegate=e,this.engine=n,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=function(t,e){e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}return _createClass(t,[{key:"createRenderer",value:function(t,e){var n=this,i=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){var r=this._rendererCache.get(i);return r||(r=new vg("",i,this.engine),this._rendererCache.set(i,r)),r}var o=e.id,a=e.id+"-"+this._currentId;return this._currentId++,this.engine.register(a,t),e.data.animation.forEach((function(e){return n.engine.registerTrigger(o,a,t,e.name,e)})),new _g(this,a,i,this.engine)}},{key:"begin",value:function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}},{key:"_scheduleCountTask",value:function(){var t=this;this.promise.then((function(){t._microtaskId++}))}},{key:"scheduleListenerCallback",value:function(t,e,n){var i=this;t>=0&&t<this._microtaskId?this._zone.run((function(){return e(n)})):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then((function(){i._zone.run((function(){i._animationCallbacksBuffer.forEach((function(t){var e=_slicedToArray(t,2);(0,e[0])(e[1])})),i._animationCallbacksBuffer=[]}))})),this._animationCallbacksBuffer.push([e,n]))}},{key:"end",value:function(){var t=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular((function(){t._scheduleCountTask(),t.engine.flush(t._microtaskId)})),this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.engine.whenRenderingDone()}}]),t}(),vg=function(){function t(e,n,i){_classCallCheck(this,t),this.namespaceId=e,this.delegate=n,this.engine=i,this.destroyNode=this.delegate.destroyNode?function(t){return n.destroyNode(t)}:null}return _createClass(t,[{key:"destroy",value:function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}},{key:"createElement",value:function(t,e){return this.delegate.createElement(t,e)}},{key:"createComment",value:function(t){return this.delegate.createComment(t)}},{key:"createText",value:function(t){return this.delegate.createText(t)}},{key:"appendChild",value:function(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}},{key:"insertBefore",value:function(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}},{key:"removeChild",value:function(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}},{key:"selectRootElement",value:function(t,e){return this.delegate.selectRootElement(t,e)}},{key:"parentNode",value:function(t){return this.delegate.parentNode(t)}},{key:"nextSibling",value:function(t){return this.delegate.nextSibling(t)}},{key:"setAttribute",value:function(t,e,n,i){this.delegate.setAttribute(t,e,n,i)}},{key:"removeAttribute",value:function(t,e,n){this.delegate.removeAttribute(t,e,n)}},{key:"addClass",value:function(t,e){this.delegate.addClass(t,e)}},{key:"removeClass",value:function(t,e){this.delegate.removeClass(t,e)}},{key:"setStyle",value:function(t,e,n,i){this.delegate.setStyle(t,e,n,i)}},{key:"removeStyle",value:function(t,e,n){this.delegate.removeStyle(t,e,n)}},{key:"setProperty",value:function(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}},{key:"setValue",value:function(t,e){this.delegate.setValue(t,e)}},{key:"listen",value:function(t,e,n){return this.delegate.listen(t,e,n)}},{key:"disableAnimations",value:function(t,e){this.engine.disableAnimations(t,e)}},{key:"data",get:function(){return this.delegate.data}}]),t}(),_g=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o){var a;return _classCallCheck(this,n),(a=e.call(this,i,r,o)).factory=t,a.namespaceId=i,a}return _createClass(n,[{key:"setProperty",value:function(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}},{key:"listen",value:function(t,e,n){var i,r,o=this;if("@"==e.charAt(0)){var a,s=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t),l=e.substr(1),u="";return"@"!=l.charAt(0)&&(r=(i=l).indexOf("."),l=(a=_slicedToArray([i.substring(0,r),i.substr(r+1)],2))[0],u=a[1]),this.engine.listen(this.namespaceId,s,l,u,(function(t){o.factory.scheduleListenerCallback(t._data||-1,n,t)}))}return this.delegate.listen(t,e,n)}}]),n}(vg),bg=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){return _classCallCheck(this,n),e.call(this,t.body,i,r)}return n}(Ym);function xg(){return"function"==typeof pg()?new hg:new ug}function wg(){return new Cm}function Cg(t,e,n){return new yg(t,e,n)}var kg=new Pt("AnimationModuleType"),Eg=function t(){_classCallCheck(this,t)},Sg=Hn({encapsulation:2,styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:.04}@media (hover:none){.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-flat-button,.mat-icon-button,.mat-stroked-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-button[disabled],.mat-flat-button[disabled],.mat-icon-button[disabled],.mat-stroked-button[disabled]{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button[disabled]{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-focus-overlay,.mat-stroked-button .mat-button-ripple.mat-ripple{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab[disabled]{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab[disabled]{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button .mat-icon,.mat-icon-button i{line-height:24px}.mat-button-focus-overlay,.mat-button-ripple.mat-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}@media (-ms-high-contrast:active){.mat-button-focus-overlay{background-color:#fff}}@media (-ms-high-contrast:black-on-white){.mat-button-focus-overlay{background-color:#000}}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}@media (-ms-high-contrast:active){.mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button{outline:solid 1px}}"],data:{}});function Ig(t){return Jo(2,[Bo(671088640,1,{ripple:0}),(t()(),Oo(1,0,null,null,1,"span",[["class","mat-button-wrapper"]],null,null,null,null,null)),Go(null,0),(t()(),Oo(3,0,null,null,1,"div",[["class","mat-button-ripple mat-ripple"],["matRipple",""]],[[2,"mat-button-ripple-round",null],[2,"mat-ripple-unbounded",null]],null,null,null,null)),$i(4,212992,[[1,4]],0,Yf,[rn,Yr,qp,[2,Wf],[2,kg]],{centered:[0,"centered"],disabled:[1,"disabled"],trigger:[2,"trigger"]},null),(t()(),Oo(5,0,null,null,0,"div",[["class","mat-button-focus-overlay"]],null,null,null,null,null))],(function(t,e){var n=e.component;t(e,4,0,n.isIconButton,n._isRippleDisabled(),n._getHostElement())}),(function(t,e){var n=e.component;t(e,3,0,n.isRoundButton||n.isIconButton,Vi(e,4).unbounded)}))}function Tg(t,e,n,i){return r(n)&&(i=n,n=void 0),i?Tg(t,e,n).pipe(H((function(t){return u(t)?i.apply(void 0,_toConsumableArray(t)):i(t)}))):new k((function(i){!function t(e,n,i,r,o){var a;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var s=e;e.addEventListener(n,i,o),a=function(){return s.removeEventListener(n,i,o)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var l=e;e.on(n,i),a=function(){return l.off(n,i)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var u=e;e.addListener(n,i),a=function(){return u.removeListener(n,i)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var c=0,h=e.length;c<h;c++)t(e[c],n,i,r,o)}r.add(a)}(t,e,(function(t){i.next(arguments.length>1?Array.prototype.slice.call(arguments):t)}),i,n)}))}function Pg(t){return function(e){return e.lift(new Ag(t))}}var Ag=function(){function t(e){_classCallCheck(this,t),this.notifier=e}return _createClass(t,[{key:"call",value:function(t,e){var n=new Lg(t),i=q(n,this.notifier);return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n}}]),t}(),Lg=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var i;return _classCallCheck(this,n),(i=e.call(this,t)).seenValue=!1,i}return _createClass(n,[{key:"notifyNext",value:function(t,e,n,i,r){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),n}(G),Mg=function t(){_classCallCheck(this,t)};function Rg(t){return Error("A hint was already declared for 'align=\"".concat(t,"\"'."))}var Og=function t(){_classCallCheck(this,t)},Dg=function t(){_classCallCheck(this,t)},Ng=0,Fg=Lf((function t(e){_classCallCheck(this,t),this._elementRef=e}),"primary"),zg=new Pt("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Bg=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o,a,s,l,u){var c;return _classCallCheck(this,n),(c=e.call(this,t))._elementRef=t,c._changeDetectorRef=i,c._dir=o,c._defaults=a,c._platform=s,c._ngZone=l,c._outlineGapCalculationNeededImmediately=!1,c._outlineGapCalculationNeededOnStable=!1,c._destroyed=new L,c._showAlwaysAnimate=!1,c._subscriptAnimationState="",c._hintLabel="",c._hintLabelId="mat-hint-"+Ng++,c._labelId="mat-form-field-label-"+Ng++,c._previousDirection="ltr",c._labelOptions=r||{},c.floatLabel=c._labelOptions.float||"auto",c._animationsEnabled="NoopAnimations"!==u,c.appearance=a&&a.appearance?a.appearance:"legacy",c._hideRequiredMarker=!(!a||null==a.hideRequiredMarker)&&a.hideRequiredMarker,c}return _createClass(n,[{key:"getConnectedOverlayOrigin",value:function(){return this._connectionContainerRef||this._elementRef}},{key:"ngAfterContentInit",value:function(){var t=this;this._validateControlChild();var e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add("mat-form-field-type-"+e.controlType),e.stateChanges.pipe(Ml(null)).subscribe((function(){t._validatePlaceholders(),t._syncDescribedByIds(),t._changeDetectorRef.markForCheck()})),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Pg(this._destroyed)).subscribe((function(){return t._changeDetectorRef.markForCheck()})),this._ngZone.runOutsideAngular((function(){t._ngZone.onStable.asObservable().pipe(Pg(t._destroyed)).subscribe((function(){t._outlineGapCalculationNeededOnStable&&t.updateOutlineGap()}))})),et(this._prefixChildren.changes,this._suffixChildren.changes).subscribe((function(){t._outlineGapCalculationNeededOnStable=!0,t._changeDetectorRef.markForCheck()})),this._hintChildren.changes.pipe(Ml(null)).subscribe((function(){t._processHints(),t._changeDetectorRef.markForCheck()})),this._errorChildren.changes.pipe(Ml(null)).subscribe((function(){t._syncDescribedByIds(),t._changeDetectorRef.markForCheck()})),this._dir&&this._dir.change.pipe(Pg(this._destroyed)).subscribe((function(){t.updateOutlineGap(),t._previousDirection=t._dir.value}))}},{key:"ngAfterContentChecked",value:function(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}},{key:"ngAfterViewInit",value:function(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete()}},{key:"_shouldForward",value:function(t){var e=this._control?this._control.ngControl:null;return e&&e[t]}},{key:"_hasPlaceholder",value:function(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}},{key:"_hasLabel",value:function(){return!!this._labelChild}},{key:"_shouldLabelFloat",value:function(){return this._canLabelFloat&&(this._control.shouldLabelFloat||this._shouldAlwaysFloat)}},{key:"_hideControlPlaceholder",value:function(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}},{key:"_hasFloatingLabel",value:function(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}},{key:"_getDisplayedMessages",value:function(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}},{key:"_animateAndLockLabel",value:function(){var t=this;this._hasFloatingLabel()&&this._canLabelFloat&&(this._animationsEnabled&&(this._showAlwaysAnimate=!0,Tg(this._label.nativeElement,"transitionend").pipe(wl(1)).subscribe((function(){t._showAlwaysAnimate=!1}))),this.floatLabel="always",this._changeDetectorRef.markForCheck())}},{key:"_validatePlaceholders",value:function(){if(this._control.placeholder&&this._placeholderChild)throw Error("Placeholder attribute and child element were both specified.")}},{key:"_processHints",value:function(){this._validateHints(),this._syncDescribedByIds()}},{key:"_validateHints",value:function(){var t,e,n=this;this._hintChildren&&this._hintChildren.forEach((function(i){if("start"===i.align){if(t||n.hintLabel)throw Rg("start");t=i}else if("end"===i.align){if(e)throw Rg("end");e=i}}))}},{key:"_syncDescribedByIds",value:function(){if(this._control){var t=[];if("hint"===this._getDisplayedMessages()){var e=this._hintChildren?this._hintChildren.find((function(t){return"start"===t.align})):null,n=this._hintChildren?this._hintChildren.find((function(t){return"end"===t.align})):null;e?t.push(e.id):this._hintLabel&&t.push(this._hintLabelId),n&&t.push(n.id)}else this._errorChildren&&(t=this._errorChildren.map((function(t){return t.id})));this._control.setDescribedByIds(t)}}},{key:"_validateControlChild",value:function(){if(!this._control)throw Error("mat-form-field must contain a MatFormFieldControl.")}},{key:"updateOutlineGap",value:function(){var t=this._label?this._label.nativeElement:null;if("outline"===this.appearance&&t&&t.children.length&&t.textContent.trim()&&this._platform.isBrowser)if(document.documentElement.contains(this._elementRef.nativeElement)){var e=0,n=0,i=this._connectionContainerRef.nativeElement,r=i.querySelectorAll(".mat-form-field-outline-start"),o=i.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){var a=i.getBoundingClientRect();if(0===a.width&&0===a.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);var s,l=this._getStartEnd(a),u=this._getStartEnd(t.children[0].getBoundingClientRect()),c=0,h=_createForOfIteratorHelper(t.children);try{for(h.s();!(s=h.n()).done;){c+=s.value.offsetWidth}}catch(d){h.e(d)}finally{h.f()}e=u-l-5,n=c>0?.75*c+10:0}for(var p=0;p<r.length;p++)r.item(p).style.width=e+"px";for(var f=0;f<o.length;f++)o.item(f).style.width=n+"px";this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}else this._outlineGapCalculationNeededImmediately=!0}},{key:"_getStartEnd",value:function(t){return"rtl"===this._previousDirection?t.right:t.left}},{key:"appearance",get:function(){return this._appearance},set:function(t){var e=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&e!==t&&(this._outlineGapCalculationNeededOnStable=!0)}},{key:"hideRequiredMarker",get:function(){return this._hideRequiredMarker},set:function(t){this._hideRequiredMarker=Dp(t)}},{key:"_shouldAlwaysFloat",get:function(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}},{key:"_canLabelFloat",get:function(){return"never"!==this.floatLabel}},{key:"hintLabel",get:function(){return this._hintLabel},set:function(t){this._hintLabel=t,this._processHints()}},{key:"floatLabel",get:function(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel},set:function(t){t!==this._floatLabel&&(this._floatLabel=t||this._labelOptions.float||"auto",this._changeDetectorRef.markForCheck())}},{key:"_control",get:function(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic},set:function(t){this._explicitFormFieldControl=t}},{key:"_labelChild",get:function(){return this._labelChildNonStatic||this._labelChildStatic}}]),n}(Fg),Vg=function t(){_classCallCheck(this,t)},Ug=function t(){_classCallCheck(this,t)},jg=function t(){_classCallCheck(this,t)},qg=function(){function t(e){var n=this;_classCallCheck(this,t),this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?function(){n.headers=new Map,e.split("\n").forEach((function(t){var e=t.indexOf(":");if(e>0){var i=t.slice(0,e),r=i.toLowerCase(),o=t.slice(e+1).trim();n.maybeSetNormalizedName(i,r),n.headers.has(r)?n.headers.get(r).push(o):n.headers.set(r,[o])}}))}:function(){n.headers=new Map,Object.keys(e).forEach((function(t){var i=e[t],r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(n.headers.set(r,i),n.maybeSetNormalizedName(t,r))}))}:this.headers=new Map}return _createClass(t,[{key:"has",value:function(t){return this.init(),this.headers.has(t.toLowerCase())}},{key:"get",value:function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(t){return this.init(),this.headers.get(t.toLowerCase())||null}},{key:"append",value:function(t,e){return this.clone({name:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({name:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({name:t,value:e,op:"d"})}},{key:"maybeSetNormalizedName",value:function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}},{key:"init",value:function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach((function(t){return e.applyUpdate(t)})),this.lazyUpdate=null))}},{key:"copyFrom",value:function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach((function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))}))}},{key:"clone",value:function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}},{key:"applyUpdate",value:function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var i=("a"===t.op?this.headers.get(e):void 0)||[];i.push.apply(i,_toConsumableArray(n)),this.headers.set(e,i);break;case"d":var r=t.value;if(r){var o=this.headers.get(e);if(!o)return;0===(o=o.filter((function(t){return-1===r.indexOf(t)}))).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}},{key:"forEach",value:function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach((function(n){return t(e.normalizedNames.get(n),e.headers.get(n))}))}}]),t}(),Gg=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"encodeKey",value:function(t){return Hg(t)}},{key:"encodeValue",value:function(t){return Hg(t)}},{key:"decodeKey",value:function(t){return decodeURIComponent(t)}},{key:"decodeValue",value:function(t){return decodeURIComponent(t)}}]),t}();function Hg(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var Xg=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,t),this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new Gg,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){var n=new Map;return t.length>0&&t.split("&").forEach((function(t){var i=t.indexOf("="),r=_slicedToArray(-1==i?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,i)),e.decodeValue(t.slice(i+1))],2),o=r[0],a=r[1],s=n.get(o)||[];s.push(a),n.set(o,s)})),n}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach((function(t){var i=n.fromObject[t];e.map.set(t,Array.isArray(i)?i:[i])}))):this.map=null}return _createClass(t,[{key:"has",value:function(t){return this.init(),this.map.has(t)}},{key:"get",value:function(t){this.init();var e=this.map.get(t);return e?e[0]:null}},{key:"getAll",value:function(t){return this.init(),this.map.get(t)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(t,e){return this.clone({param:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({param:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({param:t,value:e,op:"d"})}},{key:"toString",value:function(){var t=this;return this.init(),this.keys().map((function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map((function(e){return n+"="+t.encoder.encodeValue(e)})).join("&")})).join("&")}},{key:"clone",value:function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([e]),n}},{key:"init",value:function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach((function(e){return t.map.set(e,t.cloneFrom.map.get(e))})),this.updates.forEach((function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(e.value),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var i=t.map.get(e.param)||[],r=i.indexOf(e.value);-1!==r&&i.splice(r,1),i.length>0?t.map.set(e.param,i):t.map.delete(e.param)}})),this.cloneFrom=this.updates=null)}}]),t}();function Zg(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Wg(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Yg(t){return"undefined"!=typeof FormData&&t instanceof FormData}var Kg=function(){function t(e,n,i,r){var o;if(_classCallCheck(this,t),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.params&&(this.params=o.params)),this.headers||(this.headers=new qg),this.params){var a=this.params.toString();if(0===a.length)this.urlWithParams=n;else{var s=n.indexOf("?");this.urlWithParams=n+(-1===s?"?":s<n.length-1?"&":"")+a}}else this.params=new Xg,this.urlWithParams=n}return _createClass(t,[{key:"serializeBody",value:function(){return null===this.body?null:Zg(this.body)||Wg(this.body)||Yg(this.body)||"string"==typeof this.body?this.body:this.body instanceof Xg?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||Yg(this.body)?null:Wg(this.body)?this.body.type||null:Zg(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Xg?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,s=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,l=e.headers||this.headers,u=e.params||this.params;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((function(t,n){return t.set(n,e.setHeaders[n])}),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((function(t,n){return t.set(n,e.setParams[n])}),u)),new t(n,i,o,{params:u,headers:l,reportProgress:s,responseType:r,withCredentials:a})}}]),t}(),Jg=function(){var t={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return t[t.Sent]="Sent",t[t.UploadProgress]="UploadProgress",t[t.ResponseHeader]="ResponseHeader",t[t.DownloadProgress]="DownloadProgress",t[t.Response]="Response",t[t.User]="User",t}(),Qg=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";_classCallCheck(this,t),this.headers=e.headers||new qg,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300},$g=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,n),(t=e.call(this,i)).type=Jg.ResponseHeader,t}return _createClass(n,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),n}(Qg),ty=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,n),(t=e.call(this,i)).type=Jg.Response,t.body=void 0!==i.body?i.body:null,t}return _createClass(n,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),n}(Qg),ey=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var i;return _classCallCheck(this,n),(i=e.call(this,t,0,"Unknown Error")).name="HttpErrorResponse",i.ok=!1,i.message=i.status>=200&&i.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):"Http failure response for ".concat(t.url||"(unknown url)",": ").concat(t.status," ").concat(t.statusText),i.error=t.error||null,i}return n}(Qg);function ny(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var iy=function(){function t(e){_classCallCheck(this,t),this.handler=e}return _createClass(t,[{key:"request",value:function(t,e){var n,i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t instanceof Kg)n=t;else{var o=void 0;o=r.headers instanceof qg?r.headers:new qg(r.headers);var a=void 0;r.params&&(a=r.params instanceof Xg?r.params:new Xg({fromObject:r.params})),n=new Kg(t,e,void 0!==r.body?r.body:null,{headers:o,params:a,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}var s=Xs(n).pipe(Nl((function(t){return i.handler.handle(t)})));if(t instanceof Kg||"events"===r.observe)return s;var l=s.pipe(nl((function(t){return t instanceof ty})));switch(r.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return l.pipe(H((function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body})));case"blob":return l.pipe(H((function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body})));case"text":return l.pipe(H((function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body})));case"json":default:return l.pipe(H((function(t){return t.body})))}case"response":return l;default:throw new Error("Unreachable: unhandled observe type ".concat(r.observe,"}"))}}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",t,e)}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",t,e)}},{key:"head",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",t,e)}},{key:"jsonp",value:function(t,e){return this.request("JSONP",t,{params:(new Xg).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",t,e)}},{key:"patch",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",t,ny(n,e))}},{key:"post",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",t,ny(n,e))}},{key:"put",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",t,ny(n,e))}}]),t}(),ry=function(){function t(e,n){_classCallCheck(this,t),this.next=e,this.interceptor=n}return _createClass(t,[{key:"handle",value:function(t){return this.interceptor.intercept(t,this.next)}}]),t}(),oy=new Pt("HTTP_INTERCEPTORS"),ay=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"intercept",value:function(t,e){return e.handle(t)}}]),t}(),sy=/^\)\]\}',?\n/,ly=function t(){_classCallCheck(this,t)},uy=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"build",value:function(){return new XMLHttpRequest}}]),t}(),cy=function(){function t(e){_classCallCheck(this,t),this.xhrFactory=e}return _createClass(t,[{key:"handle",value:function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new k((function(n){var i=e.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((function(t,e){return i.setRequestHeader(t,e.join(","))})),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var r=t.detectContentTypeHeader();null!==r&&i.setRequestHeader("Content-Type",r)}if(t.responseType){var o=t.responseType.toLowerCase();i.responseType="json"!==o?o:"text"}var a=t.serializeBody(),s=null,l=function(){if(null!==s)return s;var e=1223===i.status?204:i.status,n=i.statusText||"OK",r=new qg(i.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(i)||t.url;return s=new $g({headers:r,status:e,statusText:n,url:o})},u=function(){var e=l(),r=e.headers,o=e.status,a=e.statusText,s=e.url,u=null;204!==o&&(u=void 0===i.response?i.responseText:i.response),0===o&&(o=u?200:0);var c=o>=200&&o<300;if("json"===t.responseType&&"string"==typeof u){var h=u;u=u.replace(sy,"");try{u=""!==u?JSON.parse(u):null}catch(p){u=h,c&&(c=!1,u={error:p,text:u})}}c?(n.next(new ty({body:u,headers:r,status:o,statusText:a,url:s||void 0})),n.complete()):n.error(new ey({error:u,headers:r,status:o,statusText:a,url:s||void 0}))},c=function(t){var e=l().url,r=new ey({error:t,status:i.status||0,statusText:i.statusText||"Unknown Error",url:e||void 0});n.error(r)},h=!1,p=function(e){h||(n.next(l()),h=!0);var r={type:Jg.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(r.total=e.total),"text"===t.responseType&&i.responseText&&(r.partialText=i.responseText),n.next(r)},f=function(t){var e={type:Jg.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return i.addEventListener("load",u),i.addEventListener("error",c),t.reportProgress&&(i.addEventListener("progress",p),null!==a&&i.upload&&i.upload.addEventListener("progress",f)),i.send(a),n.next({type:Jg.Sent}),function(){i.removeEventListener("error",c),i.removeEventListener("load",u),t.reportProgress&&(i.removeEventListener("progress",p),null!==a&&i.upload&&i.upload.removeEventListener("progress",f)),i.abort()}}))}}]),t}(),hy=new Pt("XSRF_COOKIE_NAME"),py=new Pt("XSRF_HEADER_NAME"),fy=function t(){_classCallCheck(this,t)},dy=function(){function t(e,n,i){_classCallCheck(this,t),this.doc=e,this.platform=n,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return _createClass(t,[{key:"getToken",value:function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=vs(t,this.cookieName),this.lastCookieString=t),this.lastToken}}]),t}(),my=function(){function t(e,n){_classCallCheck(this,t),this.tokenService=e,this.headerName=n}return _createClass(t,[{key:"intercept",value:function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var i=this.tokenService.getToken();return null===i||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,i)})),e.handle(t)}}]),t}(),gy=function(){function t(e,n){_classCallCheck(this,t),this.backend=e,this.injector=n,this.chain=null}return _createClass(t,[{key:"handle",value:function(t){if(null===this.chain){var e=this.injector.get(oy,[]);this.chain=e.reduceRight((function(t,e){return new ry(t,e)}),this.backend)}return this.chain.handle(t)}}]),t}(),yy=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"disable",value:function(){return{ngModule:t,providers:[{provide:my,useClass:ay}]}}},{key:"withOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:t,providers:[e.cookieName?{provide:hy,useValue:e.cookieName}:[],e.headerName?{provide:py,useValue:e.headerName}:[]]}}}]),t}(),vy=function t(){_classCallCheck(this,t)};function _y(t,e){return new k(e?function(n){return e.schedule(by,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function by(t){var e=t.error;t.subscriber.error(e)}function xy(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i;return"function"==typeof e[e.length-1]&&(i=e.pop()),1===e.length&&u(e[0])&&(e=e[0]),0===e.length?qs:i?xy(e).pipe(H((function(t){return i.apply(void 0,_toConsumableArray(t))}))):new k((function(t){return new wy(t,e)}))}var wy=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;_classCallCheck(this,n),(r=e.call(this,t)).sources=i,r.completed=0,r.haveValues=0;var o=i.length;r.values=new Array(o);for(var a=0;a<o;a++){var s=q(_assertThisInitialized(r),i[a],null,a);s&&r.add(s)}return r}return _createClass(n,[{key:"notifyNext",value:function(t,e,n,i,r){this.values[n]=e,r._hasValue||(r._hasValue=!0,this.haveValues++)}},{key:"notifyComplete",value:function(t){var e=this.destination,n=this.haveValues,i=this.values,r=i.length;t._hasValue?(this.completed++,this.completed===r&&(n===r&&e.next(i),e.complete())):e.complete()}}]),n}(G);function Cy(t){return Error('Unable to find icon with the name "'.concat(t,'"'))}function ky(t){return Error("The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was \"".concat(t,'".'))}function Ey(t){return Error("The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was \"".concat(t,'".'))}var Sy,Iy=function t(e,n){_classCallCheck(this,t),this.options=n,e.nodeName?this.svgElement=e:this.url=e},Ty=((Sy=function(){function t(e,n,i,r){_classCallCheck(this,t),this._httpClient=e,this._sanitizer=n,this._errorHandler=r,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._defaultFontSetClass="material-icons",this._document=i}return _createClass(t,[{key:"addSvgIcon",value:function(t,e,n){return this.addSvgIconInNamespace("",t,e,n)}},{key:"addSvgIconLiteral",value:function(t,e,n){return this.addSvgIconLiteralInNamespace("",t,e,n)}},{key:"addSvgIconInNamespace",value:function(t,e,n,i){return this._addSvgIconConfig(t,e,new Iy(n,i))}},{key:"addSvgIconLiteralInNamespace",value:function(t,e,n,i){var r=this._sanitizer.sanitize(be.HTML,n);if(!r)throw Ey(n);var o=this._createSvgElementForSingleIcon(r,i);return this._addSvgIconConfig(t,e,new Iy(o,i))}},{key:"addSvgIconSet",value:function(t,e){return this.addSvgIconSetInNamespace("",t,e)}},{key:"addSvgIconSetLiteral",value:function(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}},{key:"addSvgIconSetInNamespace",value:function(t,e,n){return this._addSvgIconSetConfig(t,new Iy(e,n))}},{key:"addSvgIconSetLiteralInNamespace",value:function(t,e,n){var i=this._sanitizer.sanitize(be.HTML,e);if(!i)throw Ey(e);var r=this._svgElementFromString(i);return this._addSvgIconSetConfig(t,new Iy(r,n))}},{key:"registerFontClassAlias",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this._fontCssClassesByAlias.set(t,e),this}},{key:"classNameForFontAlias",value:function(t){return this._fontCssClassesByAlias.get(t)||t}},{key:"setDefaultFontSetClass",value:function(t){return this._defaultFontSetClass=t,this}},{key:"getDefaultFontSetClass",value:function(){return this._defaultFontSetClass}},{key:"getSvgIconFromUrl",value:function(t){var e=this,n=this._sanitizer.sanitize(be.RESOURCE_URL,t);if(!n)throw ky(t);var i=this._cachedIconsByUrl.get(n);return i?Xs(Py(i)):this._loadSvgIconFromConfig(new Iy(t)).pipe(cl((function(t){return e._cachedIconsByUrl.set(n,t)})),H((function(t){return Py(t)})))}},{key:"getNamedSvgIcon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Ay(e,t),i=this._svgIconConfigs.get(n);if(i)return this._getSvgFromConfig(i);var r=this._iconSetConfigs.get(e);return r?this._getSvgFromIconSetConfigs(t,r):_y(Cy(n))}},{key:"ngOnDestroy",value:function(){this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}},{key:"_getSvgFromConfig",value:function(t){return t.svgElement?Xs(Py(t.svgElement)):this._loadSvgIconFromConfig(t).pipe(cl((function(e){return t.svgElement=e})),H((function(t){return Py(t)})))}},{key:"_getSvgFromIconSetConfigs",value:function(t,e){var n=this,i=this._extractIconWithNameFromAnySet(t,e);return i?Xs(i):xy(e.filter((function(t){return!t.svgElement})).map((function(t){return n._loadSvgIconSetFromConfig(t).pipe(_l((function(e){var i="Loading icon set URL: ".concat(n._sanitizer.sanitize(be.RESOURCE_URL,t.url)," failed: ").concat(e.message);return n._errorHandler?n._errorHandler.handleError(new Error(i)):console.error(i),Xs(null)})))}))).pipe(H((function(){var i=n._extractIconWithNameFromAnySet(t,e);if(!i)throw Cy(t);return i})))}},{key:"_extractIconWithNameFromAnySet",value:function(t,e){for(var n=e.length-1;n>=0;n--){var i=e[n];if(i.svgElement){var r=this._extractSvgIconFromSet(i.svgElement,t,i.options);if(r)return r}}return null}},{key:"_loadSvgIconFromConfig",value:function(t){var e=this;return this._fetchUrl(t.url).pipe(H((function(n){return e._createSvgElementForSingleIcon(n,t.options)})))}},{key:"_loadSvgIconSetFromConfig",value:function(t){var e=this;return t.svgElement?Xs(t.svgElement):this._fetchUrl(t.url).pipe(H((function(n){return t.svgElement||(t.svgElement=e._svgElementFromString(n)),t.svgElement})))}},{key:"_createSvgElementForSingleIcon",value:function(t,e){var n=this._svgElementFromString(t);return this._setSvgAttributes(n,e),n}},{key:"_extractSvgIconFromSet",value:function(t,e,n){var i=t.querySelector('[id="'.concat(e,'"]'));if(!i)return null;var r=i.cloneNode(!0);if(r.removeAttribute("id"),"svg"===r.nodeName.toLowerCase())return this._setSvgAttributes(r,n);if("symbol"===r.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(r),n);var o=this._svgElementFromString("<svg></svg>");return o.appendChild(r),this._setSvgAttributes(o,n)}},{key:"_svgElementFromString",value:function(t){var e=this._document.createElement("DIV");e.innerHTML=t;var n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}},{key:"_toSvgElement",value:function(t){for(var e=this._svgElementFromString("<svg></svg>"),n=t.attributes,i=0;i<n.length;i++){var r=n[i],o=r.name,a=r.value;"id"!==o&&e.setAttribute(o,a)}for(var s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[s].cloneNode(!0));return e}},{key:"_setSvgAttributes",value:function(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}},{key:"_fetchUrl",value:function(t){var e=this;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==t)throw Error('Cannot fetch icon from URL "'.concat(t,'".'));var n=this._sanitizer.sanitize(be.RESOURCE_URL,t);if(!n)throw ky(t);var i=this._inProgressUrlFetches.get(n);if(i)return i;var r=this._httpClient.get(n,{responseType:"text"}).pipe(Fl((function(){return e._inProgressUrlFetches.delete(n)})),ut());return this._inProgressUrlFetches.set(n,r),r}},{key:"_addSvgIconConfig",value:function(t,e,n){return this._svgIconConfigs.set(Ay(t,e),n),this}},{key:"_addSvgIconSetConfig",value:function(t,e){var n=this._iconSetConfigs.get(t);return n?n.push(e):this._iconSetConfigs.set(t,[e]),this}}]),t}()).ngInjectableDef=yt({factory:function(){return new Sy(Nt(iy,8),Nt(Ru),Nt(Vs,8),Nt(Yt,8))},token:Sy,providedIn:"root"}),Sy);function Py(t){return t.cloneNode(!0)}function Ay(t,e){return t+":"+e}var Ly=Lf((function t(e){_classCallCheck(this,t),this._elementRef=e})),My=new Pt("mat-icon-location",{providedIn:"root",factory:function(){var t=Ft(Vs),e=t?t.location:null;return{getPathname:function(){return e?e.pathname+e.search:""}}}}),Ry=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Oy=Ry.map((function(t){return"[".concat(t,"]")})).join(", "),Dy=/^url\(['"]?#(.*?)['"]?\)$/,Ny=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o,a){var s;return _classCallCheck(this,n),(s=e.call(this,t))._iconRegistry=i,s._location=o,s._errorHandler=a,s._inline=!1,r||t.nativeElement.setAttribute("aria-hidden","true"),s}return _createClass(n,[{key:"_splitIconName",value:function(t){if(!t)return["",""];var e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error('Invalid icon name: "'.concat(t,'"'))}}},{key:"ngOnChanges",value:function(t){var e=this,n=t.svgIcon;if(n)if(this.svgIcon){var i=_slicedToArray(this._splitIconName(this.svgIcon),2),r=i[0],o=i[1];this._iconRegistry.getNamedSvgIcon(o,r).pipe(wl(1)).subscribe((function(t){return e._setSvgElement(t)}),(function(t){var n="Error retrieving icon ".concat(r,":").concat(o,"! ").concat(t.message);e._errorHandler?e._errorHandler.handleError(new Error(n)):console.error(n)}))}else n.previousValue&&this._clearSvgElement();this._usingFontIcon()&&this._updateFontIconClasses()}},{key:"ngOnInit",value:function(){this._usingFontIcon()&&this._updateFontIconClasses()}},{key:"ngAfterViewChecked",value:function(){var t=this._elementsWithExternalReferences;if(t&&this._location&&t.size){var e=this._location.getPathname();e!==this._previousPath&&(this._previousPath=e,this._prependPathToReferences(e))}}},{key:"ngOnDestroy",value:function(){this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}},{key:"_usingFontIcon",value:function(){return!this.svgIcon}},{key:"_setSvgElement",value:function(t){this._clearSvgElement();for(var e=t.querySelectorAll("style"),n=0;n<e.length;n++)e[n].textContent+=" ";if(this._location){var i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i)}this._elementRef.nativeElement.appendChild(t)}},{key:"_clearSvgElement",value:function(){var t=this._elementRef.nativeElement,e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){var n=t.childNodes[e];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||t.removeChild(n)}}},{key:"_updateFontIconClasses",value:function(){if(this._usingFontIcon()){var t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}}},{key:"_cleanupFontValue",value:function(t){return"string"==typeof t?t.trim().split(" ")[0]:t}},{key:"_prependPathToReferences",value:function(t){var e=this._elementsWithExternalReferences;e&&e.forEach((function(e,n){e.forEach((function(e){n.setAttribute(e.name,"url('".concat(t,"#").concat(e.value,"')"))}))}))}},{key:"_cacheChildrenWithExternalReferences",value:function(t){for(var e=t.querySelectorAll(Oy),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map,i=function(t){Ry.forEach((function(i){var r=e[t],o=r.getAttribute(i),a=o?o.match(Dy):null;if(a){var s=n.get(r);s||(s=[],n.set(r,s)),s.push({name:i,value:a[1]})}}))},r=0;r<e.length;r++)i(r)}},{key:"inline",get:function(){return this._inline},set:function(t){this._inline=Dp(t)}},{key:"fontSet",get:function(){return this._fontSet},set:function(t){this._fontSet=this._cleanupFontValue(t)}},{key:"fontIcon",get:function(){return this._fontIcon},set:function(t){this._fontIcon=this._cleanupFontValue(t)}}]),n}(Ly),Fy=function t(){_classCallCheck(this,t)},zy=Hn({encapsulation:2,styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1,1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],data:{}});function By(t){return Jo(2,[Go(null,0)],null,null)}function Vy(t){return t&&"function"==typeof t.connect}var Uy=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1?arguments[1]:void 0,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];_classCallCheck(this,t),this._multiple=n,this._emitChanges=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new L,this.onChange=this.changed,i&&i.length&&(n?i.forEach((function(t){return e._markSelected(t)})):this._markSelected(i[0]),this._selectedToEmit.length=0)}return _createClass(t,[{key:"select",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];this._verifyValueAssignment(n),n.forEach((function(e){return t._markSelected(e)})),this._emitChangeEvent()}},{key:"deselect",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];this._verifyValueAssignment(n),n.forEach((function(e){return t._unmarkSelected(e)})),this._emitChangeEvent()}},{key:"toggle",value:function(t){this.isSelected(t)?this.deselect(t):this.select(t)}},{key:"clear",value:function(){this._unmarkAll(),this._emitChangeEvent()}},{key:"isSelected",value:function(t){return this._selection.has(t)}},{key:"isEmpty",value:function(){return 0===this._selection.size}},{key:"hasValue",value:function(){return!this.isEmpty()}},{key:"sort",value:function(t){this._multiple&&this.selected&&this._selected.sort(t)}},{key:"isMultipleSelection",value:function(){return this._multiple}},{key:"_emitChangeEvent",value:function(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}},{key:"_markSelected",value:function(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}},{key:"_unmarkSelected",value:function(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}},{key:"_unmarkAll",value:function(){var t=this;this.isEmpty()||this._selection.forEach((function(e){return t._unmarkSelected(e)}))}},{key:"_verifyValueAssignment",value:function(t){if(t.length>1&&!this._multiple)throw Error("Cannot pass multiple values into SelectionModel with single-value mode.")}},{key:"selected",get:function(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}}]),t}(),jy=new Pt("NgValueAccessor"),qy=new Pt("CompositionEventMode"),Gy=function(){function t(e,n,i){var r;_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._compositionMode=i,this.onChange=function(t){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(r=Ul()?Ul().getUserAgent():"",!/android (\d+)/.test(r.toLowerCase())))}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_handleInput",value:function(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}]),t}(),Hy=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"reset",value:function(t){this.control&&this.control.reset(t)}},{key:"hasError",value:function(t,e){return!!this.control&&this.control.hasError(t,e)}},{key:"getError",value:function(t,e){return this.control?this.control.getError(t,e):null}},{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}}]),t}(),Xy=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(Hy);function Zy(){throw new Error("unimplemented")}var Wy=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.apply(this,arguments))._parent=null,t.name=null,t.valueAccessor=null,t._rawValidators=[],t._rawAsyncValidators=[],t}return _createClass(n,[{key:"validator",get:function(){return Zy()}},{key:"asyncValidator",get:function(){return Zy()}}]),n}(Hy),Yy=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){return _classCallCheck(this,n),e.call(this,t)}return n}(function(){function t(e){_classCallCheck(this,t),this._cd=e}return _createClass(t,[{key:"ngClassUntouched",get:function(){return!!this._cd.control&&this._cd.control.untouched}},{key:"ngClassTouched",get:function(){return!!this._cd.control&&this._cd.control.touched}},{key:"ngClassPristine",get:function(){return!!this._cd.control&&this._cd.control.pristine}},{key:"ngClassDirty",get:function(){return!!this._cd.control&&this._cd.control.dirty}},{key:"ngClassValid",get:function(){return!!this._cd.control&&this._cd.control.valid}},{key:"ngClassInvalid",get:function(){return!!this._cd.control&&this._cd.control.invalid}},{key:"ngClassPending",get:function(){return!!this._cd.control&&this._cd.control.pending}}]),t}());function Ky(t){return null==t||0===t.length}var Jy=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Qy=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"min",value:function(t){return function(e){if(Ky(e.value)||Ky(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}},{key:"max",value:function(t){return function(e){if(Ky(e.value)||Ky(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}},{key:"required",value:function(t){return Ky(t.value)?{required:!0}:null}},{key:"requiredTrue",value:function(t){return!0===t.value?null:{required:!0}}},{key:"email",value:function(t){return Ky(t.value)||Jy.test(t.value)?null:{email:!0}}},{key:"minLength",value:function(t){return function(e){if(Ky(e.value))return null;var n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}},{key:"maxLength",value:function(t){return function(e){var n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}},{key:"pattern",value:function(e){return e?("string"==typeof e?(i="","^"!==e.charAt(0)&&(i+="^"),i+=e,"$"!==e.charAt(e.length-1)&&(i+="$"),n=new RegExp(i)):(i=e.toString(),n=e),function(t){if(Ky(t.value))return null;var e=t.value;return n.test(e)?null:{pattern:{requiredPattern:i,actualValue:e}}}):t.nullValidator;var n,i}},{key:"nullValidator",value:function(t){return null}},{key:"compose",value:function(t){if(!t)return null;var e=t.filter($y);return 0==e.length?null:function(t){return ev(function(t,e){return e.map((function(e){return e(t)}))}(t,e))}}},{key:"composeAsync",value:function(t){if(!t)return null;var e=t.filter($y);return 0==e.length?null:function(t){return xy(function(t,e){return e.map((function(e){return e(t)}))}(t,e).map(tv)).pipe(H(ev))}}}]),t}();function $y(t){return null!=t}function tv(t){var e=Xe(t)?Y(t):t;if(!Ze(e))throw new Error("Expected validator to return Promise or Observable.");return e}function ev(t){var e=t.reduce((function(t,e){return null!=e?Object.assign({},t,e):t}),{});return 0===Object.keys(e).length?null:e}function nv(t){return t.validate?function(e){return t.validate(e)}:t}function iv(t){return t.validate?function(e){return t.validate(e)}:t}var rv=function(){function t(){_classCallCheck(this,t),this._accessors=[]}return _createClass(t,[{key:"add",value:function(t,e){this._accessors.push([t,e])}},{key:"remove",value:function(t){for(var e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}},{key:"select",value:function(t){var e=this;this._accessors.forEach((function(n){e._isSameGroup(n,t)&&n[1]!==t&&n[1].fireUncheck(t.value)}))}},{key:"_isSameGroup",value:function(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}]),t}(),ov='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',av='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',sv='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',lv=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"controlParentException",value:function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+ov)}},{key:"ngModelGroupException",value:function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '.concat(av,"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ").concat(sv))}},{key:"missingFormException",value:function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+ov)}},{key:"groupParentException",value:function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+av)}},{key:"arrayParentException",value:function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}},{key:"disabledAttrWarning",value:function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}},{key:"ngModelWarning",value:function(t){console.warn("\n    It looks like you're using ngModel on the same form field as ".concat(t,". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/").concat("formControl"===t?"FormControlDirective":"FormControlName","#use-with-ngmodel\n    "))}}]),t}();function uv(t,e){return[].concat(_toConsumableArray(e.path),[t])}function cv(t,e){t||dv(e,"Cannot find control with"),e.valueAccessor||dv(e,"No value accessor for form control with"),t.validator=Qy.compose([t.validator,e.validator]),t.asyncValidator=Qy.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange((function(n){t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&hv(t,e)}))}(t,e),function(t,e){t.registerOnChange((function(t,n){e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)}))}(t,e),function(t,e){e.valueAccessor.registerOnTouched((function(){t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&hv(t,e),"submit"!==t.updateOn&&t.markAsTouched()}))}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange((function(t){e.valueAccessor.setDisabledState(t)})),e._rawValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange((function(){return t.updateValueAndValidity()}))})),e._rawAsyncValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange((function(){return t.updateValueAndValidity()}))}))}function hv(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function pv(t,e){null==t&&dv(e,"Cannot find control with"),t.validator=Qy.compose([t.validator,e.validator]),t.asyncValidator=Qy.composeAsync([t.asyncValidator,e.asyncValidator])}function fv(t){return dv(t,"There is no FormControl instance attached to form control element with")}function dv(t,e){var n;throw n=t.path.length>1?"path: '".concat(t.path.join(" -> "),"'"):t.path[0]?"name: '".concat(t.path,"'"):"unspecified name attribute",new Error("".concat(e," ").concat(n))}function mv(t){return null!=t?Qy.compose(t.map(nv)):null}function gv(t){return null!=t?Qy.composeAsync(t.map(iv)):null}function yv(t,e){if(!t.hasOwnProperty("model"))return!1;var n=t.model;return!!n.isFirstChange()||!Ue(e,n.currentValue)}var vv=[function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}(),function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}(),function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}(),function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=Ue}return _createClass(t,[{key:"writeValue",value:function(t){this.value=t;var e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),"".concat(t,": ").concat(e).slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){e.value=e._getOptionValue(n),t(e.value)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var i=n[e];if(this._compareWith(this._optionMap.get(i),t))return i}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}},{key:"compareWith",set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}}]),t}(),function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=Ue}return _createClass(t,[{key:"writeValue",value:function(t){var e,n=this;if(this.value=t,Array.isArray(t)){var i=t.map((function(t){return n._getOptionId(t)}));e=function(t,e){t._setSelected(i.indexOf(e.toString())>-1)}}else e=function(t,e){t._setSelected(!1)};this._optionMap.forEach(e)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){var i=[];if(n.hasOwnProperty("selectedOptions"))for(var r=n.selectedOptions,o=0;o<r.length;o++){var a=r.item(o),s=e._getOptionValue(a.value);i.push(s)}else for(var l=n.options,u=0;u<l.length;u++){var c=l.item(u);if(c.selected){var h=e._getOptionValue(c.value);i.push(h)}}e.value=i,t(i)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(t){var e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var i=n[e];if(this._compareWith(this._optionMap.get(i)._value,t))return i}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}},{key:"compareWith",set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}}]),t}(),function(){function t(e,n,i,r){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._registry=i,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}return _createClass(t,[{key:"ngOnInit",value:function(){this._control=this._injector.get(Wy),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(t){var e=this;this._fn=t,this.onChange=function(){t(e.value),e._registry.select(e)}}},{key:"fireUncheck",value:function(t){this.writeValue(t)}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_checkName",value:function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}},{key:"_throwNameError",value:function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}]),t}()];function _v(t,e){t._syncPendingControls(),e.forEach((function(t){var e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}))}function bv(t,e){if(!e)return null;Array.isArray(e)||dv(t,"Value accessor was not provided as an array for form control with");var n=void 0,i=void 0,r=void 0;return e.forEach((function(e){var o;e.constructor===Gy?n=e:(o=e,vv.some((function(t){return o.constructor===t}))?(i&&dv(t,"More than one built-in value accessor matches form control with"),i=e):(r&&dv(t,"More than one custom value accessor matches form control with"),r=e))})),r||i||n||(dv(t,"No valid value accessor for form control with"),null)}function xv(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}function wv(t){var e=kv(t)?t.validators:t;return Array.isArray(e)?mv(e):e||null}function Cv(t,e){var n=kv(e)?e.asyncValidators:t;return Array.isArray(n)?gv(n):n||null}function kv(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}var Ev,Sv=function(){function t(e,n){_classCallCheck(this,t),this.validator=e,this.asyncValidator=n,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return _createClass(t,[{key:"setValidators",value:function(t){this.validator=wv(t)}},{key:"setAsyncValidators",value:function(t){this.asyncValidator=Cv(t)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(t){return t.markAllAsTouched()}))}},{key:"markAsUntouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(t){t.markAsUntouched({onlySelf:!0})})),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"markAsDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}},{key:"markAsPristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(t){t.markAsPristine({onlySelf:!0})})),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"markAsPending",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}},{key:"disable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((function(e){e.disable(Object.assign({},t,{onlySelf:!0}))})),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach((function(t){return t(!0)}))}},{key:"enable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild((function(e){e.enable(Object.assign({},t,{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach((function(t){return t(!1)}))}},{key:"_updateAncestors",value:function(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(t){this._parent=t}},{key:"updateValueAndValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}},{key:"_updateTreeValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild((function(e){return e._updateTreeValidity(t)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(t){var e=this;if(this.asyncValidator){this.status="PENDING";var n=tv(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe((function(n){return e.setErrors(n,{emitEvent:t})}))}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}},{key:"setErrors",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}},{key:"get",value:function(t){return function(t,e,n){return null==e?null:(e instanceof Array||(e=e.split(".")),e instanceof Array&&0===e.length?null:e.reduce((function(t,e){return t instanceof Tv?t.controls.hasOwnProperty(e)?t.controls[e]:null:t instanceof Pv&&t.at(e)||null}),t))}(this,t)}},{key:"getError",value:function(t,e){var n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}},{key:"hasError",value:function(t,e){return!!this.getError(t,e)}},{key:"_updateControlsErrors",value:function(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}},{key:"_initObservables",value:function(){this.valueChanges=new br,this.statusChanges=new br}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(t){return this._anyControls((function(e){return e.status===t}))}},{key:"_anyControlsDirty",value:function(){return this._anyControls((function(t){return t.dirty}))}},{key:"_anyControlsTouched",value:function(){return this._anyControls((function(t){return t.touched}))}},{key:"_updatePristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"_updateTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"_isBoxedValue",value:function(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}},{key:"_registerOnCollectionChange",value:function(t){this._onCollectionChange=t}},{key:"_setUpdateStrategy",value:function(t){kv(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}},{key:"_parentMarkedDirty",value:function(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"root",get:function(){for(var t=this;t._parent;)t=t._parent;return t}}]),t}(),Iv=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,n),(t=e.call(this,wv(r),Cv(o,r)))._onChange=[],t._applyFormState(i),t._setUpdateStrategy(r),t.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),t._initObservables(),t}return _createClass(n,[{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach((function(t){return t(e.value,!1!==n.emitViewToModelChange)})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(t,e)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(t){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(t){this._onChange.push(t)}},{key:"_clearChangeFns",value:function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}}},{key:"registerOnDisabledChange",value:function(t){this._onDisabledChange.push(t)}},{key:"_forEachChild",value:function(t){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}]),n}(Sv),Tv=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;return _classCallCheck(this,n),(o=e.call(this,wv(i),Cv(r,i))).controls=t,o._initObservables(),o._setUpdateStrategy(i),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),o}return _createClass(n,[{key:"registerControl",value:function(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}},{key:"addControl",value:function(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),Object.keys(t).forEach((function(i){e._throwIfControlMissing(i),e.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach((function(i){e.controls[i]&&e.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,i){n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})})),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this._reduceChildren({},(function(t,e,n){return t[n]=e instanceof Iv?e.value:e.getRawValue(),t}))}},{key:"_syncPendingControls",value:function(){var t=this._reduceChildren(!1,(function(t,e){return!!e._syncPendingControls()||t}));return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: ".concat(t,"."))}},{key:"_forEachChild",value:function(t){var e=this;Object.keys(this.controls).forEach((function(n){return t(e.controls[n],n)}))}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild((function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)}))}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(t){var e=this,n=!1;return this._forEachChild((function(i,r){n=n||e.contains(r)&&t(i)})),n}},{key:"_reduceValue",value:function(){var t=this;return this._reduceChildren({},(function(e,n,i){return(n.enabled||t.disabled)&&(e[i]=n.value),e}))}},{key:"_reduceChildren",value:function(t,e){var n=t;return this._forEachChild((function(t,i){n=e(n,t,i)})),n}},{key:"_allControlsDisabled",value:function(){for(var t=0,e=Object.keys(this.controls);t<e.length;t++){var n=e[t];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild((function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))}))}}]),n}(Sv),Pv=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;return _classCallCheck(this,n),(o=e.call(this,wv(i),Cv(r,i))).controls=t,o._initObservables(),o._setUpdateStrategy(i),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),o}return _createClass(n,[{key:"at",value:function(t){return this.controls[t]}},{key:"push",value:function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}},{key:"removeAt",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),this.controls.splice(t,1),this.updateValueAndValidity()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),t.forEach((function(t,i){e._throwIfControlMissing(i),e.at(i).setValue(t,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.forEach((function(t,i){e.at(i)&&e.at(i).patchValue(t,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,i){n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})})),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this.controls.map((function(t){return t instanceof Iv?t.value:t.getRawValue()}))}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild((function(t){return t._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var t=this.controls.reduce((function(t,e){return!!e._syncPendingControls()||t}),!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}},{key:"_forEachChild",value:function(t){this.controls.forEach((function(e,n){t(e,n)}))}},{key:"_updateValue",value:function(){var t=this;this.value=this.controls.filter((function(e){return e.enabled||t.disabled})).map((function(t){return t.value}))}},{key:"_anyControls",value:function(t){return this.controls.some((function(e){return e.enabled&&t(e)}))}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild((function(e){return t._registerControl(e)}))}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild((function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))}))}},{key:"_allControlsDisabled",value:function(){var t,e=_createForOfIteratorHelper(this.controls);try{for(e.s();!(t=e.n()).done;){if(t.value.enabled)return!1}}catch(n){e.e(n)}finally{e.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}},{key:"length",get:function(){return this.controls.length}}]),n}(Sv),Av=Promise.resolve(null),Lv=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this)).submitted=!1,r._directives=[],r.ngSubmit=new br,r.form=new Tv({},mv(t),gv(i)),r}return _createClass(n,[{key:"ngAfterViewInit",value:function(){this._setUpdateStrategy()}},{key:"addControl",value:function(t){var e=this;Av.then((function(){var n=e._findContainer(t.path);t.control=n.registerControl(t.name,t.control),cv(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),e._directives.push(t)}))}},{key:"getControl",value:function(t){return this.form.get(t.path)}},{key:"removeControl",value:function(t){var e=this;Av.then((function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name),xv(e._directives,t)}))}},{key:"addFormGroup",value:function(t){var e=this;Av.then((function(){var n=e._findContainer(t.path),i=new Tv({});pv(i,t),n.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})}))}},{key:"removeFormGroup",value:function(t){var e=this;Av.then((function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name)}))}},{key:"getFormGroup",value:function(t){return this.form.get(t.path)}},{key:"updateModel",value:function(t,e){var n=this;Av.then((function(){n.form.get(t.path).setValue(e)}))}},{key:"setValue",value:function(t){this.control.setValue(t)}},{key:"onSubmit",value:function(t){return this.submitted=!0,_v(this.form,this._directives),this.ngSubmit.emit(t),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(t){this.form.reset(t),this.submitted=!1}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}},{key:"_findContainer",value:function(t){return t.pop(),t.length?this.form.get(t):this.form}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"controls",get:function(){return this.form.controls}}]),n}(Xy),Mv=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"modelParentException",value:function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '.concat(ov,'\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '))}},{key:"formGroupNameException",value:function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ".concat(av,"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ").concat(sv))}},{key:"missingNameException",value:function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}},{key:"modelGroupParentException",value:function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ".concat(av,"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ").concat(sv))}},{key:"ngFormWarning",value:function(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")}}]),t}(),Rv=new Pt("NgFormSelectorWarning"),Ov=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormGroup(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormGroup(this)}},{key:"_checkParentType",value:function(){}},{key:"control",get:function(){return this.formDirective.getFormGroup(this)}},{key:"path",get:function(){return uv(this.name,this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return mv(this._validators)}},{key:"asyncValidator",get:function(){return gv(this._asyncValidators)}}]),n}(Xy),Dv=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;return _classCallCheck(this,n),(o=e.call(this))._parent=t,o._validators=i,o._asyncValidators=r,o}return _createClass(n,[{key:"_checkParentType",value:function(){this._parent instanceof n||this._parent instanceof Lv||Mv.modelGroupParentException()}}]),n}(Ov),Nv=Promise.resolve(null),Fv=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o){var a;return _classCallCheck(this,n),(a=e.call(this)).control=new Iv,a._registered=!1,a.update=new br,a._parent=t,a._rawValidators=i||[],a._rawAsyncValidators=r||[],a.valueAccessor=bv(_assertThisInitialized(a),o),a}return _createClass(n,[{key:"ngOnChanges",value:function(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),yv(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(t){this.viewModel=t,this.update.emit(t)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){cv(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){!(this._parent instanceof Dv)&&this._parent instanceof Ov?Mv.formGroupNameException():this._parent instanceof Dv||this._parent instanceof Lv||Mv.modelParentException()}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Mv.missingNameException()}},{key:"_updateValue",value:function(t){var e=this;Nv.then((function(){e.control.setValue(t,{emitViewToModelChange:!1})}))}},{key:"_updateDisabled",value:function(t){var e=this,n=t.isDisabled.currentValue,i=""===n||n&&"false"!==n;Nv.then((function(){i&&!e.control.disabled?e.control.disable():!i&&e.control.disabled&&e.control.enable()}))}},{key:"path",get:function(){return this._parent?uv(this.name,this._parent):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return mv(this._rawValidators)}},{key:"asyncValidator",get:function(){return gv(this._rawAsyncValidators)}}]),n}(Wy),zv=new Pt("NgModelWithFormControlWarning"),Bv=((Ev=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o){var a;return _classCallCheck(this,n),(a=e.call(this))._ngModelWarningConfig=o,a.update=new br,a._ngModelWarningSent=!1,a._rawValidators=t||[],a._rawAsyncValidators=i||[],a.valueAccessor=bv(_assertThisInitialized(a),r),a}return _createClass(n,[{key:"ngOnChanges",value:function(t){var e,i;this._isControlChanged(t)&&(cv(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),yv(t,this.viewModel)&&(e=n,i=this._ngModelWarningConfig,Qt()&&"never"!==i&&((null!==i&&"once"!==i||e._ngModelWarningSentOnce)&&("always"!==i||this._ngModelWarningSent)||(lv.ngModelWarning("formControl"),e._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.form.setValue(this.model),this.viewModel=this.model)}},{key:"viewToModelUpdate",value:function(t){this.viewModel=t,this.update.emit(t)}},{key:"_isControlChanged",value:function(t){return t.hasOwnProperty("form")}},{key:"isDisabled",set:function(t){lv.disabledAttrWarning()}},{key:"path",get:function(){return[]}},{key:"validator",get:function(){return mv(this._rawValidators)}},{key:"asyncValidator",get:function(){return gv(this._rawAsyncValidators)}},{key:"control",get:function(){return this.form}}]),n}(Wy))._ngModelWarningSentOnce=!1,Ev),Vv=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this))._validators=t,r._asyncValidators=i,r.submitted=!1,r.directives=[],r.form=null,r.ngSubmit=new br,r}return _createClass(n,[{key:"ngOnChanges",value:function(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}},{key:"addControl",value:function(t){var e=this.form.get(t.path);return cv(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}},{key:"getControl",value:function(t){return this.form.get(t.path)}},{key:"removeControl",value:function(t){xv(this.directives,t)}},{key:"addFormGroup",value:function(t){var e=this.form.get(t.path);pv(e,t),e.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormGroup",value:function(t){}},{key:"getFormGroup",value:function(t){return this.form.get(t.path)}},{key:"addFormArray",value:function(t){var e=this.form.get(t.path);pv(e,t),e.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormArray",value:function(t){}},{key:"getFormArray",value:function(t){return this.form.get(t.path)}},{key:"updateModel",value:function(t,e){this.form.get(t.path).setValue(e)}},{key:"onSubmit",value:function(t){return this.submitted=!0,_v(this.form,this.directives),this.ngSubmit.emit(t),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(t){this.form.reset(t),this.submitted=!1}},{key:"_updateDomValue",value:function(){var t=this;this.directives.forEach((function(e){var n=t.form.get(e.path);e.control!==n&&(function(t,e){e.valueAccessor.registerOnChange((function(){return fv(e)})),e.valueAccessor.registerOnTouched((function(){return fv(e)})),e._rawValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)})),e._rawAsyncValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)})),t&&t._clearChangeFns()}(e.control,e),n&&cv(n,e),e.control=n)})),this.form._updateTreeValidity({emitEvent:!1})}},{key:"_updateRegistrations",value:function(){var t=this;this.form._registerOnCollectionChange((function(){return t._updateDomValue()})),this._oldForm&&this._oldForm._registerOnCollectionChange((function(){})),this._oldForm=this.form}},{key:"_updateValidators",value:function(){var t=mv(this._validators);this.form.validator=Qy.compose([this.form.validator,t]);var e=gv(this._asyncValidators);this.form.asyncValidator=Qy.composeAsync([this.form.asyncValidator,e])}},{key:"_checkFormPresent",value:function(){this.form||lv.missingFormException()}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}}]),n}(Xy),Uv=function t(){_classCallCheck(this,t)},jv=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"group",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._reduceControls(t),i=null,r=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,r=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,r=null!=e.asyncValidator?e.asyncValidator:null)),new Tv(n,{asyncValidators:r,updateOn:o,validators:i})}},{key:"control",value:function(t,e,n){return new Iv(t,e,n)}},{key:"array",value:function(t,e,n){var i=this,r=t.map((function(t){return i._createControl(t)}));return new Pv(r,e,n)}},{key:"_reduceControls",value:function(t){var e=this,n={};return Object.keys(t).forEach((function(i){n[i]=e._createControl(t[i])})),n}},{key:"_createControl",value:function(t){return t instanceof Iv||t instanceof Tv||t instanceof Pv?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}]),t}(),qv=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"withConfig",value:function(e){return{ngModule:t,providers:[{provide:Rv,useValue:e.warnOnDeprecatedNgFormSelector}]}}}]),t}(),Gv=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"withConfig",value:function(e){return{ngModule:t,providers:[{provide:zv,useValue:e.warnOnNgModelWithFormControl}]}}}]),t}(),Hv=Mf((function t(){_classCallCheck(this,t)})),Xv=Mf((function t(){_classCallCheck(this,t)})),Zv=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.apply(this,arguments))._stateChanges=new L,t}return _createClass(n,[{key:"ngOnChanges",value:function(){this._stateChanges.next()}},{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}}]),n}(Hv),Wv=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var i;return _classCallCheck(this,n),(i=e.call(this))._elementRef=t,i._stateChanges=new L,"action-list"===i._getListType()&&t.nativeElement.classList.add("mat-action-list"),i}return _createClass(n,[{key:"_getListType",value:function(){var t=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===t?"list":"mat-action-list"===t?"action-list":null}},{key:"ngOnChanges",value:function(){this._stateChanges.next()}},{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}}]),n}(Hv),Yv=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o){var a;_classCallCheck(this,n),(a=e.call(this))._element=t,a._isInteractiveList=!1,a._destroyed=new L,a._isInteractiveList=!!(r||o&&"action-list"===o._getListType()),a._list=r||o;var s=a._getHostElement();return"button"!==s.nodeName.toLowerCase()||s.hasAttribute("type")||s.setAttribute("type","button"),a._list&&a._list._stateChanges.pipe(Pg(a._destroyed)).subscribe((function(){i.markForCheck()})),a}return _createClass(n,[{key:"ngAfterContentInit",value:function(){var t,e;e=this._element,(t=this._lines).changes.pipe(Ml(t)).subscribe((function(t){var n=t.length;Vf(e,"mat-2-line",!1),Vf(e,"mat-3-line",!1),Vf(e,"mat-multi-line",!1),2===n||3===n?Vf(e,"mat-".concat(n,"-line"),!0):n>3&&Vf(e,"mat-multi-line",!0)}))}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete()}},{key:"_isRippleDisabled",value:function(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}},{key:"_getHostElement",value:function(){return this._element.nativeElement}}]),n}(Xv),Kv=function t(){_classCallCheck(this,t)},Jv=function(){function t(){_classCallCheck(this,t),this._vertical=!1,this._inset=!1}return _createClass(t,[{key:"vertical",get:function(){return this._vertical},set:function(t){this._vertical=Dp(t)}},{key:"inset",get:function(){return this._inset},set:function(t){this._inset=Dp(t)}}]),t}(),Qv=function t(){_classCallCheck(this,t)},$v=Hn({encapsulation:2,styles:[".mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:0}mat-action-list button{background:0 0;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:0}@media (-ms-high-contrast:active){.mat-selection-list:focus{outline-style:dotted}.mat-list-option:focus,.mat-list-option:hover,.mat-nav-list .mat-list-item:focus,.mat-nav-list .mat-list-item:hover,mat-action-list .mat-list-item:focus,mat-action-list .mat-list-item:hover{outline:dotted 1px}}@media (hover:none){.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-list-option:not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover{background:0 0}}"],data:{}});function t_(t){return Jo(2,[Go(null,0)],null,null)}var e_=Hn({encapsulation:2,styles:[],data:{}});function n_(t){return Jo(2,[(t()(),Oo(0,0,null,null,6,"div",[["class","mat-list-item-content"]],null,null,null,null,null)),(t()(),Oo(1,0,null,null,1,"div",[["class","mat-list-item-ripple mat-ripple"],["mat-ripple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),$i(2,212992,null,0,Yf,[rn,Yr,qp,[2,Wf],[2,kg]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null),Go(null,0),(t()(),Oo(4,0,null,null,1,"div",[["class","mat-list-text"]],null,null,null,null,null)),Go(null,1),Go(null,2)],(function(t,e){var n=e.component;t(e,2,0,n._isRippleDisabled(),n._getHostElement())}),(function(t,e){t(e,1,0,Vi(e,2).unbounded)}))}var i_,r_,o_=((r_=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"create",value:function(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}]),t}()).ngInjectableDef=yt({factory:function(){return new r_},token:r_,providedIn:"root"}),r_),a_=((i_=function(){function t(e){_classCallCheck(this,t),this._mutationObserverFactory=e,this._observedElements=new Map}return _createClass(t,[{key:"ngOnDestroy",value:function(){var t=this;this._observedElements.forEach((function(e,n){return t._cleanupObserver(n)}))}},{key:"observe",value:function(t){var e=this,n=Bp(t);return new k((function(t){var i=e._observeElement(n).subscribe(t);return function(){i.unsubscribe(),e._unobserveElement(n)}}))}},{key:"_observeElement",value:function(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{var e=new L,n=this._mutationObserverFactory.create((function(t){return e.next(t)}));n&&n.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:n,stream:e,count:1})}return this._observedElements.get(t).stream}},{key:"_unobserveElement",value:function(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}},{key:"_cleanupObserver",value:function(t){if(this._observedElements.has(t)){var e=this._observedElements.get(t),n=e.observer,i=e.stream;n&&n.disconnect(),i.complete(),this._observedElements.delete(t)}}}]),t}()).ngInjectableDef=yt({factory:function(){return new i_(Nt(o_))},token:i_,providedIn:"root"}),i_),s_=function(){function t(e,n,i){_classCallCheck(this,t),this._contentObserver=e,this._elementRef=n,this._ngZone=i,this.event=new br,this._disabled=!1,this._currentSubscription=null}return _createClass(t,[{key:"ngAfterContentInit",value:function(){this._currentSubscription||this.disabled||this._subscribe()}},{key:"ngOnDestroy",value:function(){this._unsubscribe()}},{key:"_subscribe",value:function(){var t=this;this._unsubscribe();var e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular((function(){t._currentSubscription=(t.debounce?e.pipe($p(t.debounce)):e).subscribe(t.event)}))}},{key:"_unsubscribe",value:function(){this._currentSubscription&&this._currentSubscription.unsubscribe()}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=Dp(t),this._disabled?this._unsubscribe():this._subscribe()}},{key:"debounce",get:function(){return this._debounce},set:function(t){this._debounce=Np(t),this._subscribe()}}]),t}(),l_=function t(){_classCallCheck(this,t)},u_=Hn({encapsulation:2,styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}@media (-ms-high-contrast:active){.mat-form-field-infix{border-image:linear-gradient(transparent,transparent)}}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform .4s cubic-bezier(.25,.8,.25,1),color .4s cubic-bezier(.25,.8,.25,1),width .4s cubic-bezier(.25,.8,.25,1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label,.mat-form-field-empty.mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scaleY(1.0001)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(.5);opacity:0;transition:background-color .3s cubic-bezier(.55,0,.55,.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:scaleX(1);transition:transform .3s cubic-bezier(.25,.8,.25,1),opacity .1s cubic-bezier(.25,.8,.25,1),background-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-label-wrapper .mat-icon,.mat-form-field-subscript-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",".mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}@media (-ms-high-contrast:active){.mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:'';display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}@media (-ms-high-contrast:active){.mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}",".mat-input-element{font:inherit;background:0 0;color:currentColor;border:none;outline:0;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=month]::after,.mat-input-element[type=time]::after,.mat-input-element[type=week]::after{content:' ';white-space:pre;width:1px}.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button,.mat-input-element::-webkit-inner-spin-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:0 0}@media (-ms-high-contrast:active){.mat-focused select.mat-input-element::-ms-value{color:inherit}}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:'';width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}",".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-start{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start{border-width:2px;transition:border-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity .1s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:2px}}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],data:{animation:[{type:7,name:"transitionMessages",definitions:[{type:0,name:"enter",styles:{type:6,styles:{opacity:1,transform:"translateY(0%)"},offset:null},options:void 0},{type:1,expr:"void => enter",animation:[{type:6,styles:{opacity:0,transform:"translateY(-100%)"},offset:null},{type:4,styles:null,timings:"300ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}});function c_(t){return Jo(0,[(t()(),Oo(0,0,null,null,8,null,null,null,null,null,null,null)),(t()(),Oo(1,0,null,null,3,"div",[["class","mat-form-field-outline"]],null,null,null,null,null)),(t()(),Oo(2,0,null,null,0,"div",[["class","mat-form-field-outline-start"]],null,null,null,null,null)),(t()(),Oo(3,0,null,null,0,"div",[["class","mat-form-field-outline-gap"]],null,null,null,null,null)),(t()(),Oo(4,0,null,null,0,"div",[["class","mat-form-field-outline-end"]],null,null,null,null,null)),(t()(),Oo(5,0,null,null,3,"div",[["class","mat-form-field-outline mat-form-field-outline-thick"]],null,null,null,null,null)),(t()(),Oo(6,0,null,null,0,"div",[["class","mat-form-field-outline-start"]],null,null,null,null,null)),(t()(),Oo(7,0,null,null,0,"div",[["class","mat-form-field-outline-gap"]],null,null,null,null,null)),(t()(),Oo(8,0,null,null,0,"div",[["class","mat-form-field-outline-end"]],null,null,null,null,null))],null,null)}function h_(t){return Jo(0,[(t()(),Oo(0,0,null,null,1,"div",[["class","mat-form-field-prefix"]],null,null,null,null,null)),Go(null,0)],null,null)}function p_(t){return Jo(0,[(t()(),Oo(0,0,null,null,3,null,null,null,null,null,null,null)),Go(null,2),(t()(),Oo(2,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),Wo(3,null,["",""]))],null,(function(t,e){t(e,3,0,e.component._control.placeholder)}))}function f_(t){return Jo(0,[Go(null,3),(t()(),Ro(0,null,null,0))],null,null)}function d_(t){return Jo(0,[(t()(),Oo(0,0,null,null,1,"span",[["aria-hidden","true"],["class","mat-placeholder-required mat-form-field-required-marker"]],null,null,null,null,null)),(t()(),Wo(-1,null,[" *"]))],null,null)}function m_(t){return Jo(0,[(t()(),Oo(0,0,[[4,0],["label",1]],null,8,"label",[["class","mat-form-field-label"]],[[8,"id",0],[1,"for",0],[1,"aria-owns",0],[2,"mat-empty",null],[2,"mat-form-field-empty",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"cdkObserveContent"]],(function(t,e,n){var i=!0;return"cdkObserveContent"===e&&(i=!1!==t.component.updateOutlineGap()&&i),i}),null,null)),$i(1,16384,null,0,As,[],{ngSwitch:[0,"ngSwitch"]},null),$i(2,1196032,null,0,s_,[a_,rn,Yr],{disabled:[0,"disabled"]},{event:"cdkObserveContent"}),(t()(),Ro(16777216,null,null,1,null,p_)),$i(4,278528,null,0,Ls,[Pn,In,As],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Ro(16777216,null,null,1,null,f_)),$i(6,278528,null,0,Ls,[Pn,In,As],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Ro(16777216,null,null,1,null,d_)),$i(8,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,1,0,n._hasLabel()),t(e,2,0,"outline"!=n.appearance),t(e,4,0,!1),t(e,6,0,!0),t(e,8,0,!n.hideRequiredMarker&&n._control.required&&!n._control.disabled)}),(function(t,e){var n=e.component;t(e,0,0,n._labelId,n._control.id,n._control.id,n._control.empty&&!n._shouldAlwaysFloat,n._control.empty&&!n._shouldAlwaysFloat,"accent"==n.color,"warn"==n.color)}))}function g_(t){return Jo(0,[(t()(),Oo(0,0,null,null,1,"div",[["class","mat-form-field-suffix"]],null,null,null,null,null)),Go(null,4)],null,null)}function y_(t){return Jo(0,[(t()(),Oo(0,0,[[1,0],["underline",1]],null,1,"div",[["class","mat-form-field-underline"]],null,null,null,null,null)),(t()(),Oo(1,0,null,null,0,"span",[["class","mat-form-field-ripple"]],[[2,"mat-accent",null],[2,"mat-warn",null]],null,null,null,null))],null,(function(t,e){var n=e.component;t(e,1,0,"accent"==n.color,"warn"==n.color)}))}function v_(t){return Jo(0,[(t()(),Oo(0,0,null,null,1,"div",[],[[24,"@transitionMessages",0]],null,null,null,null)),Go(null,5)],null,(function(t,e){t(e,0,0,e.component._subscriptAnimationState)}))}function __(t){return Jo(0,[(t()(),Oo(0,0,null,null,1,"div",[["class","mat-hint"]],[[8,"id",0]],null,null,null,null)),(t()(),Wo(1,null,["",""]))],null,(function(t,e){var n=e.component;t(e,0,0,n._hintLabelId),t(e,1,0,n.hintLabel)}))}function b_(t){return Jo(0,[(t()(),Oo(0,0,null,null,5,"div",[["class","mat-form-field-hint-wrapper"]],[[24,"@transitionMessages",0]],null,null,null,null)),(t()(),Ro(16777216,null,null,1,null,__)),$i(2,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),Go(null,6),(t()(),Oo(4,0,null,null,0,"div",[["class","mat-form-field-hint-spacer"]],null,null,null,null,null)),Go(null,7)],(function(t,e){t(e,2,0,e.component.hintLabel)}),(function(t,e){t(e,0,0,e.component._subscriptAnimationState)}))}function x_(t){return Jo(2,[Bo(671088640,1,{underlineRef:0}),Bo(402653184,2,{_connectionContainerRef:0}),Bo(671088640,3,{_inputContainerRef:0}),Bo(671088640,4,{_label:0}),(t()(),Oo(4,0,null,null,20,"div",[["class","mat-form-field-wrapper"]],null,null,null,null,null)),(t()(),Oo(5,0,[[2,0],["connectionContainer",1]],null,11,"div",[["class","mat-form-field-flex"]],null,[[null,"click"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==(r._control.onContainerClick&&r._control.onContainerClick(n))&&i),i}),null,null)),(t()(),Ro(16777216,null,null,1,null,c_)),$i(7,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,h_)),$i(9,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Oo(10,0,[[3,0],["inputContainer",1]],null,4,"div",[["class","mat-form-field-infix"]],null,null,null,null,null)),Go(null,1),(t()(),Oo(12,0,null,null,2,"span",[["class","mat-form-field-label-wrapper"]],null,null,null,null,null)),(t()(),Ro(16777216,null,null,1,null,m_)),$i(14,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,g_)),$i(16,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,y_)),$i(18,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Oo(19,0,null,null,5,"div",[["class","mat-form-field-subscript-wrapper"]],null,null,null,null,null)),$i(20,16384,null,0,As,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),Ro(16777216,null,null,1,null,v_)),$i(22,278528,null,0,Ls,[Pn,In,As],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Ro(16777216,null,null,1,null,b_)),$i(24,278528,null,0,Ls,[Pn,In,As],{ngSwitchCase:[0,"ngSwitchCase"]},null)],(function(t,e){var n=e.component;t(e,7,0,"outline"==n.appearance),t(e,9,0,n._prefixChildren.length),t(e,14,0,n._hasFloatingLabel()),t(e,16,0,n._suffixChildren.length),t(e,18,0,"outline"!=n.appearance),t(e,20,0,n._getDisplayedMessages()),t(e,22,0,"error"),t(e,24,0,"hint")}),null)}var w_=function(){function t(e){_classCallCheck(this,t),this.durationSelector=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new C_(t,this.durationSelector))}}]),t}(),C_=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,t)).durationSelector=i,r.hasValue=!1,r}return _createClass(n,[{key:"_next",value:function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e;try{e=(0,this.durationSelector)(t)}catch(i){return this.destination.error(i)}var n=q(this,e);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}},{key:"clearThrottle",value:function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))}},{key:"notifyNext",value:function(t,e,n,i){this.clearThrottle()}},{key:"notifyComplete",value:function(){this.clearThrottle()}}]),n}(G);function k_(t){return!u(t)&&t-parseFloat(t)+1>=0}function E_(t){var e=t.index,n=t.period,i=t.subscriber;if(i.next(e),!i.closed){if(-1===n)return i.complete();t.index=e+1,this.schedule(t,n)}}function S_(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qp;return e=function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=-1;return k_(e)?i=Number(e)<1?1:Number(e):R(e)&&(n=e),R(n)||(n=Qp),new k((function(e){var r=k_(t)?t:+t-n.now();return n.schedule(E_,r,{index:0,period:i,subscriber:e})}))}(t,n)},function(t){return t.lift(new w_(e))}}var I_,T_=Zp({passive:!0}),P_=((I_=function(){function t(e,n){_classCallCheck(this,t),this._platform=e,this._ngZone=n,this._monitoredElements=new Map}return _createClass(t,[{key:"monitor",value:function(t){var e=this;if(!this._platform.isBrowser)return qs;var n=Bp(t),i=this._monitoredElements.get(n);if(i)return i.subject.asObservable();var r=new L,o="cdk-text-field-autofilled",a=function(t){"cdk-text-field-autofill-start"!==t.animationName||n.classList.contains(o)?"cdk-text-field-autofill-end"===t.animationName&&n.classList.contains(o)&&(n.classList.remove(o),e._ngZone.run((function(){return r.next({target:t.target,isAutofilled:!1})}))):(n.classList.add(o),e._ngZone.run((function(){return r.next({target:t.target,isAutofilled:!0})})))};return this._ngZone.runOutsideAngular((function(){n.addEventListener("animationstart",a,T_),n.classList.add("cdk-text-field-autofill-monitored")})),this._monitoredElements.set(n,{subject:r,unlisten:function(){n.removeEventListener("animationstart",a,T_)}}),r.asObservable()}},{key:"stopMonitoring",value:function(t){var e=Bp(t),n=this._monitoredElements.get(e);n&&(n.unlisten(),n.subject.complete(),e.classList.remove("cdk-text-field-autofill-monitored"),e.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(e))}},{key:"ngOnDestroy",value:function(){var t=this;this._monitoredElements.forEach((function(e,n){return t.stopMonitoring(n)}))}}]),t}()).ngInjectableDef=yt({factory:function(){return new I_(Nt(qp),Nt(Yr))},token:I_,providedIn:"root"}),I_),A_=function t(){_classCallCheck(this,t)},L_=["button","checkbox","file","hidden","image","radio","range","reset","submit"],M_=0,R_=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o,a,s,l,u,c){var h;_classCallCheck(this,n),(h=e.call(this,s,o,a,r))._elementRef=t,h._platform=i,h.ngControl=r,h._autofillMonitor=u,h._uid="mat-input-"+M_++,h._isServer=!1,h._isNativeSelect=!1,h.focused=!1,h.stateChanges=new L,h.controlType="mat-input",h.autofilled=!1,h._disabled=!1,h._required=!1,h._type="text",h._readonly=!1,h._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter((function(t){return Xp().has(t)}));var p=h._elementRef.nativeElement;return h._inputValueAccessor=l||p,h._previousNativeValue=h.value,h.id=h.id,i.IOS&&c.runOutsideAngular((function(){t.nativeElement.addEventListener("keyup",(function(t){var e=t.target;e.value||e.selectionStart||e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))}))})),h._isServer=!h._platform.isBrowser,h._isNativeSelect="select"===p.nodeName.toLowerCase(),h._isNativeSelect&&(h.controlType=p.multiple?"mat-native-select-multiple":"mat-native-select"),h}return _createClass(n,[{key:"ngOnInit",value:function(){var t=this;this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe((function(e){t.autofilled=e.isAutofilled,t.stateChanges.next()}))}},{key:"ngOnChanges",value:function(){this.stateChanges.next()}},{key:"ngOnDestroy",value:function(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}},{key:"ngDoCheck",value:function(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue()}},{key:"focus",value:function(t){this._elementRef.nativeElement.focus(t)}},{key:"_focusChanged",value:function(t){t===this.focused||this.readonly&&t||(this.focused=t,this.stateChanges.next())}},{key:"_onInput",value:function(){}},{key:"_dirtyCheckNativeValue",value:function(){var t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}},{key:"_validateType",value:function(){if(L_.indexOf(this._type)>-1)throw Error('Input type "'.concat(this._type,"\" isn't supported by matInput."))}},{key:"_isNeverEmpty",value:function(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}},{key:"_isBadInput",value:function(){var t=this._elementRef.nativeElement.validity;return t&&t.badInput}},{key:"_isTextarea",value:function(){return"textarea"===this._elementRef.nativeElement.nodeName.toLowerCase()}},{key:"setDescribedByIds",value:function(t){this._ariaDescribedby=t.join(" ")}},{key:"onContainerClick",value:function(){this.focused||this.focus()}},{key:"disabled",get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(t){this._disabled=Dp(t),this.focused&&(this.focused=!1,this.stateChanges.next())}},{key:"id",get:function(){return this._id},set:function(t){this._id=t||this._uid}},{key:"required",get:function(){return this._required},set:function(t){this._required=Dp(t)}},{key:"type",get:function(){return this._type},set:function(t){this._type=t||"text",this._validateType(),!this._isTextarea()&&Xp().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}},{key:"value",get:function(){return this._inputValueAccessor.value},set:function(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}},{key:"readonly",get:function(){return this._readonly},set:function(t){this._readonly=Dp(t)}},{key:"empty",get:function(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}},{key:"shouldLabelFloat",get:function(){if(this._isNativeSelect){var t=this._elementRef.nativeElement,e=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&e&&e.label)}return this.focused||!this.empty}}]),n}(Rf((function t(e,n,i,r){_classCallCheck(this,t),this._defaultErrorStateMatcher=e,this._parentForm=n,this._parentFormGroup=i,this.ngControl=r}))),O_=function t(){_classCallCheck(this,t)},D_=function(){function t(e){_classCallCheck(this,t),this.mapService=e,this.threadTitle="Results",this.value="",this.dataSource=[],this.displayedColumns=["Comment"],this.searchResultsFound=!1,this.onDestroy$=new L}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"updateSearch",value:function(t){var e=this;this.value=t.target.value,""===this.value||this.mapService.searchContent(this.value).subscribe((function(t){e.dataSource=t}))}},{key:"removeResults",value:function(){this.dataSource=[]}},{key:"isOpened",value:function(t){console.log(t)}},{key:"ngOnDestroy",value:function(){this.onDestroy$.next()}}]),t}();function N_(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{l(i.next(t))}catch(e){o(e)}}function s(t){try{l(i.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))}var F_,z_=function t(e){_classCallCheck(this,t),this.features=e,this.type="FeatureCollection"},B_=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,t,i)).scheduler=t,r.work=i,r}return _createClass(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>0?_get(_getPrototypeOf(n.prototype),"schedule",this).call(this,t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}},{key:"execute",value:function(t,e){return e>0||this.closed?_get(_getPrototypeOf(n.prototype),"execute",this).call(this,t,e):this._execute(t,e)}},{key:"requestAsyncId",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==i&&i>0||null===i&&this.delay>0?_get(_getPrototypeOf(n.prototype),"requestAsyncId",this).call(this,t,e,i):t.flush(this)}}]),n}(Yp),V_=new(function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return n}(Jp))(B_),U_=((F_=function(){function t(e,n,i){_classCallCheck(this,t),this.kind=e,this.value=n,this.error=i,this.hasValue="N"===e}return _createClass(t,[{key:"observe",value:function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}},{key:"do",value:function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}},{key:"accept",value:function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return Xs(this.value);case"E":return _y(this.error);case"C":return Gs()}throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}},{key:"createError",value:function(e){return new t("E",void 0,e)}},{key:"createComplete",value:function(){return t.completeNotification}}]),t}()).completeNotification=new F_("C"),F_.undefinedValueNotification=new F_("N",void 0),F_),j_=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _classCallCheck(this,n),(r=e.call(this,t)).scheduler=i,r.delay=o,r}return _createClass(n,[{key:"scheduleMessage",value:function(t){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new q_(t,this.destination)))}},{key:"_next",value:function(t){this.scheduleMessage(U_.createNext(t))}},{key:"_error",value:function(t){this.scheduleMessage(U_.createError(t)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(U_.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()}}]),n}(y),q_=function t(e,n){_classCallCheck(this,t),this.notification=e,this.destination=n},G_=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,o=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,n),(t=e.call(this)).scheduler=o,t._events=[],t._infiniteTimeWindow=!1,t._bufferSize=i<1?1:i,t._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(t._infiniteTimeWindow=!0,t.next=t.nextInfiniteTimeWindow):t.next=t.nextTimeWindow,t}return _createClass(n,[{key:"nextInfiniteTimeWindow",value:function(t){var e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),_get(_getPrototypeOf(n.prototype),"next",this).call(this,t)}},{key:"nextTimeWindow",value:function(t){this._events.push(new H_(this._getNow(),t)),this._trimBufferThenGetEvents(),_get(_getPrototypeOf(n.prototype),"next",this).call(this,t)}},{key:"_subscribe",value:function(t){var e,n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,o=i.length;if(this.closed)throw new T;if(this.isStopped||this.hasError?e=d.EMPTY:(this.observers.push(t),e=new P(this,t)),r&&t.add(t=new j_(t,r)),n)for(var a=0;a<o&&!t.closed;a++)t.next(i[a]);else for(var s=0;s<o&&!t.closed;s++)t.next(i[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e}},{key:"_getNow",value:function(){return(this.scheduler||V_).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,i=this._events,r=i.length,o=0;o<r&&!(t-i[o].time<n);)o++;return r>e&&(o=Math.max(o,r-e)),o>0&&i.splice(0,o),i}}]),n}(L),H_=function t(e,n){_classCallCheck(this,t),this.time=e,this.value=n};function X_(){throw Error("Host already has a portal attached")}var Z_,W_,Y_=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"attach",value:function(t){return null==t&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),t.hasAttached()&&X_(),this._attachedHost=t,t.attach(this)}},{key:"detach",value:function(){var t=this._attachedHost;null==t?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,t.detach())}},{key:"setAttachedHost",value:function(t){this._attachedHost=t}},{key:"isAttached",get:function(){return null!=this._attachedHost}}]),t}(),K_=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o){var a;return _classCallCheck(this,n),(a=e.call(this)).component=t,a.viewContainerRef=i,a.injector=r,a.componentFactoryResolver=o,a}return n}(Y_),J_=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;return _classCallCheck(this,n),(o=e.call(this)).templateRef=t,o.viewContainerRef=i,o.context=r,o}return _createClass(n,[{key:"attach",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;return this.context=e,_get(_getPrototypeOf(n.prototype),"attach",this).call(this,t)}},{key:"detach",value:function(){return this.context=void 0,_get(_getPrototypeOf(n.prototype),"detach",this).call(this)}},{key:"origin",get:function(){return this.templateRef.elementRef}}]),n}(Y_),Q_=function(){function t(){_classCallCheck(this,t),this._isDisposed=!1}return _createClass(t,[{key:"hasAttached",value:function(){return!!this._attachedPortal}},{key:"attach",value:function(t){return t||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&X_(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),t instanceof K_?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof J_?(this._attachedPortal=t,this.attachTemplatePortal(t)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}},{key:"detach",value:function(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}},{key:"dispose",value:function(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}},{key:"setDisposeFn",value:function(t){this._disposeFn=t}},{key:"_invokeDisposeFn",value:function(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}]),t}(),$_=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o){var a;return _classCallCheck(this,n),(a=e.call(this)).outletElement=t,a._componentFactoryResolver=i,a._appRef=r,a._defaultInjector=o,a}return _createClass(n,[{key:"attachComponentPortal",value:function(t){var e,n=this,i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);return t.viewContainerRef?(e=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn((function(){return e.destroy()}))):(e=i.create(t.injector||this._defaultInjector),this._appRef.attachView(e.hostView),this.setDisposeFn((function(){n._appRef.detachView(e.hostView),e.destroy()}))),this.outletElement.appendChild(this._getComponentRootNode(e)),e}},{key:"attachTemplatePortal",value:function(t){var e=this,n=t.viewContainerRef,i=n.createEmbeddedView(t.templateRef,t.context);return i.detectChanges(),i.rootNodes.forEach((function(t){return e.outletElement.appendChild(t)})),this.setDisposeFn((function(){var t=n.indexOf(i);-1!==t&&n.remove(t)})),i}},{key:"dispose",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}},{key:"_getComponentRootNode",value:function(t){return t.hostView.rootNodes[0]}}]),n}(Q_),tb=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this))._componentFactoryResolver=t,r._viewContainerRef=i,r._isInitialized=!1,r.attached=new br,r}return _createClass(n,[{key:"ngOnInit",value:function(){this._isInitialized=!0}},{key:"ngOnDestroy",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),this._attachedPortal=null,this._attachedRef=null}},{key:"attachComponentPortal",value:function(t){t.setAttachedHost(this);var e=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r=e.createComponent(i,e.length,t.injector||e.injector);return _get(_getPrototypeOf(n.prototype),"setDisposeFn",this).call(this,(function(){return r.destroy()})),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}},{key:"attachTemplatePortal",value:function(t){var e=this;t.setAttachedHost(this);var i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return _get(_getPrototypeOf(n.prototype),"setDisposeFn",this).call(this,(function(){return e._viewContainerRef.clear()})),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}},{key:"portal",get:function(){return this._attachedPortal},set:function(t){(!this.hasAttached()||t||this._isInitialized)&&(this.hasAttached()&&_get(_getPrototypeOf(n.prototype),"detach",this).call(this),t&&_get(_getPrototypeOf(n.prototype),"attach",this).call(this,t),this._attachedPortal=t)}},{key:"attachedRef",get:function(){return this._attachedRef}}]),n}(Q_),eb=function t(){_classCallCheck(this,t)},nb=function(){function t(e,n){_classCallCheck(this,t),this._parentInjector=e,this._customTokens=n}return _createClass(t,[{key:"get",value:function(t,e){var n=this._customTokens.get(t);return void 0!==n?n:this._parentInjector.get(t,e)}}]),t}(),ib=1,rb={},ob=function(t){var e=ib++;return rb[e]=t,Promise.resolve().then((function(){return function(t){var e=rb[t];e&&e()}(e)})),e},ab=function(t){delete rb[t]},sb=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,t,i)).scheduler=t,r.work=i,r}return _createClass(n,[{key:"requestAsyncId",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==i&&i>0?_get(_getPrototypeOf(n.prototype),"requestAsyncId",this).call(this,t,e,i):(t.actions.push(this),t.scheduled||(t.scheduled=ob(t.flush.bind(t,null))))}},{key:"recycleAsyncId",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==i&&i>0||null===i&&this.delay>0)return _get(_getPrototypeOf(n.prototype),"recycleAsyncId",this).call(this,t,e,i);0===t.actions.length&&(ab(e),t.scheduled=void 0)}}]),n}(Yp),lb=new(function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"flush",value:function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,i=-1,r=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++i<r&&(t=n.shift()));if(this.active=!1,e){for(;++i<r&&(t=n.shift());)t.unsubscribe();throw e}}}]),n}(Jp))(sb),ub=((Z_=function(){function t(e,n){_classCallCheck(this,t),this._ngZone=e,this._platform=n,this._scrolled=new L,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map}return _createClass(t,[{key:"register",value:function(t){var e=this;this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe((function(){return e._scrolled.next(t)})))}},{key:"deregister",value:function(t){var e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}},{key:"scrolled",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return this._platform.isBrowser?new k((function(n){t._globalSubscription||t._addGlobalListener();var i=e>0?t._scrolled.pipe(S_(e)).subscribe(n):t._scrolled.subscribe(n);return t._scrolledCount++,function(){i.unsubscribe(),t._scrolledCount--,t._scrolledCount||t._removeGlobalListener()}})):Xs()}},{key:"ngOnDestroy",value:function(){var t=this;this._removeGlobalListener(),this.scrollContainers.forEach((function(e,n){return t.deregister(n)})),this._scrolled.complete()}},{key:"ancestorScrolled",value:function(t,e){var n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(nl((function(t){return!t||n.indexOf(t)>-1})))}},{key:"getAncestorScrollContainers",value:function(t){var e=this,n=[];return this.scrollContainers.forEach((function(i,r){e._scrollableContainsElement(r,t)&&n.push(r)})),n}},{key:"_scrollableContainsElement",value:function(t,e){var n=e.nativeElement,i=t.getElementRef().nativeElement;do{if(n==i)return!0}while(n=n.parentElement);return!1}},{key:"_addGlobalListener",value:function(){var t=this;this._globalSubscription=this._ngZone.runOutsideAngular((function(){return Tg(window.document,"scroll").subscribe((function(){return t._scrolled.next()}))}))}},{key:"_removeGlobalListener",value:function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}]),t}()).ngInjectableDef=yt({factory:function(){return new Z_(Nt(Yr),Nt(qp))},token:Z_,providedIn:"root"}),Z_),cb=function t(){_classCallCheck(this,t)},hb=((W_=function(){function t(e,n){var i=this;_classCallCheck(this,t),this._platform=e,n.runOutsideAngular((function(){i._change=e.isBrowser?et(Tg(window,"resize"),Tg(window,"orientationchange")):Xs(),i._invalidateCache=i.change().subscribe((function(){return i._updateViewportSize()}))}))}return _createClass(t,[{key:"ngOnDestroy",value:function(){this._invalidateCache.unsubscribe()}},{key:"getViewportSize",value:function(){this._viewportSize||this._updateViewportSize();var t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}},{key:"getViewportRect",value:function(){var t=this.getViewportScrollPosition(),e=this.getViewportSize(),n=e.width,i=e.height;return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+n,height:i,width:n}}},{key:"getViewportScrollPosition",value:function(){if(!this._platform.isBrowser)return{top:0,left:0};var t=document.documentElement,e=t.getBoundingClientRect();return{top:-e.top||document.body.scrollTop||window.scrollY||t.scrollTop||0,left:-e.left||document.body.scrollLeft||window.scrollX||t.scrollLeft||0}}},{key:"change",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return t>0?this._change.pipe(S_(t)):this._change}},{key:"_updateViewportSize",value:function(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}}}]),t}()).ngInjectableDef=yt({factory:function(){return new W_(Nt(qp),Nt(Yr))},token:W_,providedIn:"root"}),W_),pb=function(){function t(e,n){_classCallCheck(this,t),this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}return _createClass(t,[{key:"attach",value:function(){}},{key:"enable",value:function(){if(this._canBeEnabled()){var t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=zp(-this._previousScrollPosition.left),t.style.top=zp(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}},{key:"disable",value:function(){if(this._isEnabled){var t=this._document.documentElement,e=t.style,n=this._document.body.style,i=e.scrollBehavior||"",r=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),e.scrollBehavior=n.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),e.scrollBehavior=i,n.scrollBehavior=r}}},{key:"_canBeEnabled",value:function(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;var t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}]),t}();function fb(){return Error("Scroll strategy has already been attached.")}var db=function(){function t(e,n,i,r){var o=this;_classCallCheck(this,t),this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=function(){o.disable(),o._overlayRef.hasAttached()&&o._ngZone.run((function(){return o._overlayRef.detach()}))}}return _createClass(t,[{key:"attach",value:function(t){if(this._overlayRef)throw fb();this._overlayRef=t}},{key:"enable",value:function(){var t=this;if(!this._scrollSubscription){var e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe((function(){var e=t._viewportRuler.getViewportScrollPosition().top;Math.abs(e-t._initialScrollPosition)>t._config.threshold?t._detach():t._overlayRef.updatePosition()}))):this._scrollSubscription=e.subscribe(this._detach)}}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),t}(),mb=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"attach",value:function(){}}]),t}();function gb(t,e){return e.some((function(e){return t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right}))}function yb(t,e){return e.some((function(e){return t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right}))}var vb,_b=function(){function t(e,n,i,r){_classCallCheck(this,t),this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}return _createClass(t,[{key:"attach",value:function(t){if(this._overlayRef)throw fb();this._overlayRef=t}},{key:"enable",value:function(){var t=this;this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe((function(){if(t._overlayRef.updatePosition(),t._config&&t._config.autoClose){var e=t._overlayRef.overlayElement.getBoundingClientRect(),n=t._viewportRuler.getViewportSize(),i=n.width,r=n.height;gb(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(t.disable(),t._ngZone.run((function(){return t._overlayRef.detach()})))}})))}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),t}(),bb=((vb=function t(e,n,i,r){var o=this;_classCallCheck(this,t),this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this.noop=function(){return new mb},this.close=function(t){return new db(o._scrollDispatcher,o._ngZone,o._viewportRuler,t)},this.block=function(){return new pb(o._viewportRuler,o._document)},this.reposition=function(t){return new _b(o._scrollDispatcher,o._viewportRuler,o._ngZone,t)},this._document=r}).ngInjectableDef=yt({factory:function(){return new vb(Nt(ub),Nt(hb),Nt(Yr),Nt(Vs))},token:vb,providedIn:"root"}),vb),xb=function t(e){if(_classCallCheck(this,t),this.scrollStrategy=new mb,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e)for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];void 0!==e[r]&&(this[r]=e[r])}},wb=function t(e,n,i,r,o){_classCallCheck(this,t),this.offsetX=i,this.offsetY=r,this.panelClass=o,this.originX=e.originX,this.originY=e.originY,this.overlayX=n.overlayX,this.overlayY=n.overlayY},Cb=function t(e,n){_classCallCheck(this,t),this.connectionPair=e,this.scrollableViewProperties=n};function kb(t,e){if("top"!==e&&"bottom"!==e&&"center"!==e)throw Error("ConnectedPosition: Invalid ".concat(t,' "').concat(e,'". Expected "top", "bottom" or "center".'))}function Eb(t,e){if("start"!==e&&"end"!==e&&"center"!==e)throw Error("ConnectedPosition: Invalid ".concat(t,' "').concat(e,'". Expected "start", "end" or "center".'))}var Sb,Ib,Tb=((Ib=function(){function t(e){var n=this;_classCallCheck(this,t),this._attachedOverlays=[],this._keydownListener=function(t){for(var e=n._attachedOverlays,i=e.length-1;i>-1;i--)if(e[i]._keydownEventSubscriptions>0){e[i]._keydownEvents.next(t);break}},this._document=e}return _createClass(t,[{key:"ngOnDestroy",value:function(){this._detach()}},{key:"add",value:function(t){this.remove(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0),this._attachedOverlays.push(t)}},{key:"remove",value:function(t){var e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this._detach()}},{key:"_detach",value:function(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}]),t}()).ngInjectableDef=yt({factory:function(){return new Ib(Nt(Vs))},token:Ib,providedIn:"root"}),Ib),Pb=((Sb=function(){function t(e){_classCallCheck(this,t),this._document=e}return _createClass(t,[{key:"ngOnDestroy",value:function(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}},{key:"getContainerElement",value:function(){return this._containerElement||this._createContainer(),this._containerElement}},{key:"_createContainer",value:function(){for(var t=this._document.getElementsByClassName("cdk-overlay-container"),e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e]);var n=this._document.createElement("div");n.classList.add("cdk-overlay-container"),this._document.body.appendChild(n),this._containerElement=n}}]),t}()).ngInjectableDef=yt({factory:function(){return new Sb(Nt(Vs))},token:Sb,providedIn:"root"}),Sb),Ab=function(){function t(e,n,i,r,o,a,s,l){var u=this;_classCallCheck(this,t),this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=a,this._document=s,this._location=l,this._backdropElement=null,this._backdropClick=new L,this._attachments=new L,this._detachments=new L,this._locationChanges=d.EMPTY,this._backdropClickHandler=function(t){return u._backdropClick.next(t)},this._keydownEventsObservable=new k((function(t){var e=u._keydownEvents.subscribe(t);return u._keydownEventSubscriptions++,function(){e.unsubscribe(),u._keydownEventSubscriptions--}})),this._keydownEvents=new L,this._keydownEventSubscriptions=0,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}return _createClass(t,[{key:"attach",value:function(t){var e=this,n=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(wl(1)).subscribe((function(){e.hasAttached()&&e.updatePosition()})),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe((function(){return e.dispose()}))),n}},{key:"detach",value:function(){if(this.hasAttached()){this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();var t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),t}}},{key:"dispose",value:function(){var t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}},{key:"hasAttached",value:function(){return this._portalOutlet.hasAttached()}},{key:"backdropClick",value:function(){return this._backdropClick.asObservable()}},{key:"attachments",value:function(){return this._attachments.asObservable()}},{key:"detachments",value:function(){return this._detachments.asObservable()}},{key:"keydownEvents",value:function(){return this._keydownEventsObservable}},{key:"getConfig",value:function(){return this._config}},{key:"updatePosition",value:function(){this._positionStrategy&&this._positionStrategy.apply()}},{key:"updatePositionStrategy",value:function(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}},{key:"updateSize",value:function(t){this._config=Object.assign({},this._config,t),this._updateElementSize()}},{key:"setDirection",value:function(t){this._config=Object.assign({},this._config,{direction:t}),this._updateElementDirection()}},{key:"addPanelClass",value:function(t){this._pane&&this._toggleClasses(this._pane,t,!0)}},{key:"removePanelClass",value:function(t){this._pane&&this._toggleClasses(this._pane,t,!1)}},{key:"getDirection",value:function(){var t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}},{key:"updateScrollStrategy",value:function(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}},{key:"_updateElementDirection",value:function(){this._host.setAttribute("dir",this.getDirection())}},{key:"_updateElementSize",value:function(){if(this._pane){var t=this._pane.style;t.width=zp(this._config.width),t.height=zp(this._config.height),t.minWidth=zp(this._config.minWidth),t.minHeight=zp(this._config.minHeight),t.maxWidth=zp(this._config.maxWidth),t.maxHeight=zp(this._config.maxHeight)}}},{key:"_togglePointerEvents",value:function(t){this._pane.style.pointerEvents=t?"auto":"none"}},{key:"_attachBackdrop",value:function(){var t=this;this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular((function(){requestAnimationFrame((function(){t._backdropElement&&t._backdropElement.classList.add("cdk-overlay-backdrop-showing")}))})):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}},{key:"_updateStackingOrder",value:function(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}},{key:"detachBackdrop",value:function(){var t,e=this,n=this._backdropElement;if(n){var i=function i(){n&&(n.removeEventListener("click",e._backdropClickHandler),n.removeEventListener("transitionend",i),n.parentNode&&n.parentNode.removeChild(n)),e._backdropElement==n&&(e._backdropElement=null),e._config.backdropClass&&e._toggleClasses(n,e._config.backdropClass,!1),clearTimeout(t)};n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular((function(){n.addEventListener("transitionend",i)})),n.style.pointerEvents="none",t=this._ngZone.runOutsideAngular((function(){return setTimeout(i,500)}))}}},{key:"_toggleClasses",value:function(t,e,n){var i=t.classList;Fp(e).forEach((function(t){t&&(n?i.add(t):i.remove(t))}))}},{key:"_detachContentWhenStable",value:function(){var t=this;this._ngZone.runOutsideAngular((function(){var e=t._ngZone.onStable.asObservable().pipe(Pg(et(t._attachments,t._detachments))).subscribe((function(){t._pane&&t._host&&0!==t._pane.children.length||(t._pane&&t._config.panelClass&&t._toggleClasses(t._pane,t._config.panelClass,!1),t._host&&t._host.parentElement&&(t._previousHostParent=t._host.parentElement,t._previousHostParent.removeChild(t._host)),e.unsubscribe())}))}))}},{key:"_disposeScrollStrategy",value:function(){var t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}},{key:"overlayElement",get:function(){return this._pane}},{key:"backdropElement",get:function(){return this._backdropElement}},{key:"hostElement",get:function(){return this._host}}]),t}(),Lb=function(){function t(e,n,i,r,o){_classCallCheck(this,t),this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new L,this._resizeSubscription=d.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges.asObservable(),this.setOrigin(e)}return _createClass(t,[{key:"attach",value:function(t){var e=this;if(this._overlayRef&&t!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),t.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe((function(){e._isInitialRender=!0,e.apply()}))}},{key:"apply",value:function(){if(!this._isDisposed&&this._platform.isBrowser)if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)this.reapplyLastPosition();else{this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();var t,e,n=this._originRect,i=this._overlayRect,r=this._viewportRect,o=[],a=_createForOfIteratorHelper(this._preferredPositions);try{for(a.s();!(e=a.n()).done;){var s=e.value,l=this._getOriginPoint(n,s),u=this._getOverlayPoint(l,i,s),c=this._getOverlayFit(u,i,r,s);if(c.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,l);this._canFitWithFlexibleDimensions(c,u,r)?o.push({position:s,origin:l,overlayRect:i,boundingBoxRect:this._calculateBoundingBoxRect(l,s)}):(!t||t.overlayFit.visibleArea<c.visibleArea)&&(t={overlayFit:c,overlayPoint:u,originPoint:l,position:s,overlayRect:i})}}catch(y){a.e(y)}finally{a.f()}if(o.length){var h,p=null,f=-1,d=_createForOfIteratorHelper(o);try{for(d.s();!(h=d.n()).done;){var m=h.value,g=m.boundingBoxRect.width*m.boundingBoxRect.height*(m.position.weight||1);g>f&&(f=g,p=m)}}catch(y){d.e(y)}finally{d.f()}return this._isPushed=!1,void this._applyPosition(p.position,p.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(t.position,t.originPoint);this._applyPosition(t.position,t.originPoint)}}},{key:"detach",value:function(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}},{key:"dispose",value:function(){this._isDisposed||(this._boundingBox&&Mb(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}},{key:"reapplyLastPosition",value:function(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();var t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}},{key:"withScrollableContainers",value:function(t){return this._scrollables=t,this}},{key:"withPositions",value:function(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}},{key:"withViewportMargin",value:function(t){return this._viewportMargin=t,this}},{key:"withFlexibleDimensions",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._hasFlexibleDimensions=t,this}},{key:"withGrowAfterOpen",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._growAfterOpen=t,this}},{key:"withPush",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._canPush=t,this}},{key:"withLockedPosition",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._positionLocked=t,this}},{key:"setOrigin",value:function(t){return this._origin=t,this}},{key:"withDefaultOffsetX",value:function(t){return this._offsetX=t,this}},{key:"withDefaultOffsetY",value:function(t){return this._offsetY=t,this}},{key:"withTransformOriginOn",value:function(t){return this._transformOriginSelector=t,this}},{key:"_getOriginPoint",value:function(t,e){var n;if("center"==e.originX)n=t.left+t.width/2;else{var i=this._isRtl()?t.right:t.left,r=this._isRtl()?t.left:t.right;n="start"==e.originX?i:r}return{x:n,y:"center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom}}},{key:"_getOverlayPoint",value:function(t,e,n){var i,r;return i="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,r="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+i,y:t.y+r}}},{key:"_getOverlayFit",value:function(t,e,n,i){var r=t.x,o=t.y,a=this._getOffset(i,"x"),s=this._getOffset(i,"y");a&&(r+=a),s&&(o+=s);var l=0-o,u=o+e.height-n.height,c=this._subtractOverflows(e.width,0-r,r+e.width-n.width),h=this._subtractOverflows(e.height,l,u),p=c*h;return{visibleArea:p,isCompletelyWithinViewport:e.width*e.height===p,fitsInViewportVertically:h===e.height,fitsInViewportHorizontally:c==e.width}}},{key:"_canFitWithFlexibleDimensions",value:function(t,e,n){if(this._hasFlexibleDimensions){var i=n.bottom-e.y,r=n.right-e.x,o=this._overlayRef.getConfig().minHeight,a=this._overlayRef.getConfig().minWidth,s=t.fitsInViewportHorizontally||null!=a&&a<=r;return(t.fitsInViewportVertically||null!=o&&o<=i)&&s}return!1}},{key:"_pushOverlayOnScreen",value:function(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};var i,r,o=this._viewportRect,a=Math.max(t.x+e.width-o.right,0),s=Math.max(t.y+e.height-o.bottom,0),l=Math.max(o.top-n.top-t.y,0),u=Math.max(o.left-n.left-t.x,0);return i=e.width<=o.width?u||-a:t.x<this._viewportMargin?o.left-n.left-t.x:0,r=e.height<=o.height?l||-s:t.y<this._viewportMargin?o.top-n.top-t.y:0,this._previousPushAmount={x:i,y:r},{x:t.x+i,y:t.y+r}}},{key:"_applyPosition",value:function(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){var n=this._getScrollVisibility(),i=new Cb(t,n);this._positionChanges.next(i)}this._isInitialRender=!1}},{key:"_setTransformOrigin",value:function(t){if(this._transformOriginSelector){var e,n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i=t.overlayY;e="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(var r=0;r<n.length;r++)n[r].style.transformOrigin="".concat(e," ").concat(i)}}},{key:"_calculateBoundingBoxRect",value:function(t,e){var n,i,r,o,a,s,l=this._viewportRect,u=this._isRtl();if("top"===e.overlayY)i=t.y,n=l.height-i+this._viewportMargin;else if("bottom"===e.overlayY)r=l.height-t.y+2*this._viewportMargin,n=l.height-r+this._viewportMargin;else{var c=Math.min(l.bottom-t.y+l.top,t.y),h=this._lastBoundingBoxSize.height;n=2*c,i=t.y-c,n>h&&!this._isInitialRender&&!this._growAfterOpen&&(i=t.y-h/2)}if("end"===e.overlayX&&!u||"start"===e.overlayX&&u)s=l.width-t.x+this._viewportMargin,o=t.x-this._viewportMargin;else if("start"===e.overlayX&&!u||"end"===e.overlayX&&u)a=t.x,o=l.right-t.x;else{var p=Math.min(l.right-t.x+l.left,t.x),f=this._lastBoundingBoxSize.width;o=2*p,a=t.x-p,o>f&&!this._isInitialRender&&!this._growAfterOpen&&(a=t.x-f/2)}return{top:i,left:a,bottom:r,right:s,width:o,height:n}}},{key:"_setBoundingBoxStyles",value:function(t,e){var n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));var i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right="",i.width=i.height="100%";else{var r=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=zp(n.height),i.top=zp(n.top),i.bottom=zp(n.bottom),i.width=zp(n.width),i.left=zp(n.left),i.right=zp(n.right),i.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",i.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",r&&(i.maxHeight=zp(r)),o&&(i.maxWidth=zp(o))}this._lastBoundingBoxSize=n,Mb(this._boundingBox.style,i)}},{key:"_resetBoundingBoxStyles",value:function(){Mb(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}},{key:"_resetOverlayElementStyles",value:function(){Mb(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}},{key:"_setOverlayElementStyles",value:function(t,e){var n={};if(this._hasExactPosition()){var i=this._viewportRuler.getViewportScrollPosition();Mb(n,this._getExactOverlayY(e,t,i)),Mb(n,this._getExactOverlayX(e,t,i))}else n.position="static";var r="",o=this._getOffset(e,"x"),a=this._getOffset(e,"y");o&&(r+="translateX(".concat(o,"px) ")),a&&(r+="translateY(".concat(a,"px)")),n.transform=r.trim(),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxHeight&&(n.maxHeight=""),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxWidth&&(n.maxWidth=""),Mb(this._pane.style,n)}},{key:"_getExactOverlayY",value:function(t,e,n){var i={top:null,bottom:null},r=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,n));var o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return r.y-=o,"bottom"===t.overlayY?i.bottom=this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)+"px":i.top=zp(r.y),i}},{key:"_getExactOverlayX",value:function(t,e,n){var i={left:null,right:null},r=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,n)),"right"===(this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left")?i.right=this._document.documentElement.clientWidth-(r.x+this._overlayRect.width)+"px":i.left=zp(r.x),i}},{key:"_getScrollVisibility",value:function(){var t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map((function(t){return t.getElementRef().nativeElement.getBoundingClientRect()}));return{isOriginClipped:yb(t,n),isOriginOutsideView:gb(t,n),isOverlayClipped:yb(e,n),isOverlayOutsideView:gb(e,n)}}},{key:"_subtractOverflows",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.reduce((function(t,e){return t-Math.max(e,0)}),t)}},{key:"_getNarrowedViewportRect",value:function(){var t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}},{key:"_isRtl",value:function(){return"rtl"===this._overlayRef.getDirection()}},{key:"_hasExactPosition",value:function(){return!this._hasFlexibleDimensions||this._isPushed}},{key:"_getOffset",value:function(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}},{key:"_validatePositions",value:function(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach((function(t){Eb("originX",t.originX),kb("originY",t.originY),Eb("overlayX",t.overlayX),kb("overlayY",t.overlayY)}))}},{key:"_addPanelClasses",value:function(t){var e=this;this._pane&&Fp(t).forEach((function(t){""!==t&&-1===e._appliedPanelClasses.indexOf(t)&&(e._appliedPanelClasses.push(t),e._pane.classList.add(t))}))}},{key:"_clearPanelClasses",value:function(){var t=this;this._pane&&(this._appliedPanelClasses.forEach((function(e){t._pane.classList.remove(e)})),this._appliedPanelClasses=[])}},{key:"_getOriginRect",value:function(){var t=this._origin;if(t instanceof rn)return t.nativeElement.getBoundingClientRect();if(t instanceof HTMLElement)return t.getBoundingClientRect();var e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}},{key:"positions",get:function(){return this._preferredPositions}}]),t}();function Mb(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var Rb,Ob=function(){function t(e,n,i,r,o,a,s){_classCallCheck(this,t),this._preferredPositions=[],this._positionStrategy=new Lb(i,r,o,a,s).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,n)}return _createClass(t,[{key:"attach",value:function(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}},{key:"dispose",value:function(){this._positionStrategy.dispose()}},{key:"detach",value:function(){this._positionStrategy.detach()}},{key:"apply",value:function(){this._positionStrategy.apply()}},{key:"recalculateLastPosition",value:function(){this._positionStrategy.reapplyLastPosition()}},{key:"withScrollableContainers",value:function(t){this._positionStrategy.withScrollableContainers(t)}},{key:"withFallbackPosition",value:function(t,e,n,i){var r=new wb(t,e,n,i);return this._preferredPositions.push(r),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"withDirection",value:function(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}},{key:"withOffsetX",value:function(t){return this._positionStrategy.withDefaultOffsetX(t),this}},{key:"withOffsetY",value:function(t){return this._positionStrategy.withDefaultOffsetY(t),this}},{key:"withLockedPosition",value:function(t){return this._positionStrategy.withLockedPosition(t),this}},{key:"withPositions",value:function(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"setOrigin",value:function(t){return this._positionStrategy.setOrigin(t),this}},{key:"_isRtl",get:function(){return"rtl"===this._overlayRef.getDirection()}},{key:"onPositionChange",get:function(){return this._positionStrategy.positionChanges}},{key:"positions",get:function(){return this._preferredPositions}}]),t}(),Db=function(){function t(){_classCallCheck(this,t),this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}return _createClass(t,[{key:"attach",value:function(t){var e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}},{key:"top",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}},{key:"left",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}},{key:"bottom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}},{key:"right",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}},{key:"width",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}},{key:"height",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}},{key:"centerHorizontally",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.left(t),this._justifyContent="center",this}},{key:"centerVertically",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.top(t),this._alignItems="center",this}},{key:"apply",value:function(){if(this._overlayRef&&this._overlayRef.hasAttached()){var t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig();t.position=this._cssPosition,t.marginLeft="100%"===n.width?"0":this._leftOffset,t.marginTop="100%"===n.height?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,"100%"===n.width?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems="100%"===n.height?"flex-start":this._alignItems}}},{key:"dispose",value:function(){if(!this._isDisposed&&this._overlayRef){var t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove("cdk-global-overlay-wrapper"),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}}]),t}(),Nb=((Rb=function(){function t(e,n,i,r){_classCallCheck(this,t),this._viewportRuler=e,this._document=n,this._platform=i,this._overlayContainer=r}return _createClass(t,[{key:"global",value:function(){return new Db}},{key:"connectedTo",value:function(t,e,n){return new Ob(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}},{key:"flexibleConnectedTo",value:function(t){return new Lb(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}]),t}()).ngInjectableDef=yt({factory:function(){return new Rb(Nt(hb),Nt(Vs),Nt(qp),Nt(Pb))},token:Rb,providedIn:"root"}),Rb),Fb=0,zb=function(){function t(e,n,i,r,o,a,s,l,u,c){_classCallCheck(this,t),this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=i,this._positionBuilder=r,this._keyboardDispatcher=o,this._injector=a,this._ngZone=s,this._document=l,this._directionality=u,this._location=c}return _createClass(t,[{key:"create",value:function(t){var e=this._createHostElement(),n=this._createPaneElement(e),i=this._createPortalOutlet(n),r=new xb(t);return r.direction=r.direction||this._directionality.value,new Ab(i,e,n,r,this._ngZone,this._keyboardDispatcher,this._document,this._location)}},{key:"position",value:function(){return this._positionBuilder}},{key:"_createPaneElement",value:function(t){var e=this._document.createElement("div");return e.id="cdk-overlay-"+Fb++,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}},{key:"_createHostElement",value:function(){var t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}},{key:"_createPortalOutlet",value:function(t){return this._appRef||(this._appRef=this._injector.get(fo)),new $_(t,this._componentFactoryResolver,this._appRef,this._injector)}}]),t}(),Bb=new Pt("cdk-connected-overlay-scroll-strategy");function Vb(t){return function(){return t.scrollStrategies.reposition()}}var Ub=function t(){_classCallCheck(this,t)},jb=function t(){_classCallCheck(this,t),this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0};function qb(){throw Error("Attempting to attach dialog content after content is already attached")}var Gb=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o,a){var s;return _classCallCheck(this,n),(s=e.call(this))._elementRef=t,s._focusTrapFactory=i,s._changeDetectorRef=r,s._document=o,s._config=a,s._elementFocusedBeforeDialogWasOpened=null,s._state="enter",s._animationStateChanged=new br,s._ariaLabelledBy=a.ariaLabelledBy||null,s}return _createClass(n,[{key:"attachComponentPortal",value:function(t){return this._portalOutlet.hasAttached()&&qb(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachComponentPortal(t)}},{key:"attachTemplatePortal",value:function(t){return this._portalOutlet.hasAttached()&&qb(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachTemplatePortal(t)}},{key:"_trapFocus",value:function(){var t=this._elementRef.nativeElement;if(this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(t)),this._config.autoFocus)this._focusTrap.focusInitialElementWhenReady();else{var e=this._document.activeElement;e===t||t.contains(e)||t.focus()}}},{key:"_restoreFocus",value:function(){var t=this._elementFocusedBeforeDialogWasOpened;this._config.restoreFocus&&t&&"function"==typeof t.focus&&t.focus(),this._focusTrap&&this._focusTrap.destroy()}},{key:"_savePreviouslyFocusedElement",value:function(){var t=this;this._document&&(this._elementFocusedBeforeDialogWasOpened=this._document.activeElement,this._elementRef.nativeElement.focus&&Promise.resolve().then((function(){return t._elementRef.nativeElement.focus()})))}},{key:"_onAnimationDone",value:function(t){"enter"===t.toState?this._trapFocus():"exit"===t.toState&&this._restoreFocus(),this._animationStateChanged.emit(t)}},{key:"_onAnimationStart",value:function(t){this._animationStateChanged.emit(t)}},{key:"_startExitAnimation",value:function(){this._state="exit",this._changeDetectorRef.markForCheck()}}]),n}(Q_),Hb=0,Xb=function(){function t(e,n,i){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"mat-dialog-"+Hb++;_classCallCheck(this,t),this._overlayRef=e,this._containerInstance=n,this.id=o,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new L,this._afterClosed=new L,this._beforeClosed=new L,this._state=0,n._id=o,n._animationStateChanged.pipe(nl((function(t){return"done"===t.phaseName&&"enter"===t.toState})),wl(1)).subscribe((function(){r._afterOpened.next(),r._afterOpened.complete()})),n._animationStateChanged.pipe(nl((function(t){return"done"===t.phaseName&&"exit"===t.toState})),wl(1)).subscribe((function(){clearTimeout(r._closeFallbackTimeout),r._overlayRef.dispose()})),e.detachments().subscribe((function(){r._beforeClosed.next(r._result),r._beforeClosed.complete(),r._afterClosed.next(r._result),r._afterClosed.complete(),r.componentInstance=null,r._overlayRef.dispose()})),e.keydownEvents().pipe(nl((function(t){return 27===t.keyCode&&!r.disableClose&&!Wp(t)}))).subscribe((function(t){t.preventDefault(),r.close()}))}return _createClass(t,[{key:"close",value:function(t){var e=this;this._result=t,this._containerInstance._animationStateChanged.pipe(nl((function(t){return"start"===t.phaseName})),wl(1)).subscribe((function(n){e._beforeClosed.next(t),e._beforeClosed.complete(),e._state=2,e._overlayRef.detachBackdrop(),e._closeFallbackTimeout=setTimeout((function(){e._overlayRef.dispose()}),n.totalTime+100)})),this._containerInstance._startExitAnimation(),this._state=1}},{key:"afterOpened",value:function(){return this._afterOpened.asObservable()}},{key:"afterClosed",value:function(){return this._afterClosed.asObservable()}},{key:"beforeClosed",value:function(){return this._beforeClosed.asObservable()}},{key:"backdropClick",value:function(){return this._overlayRef.backdropClick()}},{key:"keydownEvents",value:function(){return this._overlayRef.keydownEvents()}},{key:"updatePosition",value:function(t){var e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}},{key:"updateSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this._getPositionStrategy().width(t).height(e),this._overlayRef.updatePosition(),this}},{key:"addPanelClass",value:function(t){return this._overlayRef.addPanelClass(t),this}},{key:"removePanelClass",value:function(t){return this._overlayRef.removePanelClass(t),this}},{key:"afterOpen",value:function(){return this.afterOpened()}},{key:"beforeClose",value:function(){return this.beforeClosed()}},{key:"getState",value:function(){return this._state}},{key:"_getPositionStrategy",value:function(){return this._overlayRef.getConfig().positionStrategy}}]),t}(),Zb=new Pt("MatDialogData"),Wb=new Pt("mat-dialog-default-options"),Yb=new Pt("mat-dialog-scroll-strategy");function Kb(t){return function(){return t.scrollStrategies.block()}}var Jb=function(){function t(e,n,i,r,o,a,s){var l=this;_classCallCheck(this,t),this._overlay=e,this._injector=n,this._location=i,this._defaultOptions=r,this._parentDialog=a,this._overlayContainer=s,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new L,this._afterOpenedAtThisLevel=new L,this._ariaHiddenElements=new Map,this.afterAllClosed=tl((function(){return l.openDialogs.length?l._afterAllClosed:l._afterAllClosed.pipe(Ml(void 0))})),this._scrollStrategy=o}return _createClass(t,[{key:"open",value:function(t,e){var n=this;if((e=function(t,e){return Object.assign({},e,t)}(e,this._defaultOptions||new jb)).id&&this.getDialogById(e.id))throw Error('Dialog with id "'.concat(e.id,'" exists already. The dialog id must be unique.'));var i=this._createOverlay(e),r=this._attachDialogContainer(i,e),o=this._attachDialogContent(t,r,i,e);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe((function(){return n._removeOpenDialog(o)})),this.afterOpened.next(o),o}},{key:"closeAll",value:function(){this._closeDialogs(this.openDialogs)}},{key:"getDialogById",value:function(t){return this.openDialogs.find((function(e){return e.id===t}))}},{key:"ngOnDestroy",value:function(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}},{key:"_createOverlay",value:function(t){var e=this._getOverlayConfig(t);return this._overlay.create(e)}},{key:"_getOverlayConfig",value:function(t){var e=new xb({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(e.backdropClass=t.backdropClass),e}},{key:"_attachDialogContainer",value:function(t,e){var n=new nb(e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,new WeakMap([[jb,e]])),i=new K_(Gb,e.viewContainerRef,n,e.componentFactoryResolver);return t.attach(i).instance}},{key:"_attachDialogContent",value:function(t,e,n,i){var r=new Xb(n,e,this._location,i.id);if(i.hasBackdrop&&n.backdropClick().subscribe((function(){r.disableClose||r.close()})),t instanceof In)e.attachTemplatePortal(new J_(t,null,{$implicit:i.data,dialogRef:r}));else{var o=this._createInjector(i,r,e),a=e.attachComponentPortal(new K_(t,void 0,o));r.componentInstance=a.instance}return r.updateSize(i.width,i.height).updatePosition(i.position),r}},{key:"_createInjector",value:function(t,e,n){var i=t&&t.viewContainerRef&&t.viewContainerRef.injector,r=new WeakMap([[Gb,n],[Zb,t.data],[Xb,e]]);return!t.direction||i&&i.get(rd,null)||r.set(rd,{value:t.direction,change:Xs()}),new nb(i||this._injector,r)}},{key:"_removeOpenDialog",value:function(t){var e=this.openDialogs.indexOf(t);e>-1&&(this.openDialogs.splice(e,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((function(t,e){t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")})),this._ariaHiddenElements.clear(),this._afterAllClosed.next()))}},{key:"_hideNonDialogContentFromAssistiveTechnology",value:function(){var t=this._overlayContainer.getContainerElement();if(t.parentElement)for(var e=t.parentElement.children,n=e.length-1;n>-1;n--){var i=e[n];i===t||"SCRIPT"===i.nodeName||"STYLE"===i.nodeName||i.hasAttribute("aria-live")||(this._ariaHiddenElements.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}}},{key:"_closeDialogs",value:function(t){for(var e=t.length;e--;)t[e].close()}},{key:"openDialogs",get:function(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}},{key:"afterOpened",get:function(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}},{key:"afterOpen",get:function(){return this.afterOpened}},{key:"_afterAllClosed",get:function(){var t=this._parentDialog;return t?t._afterAllClosed:this._afterAllClosedAtThisLevel}}]),t}(),Qb=0,$b=function(){function t(e,n,i){_classCallCheck(this,t),this.dialogRef=e,this._elementRef=n,this._dialog=i,this.type="button"}return _createClass(t,[{key:"ngOnInit",value:function(){this.dialogRef||(this.dialogRef=ix(this._elementRef,this._dialog.openDialogs))}},{key:"ngOnChanges",value:function(t){var e=t._matDialogClose||t._matDialogCloseResult;e&&(this.dialogResult=e.currentValue)}}]),t}(),tx=function(){function t(e,n,i){_classCallCheck(this,t),this._dialogRef=e,this._elementRef=n,this._dialog=i,this.id="mat-dialog-title-"+Qb++}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this._dialogRef||(this._dialogRef=ix(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then((function(){var e=t._dialogRef._containerInstance;e&&!e._ariaLabelledBy&&(e._ariaLabelledBy=t.id)}))}}]),t}(),ex=function t(){_classCallCheck(this,t)},nx=function t(){_classCallCheck(this,t)};function ix(t,e){for(var n=t.nativeElement.parentElement;n&&!n.classList.contains("mat-dialog-container");)n=n.parentElement;return n?e.find((function(t){return t.id===n.id})):null}var rx,ox,ax=function t(){_classCallCheck(this,t)},sx=function(){function t(e){_classCallCheck(this,t),this.total=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new lx(t,this.total))}}]),t}(),lx=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,t)).total=i,r.count=0,r}return _createClass(n,[{key:"_next",value:function(t){++this.count>this.total&&this.destination.next(t)}}]),n}(y),ux=new Set,cx=((ox=function(){function t(e){_classCallCheck(this,t),this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):hx}return _createClass(t,[{key:"matchMedia",value:function(t){return this._platform.WEBKIT&&function(t){if(!ux.has(t))try{rx||((rx=document.createElement("style")).setAttribute("type","text/css"),document.head.appendChild(rx)),rx.sheet&&(rx.sheet.insertRule("@media ".concat(t," {.fx-query-test{ }}"),0),ux.add(t))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}]),t}()).ngInjectableDef=yt({factory:function(){return new ox(Nt(qp))},token:ox,providedIn:"root"}),ox);function hx(t){return{matches:"all"===t||""===t,media:t,addListener:function(){},removeListener:function(){}}}var px,fx=((px=function(){function t(e,n){_classCallCheck(this,t),this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new L}return _createClass(t,[{key:"ngOnDestroy",value:function(){this._destroySubject.next(),this._destroySubject.complete()}},{key:"isMatched",value:function(t){var e=this;return dx(Fp(t)).some((function(t){return e._registerQuery(t).mql.matches}))}},{key:"observe",value:function(t){var e=this,n=Js(dx(Fp(t)).map((function(t){return e._registerQuery(t).observable})));return(n=Ll(n.pipe(wl(1)),n.pipe((function(t){return t.lift(new sx(1))}),$p(0)))).pipe(H((function(t){var e={matches:!1,breakpoints:{}};return t.forEach((function(t){e.matches=e.matches||t.matches,e.breakpoints[t.query]=t.matches})),e})))}},{key:"_registerQuery",value:function(t){var e=this;if(this._queries.has(t))return this._queries.get(t);var n=this._mediaMatcher.matchMedia(t),i={observable:new k((function(t){var i=function(n){return e._zone.run((function(){return t.next(n)}))};return n.addListener(i),function(){n.removeListener(i)}})).pipe(Ml(n),H((function(e){return{query:t,matches:e.matches}})),Pg(this._destroySubject)),mql:n};return this._queries.set(t,i),i}}]),t}()).ngInjectableDef=yt({factory:function(){return new px(Nt(cx),Nt(Yr))},token:px,providedIn:"root"}),px);function dx(t){return t.map((function(t){return t.split(",")})).reduce((function(t,e){return t.concat(e)})).map((function(t){return t.trim()}))}var mx,gx,yx=function(){function t(e,n){var i=this;_classCallCheck(this,t),this._overlayRef=n,this._afterDismissed=new L,this._afterOpened=new L,this._onAction=new L,this._dismissedByAction=!1,this.containerInstance=e,this.onAction().subscribe((function(){return i.dismiss()})),e._onExit.subscribe((function(){return i._finishDismiss()}))}return _createClass(t,[{key:"dismiss",value:function(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}},{key:"dismissWithAction",value:function(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete())}},{key:"closeWithAction",value:function(){this.dismissWithAction()}},{key:"_dismissAfter",value:function(t){var e=this;this._durationTimeoutId=setTimeout((function(){return e.dismiss()}),t)}},{key:"_open",value:function(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}},{key:"_finishDismiss",value:function(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}},{key:"afterDismissed",value:function(){return this._afterDismissed.asObservable()}},{key:"afterOpened",value:function(){return this.containerInstance._onEnter}},{key:"onAction",value:function(){return this._onAction.asObservable()}}]),t}(),vx=new Pt("MatSnackBarData"),_x=function t(){_classCallCheck(this,t),this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"},bx=function(){function t(e,n){_classCallCheck(this,t),this.snackBarRef=e,this.data=n}return _createClass(t,[{key:"action",value:function(){this.snackBarRef.dismissWithAction()}},{key:"hasAction",get:function(){return!!this.data.action}}]),t}(),xx=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o){var a;return _classCallCheck(this,n),(a=e.call(this))._ngZone=t,a._elementRef=i,a._changeDetectorRef=r,a.snackBarConfig=o,a._destroyed=!1,a._onExit=new L,a._onEnter=new L,a._animationState="void",a._role="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?null:"status":"alert",a}return _createClass(n,[{key:"attachComponentPortal",value:function(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(t)}},{key:"attachTemplatePortal",value:function(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(t)}},{key:"onAnimationEnd",value:function(t){var e=t.fromState,n=t.toState;if(("void"===n&&"void"!==e||"hidden"===n)&&this._completeExit(),"visible"===n){var i=this._onEnter;this._ngZone.run((function(){i.next(),i.complete()}))}}},{key:"enter",value:function(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}},{key:"exit",value:function(){return this._animationState="hidden",this._onExit}},{key:"ngOnDestroy",value:function(){this._destroyed=!0,this._completeExit()}},{key:"_completeExit",value:function(){var t=this;this._ngZone.onMicrotaskEmpty.asObservable().pipe(wl(1)).subscribe((function(){t._onExit.next(),t._onExit.complete()}))}},{key:"_applySnackBarClasses",value:function(){var t=this._elementRef.nativeElement,e=this.snackBarConfig.panelClass;e&&(Array.isArray(e)?e.forEach((function(e){return t.classList.add(e)})):t.classList.add(e)),"center"===this.snackBarConfig.horizontalPosition&&t.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&t.classList.add("mat-snack-bar-top")}},{key:"_assertNotAttached",value:function(){if(this._portalOutlet.hasAttached())throw Error("Attempting to attach snack bar content after content is already attached")}}]),n}(Q_),wx=function t(){_classCallCheck(this,t)},Cx=new Pt("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new _x}}),kx=((gx=function(){function t(e,n,i,r,o,a){_classCallCheck(this,t),this._overlay=e,this._live=n,this._injector=i,this._breakpointObserver=r,this._parentSnackBar=o,this._defaultConfig=a,this._snackBarRefAtThisLevel=null}return _createClass(t,[{key:"openFromComponent",value:function(t,e){return this._attach(t,e)}},{key:"openFromTemplate",value:function(t,e){return this._attach(t,e)}},{key:"open",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=Object.assign({},this._defaultConfig,n);return i.data={message:t,action:e},i.announcementMessage||(i.announcementMessage=t),this.openFromComponent(bx,i)}},{key:"dismiss",value:function(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}},{key:"ngOnDestroy",value:function(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}},{key:"_attachSnackBarContainer",value:function(t,e){var n=new nb(e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,new WeakMap([[_x,e]])),i=new K_(xx,e.viewContainerRef,n),r=t.attach(i);return r.instance.snackBarConfig=e,r.instance}},{key:"_attach",value:function(t,e){var n=Object.assign({},new _x,this._defaultConfig,e),i=this._createOverlay(n),r=this._attachSnackBarContainer(i,n),o=new yx(r,i);if(t instanceof In){var a=new J_(t,null,{$implicit:n.data,snackBarRef:o});o.instance=r.attachTemplatePortal(a)}else{var s=this._createInjector(n,o),l=new K_(t,void 0,s),u=r.attachComponentPortal(l);o.instance=u.instance}return this._breakpointObserver.observe("(max-width: 599.99px) and (orientation: portrait)").pipe(Pg(i.detachments())).subscribe((function(t){var e=i.overlayElement.classList;t.matches?e.add("mat-snack-bar-handset"):e.remove("mat-snack-bar-handset")})),this._animateSnackBar(o,n),this._openedSnackBarRef=o,this._openedSnackBarRef}},{key:"_animateSnackBar",value:function(t,e){var n=this;t.afterDismissed().subscribe((function(){n._openedSnackBarRef==t&&(n._openedSnackBarRef=null),e.announcementMessage&&n._live.clear()})),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe((function(){t.containerInstance.enter()})),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),e.duration&&e.duration>0&&t.afterOpened().subscribe((function(){return t._dismissAfter(e.duration)})),e.announcementMessage&&this._live.announce(e.announcementMessage,e.politeness)}},{key:"_createOverlay",value:function(t){var e=new xb;e.direction=t.direction;var n=this._overlay.position().global(),i="rtl"===t.direction,r="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!i||"end"===t.horizontalPosition&&i,o=!r&&"center"!==t.horizontalPosition;return r?n.left("0"):o?n.right("0"):n.centerHorizontally(),"top"===t.verticalPosition?n.top("0"):n.bottom("0"),e.positionStrategy=n,this._overlay.create(e)}},{key:"_createInjector",value:function(t,e){return new nb(t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,new WeakMap([[yx,e],[vx,t.data]]))}},{key:"_openedSnackBarRef",get:function(){var t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel},set:function(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}}]),t}()).ngInjectableDef=yt({factory:function(){return new gx(Nt(zb),Nt(wf),Nt(At),Nt(fx),Nt(gx,12),Nt(Cx))},token:gx,providedIn:wx}),gx),Ex=((mx=function(){function t(e,n,i,r,o){_classCallCheck(this,t),this.http=e,this.router=n,this.dialog=i,this.snackBar=r,this.sanitizer=o,this.dataDocsPerPage=2,this.currentPage=1,this.opts=[],this.url="",this.currentNotifications=0,this.libraryLayers=[],this.myProjects=[],this.uniqueProperties=[],this.uniqueStyleProps=[],this.uniquePropNumerical=[],this.threads=[],this.savedLayerAdded=new L,this.libraryLayerAdded=new L,this.mapsReturned=new G_(1),this.dataLayersUpdated=new G_(1),this.sessionDataUpdated=new L,this.allProjectThreads=new L,this.styleFieldUpdated=new L,this.featureSymbolUpdated=new L,this.opacityValUpdated=new L,this.pointSizeValUpdated=new L,this.layerCentreUpdated=new L,this.dataLayerPriColUpdated=new L,this.dataLayerLabelColUpdated=new L,this.dataLayerIndividualColourUpdated=new L,this.mapStyleUpdated=new L,this.mapCenterUpdated=new L,this.uniqueListUpdate=new L,this.csvDataUpdated=new L,this.newProjectCreated=new L,this.mapZoomUpdated=new L,this.callDownload=new L,this.mapBearingUpdated=new L,this.lineSizeValUpdated=new L,this.polyBorderWidthValUpdated=new L,this.lineTypeValUpdated=new L,this.labelSizeValUpdated=new L,this.loadingNotification=new L,this.outlineColourUpdated=new L,this.commentUpdated=new L,this.markerSelected=new L,this.propLabelUpdated=new L,this.clearMapInstruction=new L,this.mapShareSubject=new L,this.loadingComplete=new L,this.loadingInProgress=new L,this.mapRightsPermission=new L,this.threadSelect=new L,this.removeLayerUpdated=new L,this.addLayerUpdate=new L,this.mapNameUpdated=new L,this.notifications=new L,this.changeBaseMap=new L,this.searchResultsSubject=new L,this.preStyledLayerVisibility=new L,this.projectCacheUpdateSub=new L,this.launchAddCommentDialogTrigger=new L,this.featureData=new L,this.isoUpdate=new L,this.googlePlacesResponse=new L,this.projectLoaded=!1,this.stateChanged=!1,this.currentMapZoom=0,this.currentMapBearing=0,this.currentMapPitch=0,this.dataLayerOpacity=1,this.dataPointSize=.5,this.lineSize=2,this.polyBorderWidth=0,this.sessionDataLayers=[],this.sharedWith=[],this.preStyledLayers=[],this.tempListForRemoval=[],this.sharedWithNames=[],this.mapName="",this.mapType="",this.mapId="",this.mapStyleField="",this.styleType="",this.currentMapName="",this.dataLayerPrimaryColour="",this.dataLayerLabelColour="",this.outlineColour="",this.searchString="",this.TAG=" OC~MapService: "}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.timerSubscription.unsubscribe()}},{key:"fetchFeatureData",value:function(t,e,n,i,r,o,a,s,l,u){var c,h=this;console.log((new Date).toISOString()+this.TAG+"Data Feature fetch called for Data Layer: "+r+"on Project: "+u),c=s?"?pagesize=".concat(t,"&page=").concat(e,"&userid=").concat(n,"&id=").concat(r,"&isMap=true&mapId=").concat(u):"?pagesize=".concat(t,"&page=").concat(e,"&userid=").concat(n,"&id=").concat(r),this.http.get(is+"api/data/features/"+c).pipe(H((function(t){return t.geojsons.map((function(t){return{id:t.ownerLayerId,type:t.type,geometry:t.geometry,properties:t.properties}}))}))).subscribe((function(t){if(console.log((new Date).toISOString()+h.TAG+"Checking if current project param is same as project param when layer was requested..."),u!==h.mapId)return console.log(u),console.log(h.mapId),h.loadingComplete.next(!0),void h.loadingInProgress.next(!1);var e,n,r,c,p,f,d,m,g,y,v="",_=!0,b=!1,x=!1,w="",C="MEDIUM",k="",E="",S=0,I="",T=!1,P=!1,A=[],L=i;if(i.length>25){var M=h.fileNameChecker(i);i=M}a?(h.setSourceId(a.id),r=a.size,c=a.opacity,_=a.visibility,S=a.polyBorderWidth,a.currentLabelVisibility&&(w=a.currentLabel,T=a.currentLabelVisibility,C=a.currentLabelSize,y=a.currentLabelColour),a.lineType&&(E=a.lineType),a.uniqueValueAssign&&(P=a.uniqueValueAssign),a.uniqueValueFilterList&&(A=a.uniqueValueFilterList),a.propertySelected&&(I=a.propertySelected),a.dataDrivenStylingInUse?(console.log((new Date).toISOString()+h.TAG+"Data driven styling in use"),n=a.color,f=a.dataDrivenStylingInUse,v=a.dataStyleField,g=a.dataStyleFieldType,d=a.colourRamp,m=a.colourPalette,b=a.colourPalleteInUse,x=a.colourRampInUse):e=a.color,a.symbolInUse&&(k=a.symbolInUse),"MultiPolygon"!==a.type&&"Polygon"!==a.type||(p=a.outlineColor)):(h.setSourceId(i+"-"+Date.now()),e="#000000",r=1,c=1,p="#000000",n="#000000",n="#000000",y="#000000",f=!1,_=!0,d="",m="");var R=h.getSourceId();h.features=t;var O=h.getSampleCoordinates(t[0]);if(h.parseUniqueFeatureValues(t),h.featureData.next(_toConsumableArray(h.features)),h.styleType="Point"===h.features[0].geometry.type?"symbol":"fill",h.sessionDataLayers.push({name:i,originalName:L,id:R,color:e,dataStyleColor:n,dataStyleField:v,dataStyleFieldType:g,outlineColor:p,polyBorderWidth:S,symbolInUse:k,lineType:E,colourRampInUse:x,colourPaletteInUse:b,ownerLayerId:t[0].id,type:h.features[0].geometry.type,styleType:h.styleType,propertySelected:I,dataDrivenStylingInUse:f,visibility:_,opacity:c,size:r,uniqueProps:h.uniqueProperties,colourRamp:d,colourPalette:m,uniqueValueAssign:P,uniquePropNumerical:h.uniquePropNumerical,uniqueValueFilterList:A,currentLabel:w,currentLabelSize:C,currentLabelColour:y,flyToLocation:O,currentLabelVisibility:T,ownerProject:h.mapId}),h.sessionDataUpdated.next({sessionData:_toConsumableArray(h.sessionDataLayers)}),h.uniquePropNumerical=[],o&&!a?h.snackBar.open("Data Successfully Uploaded - Boom!","Close",{duration:3e3}):o||a||h.snackBar.open("Data Layer: "+i+" added - Boom!","Close",{duration:3e3}),a&&h.savedLayerAdded.next(a),!s||l)if(h.setStateChange(!1),h.loadingComplete.next(!0),h.loadingInProgress.next(!1),h.layerCentreUpdated.next({lng:h.centre.lng,lat:h.centre.lat,zoom:h.currentMapZoom,bearing:h.currentMapBearing,pitch:h.currentMapPitch}),null!==a){if(h.preStyledLayers.length>0){var D,N=_createForOfIteratorHelper(h.preStyledLayers);try{for(N.s();!(D=N.n()).done;){var F=D.value;h.preStyledLayerVisibility.next(F)}}catch(z){N.e(z)}finally{N.f()}}}else h.libraryLayerAdded.next(i)}))}},{key:"fetchData",value:function(t,e,n){var i=this;this.http.get("https://fmnbackend.nw.r.appspot.com/api/data?pagesize=".concat(t,"&page=").concat(e,"&userid=").concat(n)).pipe(H((function(t){return{dataLayers:t.docs.map((function(t){return{datalayer:t.filename,createddate:t.createdDate,_id:t._id,type:t.type}}))}}))).subscribe((function(t){i.libraryLayers=t.dataLayers,i.dataLayersUpdated.next({dataLayers:_toConsumableArray(i.libraryLayers)})}))}},{key:"fetchMaps",value:function(t,e,n){var i=this;this.http.get("https://fmnbackend.nw.r.appspot.com/api/data/maps?pagesize=".concat(t,"&page=").concat(e,"&userid=").concat(n)).subscribe((function(t){i.myProjects=t.fetchedProjects,i.mapsReturned.next({maps:_toConsumableArray(i.myProjects)})}))}},{key:"printParamsOnMapLoad",value:function(){console.log((new Date).toISOString()+this.mapName),console.log((new Date).toISOString()+this.mapType),console.log((new Date).toISOString()+this.mapId),console.log((new Date).toISOString()+this.mapStyleField),console.log((new Date).toISOString()+this.styleType),console.log((new Date).toISOString()+this.currentMapName),console.log((new Date).toISOString()+this.dataLayerPrimaryColour),console.log((new Date).toISOString()+this.dataLayerLabelColour),console.log((new Date).toISOString()+this.outlineColour),console.log((new Date).toISOString()+this.uniqueProperties),console.log((new Date).toISOString()+this.uniqueStyleProps),console.log((new Date).toISOString()+this.features),console.log((new Date).toISOString()+this.threads),console.log((new Date).toISOString()+this.libraryLayers),console.log((new Date).toISOString()+this.myProjects),console.log((new Date).toISOString()+this.preStyledLayers),console.log((new Date).toISOString()+this.sharedWithNames)}},{key:"fileNameChecker",value:function(t){return console.log((new Date).toISOString()+this.TAG+"Parsing lengthy file name in checker"),t.substring(0,25)+"..."}},{key:"updateNotifcationStatus",value:function(t,e){var n;n=e?t.id:t._id,this.http.put(is+"api/data/notifications/"+n,{passedObject:t,threnotificationIdadPassed:e}).subscribe((function(t){}))}},{key:"addDataLayer",value:function(t,e,n,i){console.log(this.mapId);var r=new FormData;r.append("filecontent",t),e&&r.append("geojson",e),i&&(r.append("lat",i.lat),r.append("lon",i.lon),i.hasOwnProperty("country")&&r.append("country",i.country),i.hasOwnProperty("alpha2Code")&&r.append("alpha2Code",i.alpha2Code),"wgs84"in i&&r.append("wgs84",i.wgs84)),this.http.post(is+"api/data/",r).subscribe((function(t){console.log(t)}))}},{key:"parseUniqueFeatureValues",value:function(t){for(var e,n=t[0].properties,i=0,r=Object.entries(n);i<r.length;i++){var o=_slicedToArray(r[i],2),a=o[0],s=o[1];e=isNaN(Number(s))?"string":"number",this.uniquePropNumerical.push({propname:a,propvalue:s,type:e})}this.uniqueProperties=Object.keys(t[0].properties),this.uniqueProperties.push("No Label"),this.uniqueStyleProps=this.uniqueProperties;var l=this.uniqueProperties.findIndex((function(t){return"No Label"===t.prop}));l>=0&&this.uniqueStyleProps.splice(l,1)}},{key:"saveMap",value:function(t,e,n){this.currentMapName=e,this.mapName=e,this.mapNameUpdated.next(this.currentMapName);var i,r=_createForOfIteratorHelper(this.myProjects);try{for(r.s();!(i=r.n()).done;)i.value}catch(o){r.e(o)}finally{r.f()}this.snackBar.open("Sorry, you do not have edit permissions to make changes on map: "+e+".","Close",{duration:3e3}),console.log((new Date).toISOString()+this.TAG+"No edit permissions. No update made. ")}},{key:"saveMapThread",value:function(t,e){console.log(this.myProjects);var n,i=_createForOfIteratorHelper(this.myProjects);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.mapName===this.mapName&&r.creator}}catch(o){i.e(o)}finally{i.f()}}},{key:"clearExistingProject",value:function(t){var e=this;if(this.mapName="",this.mapId="",this.mapType="",this.styleType="",this.currentMapName="",this.mapStyleField="",this.outlineColour="",this.features=[],this.libraryLayers=[],this.uniqueProperties=[],this.uniqueStyleProps=[],this.dataLayerPrimaryColour="",this.dataLayerLabelColour="",this.projectLoaded=!1,this.sharedWith=[],this.sharedWithNames=[],this.tempListForRemoval=this.preStyledLayers,this.preStyledLayers=[],this.tempListForRemoval.length>0){var n,i=_createForOfIteratorHelper(this.tempListForRemoval);try{for(i.s();!(n=i.n()).done;){var r=n.value;console.log((new Date).toISOString()+this.TAG+"Clearing layer: "+r.layer),this.preStyledLayerVisibility.next(r)}}catch(o){i.e(o)}finally{i.f()}}this.mapNameUpdated.next(this.mapName),this.clearMapInstruction.next({instruction:!0,existingPresent:!0}),this.sessionDataLayers=[],this.sessionDataUpdated.next({sessionData:_toConsumableArray(this.sessionDataLayers)}),t||navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){e.layerCentreUpdated.next({lng:t.coords.longitude,lat:t.coords.latitude}),e.snackBar.open("New Map Created - Boom!","Close",{duration:3e3})}))}},{key:"loadProject",value:function(t){var e=this;if(console.log(t),this.projectLoaded=!0,this.loadingInProgress.next(!0),t.mapType&&t.mapType!==this.mapType&&(console.log((new Date).toISOString()+this.TAG+"Base Map is different from current - calling change map for "+t.mapType),this.changeBaseMap.next({maptype:t.mapType,loadMap:!0})),t.preStyledLayers[0]){console.log((new Date).toISOString()+this.TAG+"Project has at least 1 pre styled layer");var n,i=_createForOfIteratorHelper(t.preStyledLayers);try{for(i.s();!(n=i.n()).done;){var r=n.value;this.preStyledLayers.push(r)}}catch(o){i.e(o)}finally{i.f()}}this.mapName=t.mapName,this.mapId=t._id,this.mapNameUpdated.next(this.mapName),this.currentMapZoom=t.lastZoomLevel,this.centre=t.lastCoordinates,this.currentMapBearing=t.lastBearing,this.currentMapPitch=t.lastPitchLevel,this.delay(1200).then((function(){if(t.mapDataLayers.length>0)console.log((new Date).toISOString()+e.TAG+"Fetching layers in Project");else{if(!(t.mapDataLayers.length<1&&e.preStyledLayers.length>0))return e.layerCentreUpdated.next({lng:e.centre.lng,lat:e.centre.lat,zoom:e.currentMapZoom,bearing:e.currentMapBearing,pitch:e.currentMapPitch}),e.loadingComplete.next(!0),void e.loadingInProgress.next(!1);var n,i=_createForOfIteratorHelper(e.preStyledLayers);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.preStyledLayerVisibility.next(r),e.loadingComplete.next(!0),e.loadingInProgress.next(!1)}}catch(o){i.e(o)}finally{i.f()}}}))}},{key:"getMapName",value:function(){return this.mapName}},{key:"getMapId",value:function(){return this.mapId}},{key:"logout",value:function(){console.log((new Date).toISOString()+this.TAG+"Killing Session Data Layers and Comments"),this.sessionDataLayers=[],this.threads=[]}},{key:"deleteDataLayer",value:function(t){var e=this;this.http.delete(is+"api/data/"+t).subscribe((function(t){console.log(t),e.loadingComplete.next(!0)}))}},{key:"getStateChangedStatus",value:function(){return this.stateChanged}},{key:"setStateChange",value:function(t){this.stateChanged=t}},{key:"addNewlyCreatedProjectToList",value:function(t){this.myProjects.push(t)}},{key:"deleteMap",value:function(t,e){var n=this;this.http.delete(is+"api/data/map/"+t).subscribe((function(t){n.loadingComplete.next(!0),n.snackBar.open("Your Map: "+e+" has been deleted.","Close",{duration:3e3}),n.clearMapInstruction.next({comments:n.threads,instruction:!0})}))}},{key:"fetchUniqueValuePickList",value:function(t,e,n){var i=this;this.http.get("https://fmnbackend.nw.r.appspot.com/api/data/features/list?userid=".concat(n,"&value=").concat(e,"&ownerLayerId=").concat(t.ownerLayerId)).subscribe((function(n){console.log(n),n.count>100?(console.log(i.TAG+"Over 100 vlaues in pick list. Cannot proceed."),i.uniqueListUpdate.next({proceed:!1})):(i.uniqueListUpdate.next({response:n,row:t,proceed:!0}),i.projectCacheUpdateSub.next({ownerProject:t.ownerProject,ownerLayer:t.id,type:"propertySelected",value:e}))}))}},{key:"testIsochrone",value:function(t,e,n,i){var r,o=this;"scooter"===n&&(n="cycling"),r=i?"?lat=".concat(t,"&lng=").concat(e,"&mode=").concat(n,"&time=").concat(i):"?lat=".concat(t,"&lng=").concat(e,"&mode=").concat(n),this.http.get(is+"api/data/isochrone/"+r).subscribe((function(t){o.isoUpdate.next({isoResponse:t,mode:n})}))}},{key:"findPlaces",value:function(t,e,n){var i,r=this;i="walking"===n?1205:5e3,this.http.post(is+"api/data/places/",{lat:t,lng:e,radius:i}).subscribe((function(t){r.googlePlacesResponse.next(t)}))}},{key:"storeGrid",value:function(t){this.http.post(is+"api/data/features/",{polygons:t}).subscribe((function(t){console.log(t)}))}},{key:"killSpinners",value:function(t){t&&(this.loadingInProgress.next(!1),this.loadingComplete.next(!0))}},{key:"shareMap",value:function(t,e){var n=this;if(""===this.getMapName())console.log((new Date).toISOString()+this.TAG+"You must save a map first before you share it");else{var i=this.getMapName(),r=this.getMapId();this.loadingComplete.next(!0);var o={mapid:r,mapname:i,shareduserids:t,sharedusername:null,sharedUserAccessType:e};this.http.put(is+"api/data/map/share/"+r,o).subscribe((function(e){o.shareduserids=[],o.shareduserids.push(e.sharedUserId),n.mapShareSubject.next(o),n.snackBar.open("Your Map: "+i+" has been shared with "+t+"!","Close",{duration:3e3})}))}}},{key:"getTime",value:function(){return new Date}},{key:"setCSVUploadData",value:function(t){this.csvDataUpdated.next(t)}},{key:"requestStaticImage",value:function(t){this.callDownload.next({url:t,fileName:"map_export_"+Date.now()})}},{key:"setSourceId",value:function(t){this.dataLayerSourceId=t}},{key:"setMapStyleField",value:function(t,e){e&&(this.currentMapName=e),this.mapStyleField=t,this.mapStyleUpdated.next(this.mapStyleField)}},{key:"setMapCentre",value:function(t){this.centre=t,this.mapCenterUpdated.next(this.centre),this.projectCacheUpdateSub.next({ownerProject:this.mapId,ownerLayer:null,type:"mapCentre",value:this.centre})}},{key:"setMapType",value:function(t){this.mapType=t,this.projectCacheUpdateSub.next({ownerProject:this.mapId,ownerLayer:null,type:"mapType",value:this.mapType})}},{key:"getMapType",value:function(){return this.mapType}},{key:"getMapCentre",value:function(){return this.centre}},{key:"setFeatureSymbol",value:function(t){this.featureSymbolUpdated.next(t),console.log(t),this.projectCacheUpdateSub.next({ownerProject:t.ownerProject,ownerLayer:t.id,type:"featureSymbol",value:t.symbolInUse})}},{key:"setMapZoom",value:function(t){this.currentMapZoom=t,this.projectCacheUpdateSub.next({ownerProject:this.mapId,ownerLayer:null,type:"mapZoom",value:this.currentMapZoom})}},{key:"setMapPitch",value:function(t){this.currentMapPitch=t,this.projectCacheUpdateSub.next({ownerProject:this.mapId,ownerLayer:null,type:"mapPitch",value:this.currentMapPitch})}},{key:"setMapBearing",value:function(t){this.currentMapBearing=t,this.projectCacheUpdateSub.next({ownerProject:this.mapId,ownerLayer:null,type:"mapBearing",value:this.currentMapBearing})}},{key:"getSourceId",value:function(){return this.dataLayerSourceId}},{key:"getMyProjects",value:function(){return this.myProjects}},{key:"setLayerStyleField",value:function(t,e,n,i,r){this.dataLayerStyleField=i?{field:t,layerid:e,layerType:n,baseColour:i}:{field:t,layerid:e,layerType:n},this.styleFieldUpdated.next(this.dataLayerStyleField),this.projectCacheUpdateSub.next({ownerProject:this.mapId,ownerLayer:e,type:"dataDrivenStylingField",value:t,valueType:n})}},{key:"setPropLabel",value:function(t,e){this.propLabel=e.value,this.propLabelUpdated.next({layer:t,label:this.propLabel}),this.projectCacheUpdateSub.next({ownerProject:t.ownerProject,ownerLayer:t.id,type:"propLabel",value:this.propLabel})}},{key:"updateLayerNameLocally",value:function(t,e){this.projectCacheUpdateSub.next({ownerProject:t.ownerProject,ownerLayer:t.id,type:"renameLayer",value:e})}},{key:"setVisibilityParams",value:function(t,e){this.projectCacheUpdateSub.next({ownerProject:t.ownerProject,ownerLayer:t.id,type:"layerVisibility",value:e})}},{key:"setLayerOpacity",value:function(t,e){this.dataLayerOpacity=t,this.opacityValUpdated.next({opacity:this.dataLayerOpacity,row:e}),this.projectCacheUpdateSub.next({ownerProject:e.ownerProject,ownerLayer:e.id,type:"layerOpacity",value:this.dataLayerOpacity})}},{key:"setPointSize",value:function(t,e){this.dataPointSize=t,this.pointSizeValUpdated.next({size:this.dataPointSize,row:e}),this.projectCacheUpdateSub.next({ownerProject:e.ownerProject,ownerLayer:e.id,type:"pointSize",value:this.dataPointSize})}},{key:"setLineWidth",value:function(t,e){this.lineSize=t,this.lineSizeValUpdated.next({size:this.lineSize,row:e}),this.projectCacheUpdateSub.next({ownerProject:e.ownerProject,ownerLayer:e.id,type:"lineSize",value:this.lineSize})}},{key:"setPolyBorderWidth",value:function(t,e){this.polyBorderWidth=t,this.polyBorderWidthValUpdated.next({size:this.polyBorderWidth,row:e}),this.projectCacheUpdateSub.next({ownerProject:e.ownerProject,ownerLayer:e.id,type:"polyBorderWidth",value:this.polyBorderWidth})}},{key:"setLineType",value:function(t,e){this.lineTypeValUpdated.next("DASHED"===e?{lineType:[1.5,1.5],row:t}:{lineType:[1],row:t}),this.projectCacheUpdateSub.next({ownerProject:t.ownerProject,ownerLayer:t.id,type:"lineType",value:e})}},{key:"setPropLabelSize",value:function(t,e){this.labelSizeValUpdated.next({size:e,row:t}),this.projectCacheUpdateSub.next({ownerProject:t.ownerProject,ownerLayer:t.id,type:"text-size",value:e.value})}},{key:"addPreStyledLayer",value:function(t){console.log(t),(this.preStyledLayers.length<1||-1===this.preStyledLayers.findIndex((function(e){return e.layer===t.layer})))&&(this.preStyledLayers.push(t),this.projectCacheUpdateSub.next({ownerProject:this.mapId,ownerLayer:null,type:"preStyledLayerAdd",value:t}))}},{key:"removePreStyledLayer",value:function(t){if(!(this.preStyledLayers.length<1)){var e=this.preStyledLayers.findIndex((function(e){return e.layer===t}));-1!==e&&(this.preStyledLayers.splice(e,1),this.projectCacheUpdateSub.next({ownerProject:this.mapId,ownerLayer:null,type:"preStyledLayerRemove",value:t}))}}},{key:"setPrimaryLayerColour",value:function(t,e){this.dataLayerPrimaryColour=t,this.dataLayerPriColUpdated.next({color:this.dataLayerPrimaryColour,row:e}),this.projectCacheUpdateSub.next({ownerProject:e.ownerProject,ownerLayer:e.id,type:"primaryColour",value:this.dataLayerPrimaryColour})}},{key:"setLabelColour",value:function(t,e){this.dataLayerLabelColour=t,this.dataLayerLabelColUpdated.next({color:this.dataLayerLabelColour,row:e}),this.projectCacheUpdateSub.next({ownerProject:e.ownerProject,ownerLayer:e.id,type:"labelColour",value:this.dataLayerLabelColour})}},{key:"setIndividualColourProperty",value:function(t,e,n){var i=t;this.dataLayerIndividualColourUpdated.next({color:i,row:e,propValue:n.property}),this.projectCacheUpdateSub.next({ownerProject:e.ownerProject,ownerLayer:e.id,type:"propertyColour",value:i,prop:n.property})}},{key:"setOutlineColour",value:function(t,e){this.outlineColour=t,this.outlineColourUpdated.next({color:this.outlineColour,row:e}),this.projectCacheUpdateSub.next({ownerProject:e.ownerProject,ownerLayer:e.id,type:"outlineColour",value:this.outlineColour})}},{key:"setUniqueValueAssign",value:function(t,e){this.projectCacheUpdateSub.next({ownerProject:e.ownerProject,ownerLayer:e.id,type:"uniqueValueAssign",value:t})}},{key:"getLayerStyleField",value:function(){return this.dataLayerStyleField}},{key:"getPreStyledLayers",value:function(){return this.preStyledLayers}},{key:"flyToLoc",value:function(t,e,n){var i=this.currentMapZoom,r=this.currentMapBearing,o=this.currentMapPitch;t?this.layerCentreUpdated.next({lng:t.flyToLocation.lng,lat:t.flyToLocation.lat,zoom:i,bearing:r,pitch:o}):(this.layerCentreUpdated.next({lng:e.lastCoordinates.lng,lat:e.lastCoordinates.lat,zoom:i,bearing:r,pitch:o}),this.markerSelected.next(e))}},{key:"searchContent",value:function(t){if(this.searchString=t,""!=this.searchString)return this.http.get(is+"api/data/places/search?value="+this.searchString).pipe(H((function(t){return t.results.map((function(t){return t.title}))})))}},{key:"getSampleCoordinates",value:function(t){var e,n,i;return"Point"===t.geometry.type?(i=(e=t.geometry.coordinates)[0],n=e[1]):"Polygon"===t.geometry.type?(i=(e=t.geometry.coordinates[0][0])[0],n=e[1]):"MultiPolygon"===t.geometry.type?(i=(e=t.geometry.coordinates[0][0][0])[0],n=e[1]):"LineString"===t.geometry.type&&(i=(e=t.geometry.coordinates[0])[0],n=e[1]),{lng:i,lat:n}}},{key:"getThreads",value:function(){return this.threads}},{key:"getSharedNames",value:function(){return this.sharedWithNames}},{key:"getProjectLoadedStatus",value:function(){return this.projectLoaded}},{key:"setProjectLoadedStatus",value:function(t){this.projectLoaded=t}},{key:"getFeatureData",value:function(){return this.featureData.asObservable()}},{key:"removeFromSessionLayers",value:function(t,e){0===t?this.sessionDataLayers.shift():this.sessionDataLayers.splice(t,1),this.removeLayerUpdated.next(e),this.projectCacheUpdateSub.next({ownerProject:this.mapId,ownerLayer:null,type:"userLayerRemove",value:e.name})}},{key:"getMapStyleUpdateListener",value:function(){return this.mapStyleUpdated.asObservable()}},{key:"getSessionDataUpdateListener",value:function(){return this.sessionDataUpdated.asObservable()}},{key:"getLayerRemovedUpdateListener",value:function(){return this.removeLayerUpdated.asObservable()}},{key:"getZoomUpdateListener",value:function(){return this.mapZoomUpdated.asObservable()}},{key:"getBearingUpdateListener",value:function(){return this.mapBearingUpdated.asObservable()}},{key:"getIndividualColourListener",value:function(){return this.dataLayerIndividualColourUpdated.asObservable()}},{key:"getProjectCreatedListener",value:function(){return this.newProjectCreated.asObservable()}},{key:"getChangeMapBaseListener",value:function(){return this.changeBaseMap.asObservable()}},{key:"getLibraryLayerAddedListener",value:function(){return this.libraryLayerAdded.asObservable()}},{key:"getMapNameUpdateListener",value:function(){return this.mapNameUpdated.asObservable()}},{key:"getMarkerSelectedListener",value:function(){return this.markerSelected.asObservable()}},{key:"getNotificationsListener",value:function(){return this.notifications.asObservable()}},{key:"getMapRightsPermissionListener",value:function(){return this.mapRightsPermission.asObservable()}},{key:"getSavedDataLayerUpdateListener",value:function(){return this.savedLayerAdded.asObservable()}},{key:"getFieldSymbolUpdateListener",value:function(){return this.featureSymbolUpdated.asObservable()}},{key:"getStyleFieldUpdateListener",value:function(){return this.styleFieldUpdated.asObservable()}},{key:"getLoadingInProgressListener",value:function(){return this.loadingInProgress.asObservable()}},{key:"getCommentDialogLaunchListener",value:function(){return this.launchAddCommentDialogTrigger.asObservable()}},{key:"getAllProjectThreadsListener",value:function(){return this.allProjectThreads.asObservable()}},{key:"getThreadSelectListener",value:function(){return this.threadSelect.asObservable()}},{key:"getLineTypeUpdateListener",value:function(){return this.lineTypeValUpdated.asObservable()}},{key:"getLabelSizeValUpdateListener",value:function(){return this.labelSizeValUpdated.asObservable()}},{key:"getLoadingCompleteStatusListener",value:function(){return this.loadingComplete.asObservable()}},{key:"getStyleOpacityListener",value:function(){return this.opacityValUpdated.asObservable()}},{key:"getDataLayerPriColUpdateListener",value:function(){return this.dataLayerPriColUpdated.asObservable()}},{key:"getLabelColUpdateListener",value:function(){return this.dataLayerLabelColUpdated.asObservable()}},{key:"getMapInstructionListener",value:function(){return this.clearMapInstruction.asObservable()}},{key:"getOutlineColourUpdatedListener",value:function(){return this.outlineColourUpdated.asObservable()}},{key:"getDataPointSizeUpdateListener",value:function(){return this.pointSizeValUpdated.asObservable()}},{key:"getLineSizeUpdateListener",value:function(){return this.lineSizeValUpdated.asObservable()}},{key:"getPolyBorderWidthValUpdateListener",value:function(){return this.polyBorderWidthValUpdated.asObservable()}},{key:"getCallDownloadListener",value:function(){return this.callDownload.asObservable()}},{key:"getSessionDataLayers",value:function(){return this.sessionDataLayers}},{key:"getPreStyledLayerVisibilityListener",value:function(){return this.preStyledLayerVisibility.asObservable()}},{key:"getGooglePlacesResponseListener",value:function(){return this.googlePlacesResponse.asObservable()}},{key:"getCSVDataUpdatedListener",value:function(){return this.csvDataUpdated.asObservable()}},{key:"getProjectCacheUpdateSubListener",value:function(){return this.projectCacheUpdateSub.asObservable()}},{key:"getLoadingNotificationListener",value:function(){return this.loadingNotification.asObservable()}},{key:"getSearchResultsListener",value:function(){return this.searchResultsSubject.asObservable()}},{key:"getMapShareSub",value:function(){return this.mapShareSubject.asObservable()}},{key:"getPropLabelUpdatedListener",value:function(){return this.propLabelUpdated.asObservable()}},{key:"getUniqueListUpdatedListener",value:function(){return this.uniqueListUpdate.asObservable()}},{key:"getLayerFeatureCentreUpdatedListener",value:function(){return this.layerCentreUpdated.asObservable()}},{key:"getCommentAddedListener",value:function(){return this.commentUpdated.asObservable()}},{key:"getIsoUpdateListener",value:function(){return this.isoUpdate.asObservable()}},{key:"getMapsUpdateListener",value:function(){return this.dataLayersUpdated.asObservable()}},{key:"getMapsListener",value:function(){return this.mapsReturned.asObservable()}},{key:"delay",value:function(t){return N_(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout((function(){return e()}),t)}));case 2:case"end":return e.stop()}}),e)})))}}]),t}()).ngInjectableDef=yt({factory:function(){return new mx(Nt(iy),Nt(op),Nt(Jb),Nt(kx),Nt(Ru))},token:mx,providedIn:"root"}),mx),Sx=Hn({encapsulation:0,styles:[["mat-form-field[_ngcontent-%COMP%]{width:100%;margin-top:3%;margin-bottom:2%;font-family:Raleway,sans-serif;font-size:12px;border-radius:15px;border-style:solid;border-color:#f5f5f5;border-width:thick;background-color:#f5f5f5}mat-list[_ngcontent-%COMP%]{max-height:200px;overflow:auto;color:#414241;border-radius:12px}mat-list-item[_ngcontent-%COMP%]{font-family:Raleway,sans-serif;font-size:12px;color:#414241;border-color:#d0d6d0;border-width:1px}"]],data:{}});function Ix(t){return Jo(0,[(t()(),Oo(0,0,null,null,5,"button",[["aria-label","Clear"],["mat-icon-button",""],["matSuffix",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==(t.component.value="")&&i),i}),Ig,Sg)),$i(1,16384,[[9,4]],0,Dg,[],null,null),$i(2,180224,null,0,ed,[rn,kf,[2,kg]],null,null),(t()(),Oo(3,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.removeResults()&&i),i}),By,zy)),$i(4,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,["close"]))],(function(t,e){t(e,4,0)}),(function(t,e){t(e,0,0,Vi(e,2).disabled||null,"NoopAnimations"===Vi(e,2)._animationMode),t(e,3,0,Vi(e,4).inline,"primary"!==Vi(e,4).color&&"accent"!==Vi(e,4).color&&"warn"!==Vi(e,4).color)}))}function Tx(t){return Jo(0,[(t()(),Oo(0,0,null,null,7,"span",[],null,null,null,null,null)),(t()(),Oo(1,0,null,null,5,"mat-list-item",[["class","mat-list-item"],["role","listitem"]],[[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null]],null,null,n_,e_)),$i(2,1228800,null,3,Yv,[rn,Se,[2,Zv],[2,Wv]],null,null),Bo(603979776,10,{_lines:1}),Bo(603979776,11,{_avatar:0}),Bo(603979776,12,{_icon:0}),(t()(),Wo(6,2,["",""])),(t()(),Oo(7,0,null,null,0,"hr",[],null,null,null,null,null))],null,(function(t,e){t(e,1,0,Vi(e,2)._avatar||Vi(e,2)._icon,Vi(e,2)._avatar||Vi(e,2)._icon),t(e,6,0,e.context.$implicit)}))}function Px(t){return Jo(0,[(t()(),Oo(0,0,null,null,30,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,x_,u_)),$i(1,7520256,null,9,Bg,[rn,Se,[2,$f],[2,rd],[2,zg],qp,Yr,[2,kg]],null,null),Bo(603979776,1,{_controlNonStatic:0}),Bo(335544320,2,{_controlStatic:0}),Bo(603979776,3,{_labelChildNonStatic:0}),Bo(335544320,4,{_labelChildStatic:0}),Bo(603979776,5,{_placeholderChild:0}),Bo(603979776,6,{_errorChildren:1}),Bo(603979776,7,{_hintChildren:1}),Bo(603979776,8,{_prefixChildren:1}),Bo(603979776,9,{_suffixChildren:1}),(t()(),Oo(11,0,null,3,5,"mat-label",[],null,null,null,null,null)),$i(12,16384,[[3,4],[4,4]],0,Og,[],null,null),(t()(),Wo(-1,null,["Search Places Content "])),(t()(),Oo(14,0,null,null,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(15,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,["search"])),(t()(),Oo(17,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["style","color: black"],["type","text"]],[[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"ngModelChange"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],(function(t,e,n){var i=!0,r=t.component;return"input"===e&&(i=!1!==Vi(t,18)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==Vi(t,18).onTouched()&&i),"compositionstart"===e&&(i=!1!==Vi(t,18)._compositionStart()&&i),"compositionend"===e&&(i=!1!==Vi(t,18)._compositionEnd(n.target.value)&&i),"blur"===e&&(i=!1!==Vi(t,22)._focusChanged(!1)&&i),"focus"===e&&(i=!1!==Vi(t,22)._focusChanged(!0)&&i),"input"===e&&(i=!1!==Vi(t,22)._onInput()&&i),"input"===e&&(i=!1!==r.updateSearch(n)&&i),"ngModelChange"===e&&(i=!1!==(r.value=n)&&i),i}),null,null)),$i(18,16384,null,0,Gy,[ln,rn,[2,qy]],null,null),tr(1024,null,jy,(function(t){return[t]}),[Gy]),$i(20,671744,null,0,Fv,[[8,null],[8,null],[8,null],[6,jy]],{model:[0,"model"]},{update:"ngModelChange"}),tr(2048,null,Wy,null,[Fv]),$i(22,999424,null,0,R_,[rn,qp,[6,Wy],[2,Lv],[2,Vv],Df,[8,null],P_,Yr],{type:[0,"type"]},null),$i(23,16384,null,0,Yy,[[4,Wy]],null,null),tr(2048,[[1,4],[2,4]],Mg,null,[R_]),(t()(),Ro(16777216,null,4,1,null,Ix)),$i(26,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Oo(27,0,null,1,3,"mat-list",[["class","mat-list mat-list-base"],["role","list"]],null,null,null,t_,$v)),$i(28,704512,null,0,Wv,[rn],null,null),(t()(),Ro(16777216,null,0,1,null,Tx)),$i(30,278528,null,0,Cs,[Pn,In,wn],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){var n=e.component;t(e,15,0),t(e,20,0,n.value),t(e,22,0,"text"),t(e,26,0,n.value),t(e,30,0,n.dataSource)}),(function(t,e){t(e,0,1,["standard"==Vi(e,1).appearance,"fill"==Vi(e,1).appearance,"outline"==Vi(e,1).appearance,"legacy"==Vi(e,1).appearance,Vi(e,1)._control.errorState,Vi(e,1)._canLabelFloat,Vi(e,1)._shouldLabelFloat(),Vi(e,1)._hasFloatingLabel(),Vi(e,1)._hideControlPlaceholder(),Vi(e,1)._control.disabled,Vi(e,1)._control.autofilled,Vi(e,1)._control.focused,"accent"==Vi(e,1).color,"warn"==Vi(e,1).color,Vi(e,1)._shouldForward("untouched"),Vi(e,1)._shouldForward("touched"),Vi(e,1)._shouldForward("pristine"),Vi(e,1)._shouldForward("dirty"),Vi(e,1)._shouldForward("valid"),Vi(e,1)._shouldForward("invalid"),Vi(e,1)._shouldForward("pending"),!Vi(e,1)._animationsEnabled]),t(e,14,0,Vi(e,15).inline,"primary"!==Vi(e,15).color&&"accent"!==Vi(e,15).color&&"warn"!==Vi(e,15).color),t(e,17,1,[Vi(e,22)._isServer,Vi(e,22).id,Vi(e,22).placeholder,Vi(e,22).disabled,Vi(e,22).required,Vi(e,22).readonly&&!Vi(e,22)._isNativeSelect||null,Vi(e,22)._ariaDescribedby||null,Vi(e,22).errorState,Vi(e,22).required.toString(),Vi(e,23).ngClassUntouched,Vi(e,23).ngClassTouched,Vi(e,23).ngClassPristine,Vi(e,23).ngClassDirty,Vi(e,23).ngClassValid,Vi(e,23).ngClassInvalid,Vi(e,23).ngClassPending])}))}var Ax,Lx=Lf((function t(e){_classCallCheck(this,t),this._elementRef=e}),"primary"),Mx=new Pt("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}}),Rx=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o,a){var s;return _classCallCheck(this,n),(s=e.call(this,t,i,r,o,a)).mode="indeterminate",s}return n}(((Ax=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o,a){var s;_classCallCheck(this,n),(s=e.call(this,t))._elementRef=t,s._document=r,s._diameter=100,s._value=0,s._fallbackAnimation=!1,s.mode="determinate";var l=n._diameters;return l.has(r.head)||l.set(r.head,new Set([100])),s._fallbackAnimation=i.EDGE||i.TRIDENT,s._noopAnimations="NoopAnimations"===o&&!!a&&!a._forceAnimations,a&&(a.diameter&&(s.diameter=a.diameter),a.strokeWidth&&(s.strokeWidth=a.strokeWidth)),s}return _createClass(n,[{key:"ngOnInit",value:function(){var t=this._elementRef.nativeElement;this._styleRoot=function(t,e){if("undefined"!=typeof window){var n=e.head;if(n&&(n.createShadowRoot||n.attachShadow)){var i=t.getRootNode?t.getRootNode():null;if(i instanceof window.ShadowRoot)return i}}return null}(t,this._document)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate".concat(this._fallbackAnimation?"-fallback":"","-animation"))}},{key:"_attachStyleNode",value:function(){var t=this._styleRoot,e=this._diameter,i=n._diameters,r=i.get(t);if(!r||!r.has(e)){var o=this._document.createElement("style");o.setAttribute("mat-spinner-animation",e+""),o.textContent=this._getAnimationText(),t.appendChild(o),r||(r=new Set,i.set(t,r)),r.add(e)}}},{key:"_getAnimationText",value:function(){return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*this._strokeCircumference).replace(/END_VALUE/g,""+.2*this._strokeCircumference).replace(/DIAMETER/g,""+this.diameter)}},{key:"diameter",get:function(){return this._diameter},set:function(t){this._diameter=Np(t),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}},{key:"strokeWidth",get:function(){return this._strokeWidth||this.diameter/10},set:function(t){this._strokeWidth=Np(t)}},{key:"value",get:function(){return"determinate"===this.mode?this._value:0},set:function(t){this._value=Math.max(0,Math.min(100,Np(t)))}},{key:"_circleRadius",get:function(){return(this.diameter-10)/2}},{key:"_viewBox",get:function(){var t=2*this._circleRadius+this.strokeWidth;return"0 0 ".concat(t," ").concat(t)}},{key:"_strokeCircumference",get:function(){return 2*Math.PI*this._circleRadius}},{key:"_strokeDashOffset",get:function(){return"determinate"===this.mode?this._strokeCircumference*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._strokeCircumference:null}},{key:"_circleStrokeWidth",get:function(){return this.strokeWidth/this.diameter*100}}]),n}(Lx))._diameters=new WeakMap,Ax)),Ox=function t(){_classCallCheck(this,t)},Dx=Hn({encapsulation:2,styles:[".mat-progress-spinner{display:block;position:relative}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{animation:mat-progress-spinner-linear-rotate 2s linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4s;animation-timing-function:cubic-bezier(.35,0,.25,1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{animation:mat-progress-spinner-stroke-rotate-fallback 10s cubic-bezier(.87,.03,.33,1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.60617px;transform:rotate(0)}12.5%{stroke-dashoffset:56.54867px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.60617px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.54867px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.60617px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.54867px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.60617px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.54867px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}"],data:{}});function Nx(t){return Jo(0,[(t()(),Oo(0,0,null,null,0,":svg:circle",[["cx","50%"],["cy","50%"]],[[1,"r",0],[4,"animation-name",null],[4,"stroke-dashoffset","px"],[4,"stroke-dasharray","px"],[4,"stroke-width","%"]],null,null,null,null))],null,(function(t,e){var n=e.component;t(e,0,0,n._circleRadius,"mat-progress-spinner-stroke-rotate-"+n.diameter,n._strokeDashOffset,n._strokeCircumference,n._circleStrokeWidth)}))}function Fx(t){return Jo(0,[(t()(),Oo(0,0,null,null,0,":svg:circle",[["cx","50%"],["cy","50%"]],[[1,"r",0],[4,"stroke-dashoffset","px"],[4,"stroke-dasharray","px"],[4,"stroke-width","%"]],null,null,null,null))],null,(function(t,e){var n=e.component;t(e,0,0,n._circleRadius,n._strokeDashOffset,n._strokeCircumference,n._circleStrokeWidth)}))}function zx(t){return Jo(2,[(t()(),Oo(0,0,null,null,5,":svg:svg",[["focusable","false"],["preserveAspectRatio","xMidYMid meet"]],[[4,"width","px"],[4,"height","px"],[1,"viewBox",0]],null,null,null,null)),$i(1,16384,null,0,As,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),Ro(16777216,null,null,1,null,Nx)),$i(3,278528,null,0,Ls,[Pn,In,As],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Ro(16777216,null,null,1,null,Fx)),$i(5,278528,null,0,Ls,[Pn,In,As],{ngSwitchCase:[0,"ngSwitchCase"]},null)],(function(t,e){t(e,1,0,"indeterminate"===e.component.mode),t(e,3,0,!0),t(e,5,0,!1)}),(function(t,e){var n=e.component;t(e,0,0,n.diameter,n.diameter,n._viewBox)}))}var Bx=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o,a,s){var l;return _classCallCheck(this,n),(l=e.call(this,t))._elementRef=t,l._ngZone=i,l._changeDetectorRef=s,l._hasFocus=!1,l.chipListSelectable=!0,l._chipListMultiple=!1,l._selected=!1,l._selectable=!0,l._removable=!0,l._onFocus=new L,l._onBlur=new L,l.selectionChange=new br,l.destroyed=new br,l.removed=new br,l._addHostClassName(),l._chipRipple=new Zf(_assertThisInitialized(l),i,t,r),l._chipRipple.setupTriggerEvents(t),l.rippleConfig=o||{},l._animationsDisabled="NoopAnimations"===a,l}return _createClass(n,[{key:"_addHostClassName",value:function(){var t=this._elementRef.nativeElement;t.hasAttribute("mat-basic-chip")||"mat-basic-chip"===t.tagName.toLowerCase()?t.classList.add("mat-basic-chip"):t.classList.add("mat-standard-chip")}},{key:"ngOnDestroy",value:function(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}},{key:"select",value:function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._markForCheck())}},{key:"deselect",value:function(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._markForCheck())}},{key:"selectViaInteraction",value:function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._markForCheck())}},{key:"toggleSelected",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._selected=!this.selected,this._dispatchSelectionChange(t),this._markForCheck(),this.selected}},{key:"focus",value:function(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}},{key:"remove",value:function(){this.removable&&this.removed.emit({chip:this})}},{key:"_handleClick",value:function(t){this.disabled?t.preventDefault():t.stopPropagation()}},{key:"_handleKeydown",value:function(t){if(!this.disabled)switch(t.keyCode){case 46:case 8:this.remove(),t.preventDefault();break;case 32:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}},{key:"_blur",value:function(){var t=this;this._ngZone.onStable.asObservable().pipe(wl(1)).subscribe((function(){t._ngZone.run((function(){t._hasFocus=!1,t._onBlur.next({chip:t})}))}))}},{key:"_dispatchSelectionChange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}},{key:"_markForCheck",value:function(){this._changeDetectorRef&&this._changeDetectorRef.markForCheck()}},{key:"rippleDisabled",get:function(){return this.disabled||this.disableRipple||!!this.rippleConfig.disabled}},{key:"selected",get:function(){return this._selected},set:function(t){var e=Dp(t);e!==this._selected&&(this._selected=e,this._dispatchSelectionChange())}},{key:"value",get:function(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent},set:function(t){this._value=t}},{key:"selectable",get:function(){return this._selectable&&this.chipListSelectable},set:function(t){this._selectable=Dp(t)}},{key:"removable",get:function(){return this._removable},set:function(t){this._removable=Dp(t)}},{key:"ariaSelected",get:function(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}}]),n}(Lf(Mf(Af((function t(e){_classCallCheck(this,t),this._elementRef=e}))),"primary")),Vx=new Pt("mat-chips-default-options"),Ux=Rf((function t(e,n,i,r){_classCallCheck(this,t),this._defaultErrorStateMatcher=e,this._parentForm=n,this._parentFormGroup=i,this.ngControl=r})),jx=0,qx=function t(e,n){_classCallCheck(this,t),this.source=e,this.value=n},Gx=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o,a,s,l){var u;return _classCallCheck(this,n),(u=e.call(this,s,o,a,l))._elementRef=t,u._changeDetectorRef=i,u._dir=r,u.ngControl=l,u.controlType="mat-chip-list",u._lastDestroyedChipIndex=null,u._destroyed=new L,u._uid="mat-chip-list-"+jx++,u._tabIndex=0,u._userTabIndex=null,u._onTouched=function(){},u._onChange=function(){},u._multiple=!1,u._compareWith=function(t,e){return t===e},u._required=!1,u._disabled=!1,u.ariaOrientation="horizontal",u._selectable=!0,u.change=new br,u.valueChange=new br,u.ngControl&&(u.ngControl.valueAccessor=_assertThisInitialized(u)),u}return _createClass(n,[{key:"ngAfterContentInit",value:function(){var t=this;this._keyManager=new hf(this.chips).withWrap().withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Pg(this._destroyed)).subscribe((function(e){return t._keyManager.withHorizontalOrientation(e)})),this._keyManager.tabOut.pipe(Pg(this._destroyed)).subscribe((function(){t._allowFocusEscape()})),this.chips.changes.pipe(Ml(null),Pg(this._destroyed)).subscribe((function(){t.disabled&&Promise.resolve().then((function(){t._syncChipsState()})),t._resetChips(),t._initializeSelection(),t._updateTabIndex(),t._updateFocusForDestroyedChips(),t.stateChanges.next()}))}},{key:"ngOnInit",value:function(){this._selectionModel=new Uy(this.multiple,void 0,!1),this.stateChanges.next()}},{key:"ngDoCheck",value:function(){this.ngControl&&this.updateErrorState()}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}},{key:"registerInput",value:function(t){this._chipInput=t}},{key:"setDescribedByIds",value:function(t){this._ariaDescribedby=t.join(" ")}},{key:"writeValue",value:function(t){this.chips&&this._setSelectionByValue(t,!1)}},{key:"registerOnChange",value:function(t){this._onChange=t}},{key:"registerOnTouched",value:function(t){this._onTouched=t}},{key:"setDisabledState",value:function(t){this.disabled=t,this.stateChanges.next()}},{key:"onContainerClick",value:function(t){this._originatesFromChip(t)||this.focus()}},{key:"focus",value:function(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}},{key:"_focusInput",value:function(t){this._chipInput&&this._chipInput.focus(t)}},{key:"_keydown",value:function(t){var e=t.target;8===t.keyCode&&this._isInputEmpty(e)?(this._keyManager.setLastItemActive(),t.preventDefault()):e&&e.classList.contains("mat-chip")&&(36===t.keyCode?(this._keyManager.setFirstItemActive(),t.preventDefault()):35===t.keyCode?(this._keyManager.setLastItemActive(),t.preventDefault()):this._keyManager.onKeydown(t),this.stateChanges.next())}},{key:"_updateTabIndex",value:function(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}},{key:"_updateFocusForDestroyedChips",value:function(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){var t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}},{key:"_isValidIndex",value:function(t){return t>=0&&t<this.chips.length}},{key:"_isInputEmpty",value:function(t){return!(!t||"input"!==t.nodeName.toLowerCase()||t.value)}},{key:"_setSelectionByValue",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._clearSelection(),this.chips.forEach((function(t){return t.deselect()})),Array.isArray(t))t.forEach((function(t){return e._selectValue(t,n)})),this._sortValues();else{var i=this._selectValue(t,n);i&&n&&this._keyManager.setActiveItem(i)}}},{key:"_selectValue",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.chips.find((function(n){return null!=n.value&&e._compareWith(n.value,t)}));return i&&(n?i.selectViaInteraction():i.select(),this._selectionModel.select(i)),i}},{key:"_initializeSelection",value:function(){var t=this;Promise.resolve().then((function(){(t.ngControl||t._value)&&(t._setSelectionByValue(t.ngControl?t.ngControl.value:t._value,!1),t.stateChanges.next())}))}},{key:"_clearSelection",value:function(t){this._selectionModel.clear(),this.chips.forEach((function(e){e!==t&&e.deselect()})),this.stateChanges.next()}},{key:"_sortValues",value:function(){var t=this;this._multiple&&(this._selectionModel.clear(),this.chips.forEach((function(e){e.selected&&t._selectionModel.select(e)})),this.stateChanges.next())}},{key:"_propagateChanges",value:function(t){var e;e=Array.isArray(this.selected)?this.selected.map((function(t){return t.value})):this.selected?this.selected.value:t,this._value=e,this.change.emit(new qx(this,e)),this.valueChange.emit(e),this._onChange(e),this._changeDetectorRef.markForCheck()}},{key:"_blur",value:function(){var t=this;this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout((function(){t.focused||t._markAsTouched()})):this._markAsTouched())}},{key:"_markAsTouched",value:function(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}},{key:"_allowFocusEscape",value:function(){var t=this;-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout((function(){t._tabIndex=t._userTabIndex||0,t._changeDetectorRef.markForCheck()})))}},{key:"_resetChips",value:function(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}},{key:"_dropSubscriptions",value:function(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}},{key:"_listenToChipsSelection",value:function(){var t=this;this._chipSelectionSubscription=this.chipSelectionChanges.subscribe((function(e){e.source.selected?t._selectionModel.select(e.source):t._selectionModel.deselect(e.source),t.multiple||t.chips.forEach((function(e){!t._selectionModel.isSelected(e)&&e.selected&&e.deselect()})),e.isUserInput&&t._propagateChanges()}))}},{key:"_listenToChipsFocus",value:function(){var t=this;this._chipFocusSubscription=this.chipFocusChanges.subscribe((function(e){var n=t.chips.toArray().indexOf(e.chip);t._isValidIndex(n)&&t._keyManager.updateActiveItemIndex(n),t.stateChanges.next()})),this._chipBlurSubscription=this.chipBlurChanges.subscribe((function(){t._blur(),t.stateChanges.next()}))}},{key:"_listenToChipsRemoved",value:function(){var t=this;this._chipRemoveSubscription=this.chipRemoveChanges.subscribe((function(e){var n=e.chip,i=t.chips.toArray().indexOf(e.chip);t._isValidIndex(i)&&n._hasFocus&&(t._lastDestroyedChipIndex=i)}))}},{key:"_originatesFromChip",value:function(t){for(var e=t.target;e&&e!==this._elementRef.nativeElement;){if(e.classList.contains("mat-chip"))return!0;e=e.parentElement}return!1}},{key:"_hasFocusedChip",value:function(){return this.chips.some((function(t){return t._hasFocus}))}},{key:"_syncChipsState",value:function(){var t=this;this.chips&&this.chips.forEach((function(e){e.disabled=t._disabled,e._chipListMultiple=t.multiple}))}},{key:"selected",get:function(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}},{key:"role",get:function(){return this.empty?null:"listbox"}},{key:"multiple",get:function(){return this._multiple},set:function(t){this._multiple=Dp(t),this._syncChipsState()}},{key:"compareWith",get:function(){return this._compareWith},set:function(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}},{key:"value",get:function(){return this._value},set:function(t){this.writeValue(t),this._value=t}},{key:"id",get:function(){return this._chipInput?this._chipInput.id:this._uid}},{key:"required",get:function(){return this._required},set:function(t){this._required=Dp(t),this.stateChanges.next()}},{key:"placeholder",get:function(){return this._chipInput?this._chipInput.placeholder:this._placeholder},set:function(t){this._placeholder=t,this.stateChanges.next()}},{key:"focused",get:function(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}},{key:"empty",get:function(){return(!this._chipInput||this._chipInput.empty)&&0===this.chips.length}},{key:"shouldLabelFloat",get:function(){return!this.empty||this.focused}},{key:"disabled",get:function(){return this.ngControl?!!this.ngControl.disabled:this._disabled},set:function(t){this._disabled=Dp(t),this._syncChipsState()}},{key:"selectable",get:function(){return this._selectable},set:function(t){var e=this;this._selectable=Dp(t),this.chips&&this.chips.forEach((function(t){return t.chipListSelectable=e._selectable}))}},{key:"tabIndex",set:function(t){this._userTabIndex=t,this._tabIndex=t}},{key:"chipSelectionChanges",get:function(){return et.apply(void 0,_toConsumableArray(this.chips.map((function(t){return t.selectionChange}))))}},{key:"chipFocusChanges",get:function(){return et.apply(void 0,_toConsumableArray(this.chips.map((function(t){return t._onFocus}))))}},{key:"chipBlurChanges",get:function(){return et.apply(void 0,_toConsumableArray(this.chips.map((function(t){return t._onBlur}))))}},{key:"chipRemoveChanges",get:function(){return et.apply(void 0,_toConsumableArray(this.chips.map((function(t){return t.destroyed}))))}}]),n}(Ux),Hx=function t(){_classCallCheck(this,t)},Xx=function t(){_classCallCheck(this,t)},Zx=function t(){_classCallCheck(this,t)},Wx=function t(){_classCallCheck(this,t)},Yx=function t(e){_classCallCheck(this,t),this._animationMode=e},Kx=function t(){_classCallCheck(this,t)},Jx=Hn({encapsulation:2,styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}@media (-ms-high-contrast:active){.mat-card{outline:solid 1px}}.mat-card-actions,.mat-card-content,.mat-card-subtitle{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media (max-width:599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card-content>:first-child,.mat-card>:first-child{margin-top:0}.mat-card-content>:last-child:not(.mat-card-footer),.mat-card>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-subtitle:not(:first-child),.mat-card-title:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],data:{}});function Qx(t){return Jo(2,[Go(null,0),Go(null,1)],null,null)}function $x(t){return function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;_classCallCheck(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r)))._sticky=!1,t._hasStickyChanged=!1,t}return _createClass(n,[{key:"hasStickyChanged",value:function(){var t=this._hasStickyChanged;return this._hasStickyChanged=!1,t}},{key:"resetStickyChanged",value:function(){this._hasStickyChanged=!1}},{key:"sticky",get:function(){return this._sticky},set:function(t){var e=this._sticky;this._sticky=Dp(t),this._hasStickyChanged=e!==this._sticky}}]),n}(t)}var tw=function t(e){_classCallCheck(this,t),this.template=e},ew=function t(e){_classCallCheck(this,t),this.template=e},nw=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.apply(this,arguments))._stickyEnd=!1,t}return _createClass(n,[{key:"name",get:function(){return this._name},set:function(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"))}},{key:"stickyEnd",get:function(){return this._stickyEnd},set:function(t){var e=this._stickyEnd;this._stickyEnd=Dp(t),this._hasStickyChanged=e!==this._stickyEnd}}]),n}($x((function t(){_classCallCheck(this,t)}))),iw=function t(e,n){_classCallCheck(this,t),n.nativeElement.classList.add("cdk-column-"+e.cssClassFriendlyName)},rw=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){return _classCallCheck(this,n),e.call(this,t,i)}return n}(iw),ow=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){return _classCallCheck(this,n),e.call(this,t,i)}return n}(iw),aw=function(){function t(e,n){_classCallCheck(this,t),this.template=e,this._differs=n}return _createClass(t,[{key:"ngOnChanges",value:function(t){if(!this._columnsDiffer){var e=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(e).create(),this._columnsDiffer.diff(e)}}},{key:"getColumnsDiff",value:function(){return this._columnsDiffer.diff(this.columns)}},{key:"extractCellTemplate",value:function(t){return this instanceof sw?t.headerCell.template:this instanceof lw?t.footerCell.template:t.cell.template}}]),t}(),sw=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){return _classCallCheck(this,n),e.call(this,t,i)}return _createClass(n,[{key:"ngOnChanges",value:function(t){_get(_getPrototypeOf(n.prototype),"ngOnChanges",this).call(this,t)}}]),n}($x(function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return n}(aw))),lw=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){return _classCallCheck(this,n),e.call(this,t,i)}return _createClass(n,[{key:"ngOnChanges",value:function(t){_get(_getPrototypeOf(n.prototype),"ngOnChanges",this).call(this,t)}}]),n}($x(function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return n}(aw))),uw=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){return _classCallCheck(this,n),e.call(this,t,i)}return n}(aw),cw=function(){var t=function(){function t(e){_classCallCheck(this,t),this._viewContainer=e,t.mostRecentCellOutlet=this}return _createClass(t,[{key:"ngOnDestroy",value:function(){t.mostRecentCellOutlet===this&&(t.mostRecentCellOutlet=null)}}]),t}();return t.mostRecentCellOutlet=null,t}(),hw=function t(){_classCallCheck(this,t)},pw=function t(){_classCallCheck(this,t)},fw=["top","bottom","left","right"],dw=function(){function t(e,n,i){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];_classCallCheck(this,t),this._isNativeHtmlTable=e,this._stickCellCss=n,this.direction=i,this._isBrowser=r}return _createClass(t,[{key:"clearStickyPositioning",value:function(t,e){var n,i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.nodeType===r.ELEMENT_NODE){this._removeStickyStyle(r,e);for(var o=0;o<r.children.length;o++)this._removeStickyStyle(r.children[o],e)}}}catch(a){i.e(a)}finally{i.f()}}},{key:"updateStickyColumns",value:function(t,e,n){var i=e.some((function(t){return t}))||n.some((function(t){return t}));if(t.length&&i&&this._isBrowser){var r,o=t[0],a=o.children.length,s=this._getCellWidths(o),l=this._getStickyStartColumnPositions(s,e),u=this._getStickyEndColumnPositions(s,n),c="rtl"===this.direction,h=_createForOfIteratorHelper(t);try{for(h.s();!(r=h.n()).done;)for(var p=r.value,f=0;f<a;f++){var d=p.children[f];e[f]&&this._addStickyStyle(d,c?"right":"left",l[f]),n[f]&&this._addStickyStyle(d,c?"left":"right",u[f])}}catch(m){h.e(m)}finally{h.f()}}}},{key:"stickRows",value:function(t,e,n){if(this._isBrowser)for(var i="bottom"===n?t.reverse():t,r=0,o=0;o<i.length;o++)if(e[o]){var a=i[o];if(this._isNativeHtmlTable)for(var s=0;s<a.children.length;s++)this._addStickyStyle(a.children[s],n,r);else this._addStickyStyle(a,n,r);if(o===i.length-1)return;r+=a.getBoundingClientRect().height}}},{key:"updateStickyFooterContainer",value:function(t,e){if(this._isNativeHtmlTable){var n=t.querySelector("tfoot");e.some((function(t){return!t}))?this._removeStickyStyle(n,["bottom"]):this._addStickyStyle(n,"bottom",0)}}},{key:"_removeStickyStyle",value:function(t,e){var n,i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;t.style[r]=""}}catch(o){i.e(o)}finally{i.f()}t.style.zIndex=this._getCalculatedZIndex(t),fw.some((function(e){return!!t.style[e]}))||(t.style.position="",t.classList.remove(this._stickCellCss))}},{key:"_addStickyStyle",value:function(t,e,n){t.classList.add(this._stickCellCss),t.style[e]=n+"px",t.style.cssText+="position: -webkit-sticky; position: sticky; ",t.style.zIndex=this._getCalculatedZIndex(t)}},{key:"_getCalculatedZIndex",value:function(t){var e,n={top:100,bottom:10,left:1,right:1},i=0,r=_createForOfIteratorHelper(fw);try{for(r.s();!(e=r.n()).done;){var o=e.value;t.style[o]&&(i+=n[o])}}catch(a){r.e(a)}finally{r.f()}return i?""+i:""}},{key:"_getCellWidths",value:function(t){for(var e=[],n=t.children,i=0;i<n.length;i++)e.push(n[i].getBoundingClientRect().width);return e}},{key:"_getStickyStartColumnPositions",value:function(t,e){for(var n=[],i=0,r=0;r<t.length;r++)e[r]&&(n[r]=i,i+=t[r]);return n}},{key:"_getStickyEndColumnPositions",value:function(t,e){for(var n=[],i=0,r=t.length;r>0;r--)e[r]&&(n[r]=i,i+=t[r]);return n}}]),t}();function mw(t){return Error('Could not find column with id "'.concat(t,'".'))}var gw=function t(e,n){_classCallCheck(this,t),this.viewContainer=e,this.elementRef=n},yw=function t(e,n){_classCallCheck(this,t),this.viewContainer=e,this.elementRef=n},vw=function t(e,n){_classCallCheck(this,t),this.viewContainer=e,this.elementRef=n},_w=function(){function t(e,n,i,r,o,a,s){_classCallCheck(this,t),this._differs=e,this._changeDetectorRef=n,this._elementRef=i,this._dir=o,this._platform=s,this._onDestroy=new L,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this._multiTemplateDataRows=!1,this.viewChange=new Zs({start:0,end:Number.MAX_VALUE}),r||this._elementRef.nativeElement.setAttribute("role","grid"),this._document=a,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((function(e,n){return t.trackBy?t.trackBy(n.dataIndex,n.data):n}))}},{key:"ngAfterContentChecked",value:function(){if(this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDefs.length&&!this._footerRowDefs.length&&!this._rowDefs.length)throw Error("Missing definitions for header, footer, and row; cannot determine which columns should be rendered.");this._renderUpdatedColumns(),this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription&&this._observeRenderChanges(),this._checkStickyStates()}},{key:"ngOnDestroy",value:function(){this._rowOutlet.viewContainer.clear(),this._headerRowOutlet.viewContainer.clear(),this._footerRowOutlet.viewContainer.clear(),this._cachedRenderRowsMap.clear(),this._onDestroy.next(),this._onDestroy.complete(),Vy(this.dataSource)&&this.dataSource.disconnect(this)}},{key:"renderRows",value:function(){var t=this;this._renderRows=this._getAllRenderRows();var e=this._dataDiffer.diff(this._renderRows);if(e){var n=this._rowOutlet.viewContainer;e.forEachOperation((function(e,i,r){if(null==e.previousIndex)t._insertRow(e.item,r);else if(null==r)n.remove(i);else{var o=n.get(i);n.move(o,r)}})),this._updateRowIndexContext(),e.forEachIdentityChange((function(t){n.get(t.currentIndex).context.$implicit=t.item.data})),this.updateStickyColumnStyles()}}},{key:"setHeaderRowDef",value:function(t){this._customHeaderRowDefs=new Set([t]),this._headerRowDefChanged=!0}},{key:"setFooterRowDef",value:function(t){this._customFooterRowDefs=new Set([t]),this._footerRowDefChanged=!0}},{key:"addColumnDef",value:function(t){this._customColumnDefs.add(t)}},{key:"removeColumnDef",value:function(t){this._customColumnDefs.delete(t)}},{key:"addRowDef",value:function(t){this._customRowDefs.add(t)}},{key:"removeRowDef",value:function(t){this._customRowDefs.delete(t)}},{key:"addHeaderRowDef",value:function(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}},{key:"removeHeaderRowDef",value:function(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}},{key:"addFooterRowDef",value:function(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}},{key:"removeFooterRowDef",value:function(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}},{key:"updateStickyHeaderRowStyles",value:function(){var t=this._getRenderedRows(this._headerRowOutlet),e=this._elementRef.nativeElement.querySelector("thead");e&&(e.style.display=t.length?"":"none");var n=this._headerRowDefs.map((function(t){return t.sticky}));this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,n,"top"),this._headerRowDefs.forEach((function(t){return t.resetStickyChanged()}))}},{key:"updateStickyFooterRowStyles",value:function(){var t=this._getRenderedRows(this._footerRowOutlet),e=this._elementRef.nativeElement.querySelector("tfoot");e&&(e.style.display=t.length?"":"none");var n=this._footerRowDefs.map((function(t){return t.sticky}));this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,n,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,n),this._footerRowDefs.forEach((function(t){return t.resetStickyChanged()}))}},{key:"updateStickyColumnStyles",value:function(){var t=this,e=this._getRenderedRows(this._headerRowOutlet),n=this._getRenderedRows(this._rowOutlet),i=this._getRenderedRows(this._footerRowOutlet);this._stickyStyler.clearStickyPositioning([].concat(_toConsumableArray(e),_toConsumableArray(n),_toConsumableArray(i)),["left","right"]),e.forEach((function(e,n){t._addStickyColumnStyles([e],t._headerRowDefs[n])})),this._rowDefs.forEach((function(e){for(var i=[],r=0;r<n.length;r++)t._renderRows[r].rowDef===e&&i.push(n[r]);t._addStickyColumnStyles(i,e)})),i.forEach((function(e,n){t._addStickyColumnStyles([e],t._footerRowDefs[n])})),Array.from(this._columnDefsByName.values()).forEach((function(t){return t.resetStickyChanged()}))}},{key:"_getAllRenderRows",value:function(){var t=[],e=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(var n=0;n<this._data.length;n++){var i=this._data[n],r=this._getRenderRowsForData(i,n,e.get(i));this._cachedRenderRowsMap.has(i)||this._cachedRenderRowsMap.set(i,new WeakMap);for(var o=0;o<r.length;o++){var a=r[o],s=this._cachedRenderRowsMap.get(a.data);s.has(a.rowDef)?s.get(a.rowDef).push(a):s.set(a.rowDef,[a]),t.push(a)}}return t}},{key:"_getRenderRowsForData",value:function(t,e,n){return this._getRowDefs(t,e).map((function(i){var r=n&&n.has(i)?n.get(i):[];if(r.length){var o=r.shift();return o.dataIndex=e,o}return{data:t,rowDef:i,dataIndex:e}}))}},{key:"_cacheColumnDefs",value:function(){var t=this;this._columnDefsByName.clear(),bw(this._contentColumnDefs,this._customColumnDefs).forEach((function(e){if(t._columnDefsByName.has(e.name))throw Error('Duplicate column definition name provided: "'.concat(e.name,'".'));t._columnDefsByName.set(e.name,e)}))}},{key:"_cacheRowDefs",value:function(){this._headerRowDefs=bw(this._contentHeaderRowDefs,this._customHeaderRowDefs),this._footerRowDefs=bw(this._contentFooterRowDefs,this._customFooterRowDefs),this._rowDefs=bw(this._contentRowDefs,this._customRowDefs);var t=this._rowDefs.filter((function(t){return!t.when}));if(!this.multiTemplateDataRows&&t.length>1)throw Error("There can only be one default row without a when predicate function.");this._defaultRowDef=t[0]}},{key:"_renderUpdatedColumns",value:function(){var t=function(t,e){return t||!!e.getColumnsDiff()};this._rowDefs.reduce(t,!1)&&this._forceRenderDataRows(),this._headerRowDefs.reduce(t,!1)&&this._forceRenderHeaderRows(),this._footerRowDefs.reduce(t,!1)&&this._forceRenderFooterRows()}},{key:"_switchDataSource",value:function(t){this._data=[],Vy(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}},{key:"_observeRenderChanges",value:function(){var t=this;if(this.dataSource){var e;if(Vy(this.dataSource)?e=this.dataSource.connect(this):this.dataSource instanceof k?e=this.dataSource:Array.isArray(this.dataSource)&&(e=Xs(this.dataSource)),void 0===e)throw Error("Provided data source did not match an array, Observable, or DataSource");this._renderChangeSubscription=e.pipe(Pg(this._onDestroy)).subscribe((function(e){t._data=e||[],t.renderRows()}))}}},{key:"_forceRenderHeaderRows",value:function(){var t=this;this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((function(e,n){return t._renderRow(t._headerRowOutlet,e,n)})),this.updateStickyHeaderRowStyles(),this.updateStickyColumnStyles()}},{key:"_forceRenderFooterRows",value:function(){var t=this;this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((function(e,n){return t._renderRow(t._footerRowOutlet,e,n)})),this.updateStickyFooterRowStyles(),this.updateStickyColumnStyles()}},{key:"_addStickyColumnStyles",value:function(t,e){var n=this,i=Array.from(e.columns||[]).map((function(t){var e=n._columnDefsByName.get(t);if(!e)throw mw(t);return e})),r=i.map((function(t){return t.sticky})),o=i.map((function(t){return t.stickyEnd}));this._stickyStyler.updateStickyColumns(t,r,o)}},{key:"_getRenderedRows",value:function(t){for(var e=[],n=0;n<t.viewContainer.length;n++){var i=t.viewContainer.get(n);e.push(i.rootNodes[0])}return e}},{key:"_getRowDefs",value:function(t,e){if(1==this._rowDefs.length)return[this._rowDefs[0]];var n=[];if(this.multiTemplateDataRows)n=this._rowDefs.filter((function(n){return!n.when||n.when(e,t)}));else{var i=this._rowDefs.find((function(n){return n.when&&n.when(e,t)}))||this._defaultRowDef;i&&n.push(i)}if(!n.length)throw function(t){return Error("Could not find a matching row definition for theprovided row data: "+JSON.stringify(t))}(t);return n}},{key:"_insertRow",value:function(t,e){this._renderRow(this._rowOutlet,t.rowDef,e,{$implicit:t.data})}},{key:"_renderRow",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.viewContainer.createEmbeddedView(e.template,i,n);var r,o=_createForOfIteratorHelper(this._getCellTemplates(e));try{for(o.s();!(r=o.n()).done;){var a=r.value;cw.mostRecentCellOutlet&&cw.mostRecentCellOutlet._viewContainer.createEmbeddedView(a,i)}}catch(s){o.e(s)}finally{o.f()}this._changeDetectorRef.markForCheck()}},{key:"_updateRowIndexContext",value:function(){for(var t=this._rowOutlet.viewContainer,e=0,n=t.length;e<n;e++){var i=t.get(e).context;i.count=n,i.first=0===e,i.last=e===n-1,i.even=e%2==0,i.odd=!i.even,this.multiTemplateDataRows?(i.dataIndex=this._renderRows[e].dataIndex,i.renderIndex=e):i.index=this._renderRows[e].dataIndex}}},{key:"_getCellTemplates",value:function(t){var e=this;return t&&t.columns?Array.from(t.columns,(function(n){var i=e._columnDefsByName.get(n);if(!i)throw mw(n);return t.extractCellTemplate(i)})):[]}},{key:"_applyNativeTableSections",value:function(){for(var t=this._document.createDocumentFragment(),e=0,n=[{tag:"thead",outlet:this._headerRowOutlet},{tag:"tbody",outlet:this._rowOutlet},{tag:"tfoot",outlet:this._footerRowOutlet}];e<n.length;e++){var i=n[e],r=this._document.createElement(i.tag);r.setAttribute("role","rowgroup"),r.appendChild(i.outlet.elementRef.nativeElement),t.appendChild(r)}this._elementRef.nativeElement.appendChild(t)}},{key:"_forceRenderDataRows",value:function(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows(),this.updateStickyColumnStyles()}},{key:"_checkStickyStates",value:function(){var t=function(t,e){return t||e.hasStickyChanged()};this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&this.updateStickyColumnStyles()}},{key:"_setupStickyStyler",value:function(){var t=this;this._stickyStyler=new dw(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._platform.isBrowser),(this._dir?this._dir.change:Xs()).pipe(Pg(this._onDestroy)).subscribe((function(e){t._stickyStyler.direction=e,t.updateStickyColumnStyles()}))}},{key:"trackBy",get:function(){return this._trackByFn},set:function(t){Qt()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received ".concat(JSON.stringify(t),".")),this._trackByFn=t}},{key:"dataSource",get:function(){return this._dataSource},set:function(t){this._dataSource!==t&&this._switchDataSource(t)}},{key:"multiTemplateDataRows",get:function(){return this._multiTemplateDataRows},set:function(t){this._multiTemplateDataRows=Dp(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&this._forceRenderDataRows()}}]),t}();function bw(t,e){return t.toArray().concat(Array.from(e))}var xw=function t(){_classCallCheck(this,t)},ww=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.apply(this,arguments)).stickyCssClass="mat-table-sticky",t}return n}(_w),Cw=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return n}(tw),kw=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return n}(ew),Ew=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return n}(nw),Sw=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),r=e.call(this,t,i),i.nativeElement.classList.add("mat-column-"+t.cssClassFriendlyName),r}return n}(rw),Iw=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),r=e.call(this,t,i),i.nativeElement.classList.add("mat-column-"+t.cssClassFriendlyName),r}return n}(ow),Tw=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return n}(sw),Pw=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return n}(uw),Aw=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return n}(hw),Lw=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return n}(pw),Mw=function t(){_classCallCheck(this,t)},Rw=Hn({encapsulation:2,styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-footer-row,mat-row{min-height:48px}mat-footer-row,mat-header-row,mat-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-footer-row::after,mat-header-row::after,mat-row::after{display:inline-block;min-height:inherit;content:''}mat-cell:first-of-type,mat-footer-cell:first-of-type,mat-header-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type,[dir=rtl] mat-footer-cell:first-of-type,[dir=rtl] mat-header-cell:first-of-type{padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-footer-cell:last-of-type,mat-header-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type,[dir=rtl] mat-footer-cell:last-of-type,[dir=rtl] mat-header-cell:last-of-type{padding-right:0;padding-left:24px}mat-cell,mat-footer-cell,mat-header-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-footer-row,tr.mat-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}td.mat-cell,td.mat-footer-cell,th.mat-header-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type,th.mat-header-cell:first-of-type{padding-left:24px}[dir=rtl] td.mat-cell:first-of-type,[dir=rtl] td.mat-footer-cell:first-of-type,[dir=rtl] th.mat-header-cell:first-of-type{padding-left:0;padding-right:24px}td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type,th.mat-header-cell:last-of-type{padding-right:24px}[dir=rtl] td.mat-cell:last-of-type,[dir=rtl] td.mat-footer-cell:last-of-type,[dir=rtl] th.mat-header-cell:last-of-type{padding-right:0;padding-left:24px}"],data:{}});function Ow(t){return Jo(0,[Bo(402653184,1,{_rowOutlet:0}),Bo(402653184,2,{_headerRowOutlet:0}),Bo(402653184,3,{_footerRowOutlet:0}),Go(null,0),(t()(),Oo(4,16777216,null,null,1,null,null,null,null,null,null,null)),$i(5,16384,[[2,4]],0,yw,[Pn,rn],null,null),(t()(),Oo(6,16777216,null,null,1,null,null,null,null,null,null,null)),$i(7,16384,[[1,4]],0,gw,[Pn,rn],null,null),(t()(),Oo(8,16777216,null,null,1,null,null,null,null,null,null,null)),$i(9,16384,[[3,4]],0,vw,[Pn,rn],null,null)],null,null)}var Dw=Hn({encapsulation:2,styles:[],data:{}});function Nw(t){return Jo(0,[(t()(),Oo(0,16777216,null,null,1,null,null,null,null,null,null,null)),$i(1,147456,null,0,cw,[Pn],null,null)],null,null)}var Fw=Hn({encapsulation:2,styles:[],data:{}});function zw(t){return Jo(0,[(t()(),Oo(0,16777216,null,null,1,null,null,null,null,null,null,null)),$i(1,147456,null,0,cw,[Pn],null,null)],null,null)}var Bw=function(t){t&&Object.assign(this,t)},Vw=function(){function t(t,e){this.el=t,this.ngZone=e,this.onAddressChange=new br}return t.prototype.ngAfterViewInit=function(){this.options||(this.options=new Bw),this.initialize()},t.prototype.isGoogleLibExists=function(){return!(!google||!google.maps||!google.maps.places)},t.prototype.initialize=function(){var t=this;if(!this.isGoogleLibExists())throw new Error("Google maps library can not be found");if(this.autocomplete=new google.maps.places.Autocomplete(this.el.nativeElement,this.options),!this.autocomplete)throw new Error("Autocomplete is not initialized");null!=!this.autocomplete.addListener&&(this.eventListener=this.autocomplete.addListener("place_changed",(function(){t.handleChangeEvent()}))),this.el.nativeElement.addEventListener("keydown",(function(e){e.key&&"enter"==e.key.toLowerCase()&&e.target===t.el.nativeElement&&(e.preventDefault(),e.stopPropagation())})),window&&window.navigator&&window.navigator.userAgent&&navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&setTimeout((function(){var t=document.getElementsByClassName("pac-container");if(t){var e=Array.from(t);if(e)for(var n=0,i=e;n<i.length;n++){var r=i[n];r&&r.addEventListener("touchend",(function(t){t.stopImmediatePropagation()}))}}}),500)},t.prototype.reset=function(){this.autocomplete.setComponentRestrictions(this.options.componentRestrictions),this.autocomplete.setTypes(this.options.types)},t.prototype.handleChangeEvent=function(){var t=this;this.ngZone.run((function(){t.place=t.autocomplete.getPlace(),t.place&&t.onAddressChange.emit(t.place)}))},t}();function Uw(t){return Error('Tooltip position "'.concat(t,'" is invalid.'))}var jw=new Pt("mat-tooltip-scroll-strategy");function qw(t){return function(){return t.scrollStrategies.reposition({scrollThrottle:20})}}var Gw=new Pt("mat-tooltip-default-options",{providedIn:"root",factory:function(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),Hw=function(){function t(e,n,i,r,o,a,s,l,u,c,h,p){var f=this;_classCallCheck(this,t),this._overlay=e,this._elementRef=n,this._scrollDispatcher=i,this._viewContainerRef=r,this._ngZone=o,this._ariaDescriber=s,this._focusMonitor=l,this._dir=c,this._defaultOptions=h,this._position="below",this._disabled=!1,this.showDelay=this._defaultOptions.showDelay,this.hideDelay=this._defaultOptions.hideDelay,this._message="",this._manualListeners=new Map,this._destroyed=new L,this._scrollStrategy=u;var d=n.nativeElement,m="undefined"==typeof window||window.Hammer||p;a.IOS||a.ANDROID?m||this._manualListeners.set("touchstart",(function(){return f.show()})):this._manualListeners.set("mouseenter",(function(){return f.show()})).set("mouseleave",(function(){return f.hide()})),this._manualListeners.forEach((function(t,e){return d.addEventListener(e,t)})),l.monitor(n).pipe(Pg(this._destroyed)).subscribe((function(t){t?"keyboard"===t&&o.run((function(){return f.show()})):o.run((function(){return f.hide(0)}))})),h&&h.position&&(this.position=h.position)}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this._elementRef.nativeElement,e=t.style;"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||(e.webkitUserSelect=e.userSelect=e.msUserSelect=""),t.draggable&&"none"===e.webkitUserDrag&&(e.webkitUserDrag="")}},{key:"ngOnDestroy",value:function(){var t=this;this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._manualListeners.forEach((function(e,n){t._elementRef.nativeElement.removeEventListener(n,e)})),this._manualListeners.clear(),this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.message),this._focusMonitor.stopMonitoring(this._elementRef)}},{key:"show",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.showDelay;if(!this.disabled&&this.message&&(!this._isTooltipVisible()||this._tooltipInstance._showTimeoutId||this._tooltipInstance._hideTimeoutId)){var n=this._createOverlay();this._detach(),this._portal=this._portal||new K_(Xw,this._viewContainerRef),this._tooltipInstance=n.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe(Pg(this._destroyed)).subscribe((function(){return t._detach()})),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(e)}}},{key:"hide",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hideDelay;this._tooltipInstance&&this._tooltipInstance.hide(t)}},{key:"toggle",value:function(){this._isTooltipVisible()?this.hide():this.show()}},{key:"_isTooltipVisible",value:function(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}},{key:"_handleKeydown",value:function(t){this._isTooltipVisible()&&27===t.keyCode&&!Wp(t)&&(t.preventDefault(),t.stopPropagation(),this.hide(0))}},{key:"_handleTouchend",value:function(){this.hide(this._defaultOptions.touchendHideDelay)}},{key:"_createOverlay",value:function(){var t=this;if(this._overlayRef)return this._overlayRef;var e=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),n=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(".mat-tooltip").withFlexibleDimensions(!1).withViewportMargin(8).withScrollableContainers(e);return n.positionChanges.pipe(Pg(this._destroyed)).subscribe((function(e){t._tooltipInstance&&e.scrollableViewProperties.isOverlayClipped&&t._tooltipInstance.isVisible()&&t._ngZone.run((function(){return t.hide(0)}))})),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:n,panelClass:"mat-tooltip-panel",scrollStrategy:this._scrollStrategy()}),this._updatePosition(),this._overlayRef.detachments().pipe(Pg(this._destroyed)).subscribe((function(){return t._detach()})),this._overlayRef}},{key:"_detach",value:function(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}},{key:"_updatePosition",value:function(){var t=this._overlayRef.getConfig().positionStrategy,e=this._getOrigin(),n=this._getOverlayPosition();t.withPositions([Object.assign({},e.main,n.main),Object.assign({},e.fallback,n.fallback)])}},{key:"_getOrigin",value:function(){var t,e=!this._dir||"ltr"==this._dir.value,n=this.position;if("above"==n||"below"==n)t={originX:"center",originY:"above"==n?"top":"bottom"};else if("before"==n||"left"==n&&e||"right"==n&&!e)t={originX:"start",originY:"center"};else{if(!("after"==n||"right"==n&&e||"left"==n&&!e))throw Uw(n);t={originX:"end",originY:"center"}}var i=this._invertPosition(t.originX,t.originY);return{main:t,fallback:{originX:i.x,originY:i.y}}}},{key:"_getOverlayPosition",value:function(){var t,e=!this._dir||"ltr"==this._dir.value,n=this.position;if("above"==n)t={overlayX:"center",overlayY:"bottom"};else if("below"==n)t={overlayX:"center",overlayY:"top"};else if("before"==n||"left"==n&&e||"right"==n&&!e)t={overlayX:"end",overlayY:"center"};else{if(!("after"==n||"right"==n&&e||"left"==n&&!e))throw Uw(n);t={overlayX:"start",overlayY:"center"}}var i=this._invertPosition(t.overlayX,t.overlayY);return{main:t,fallback:{overlayX:i.x,overlayY:i.y}}}},{key:"_updateTooltipMessage",value:function(){var t=this;this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.asObservable().pipe(wl(1),Pg(this._destroyed)).subscribe((function(){t._tooltipInstance&&t._overlayRef.updatePosition()})))}},{key:"_setTooltipClass",value:function(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}},{key:"_invertPosition",value:function(t,e){return"above"===this.position||"below"===this.position?"top"===e?e="bottom":"bottom"===e&&(e="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:e}}},{key:"position",get:function(){return this._position},set:function(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(),this._tooltipInstance&&this._tooltipInstance.show(0),this._overlayRef.updatePosition()))}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=Dp(t),this._disabled&&this.hide(0)}},{key:"message",get:function(){return this._message},set:function(t){var e=this;this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message),this._message=null!=t?(""+t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._updateTooltipMessage(),this._ngZone.runOutsideAngular((function(){Promise.resolve().then((function(){e._ariaDescriber.describe(e._elementRef.nativeElement,e.message)}))})))}},{key:"tooltipClass",get:function(){return this._tooltipClass},set:function(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}}]),t}(),Xw=function(){function t(e,n){_classCallCheck(this,t),this._changeDetectorRef=e,this._breakpointObserver=n,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new L,this._isHandset=this._breakpointObserver.observe("(max-width: 599.99px) and (orientation: portrait), (max-width: 959.99px) and (orientation: landscape)")}return _createClass(t,[{key:"show",value:function(t){var e=this;this._hideTimeoutId&&(clearTimeout(this._hideTimeoutId),this._hideTimeoutId=null),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout((function(){e._visibility="visible",e._showTimeoutId=null,e._markForCheck()}),t)}},{key:"hide",value:function(t){var e=this;this._showTimeoutId&&(clearTimeout(this._showTimeoutId),this._showTimeoutId=null),this._hideTimeoutId=setTimeout((function(){e._visibility="hidden",e._hideTimeoutId=null,e._markForCheck()}),t)}},{key:"afterHidden",value:function(){return this._onHide.asObservable()}},{key:"isVisible",value:function(){return"visible"===this._visibility}},{key:"ngOnDestroy",value:function(){this._onHide.complete()}},{key:"_animationStart",value:function(){this._closeOnInteraction=!1}},{key:"_animationDone",value:function(t){var e=t.toState;"hidden"!==e||this.isVisible()||this._onHide.next(),"visible"!==e&&"hidden"!==e||(this._closeOnInteraction=!0)}},{key:"_handleBodyInteraction",value:function(){this._closeOnInteraction&&this.hide(0)}},{key:"_markForCheck",value:function(){this._changeDetectorRef.markForCheck()}}]),t}(),Zw=function t(){_classCallCheck(this,t)};function Ww(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qp,i=(e=t)instanceof Date&&!isNaN(+e)?+t-n.now():Math.abs(t);return function(t){return t.lift(new Yw(i,n))}}var Yw=function(){function t(e,n){_classCallCheck(this,t),this.delay=e,this.scheduler=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Kw(t,this.delay,this.scheduler))}}]),t}(),Kw=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;return _classCallCheck(this,n),(o=e.call(this,t)).delay=i,o.scheduler=r,o.queue=[],o.active=!1,o.errored=!1,o}return _createClass(n,[{key:"_schedule",value:function(t){this.active=!0,this.destination.add(t.schedule(n.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}},{key:"scheduleNotification",value:function(t){if(!0!==this.errored){var e=this.scheduler,n=new Jw(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}}},{key:"_next",value:function(t){this.scheduleNotification(U_.createNext(t))}},{key:"_error",value:function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleNotification(U_.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){for(var e=t.source,n=e.queue,i=t.scheduler,r=t.destination;n.length>0&&n[0].time-i.now()<=0;)n.shift().notification.observe(r);if(n.length>0){var o=Math.max(0,n[0].time-i.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1}}]),n}(y),Jw=function t(e,n){_classCallCheck(this,t),this.time=e,this.notification=n},Qw=new Pt("MAT_MENU_PANEL"),$w=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o){var a;return _classCallCheck(this,n),(a=e.call(this))._elementRef=t,a._focusMonitor=r,a._parentMenu=o,a.role="menuitem",a._hovered=new L,a._highlighted=!1,a._triggersSubmenu=!1,r&&r.monitor(a._elementRef,!1),o&&o.addItem&&o.addItem(_assertThisInitialized(a)),a._document=i,a}return _createClass(n,[{key:"focus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",e=arguments.length>1?arguments[1]:void 0;this._focusMonitor?this._focusMonitor.focusVia(this._getHostElement(),t,e):this._getHostElement().focus(e)}},{key:"ngOnDestroy",value:function(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete()}},{key:"_getTabIndex",value:function(){return this.disabled?"-1":"0"}},{key:"_getHostElement",value:function(){return this._elementRef.nativeElement}},{key:"_checkDisabled",value:function(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}},{key:"_handleMouseEnter",value:function(){this._hovered.next(this)}},{key:"getLabel",value:function(){var t=this._elementRef.nativeElement,e=this._document?this._document.TEXT_NODE:3,n="";if(t.childNodes)for(var i=t.childNodes.length,r=0;r<i;r++)t.childNodes[r].nodeType===e&&(n+=t.childNodes[r].textContent);return n.trim()}}]),n}(Mf(Af((function t(){_classCallCheck(this,t)})))),tC=new Pt("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}}),eC=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return n}(function(){function t(e,n,i){_classCallCheck(this,t),this._elementRef=e,this._ngZone=n,this._defaultOptions=i,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new wr,this._tabSubscription=d.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new L,this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new br,this.close=this.closed}return _createClass(t,[{key:"ngOnInit",value:function(){this.setPositionClasses()}},{key:"ngAfterContentInit",value:function(){var t=this;this._updateDirectDescendants(),this._keyManager=new hf(this._directDescendantItems).withWrap().withTypeAhead(),this._tabSubscription=this._keyManager.tabOut.subscribe((function(){return t.closed.emit("tab")}))}},{key:"ngOnDestroy",value:function(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}},{key:"_hovered",value:function(){return this._directDescendantItems.changes.pipe(Ml(this._directDescendantItems),Tl((function(t){return et.apply(void 0,_toConsumableArray(t.map((function(t){return t._hovered}))))})))}},{key:"addItem",value:function(t){}},{key:"removeItem",value:function(t){}},{key:"_handleKeydown",value:function(t){var e=t.keyCode,n=this._keyManager;switch(e){case 27:Wp(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;case 36:case 35:Wp(t)||(36===e?n.setFirstItemActive():n.setLastItemActive(),t.preventDefault());break;default:38!==e&&40!==e||n.setFocusOrigin("keyboard"),n.onKeydown(t)}}},{key:"focusFirstItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",e=this._keyManager;if(this.lazyContent?this._ngZone.onStable.asObservable().pipe(wl(1)).subscribe((function(){return e.setFocusOrigin(t).setFirstItemActive()})):e.setFocusOrigin(t).setFirstItemActive(),!e.activeItem&&this._directDescendantItems.length)for(var n=this._directDescendantItems.first._getHostElement().parentElement;n;){if("menu"===n.getAttribute("role")){n.focus();break}n=n.parentElement}}},{key:"resetActiveItem",value:function(){this._keyManager.setActiveItem(-1)}},{key:"setElevation",value:function(t){var e="mat-elevation-z"+(4+t),n=Object.keys(this._classList).find((function(t){return t.startsWith("mat-elevation-z")}));n&&n!==this._previousElevation||(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[e]=!0,this._previousElevation=e)}},{key:"setPositionClasses",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.xPosition,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.yPosition,n=this._classList;n["mat-menu-before"]="before"===t,n["mat-menu-after"]="after"===t,n["mat-menu-above"]="above"===e,n["mat-menu-below"]="below"===e}},{key:"_startAnimation",value:function(){this._panelAnimationState="enter"}},{key:"_resetAnimation",value:function(){this._panelAnimationState="void"}},{key:"_onAnimationDone",value:function(t){this._animationDone.next(t),this._isAnimating=!1}},{key:"_onAnimationStart",value:function(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}},{key:"_updateDirectDescendants",value:function(){var t=this;this._allItems.changes.pipe(Ml(this._allItems)).subscribe((function(e){t._directDescendantItems.reset(e.filter((function(e){return e._parentMenu===t}))),t._directDescendantItems.notifyOnChanges()}))}},{key:"xPosition",get:function(){return this._xPosition},set:function(t){"before"!==t&&"after"!==t&&function(){throw Error('xPosition value must be either \'before\' or after\'.\n      Example: <mat-menu xPosition="before" #menu="matMenu"></mat-menu>')}(),this._xPosition=t,this.setPositionClasses()}},{key:"yPosition",get:function(){return this._yPosition},set:function(t){"above"!==t&&"below"!==t&&function(){throw Error('yPosition value must be either \'above\' or below\'.\n      Example: <mat-menu yPosition="above" #menu="matMenu"></mat-menu>')}(),this._yPosition=t,this.setPositionClasses()}},{key:"overlapTrigger",get:function(){return this._overlapTrigger},set:function(t){this._overlapTrigger=Dp(t)}},{key:"hasBackdrop",get:function(){return this._hasBackdrop},set:function(t){this._hasBackdrop=Dp(t)}},{key:"panelClass",set:function(t){var e=this,n=this._previousPanelClass;n&&n.length&&n.split(" ").forEach((function(t){e._classList[t]=!1})),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach((function(t){e._classList[t]=!0})),this._elementRef.nativeElement.className="")}},{key:"classList",get:function(){return this.panelClass},set:function(t){this.panelClass=t}}]),t}()),nC=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){return _classCallCheck(this,n),e.call(this,t,i,r)}return n}(eC),iC=new Pt("mat-menu-scroll-strategy");function rC(t){return function(){return t.scrollStrategies.reposition()}}var oC=Zp({passive:!0}),aC=function(){function t(e,n,i,r,o,a,s,l){var u=this;_classCallCheck(this,t),this._overlay=e,this._element=n,this._viewContainerRef=i,this._parentMenu=o,this._menuItemInstance=a,this._dir=s,this._focusMonitor=l,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=d.EMPTY,this._hoverSubscription=d.EMPTY,this._menuCloseSubscription=d.EMPTY,this._handleTouchStart=function(){return u._openedBy="touch"},this._openedBy=null,this.restoreFocus=!0,this.menuOpened=new br,this.onMenuOpen=this.menuOpened,this.menuClosed=new br,this.onMenuClose=this.menuClosed,n.nativeElement.addEventListener("touchstart",this._handleTouchStart,oC),a&&(a._triggersSubmenu=this.triggersSubmenu()),this._scrollStrategy=r}return _createClass(t,[{key:"ngAfterContentInit",value:function(){this._checkMenu(),this._handleHover()}},{key:"ngOnDestroy",value:function(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,oC),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}},{key:"triggersSubmenu",value:function(){return!(!this._menuItemInstance||!this._parentMenu)}},{key:"toggleMenu",value:function(){return this._menuOpen?this.closeMenu():this.openMenu()}},{key:"openMenu",value:function(){var t=this;if(!this._menuOpen){this._checkMenu();var e=this._createOverlay(),n=e.getConfig();this._setPosition(n.positionStrategy),n.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,e.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe((function(){return t.closeMenu()})),this._initMenu(),this.menu instanceof eC&&this.menu._startAnimation()}}},{key:"closeMenu",value:function(){this.menu.close.emit()}},{key:"focus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",e=arguments.length>1?arguments[1]:void 0;this._focusMonitor?this._focusMonitor.focusVia(this._element,t,e):this._element.nativeElement.focus(e)}},{key:"_destroyMenu",value:function(){var t=this;if(this._overlayRef&&this.menuOpen){var e=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),e instanceof eC?(e._resetAnimation(),e.lazyContent?e._animationDone.pipe(nl((function(t){return"void"===t.toState})),wl(1),Pg(e.lazyContent._attached)).subscribe({next:function(){return e.lazyContent.detach()},complete:function(){return t._setIsMenuOpen(!1)}}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),e.lazyContent&&e.lazyContent.detach()),this._restoreFocus()}}},{key:"_initMenu",value:function(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this._setIsMenuOpen(!0),this.menu.focusFirstItem(this._openedBy||"program")}},{key:"_setMenuElevation",value:function(){if(this.menu.setElevation){for(var t=0,e=this.menu.parentMenu;e;)t++,e=e.parentMenu;this.menu.setElevation(t)}}},{key:"_restoreFocus",value:function(){this.restoreFocus&&(this._openedBy?this.triggersSubmenu()||this.focus(this._openedBy):this.focus()),this._openedBy=null}},{key:"_setIsMenuOpen",value:function(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&(this._menuItemInstance._highlighted=t)}},{key:"_checkMenu",value:function(){this.menu||function(){throw Error('matMenuTriggerFor: must pass in an mat-menu instance.\n\n    Example:\n      <mat-menu #menu="matMenu"></mat-menu>\n      <button [matMenuTriggerFor]="menu"></button>')}()}},{key:"_createOverlay",value:function(){if(!this._overlayRef){var t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}},{key:"_getOverlayConfig",value:function(){return new xb({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",scrollStrategy:this._scrollStrategy(),direction:this._dir})}},{key:"_subscribeToPositions",value:function(t){var e=this;this.menu.setPositionClasses&&t.positionChanges.subscribe((function(t){e.menu.setPositionClasses("start"===t.connectionPair.overlayX?"after":"before","top"===t.connectionPair.overlayY?"below":"above")}))}},{key:"_setPosition",value:function(t){var e=_slicedToArray("before"===this.menu.xPosition?["end","start"]:["start","end"],2),n=e[0],i=e[1],r=_slicedToArray("above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],2),o=r[0],a=r[1],s=o,l=a,u=n,c=i,h=0;this.triggersSubmenu()?(c=n="before"===this.menu.xPosition?"start":"end",i=u="end"===n?"start":"end",h="bottom"===o?8:-8):this.menu.overlapTrigger||(s="top"===o?"bottom":"top",l="top"===a?"bottom":"top"),t.withPositions([{originX:n,originY:s,overlayX:u,overlayY:o,offsetY:h},{originX:i,originY:s,overlayX:c,overlayY:o,offsetY:h},{originX:n,originY:l,overlayX:u,overlayY:a,offsetY:-h},{originX:i,originY:l,overlayX:c,overlayY:a,offsetY:-h}])}},{key:"_menuClosingActions",value:function(){var t=this,e=this._overlayRef.backdropClick(),n=this._overlayRef.detachments();return et(e,this._parentMenu?this._parentMenu.closed:Xs(),this._parentMenu?this._parentMenu._hovered().pipe(nl((function(e){return e!==t._menuItemInstance})),nl((function(){return t._menuOpen}))):Xs(),n)}},{key:"_handleMousedown",value:function(t){Ef(t)||(this._openedBy=0===t.button?"mouse":null,this.triggersSubmenu()&&t.preventDefault())}},{key:"_handleKeydown",value:function(t){var e=t.keyCode;this.triggersSubmenu()&&(39===e&&"ltr"===this.dir||37===e&&"rtl"===this.dir)&&this.openMenu()}},{key:"_handleClick",value:function(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}},{key:"_handleHover",value:function(){var t=this;this.triggersSubmenu()&&(this._hoverSubscription=this._parentMenu._hovered().pipe(nl((function(e){return e===t._menuItemInstance&&!e.disabled})),Ww(0,lb)).subscribe((function(){t._openedBy="mouse",t.menu instanceof eC&&t.menu._isAnimating?t.menu._animationDone.pipe(wl(1),Ww(0,lb),Pg(t._parentMenu._hovered())).subscribe((function(){return t.openMenu()})):t.openMenu()})))}},{key:"_getPortal",value:function(){return this._portal&&this._portal.templateRef===this.menu.templateRef||(this._portal=new J_(this.menu.templateRef,this._viewContainerRef)),this._portal}},{key:"_deprecatedMatMenuTriggerFor",get:function(){return this.menu},set:function(t){this.menu=t}},{key:"menu",get:function(){return this._menu},set:function(t){var e=this;t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.asObservable().subscribe((function(t){e._destroyMenu(),"click"!==t&&"tab"!==t||!e._parentMenu||e._parentMenu.closed.emit(t)}))))}},{key:"menuOpen",get:function(){return this._menuOpen}},{key:"dir",get:function(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}}]),t}(),sC=function t(){_classCallCheck(this,t)},lC=function t(){_classCallCheck(this,t)},uC=Hn({encapsulation:2,styles:[".mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}@media (-ms-high-contrast:active){.mat-menu-panel{outline:solid 1px}}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}@media (-ms-high-contrast:active){.mat-menu-item-highlighted,.mat-menu-item.cdk-keyboard-focused,.mat-menu-item.cdk-program-focused{outline:dotted 1px}}.mat-menu-item-submenu-trigger{padding-right:32px}.mat-menu-item-submenu-trigger::after{width:0;height:0;border-style:solid;border-width:5px 0 5px 5px;border-color:transparent transparent transparent currentColor;content:'';display:inline-block;position:absolute;top:50%;right:16px;transform:translateY(-50%)}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}[dir=rtl] .mat-menu-item-submenu-trigger::after{right:auto;left:16px;transform:rotateY(180deg) translateY(-50%)}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}"],data:{animation:[{type:7,name:"transformMenu",definitions:[{type:0,name:"void",styles:{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null},options:void 0},{type:1,expr:"void => enter",animation:{type:3,steps:[{type:11,selector:".mat-menu-content, .mat-mdc-menu-content",animation:{type:4,styles:{type:6,styles:{opacity:1},offset:null},timings:"100ms linear"},options:null},{type:4,styles:{type:6,styles:{transform:"scale(1)"},offset:null},timings:"120ms cubic-bezier(0, 0, 0.2, 1)"}],options:null},options:null},{type:1,expr:"* => void",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"100ms 25ms linear"},options:null}],options:{}},{type:7,name:"fadeInItems",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}});function cC(t){return Jo(0,[(t()(),Oo(0,0,null,null,4,"div",[["class","mat-menu-panel"],["role","menu"],["tabindex","-1"]],[[24,"@transformMenu",0]],[[null,"keydown"],[null,"click"],[null,"@transformMenu.start"],[null,"@transformMenu.done"]],(function(t,e,n){var i=!0,r=t.component;return"keydown"===e&&(i=!1!==r._handleKeydown(n)&&i),"click"===e&&(i=!1!==r.closed.emit("click")&&i),"@transformMenu.start"===e&&(i=!1!==r._onAnimationStart(n)&&i),"@transformMenu.done"===e&&(i=!1!==r._onAnimationDone(n)&&i),i}),null,null)),tr(512,null,_s,bs,[wn,Cn,rn,ln]),$i(2,278528,null,0,xs,[_s],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),Oo(3,0,null,null,1,"div",[["class","mat-menu-content"]],null,null,null,null,null)),Go(null,0)],(function(t,e){t(e,2,0,"mat-menu-panel",e.component._classList)}),(function(t,e){t(e,0,0,e.component._panelAnimationState)}))}function hC(t){return Jo(2,[Bo(671088640,1,{templateRef:0}),(t()(),Ro(0,[[1,2]],null,0,null,cC))],null,null)}var pC=Hn({encapsulation:2,styles:[],data:{}});function fC(t){return Jo(2,[Go(null,0),(t()(),Oo(1,0,null,null,1,"div",[["class","mat-menu-ripple mat-ripple"],["matRipple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),$i(2,212992,null,0,Yf,[rn,Yr,qp,[2,Wf],[2,kg]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.disableRipple||n.disabled,n._getHostElement())}),(function(t,e){t(e,1,0,Vi(e,2).unbounded)}))}var dC=Hn({encapsulation:2,styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],data:{}});function mC(t){return Jo(2,[],null,null)}var gC=new Pt("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),yC=function t(){_classCallCheck(this,t)},vC=0,_C=function t(e,n){_classCallCheck(this,t),this.source=e,this.value=n},bC=function(){function t(e,n){_classCallCheck(this,t),this._changeDetector=e,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=function(){},this._onTouched=function(){},this._name="mat-button-toggle-group-"+vC++,this.valueChange=new br,this.change=new br,this.appearance=n&&n.appearance?n.appearance:"standard"}return _createClass(t,[{key:"ngOnInit",value:function(){this._selectionModel=new Uy(this.multiple,void 0,!1)}},{key:"ngAfterContentInit",value:function(){var t;(t=this._selectionModel).select.apply(t,_toConsumableArray(this._buttonToggles.filter((function(t){return t.checked}))))}},{key:"writeValue",value:function(t){this.value=t,this._changeDetector.markForCheck()}},{key:"registerOnChange",value:function(t){this._controlValueAccessorChangeFn=t}},{key:"registerOnTouched",value:function(t){this._onTouched=t}},{key:"setDisabledState",value:function(t){this.disabled=t}},{key:"_emitChangeEvent",value:function(){var t=this.selected,e=Array.isArray(t)?t[t.length-1]:t,n=new _C(e,this.value);this._controlValueAccessorChangeFn(n.value),this.change.emit(n)}},{key:"_syncButtonToggle",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.multiple||!this.selected||t.checked||(this.selected.checked=!1),this._selectionModel?e?this._selectionModel.select(t):this._selectionModel.deselect(t):i=!0,i||this._updateModelValue(n)}},{key:"_isSelected",value:function(t){return this._selectionModel&&this._selectionModel.isSelected(t)}},{key:"_isPrechecked",value:function(t){return void 0!==this._rawValue&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some((function(e){return null!=t.value&&e===t.value})):t.value===this._rawValue)}},{key:"_setSelectionByValue",value:function(t){var e=this;if(this._rawValue=t,this._buttonToggles)if(this.multiple&&t){if(!Array.isArray(t))throw Error("Value must be an array in multiple-selection mode.");this._clearSelection(),t.forEach((function(t){return e._selectValue(t)}))}else this._clearSelection(),this._selectValue(t)}},{key:"_clearSelection",value:function(){this._selectionModel.clear(),this._buttonToggles.forEach((function(t){return t.checked=!1}))}},{key:"_selectValue",value:function(t){var e=this._buttonToggles.find((function(e){return null!=e.value&&e.value===t}));e&&(e.checked=!0,this._selectionModel.select(e))}},{key:"_updateModelValue",value:function(t){t&&this._emitChangeEvent(),this.valueChange.emit(this.value)}},{key:"name",get:function(){return this._name},set:function(t){var e=this;this._name=t,this._buttonToggles&&this._buttonToggles.forEach((function(t){t.name=e._name,t._markForCheck()}))}},{key:"vertical",get:function(){return this._vertical},set:function(t){this._vertical=Dp(t)}},{key:"value",get:function(){var t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map((function(t){return t.value})):t[0]?t[0].value:void 0},set:function(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}},{key:"selected",get:function(){var t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}},{key:"multiple",get:function(){return this._multiple},set:function(t){this._multiple=Dp(t)}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=Dp(t),this._buttonToggles&&this._buttonToggles.forEach((function(t){return t._markForCheck()}))}}]),t}(),xC=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,o,a,s){var l;_classCallCheck(this,n),(l=e.call(this))._changeDetectorRef=i,l._elementRef=r,l._focusMonitor=o,l._isSingleSelector=!1,l._checked=!1,l.ariaLabelledby=null,l._disabled=!1,l.change=new br;var u=Number(a);return l.tabIndex=u||0===u?u:null,l.buttonToggleGroup=t,l.appearance=s&&s.appearance?s.appearance:"standard",l}return _createClass(n,[{key:"ngOnInit",value:function(){this._isSingleSelector=this.buttonToggleGroup&&!this.buttonToggleGroup.multiple,this._type=this._isSingleSelector?"radio":"checkbox",this.id=this.id||"mat-button-toggle-"+vC++,this._isSingleSelector&&(this.name=this.buttonToggleGroup.name),this.buttonToggleGroup&&this.buttonToggleGroup._isPrechecked(this)&&(this.checked=!0),this._focusMonitor.monitor(this._elementRef,!0)}},{key:"ngOnDestroy",value:function(){var t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}},{key:"focus",value:function(t){this._buttonElement.nativeElement.focus(t)}},{key:"_onButtonClick",value:function(){var t=!!this._isSingleSelector||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new _C(this,this.value))}},{key:"_markForCheck",value:function(){this._changeDetectorRef.markForCheck()}},{key:"buttonId",get:function(){return this.id+"-button"}},{key:"appearance",get:function(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance},set:function(t){this._appearance=t}},{key:"checked",get:function(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked},set:function(t){var e=Dp(t);e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}},{key:"disabled",get:function(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled},set:function(t){this._disabled=Dp(t)}}]),n}(Mf((function t(){_classCallCheck(this,t)}))),wC=function t(){_classCallCheck(this,t)},CC=Hn({encapsulation:2,styles:[".mat-button-toggle-group,.mat-button-toggle-standalone{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent}@media (-ms-high-contrast:active){.mat-button-toggle-group,.mat-button-toggle-standalone{outline:solid 1px}}.mat-button-toggle-group-appearance-standard,.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{border-radius:4px}@media (-ms-high-contrast:active){.mat-button-toggle-group-appearance-standard,.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{outline:0}}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}@media (-ms-high-contrast:active){.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media (-ms-high-contrast:active){.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}}@media (hover:none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{line-height:48px;padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px}@media (-ms-high-contrast:active){.mat-button-toggle-checked .mat-button-toggle-focus-overlay{opacity:.5;height:0}}@media (-ms-high-contrast:active){.mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 48px}}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:0 0;color:inherit;padding:0;margin:0;font:inherit;outline:0;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],data:{}});function kC(t){return Jo(2,[Bo(671088640,1,{_buttonElement:0}),(t()(),Oo(1,0,[[1,0],["button",1]],null,2,"button",[["class","mat-button-toggle-button"],["type","button"]],[[8,"id",0],[1,"tabindex",0],[1,"aria-pressed",0],[8,"disabled",0],[1,"name",0],[1,"aria-label",0],[1,"aria-labelledby",0]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component._onButtonClick()&&i),i}),null,null)),(t()(),Oo(2,0,null,null,1,"div",[["class","mat-button-toggle-label-content"]],null,null,null,null,null)),Go(null,0),(t()(),Oo(4,0,null,null,0,"div",[["class","mat-button-toggle-focus-overlay"]],null,null,null,null,null)),(t()(),Oo(5,0,null,null,1,"div",[["class","mat-button-toggle-ripple mat-ripple"],["matRipple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),$i(6,212992,null,0,Yf,[rn,Yr,qp,[2,Wf],[2,kg]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null)],(function(t,e){var n=e.component;t(e,6,0,n.disableRipple||n.disabled,Vi(e,1))}),(function(t,e){var n=e.component;t(e,1,0,n.buttonId,n.disabled?-1:n.tabIndex,n.checked,n.disabled||null,n.name||null,n.ariaLabel,n.ariaLabelledby),t(e,5,0,Vi(e,6).unbounded)}))}var EC=Hn({encapsulation:2,styles:[".mat-chip{position:relative;overflow:hidden;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0)}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(.4,0,.2,1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:'';pointer-events:none;transition:opacity .2s cubic-bezier(.35,0,.25,1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:0}.mat-standard-chip:focus::after{opacity:.16}@media (-ms-high-contrast:active){.mat-standard-chip{outline:solid 1px}.mat-standard-chip:focus{outline:dotted 2px}}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper .mat-standard-chip,.mat-chip-list-wrapper input.mat-input-element{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}"],data:{}});function SC(t){return Jo(2,[(t()(),Oo(0,0,null,null,1,"div",[["class","mat-chip-list-wrapper"]],null,null,null,null,null)),Go(null,0)],null,null)}var IC=n("4ZJM"),TC=function(t,e){var n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},i={on:function(t,e,i){if(void 0===n[t])throw new Error("Invalid event type: "+t);n[t].push({selector:e,fn:i})},render:function(t){e.store.featureChanged(t)}},r=function(t,r){for(var o=n[t],a=o.length;a--;){var s=o[a];if(s.selector(r)){s.fn.call(i,r),e.store.render(),e.ui.updateMapClasses();break}}};return t.start.call(i),{render:t.render,stop:function(){t.stop&&t.stop()},trash:function(){t.trash&&(t.trash(),e.store.render())},combineFeatures:function(){t.combineFeatures&&t.combineFeatures()},uncombineFeatures:function(){t.uncombineFeatures&&t.uncombineFeatures()},drag:function(t){r("drag",t)},click:function(t){r("click",t)},mousemove:function(t){r("mousemove",t)},mousedown:function(t){r("mousedown",t)},mouseup:function(t){r("mouseup",t)},mouseout:function(t){r("mouseout",t)},keydown:function(t){r("keydown",t)},keyup:function(t){r("keyup",t)},touchstart:function(t){r("touchstart",t)},touchmove:function(t){r("touchmove",t)},touchend:function(t){r("touchend",t)},tap:function(t){r("tap",t)}}},PC=n("mhV4"),AC=n.n(PC),LC={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},MC={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},RC={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},OC={POLYGON:"polygon",LINE:"line_string",POINT:"point"},DC={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},NC={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},FC={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},zC={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},BC={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},VC={ACTIVE:"true",INACTIVE:"false"},UC=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],jC=-90,qC=-85,GC=90,HC=85,XC=-270,ZC=270,WC={Point:0,LineString:1,Polygon:2};function YC(t,e){var n=WC[t.geometry.type]-WC[e.geometry.type];return 0===n&&t.geometry.type===DC.POLYGON?t.area-e.area:n}function KC(t){if(this._items={},this._nums={},this._length=t?t.length:0,t)for(var e=0,n=t.length;e<n;e++)this.add(t[e]),void 0!==t[e]&&("string"==typeof t[e]?this._items[t[e]]=e:this._nums[t[e]]=e)}KC.prototype.add=function(t){return this.has(t)||(this._length++,"string"==typeof t?this._items[t]=this._length:this._nums[t]=this._length),this},KC.prototype.delete=function(t){return!1===this.has(t)||(this._length--,delete this._items[t],delete this._nums[t]),this},KC.prototype.has=function(t){return!("string"!=typeof t&&"number"!=typeof t||void 0===this._items[t]&&void 0===this._nums[t])},KC.prototype.values=function(){var t=this,e=[];return Object.keys(this._items).forEach((function(n){e.push({k:n,v:t._items[n]})})),Object.keys(this._nums).forEach((function(n){e.push({k:JSON.parse(n),v:t._nums[n]})})),e.sort((function(t,e){return t.v-e.v})).map((function(t){return t.k}))},KC.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var JC=KC,QC=[BC.FEATURE,BC.MIDPOINT,BC.VERTEX],$C={click:function(t,e,n){return tk(t,e,n,n.options.clickBuffer)},touch:function(t,e,n){return tk(t,e,n,n.options.touchBuffer)}};function tk(t,e,n,i){if(null===n.map)return[];var r=t?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[[t.point.x-e,t.point.y-e],[t.point.x+e,t.point.y+e]]}(t,i):e,o={};n.options.styles&&(o.layers=n.options.styles.map((function(t){return t.id})));var a=n.map.queryRenderedFeatures(r,o).filter((function(t){return-1!==QC.indexOf(t.properties.meta)})),s=new JC,l=[];return a.forEach((function(t){var e=t.properties.id;s.has(e)||(s.add(e),l.push(t))})),function(t){return t.map((function(t){return t.geometry.type===DC.POLYGON&&(t.area=AC.a.geometry({type:DC.FEATURE,property:{},geometry:t.geometry})),t})).sort(YC).map((function(t){return delete t.area,t}))}(l)}function ek(t,e){var n=$C.click(t,null,e),i={mouse:RC.NONE};return n[0]&&(i.mouse=n[0].properties.active===VC.ACTIVE?RC.MOVE:RC.POINTER,i.feature=n[0].properties.meta),-1!==e.events.currentModeName().indexOf("draw")&&(i.mouse=RC.ADD),e.ui.queueMapClasses(i),e.ui.updateMapClasses(),n[0]}var nk=function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)};function ik(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null!=n.fineTolerance?n.fineTolerance:4,r=null!=n.grossTolerance?n.grossTolerance:12,o=null!=n.interval?n.interval:500;t.point=t.point||e.point,t.time=t.time||e.time;var a=nk(t.point,e.point);return a<i||a<r&&e.time-t.time<o}function rk(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null!=n.tolerance?n.tolerance:25,r=null!=n.interval?n.interval:250;return t.point=t.point||e.point,t.time=t.time||e.time,nk(t.point,e.point)<i&&e.time-t.time<r}var ok=n("VbFZ"),ak=n.n(ok),sk=function(t,e){this.ctx=t,this.properties=e.properties||{},this.coordinates=e.geometry.coordinates,this.id=e.id||ak()(),this.type=e.geometry.type};sk.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},sk.prototype.incomingCoords=function(t){this.setCoordinates(t)},sk.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},sk.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},sk.prototype.setProperty=function(t,e){this.properties[t]=e},sk.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:DC.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},sk.prototype.internal=function(t){var e={id:this.id,meta:BC.FEATURE,"meta:type":this.type,active:VC.INACTIVE,mode:t};if(this.ctx.options.userProperties)for(var n in this.properties)e["user_"+n]=this.properties[n];return{type:DC.FEATURE,properties:e,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var lk=sk,uk=function(t,e){lk.call(this,t,e)};(uk.prototype=Object.create(lk.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},uk.prototype.updateCoordinate=function(t,e,n){this.coordinates=3===arguments.length?[e,n]:[t,e],this.changed()},uk.prototype.getCoordinate=function(){return this.getCoordinates()};var ck=uk,hk=function(t,e){lk.call(this,t,e)};(hk.prototype=Object.create(lk.prototype)).isValid=function(){return this.coordinates.length>1},hk.prototype.addCoordinate=function(t,e,n){this.changed();var i=parseInt(t,10);this.coordinates.splice(i,0,[e,n])},hk.prototype.getCoordinate=function(t){var e=parseInt(t,10);return JSON.parse(JSON.stringify(this.coordinates[e]))},hk.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},hk.prototype.updateCoordinate=function(t,e,n){var i=parseInt(t,10);this.coordinates[i]=[e,n],this.changed()};var pk=hk,fk=function(t,e){lk.call(this,t,e),this.coordinates=this.coordinates.map((function(t){return t.slice(0,-1)}))};(fk.prototype=Object.create(lk.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every((function(t){return t.length>2}))},fk.prototype.incomingCoords=function(t){this.coordinates=t.map((function(t){return t.slice(0,-1)})),this.changed()},fk.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},fk.prototype.addCoordinate=function(t,e,n){this.changed();var i=t.split(".").map((function(t){return parseInt(t,10)}));this.coordinates[i[0]].splice(i[1],0,[e,n])},fk.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map((function(t){return parseInt(t,10)})),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},fk.prototype.getCoordinate=function(t){var e=t.split(".").map((function(t){return parseInt(t,10)}));return JSON.parse(JSON.stringify(this.coordinates[e[0]][e[1]]))},fk.prototype.getCoordinates=function(){return this.coordinates.map((function(t){return t.concat([t[0]])}))},fk.prototype.updateCoordinate=function(t,e,n){this.changed();var i=t.split("."),r=parseInt(i[0],10),o=parseInt(i[1],10);void 0===this.coordinates[r]&&(this.coordinates[r]=[]),this.coordinates[r][o]=[e,n]};var dk=fk,mk={MultiPoint:ck,MultiLineString:pk,MultiPolygon:dk},gk=function(t,e,n,i,r){var o=n.split("."),a=parseInt(o[0],10),s=o[1]?o.slice(1).join("."):null;return t[a][e](s,i,r)},yk=function(t,e){if(lk.call(this,t,e),delete this.coordinates,this.model=mk[e.geometry.type],void 0===this.model)throw new TypeError(e.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(e.geometry.coordinates)};(yk.prototype=Object.create(lk.prototype))._coordinatesToFeatures=function(t){var e=this,n=this.model.bind(this);return t.map((function(t){return new n(e.ctx,{id:ak()(),type:DC.FEATURE,properties:{},geometry:{coordinates:t,type:e.type.replace("Multi","")}})}))},yk.prototype.isValid=function(){return this.features.every((function(t){return t.isValid()}))},yk.prototype.setCoordinates=function(t){this.features=this._coordinatesToFeatures(t),this.changed()},yk.prototype.getCoordinate=function(t){return gk(this.features,"getCoordinate",t)},yk.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((function(t){return t.type===DC.POLYGON?t.getCoordinates():t.coordinates}))))},yk.prototype.updateCoordinate=function(t,e,n){gk(this.features,"updateCoordinate",t,e,n),this.changed()},yk.prototype.addCoordinate=function(t,e,n){gk(this.features,"addCoordinate",t,e,n),this.changed()},yk.prototype.removeCoordinate=function(t){gk(this.features,"removeCoordinate",t),this.changed()},yk.prototype.getFeatures=function(){return this.features};var vk=yk;function _k(t){this.map=t.map,this.drawConfig=JSON.parse(JSON.stringify(t.options||{})),this._ctx=t}_k.prototype.setSelected=function(t){return this._ctx.store.setSelected(t)},_k.prototype.setSelectedCoordinates=function(t){var e=this;this._ctx.store.setSelectedCoordinates(t),t.reduce((function(t,n){return void 0===t[n.feature_id]&&(t[n.feature_id]=!0,e._ctx.store.get(n.feature_id).changed()),t}),{})},_k.prototype.getSelected=function(){return this._ctx.store.getSelected()},_k.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},_k.prototype.isSelected=function(t){return this._ctx.store.isSelected(t)},_k.prototype.getFeature=function(t){return this._ctx.store.get(t)},_k.prototype.select=function(t){return this._ctx.store.select(t)},_k.prototype.deselect=function(t){return this._ctx.store.deselect(t)},_k.prototype.deleteFeature=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._ctx.store.delete(t,e)},_k.prototype.addFeature=function(t){return this._ctx.store.add(t)},_k.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},_k.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},_k.prototype.setActionableState=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._ctx.events.actionable({trash:t.trash||!1,combineFeatures:t.combineFeatures||!1,uncombineFeatures:t.uncombineFeatures||!1})},_k.prototype.changeMode=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._ctx.events.changeMode(t,e,n)},_k.prototype.updateUIClasses=function(t){return this._ctx.ui.queueMapClasses(t)},_k.prototype.activateUIButton=function(t){return this._ctx.ui.setActiveButton(t)},_k.prototype.featuresAt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"click";if("click"!==n&&"touch"!==n)throw new Error("invalid buffer type");return $C[n](t,e,this._ctx)},_k.prototype.newFeature=function(t){var e=t.geometry.type;return e===DC.POINT?new ck(this._ctx,t):e===DC.LINE_STRING?new pk(this._ctx,t):e===DC.POLYGON?new dk(this._ctx,t):new vk(this._ctx,t)},_k.prototype.isInstanceOf=function(t,e){if(t===DC.POINT)return e instanceof ck;if(t===DC.LINE_STRING)return e instanceof pk;if(t===DC.POLYGON)return e instanceof dk;if("MultiFeature"===t)return e instanceof vk;throw new Error("Unknown feature class: "+t)},_k.prototype.doRender=function(t){return this._ctx.store.featureChanged(t)};var bk=_k;_k.prototype.onSetup=function(){},_k.prototype.onDrag=function(){},_k.prototype.onClick=function(){},_k.prototype.onMouseMove=function(){},_k.prototype.onMouseDown=function(){},_k.prototype.onMouseUp=function(){},_k.prototype.onMouseOut=function(){},_k.prototype.onKeyUp=function(){},_k.prototype.onKeyDown=function(){},_k.prototype.onTouchStart=function(){},_k.prototype.onTouchMove=function(){},_k.prototype.onTouchEnd=function(){},_k.prototype.onTap=function(){},_k.prototype.onStop=function(){},_k.prototype.onTrash=function(){},_k.prototype.onCombineFeature=function(){},_k.prototype.onUncombineFeature=function(){},_k.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var xk={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},wk=Object.keys(xk),Ck=function(t){return[].concat(t).filter((function(t){return void 0!==t}))};function kk(){var t=this;if(!t.ctx.map||void 0===t.ctx.map.getSource(MC.HOT))return l();var e=t.ctx.events.currentModeName();t.ctx.ui.queueMapClasses({mode:e});var n=[],i=[];t.isDirty?i=t.getAllIds():(n=t.getChangedIds().filter((function(e){return void 0!==t.get(e)})),i=t.sources.hot.filter((function(e){return e.properties.id&&-1===n.indexOf(e.properties.id)&&void 0!==t.get(e.properties.id)})).map((function(t){return t.properties.id}))),t.sources.hot=[];var r=t.sources.cold.length;t.sources.cold=t.isDirty?[]:t.sources.cold.filter((function(t){return-1===n.indexOf(t.properties.id||t.properties.parent)}));var o=r!==t.sources.cold.length||i.length>0;function a(n,i){var r=t.get(n).internal(e);t.ctx.events.currentModeRender(r,(function(e){t.sources[i].push(e)}))}if(n.forEach((function(t){return a(t,"hot")})),i.forEach((function(t){return a(t,"cold")})),o&&t.ctx.map.getSource(MC.COLD).setData({type:DC.FEATURE_COLLECTION,features:t.sources.cold}),t.ctx.map.getSource(MC.HOT).setData({type:DC.FEATURE_COLLECTION,features:t.sources.hot}),t._emitSelectionChange&&(t.ctx.map.fire(FC.SELECTION_CHANGE,{features:t.getSelected().map((function(t){return t.toGeoJSON()})),points:t.getSelectedCoordinates().map((function(t){return{type:DC.FEATURE,properties:{},geometry:{type:DC.POINT,coordinates:t.coordinates}}}))}),t._emitSelectionChange=!1),t._deletedFeaturesToEmit.length){var s=t._deletedFeaturesToEmit.map((function(t){return t.toGeoJSON()}));t._deletedFeaturesToEmit=[],t.ctx.map.fire(FC.DELETE,{features:s})}function l(){t.isDirty=!1,t.clearChangedIds()}l(),t.ctx.map.fire(FC.RENDER,{})}function Ek(t){var e,n=this;this._features={},this._featureIds=new JC,this._selectedFeatureIds=new JC,this._selectedCoordinates=[],this._changedFeatureIds=new JC,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=t,this.sources={hot:[],cold:[]},this.render=function(){e||(e=requestAnimationFrame((function(){e=null,kk.call(n)})))},this.isDirty=!1}function Sk(t,e){var n=t._selectedCoordinates.filter((function(e){return t._selectedFeatureIds.has(e.feature_id)}));t._selectedCoordinates.length===n.length||e.silent||(t._emitSelectionChange=!0),t._selectedCoordinates=n}Ek.prototype.createRenderBatch=function(){var t=this,e=this.render,n=0;return this.render=function(){n++},function(){t.render=e,n>0&&t.render()}},Ek.prototype.setDirty=function(){return this.isDirty=!0,this},Ek.prototype.featureChanged=function(t){return this._changedFeatureIds.add(t),this},Ek.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Ek.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Ek.prototype.getAllIds=function(){return this._featureIds.values()},Ek.prototype.add=function(t){return this.featureChanged(t.id),this._features[t.id]=t,this._featureIds.add(t.id),this},Ek.prototype.delete=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ck(t).forEach((function(t){e._featureIds.has(t)&&(e._featureIds.delete(t),e._selectedFeatureIds.delete(t),n.silent||-1===e._deletedFeaturesToEmit.indexOf(e._features[t])&&e._deletedFeaturesToEmit.push(e._features[t]),delete e._features[t],e.isDirty=!0)})),Sk(this,n),this},Ek.prototype.get=function(t){return this._features[t]},Ek.prototype.getAll=function(){var t=this;return Object.keys(this._features).map((function(e){return t._features[e]}))},Ek.prototype.select=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ck(t).forEach((function(t){e._selectedFeatureIds.has(t)||(e._selectedFeatureIds.add(t),e._changedFeatureIds.add(t),n.silent||(e._emitSelectionChange=!0))})),this},Ek.prototype.deselect=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ck(t).forEach((function(t){e._selectedFeatureIds.has(t)&&(e._selectedFeatureIds.delete(t),e._changedFeatureIds.add(t),n.silent||(e._emitSelectionChange=!0))})),Sk(this,n),this},Ek.prototype.clearSelected=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.deselect(this._selectedFeatureIds.values(),{silent:t.silent}),this},Ek.prototype.setSelected=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=Ck(t),this.deselect(this._selectedFeatureIds.values().filter((function(e){return-1===t.indexOf(e)})),{silent:n.silent}),this.select(t.filter((function(t){return!e._selectedFeatureIds.has(t)})),{silent:n.silent}),this},Ek.prototype.setSelectedCoordinates=function(t){return this._selectedCoordinates=t,this._emitSelectionChange=!0,this},Ek.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Ek.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Ek.prototype.getSelected=function(){var t=this;return this._selectedFeatureIds.values().map((function(e){return t.get(e)}))},Ek.prototype.getSelectedCoordinates=function(){var t=this;return this._selectedCoordinates.map((function(e){return{coordinates:t.get(e.feature_id).getCoordinate(e.coord_path)}}))},Ek.prototype.isSelected=function(t){return this._selectedFeatureIds.has(t)},Ek.prototype.setFeatureProperty=function(t,e,n){this.get(t).setProperty(e,n),this.featureChanged(t)},Ek.prototype.storeMapConfig=function(){var t=this;UC.forEach((function(e){t.ctx.map[e]&&(t._mapInitialConfig[e]=t.ctx.map[e].isEnabled())}))},Ek.prototype.restoreMapConfig=function(){var t=this;Object.keys(this._mapInitialConfig).forEach((function(e){t._mapInitialConfig[e]?t.ctx.map[e].enable():t.ctx.map[e].disable()}))},Ek.prototype.getInitialConfigValue=function(t){return void 0===this._mapInitialConfig[t]||this._mapInitialConfig[t]};var Ik=n("U6jy"),Tk=n.n(Ik),Pk=["mode","feature","mouse"];function Ak(t){return function(e){var n=e.featureTarget;return!!n&&!!n.properties&&n.properties.meta===t}}function Lk(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.active===VC.ACTIVE&&t.featureTarget.properties.meta===BC.FEATURE}function Mk(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.active===VC.INACTIVE&&t.featureTarget.properties.meta===BC.FEATURE}function Rk(t){return void 0===t.featureTarget}function Ok(t){var e=t.featureTarget;return!!e&&!!e.properties&&e.properties.meta===BC.VERTEX}function Dk(t){return!!t.originalEvent&&!0===t.originalEvent.shiftKey}function Nk(t){return 27===t.keyCode}function Fk(t){return 13===t.keyCode}var zk=n("xnQO"),Bk=n.n(zk),Vk=function(t,e){var n=e.getBoundingClientRect();return new Bk.a(t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0))},Uk=function(t,e,n,i){return{type:DC.FEATURE,properties:{meta:BC.VERTEX,parent:t,coord_path:n,active:i?VC.ACTIVE:VC.INACTIVE},geometry:{type:DC.POINT,coordinates:e}}},jk=function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=e.geometry,a=o.type,s=o.coordinates,l=e.properties&&e.properties.id,u=[];function c(t,e){var n="",r=null;t.forEach((function(t,o){var a=null!=e?"".concat(e,".").concat(o):String(o),s=Uk(l,t,a,h(a));if(i.midpoints&&r){var c=function(t,e,n,i){var r=e.geometry.coordinates,o=n.geometry.coordinates;if(r[1]>HC||r[1]<qC||o[1]>HC||o[1]<qC)return null;var a=i.project([r[0],r[1]]),s=i.project([o[0],o[1]]),l=i.unproject([(a.x+s.x)/2,(a.y+s.y)/2]);return{type:DC.FEATURE,properties:{meta:BC.MIDPOINT,parent:t,lng:l.lng,lat:l.lat,coord_path:n.properties.coord_path},geometry:{type:DC.POINT,coordinates:[l.lng,l.lat]}}}(l,r,s,i.map);c&&u.push(c)}r=s;var p=JSON.stringify(t);n!==p&&u.push(s),0===o&&(n=p)}))}function h(t){return!!i.selectedPaths&&-1!==i.selectedPaths.indexOf(t)}return a===DC.POINT?u.push(Uk(l,s,r,h(r))):a===DC.POLYGON?s.forEach((function(t,e){c(t,null!==r?"".concat(r,".").concat(e):String(e))})):a===DC.LINE_STRING?c(s,r):0===a.indexOf(DC.MULTI_PREFIX)&&(n=a.replace(DC.MULTI_PREFIX,""),s.forEach((function(r,o){u=u.concat(t({type:DC.FEATURE,properties:e.properties,geometry:{type:n,coordinates:r}},i,o))}))),u},qk=function(t){setTimeout((function(){t.map&&t.map.doubleClickZoom&&t._ctx&&t._ctx.store&&t._ctx.store.getInitialConfigValue&&t._ctx.store.getInitialConfigValue("doubleClickZoom")&&t.map.doubleClickZoom.enable()}),0)},Gk=function(t){setTimeout((function(){t.map&&t.map.doubleClickZoom&&t.map.doubleClickZoom.disable()}),0)},Hk=n("KVSD"),Xk=n.n(Hk),Zk=i.LAT_MIN,Wk=i.LAT_MAX,Yk=i.LAT_RENDERED_MIN,Kk=i.LAT_RENDERED_MAX,Jk=i.LNG_MIN,Qk=i.LNG_MAX,$k=function(t,e){var n=Zk,i=Wk,r=Zk,o=Wk,a=Qk,s=Jk;t.forEach((function(t){var e=Xk()(t),l=e[1],u=e[3],c=e[0],h=e[2];l>n&&(n=l),u<i&&(i=u),u>r&&(r=u),l<o&&(o=l),c<a&&(a=c),h>s&&(s=h)}));var l=e;return n+l.lat>Kk&&(l.lat=Kk-n),r+l.lat>Wk&&(l.lat=Wk-r),i+l.lat<Yk&&(l.lat=Yk-i),o+l.lat<Zk&&(l.lat=Zk-o),a+l.lng<=Jk&&(l.lng+=360*Math.ceil(Math.abs(l.lng)/360)),s+l.lng>=Qk&&(l.lng-=360*Math.ceil(Math.abs(l.lng)/360)),l},tE=function(t,e){var n=$k(t.map((function(t){return t.toGeoJSON()})),e);t.forEach((function(t){var e,i=t.getCoordinates(),r=function(t){var e={lng:t[0]+n.lng,lat:t[1]+n.lat};return[e.lng,e.lat]},o=function(t){return t.map((function(t){return r(t)}))};t.type===DC.POINT?e=r(i):t.type===DC.LINE_STRING||t.type===DC.MULTI_POINT?e=i.map(r):t.type===DC.POLYGON||t.type===DC.MULTI_LINE_STRING?e=i.map(o):t.type===DC.MULTI_POLYGON&&(e=i.map((function(t){return t.map((function(t){return o(t)}))}))),t.incomingCoords(e)}))},eE={onSetup:function(t){var e=this,n={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:t.featureIds||[]};return this.setSelected(n.initiallySelectedFeatureIds.filter((function(t){return void 0!==e.getFeature(t)}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),n},fireUpdate:function(){this.map.fire(FC.UPDATE,{action:zC.MOVE,features:this.getSelected().map((function(t){return t.toGeoJSON()}))})},fireActionable:function(){var t=this,e=this.getSelected(),n=e.filter((function(e){return t.isInstanceOf("MultiFeature",e)})),i=!1;if(e.length>1){i=!0;var r=e[0].type.replace("Multi","");e.forEach((function(t){t.type.replace("Multi","")!==r&&(i=!1)}))}this.setActionableState({combineFeatures:i,uncombineFeatures:n.length>0,trash:e.length>0})},getUniqueIds:function(t){return t.length?t.map((function(t){return t.properties.id})).filter((function(t){return void 0!==t})).reduce((function(t,e){return t.add(e),t}),new JC).values():[]},stopExtendedInteractions:function(t){t.boxSelectElement&&(t.boxSelectElement.parentNode&&t.boxSelectElement.parentNode.removeChild(t.boxSelectElement),t.boxSelectElement=null),this.map.dragPan.enable(),t.boxSelecting=!1,t.canBoxSelect=!1,t.dragMoving=!1,t.canDragMove=!1},onStop:function(){qk(this)},onMouseMove:function(t){return this.stopExtendedInteractions(t)},onMouseOut:function(t){if(t.dragMoving)return this.fireUpdate()}};eE.onTap=eE.onClick=function(t,e){return Rk(e)?this.clickAnywhere(t,e):Ak(BC.VERTEX)(e)?this.clickOnVertex(t,e):function(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.meta===BC.FEATURE}(e)?this.clickOnFeature(t,e):void 0},eE.clickAnywhere=function(t){var e=this,n=this.getSelectedIds();n.length&&(this.clearSelectedFeatures(),n.forEach((function(t){return e.doRender(t)}))),qk(this),this.stopExtendedInteractions(t)},eE.clickOnVertex=function(t,e){this.changeMode(NC.DIRECT_SELECT,{featureId:e.featureTarget.properties.parent,coordPath:e.featureTarget.properties.coord_path,startPos:e.lngLat}),this.updateUIClasses({mouse:RC.MOVE})},eE.startOnActiveFeature=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),this.doRender(e.featureTarget.properties.id),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},eE.clickOnFeature=function(t,e){var n=this;Gk(this),this.stopExtendedInteractions(t);var i=Dk(e),r=this.getSelectedIds(),o=e.featureTarget.properties.id,a=this.isSelected(o);if(!i&&a&&this.getFeature(o).type!==DC.POINT)return this.changeMode(NC.DIRECT_SELECT,{featureId:o});a&&i?(this.deselect(o),this.updateUIClasses({mouse:RC.POINTER}),1===r.length&&qk(this)):!a&&i?(this.select(o),this.updateUIClasses({mouse:RC.MOVE})):a||i||(r.forEach((function(t){return n.doRender(t)})),this.setSelected(o),this.updateUIClasses({mouse:RC.MOVE})),this.doRender(o)},eE.onMouseDown=function(t,e){return Lk(e)?this.startOnActiveFeature(t,e):this.drawConfig.boxSelect&&function(t){return!!t.originalEvent&&!!t.originalEvent.shiftKey&&0===t.originalEvent.button}(e)?this.startBoxSelect(t,e):void 0},eE.startBoxSelect=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),t.boxSelectStartLocation=Vk(e.originalEvent,this.map.getContainer()),t.canBoxSelect=!0},eE.onTouchStart=function(t,e){if(Lk(e))return this.startOnActiveFeature(t,e)},eE.onDrag=function(t,e){return t.canDragMove?this.dragMove(t,e):this.drawConfig.boxSelect&&t.canBoxSelect?this.whileBoxSelect(t,e):void 0},eE.whileBoxSelect=function(t,e){t.boxSelecting=!0,this.updateUIClasses({mouse:RC.ADD}),t.boxSelectElement||(t.boxSelectElement=document.createElement("div"),t.boxSelectElement.classList.add(LC.BOX_SELECT),this.map.getContainer().appendChild(t.boxSelectElement));var n=Vk(e.originalEvent,this.map.getContainer()),i=Math.min(t.boxSelectStartLocation.x,n.x),r=Math.max(t.boxSelectStartLocation.x,n.x),o=Math.min(t.boxSelectStartLocation.y,n.y),a=Math.max(t.boxSelectStartLocation.y,n.y),s="translate(".concat(i,"px, ").concat(o,"px)");t.boxSelectElement.style.transform=s,t.boxSelectElement.style.WebkitTransform=s,t.boxSelectElement.style.width=r-i+"px",t.boxSelectElement.style.height=a-o+"px"},eE.dragMove=function(t,e){t.dragMoving=!0,e.originalEvent.stopPropagation();var n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};tE(this.getSelected(),n),t.dragMoveLocation=e.lngLat},eE.onMouseUp=function(t,e){var n=this;if(t.dragMoving)this.fireUpdate();else if(t.boxSelecting){var i=[t.boxSelectStartLocation,Vk(e.originalEvent,this.map.getContainer())],r=this.featuresAt(null,i,"click"),o=this.getUniqueIds(r).filter((function(t){return!n.isSelected(t)}));o.length&&(this.select(o),o.forEach((function(t){return n.doRender(t)})),this.updateUIClasses({mouse:RC.MOVE}))}this.stopExtendedInteractions(t)},eE.toDisplayFeatures=function(t,e,n){e.properties.active=this.isSelected(e.properties.id)?VC.ACTIVE:VC.INACTIVE,n(e),this.fireActionable(),e.properties.active===VC.ACTIVE&&e.geometry.type!==DC.POINT&&jk(e).forEach(n)},eE.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},eE.onCombineFeatures=function(){var t=this.getSelected();if(!(0===t.length||t.length<2)){for(var e=[],n=[],i=t[0].type.replace("Multi",""),r=0;r<t.length;r++){var o=t[r];if(o.type.replace("Multi","")!==i)return;o.type.includes("Multi")?o.getCoordinates().forEach((function(t){e.push(t)})):e.push(o.getCoordinates()),n.push(o.toGeoJSON())}if(n.length>1){var a=this.newFeature({type:DC.FEATURE,properties:n[0].properties,geometry:{type:"Multi"+i,coordinates:e}});this.addFeature(a),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([a.id]),this.map.fire(FC.COMBINE_FEATURES,{createdFeatures:[a.toGeoJSON()],deletedFeatures:n})}this.fireActionable()}},eE.onUncombineFeatures=function(){var t=this,e=this.getSelected();if(0!==e.length){for(var n=[],i=[],r=function(r){var o=e[r];t.isInstanceOf("MultiFeature",o)&&(o.getFeatures().forEach((function(e){t.addFeature(e),e.properties=o.properties,n.push(e.toGeoJSON()),t.select([e.id])})),t.deleteFeature(o.id,{silent:!0}),i.push(o.toGeoJSON()))},o=0;o<e.length;o++)r(o);n.length>1&&this.map.fire(FC.UNCOMBINE_FEATURES,{createdFeatures:n,deletedFeatures:i}),this.fireActionable()}};var nE=eE,iE=Ak(BC.VERTEX),rE=Ak(BC.MIDPOINT),oE={fireUpdate:function(){this.map.fire(FC.UPDATE,{action:zC.CHANGE_COORDINATES,features:this.getSelected().map((function(t){return t.toGeoJSON()}))})},fireActionable:function(t){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:t.selectedCoordPaths.length>0})},startDragging:function(t,e){this.map.dragPan.disable(),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},stopDragging:function(t){this.map.dragPan.enable(),t.dragMoving=!1,t.canDragMove=!1,t.dragMoveLocation=null},onVertex:function(t,e){this.startDragging(t,e);var n=e.featureTarget.properties,i=t.selectedCoordPaths.indexOf(n.coord_path);Dk(e)||-1!==i?Dk(e)&&-1===i&&t.selectedCoordPaths.push(n.coord_path):t.selectedCoordPaths=[n.coord_path];var r=this.pathsToCoordinates(t.featureId,t.selectedCoordPaths);this.setSelectedCoordinates(r)},onMidpoint:function(t,e){this.startDragging(t,e);var n=e.featureTarget.properties;t.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),t.selectedCoordPaths=[n.coord_path]},pathsToCoordinates:function(t,e){return e.map((function(e){return{feature_id:t,coord_path:e}}))},onFeature:function(t,e){0===t.selectedCoordPaths.length?this.startDragging(t,e):this.stopDragging(t)},dragFeature:function(t,e,n){tE(this.getSelected(),n),t.dragMoveLocation=e.lngLat},dragVertex:function(t,e,n){for(var i=t.selectedCoordPaths.map((function(e){return t.feature.getCoordinate(e)})),r=i.map((function(t){return{type:DC.FEATURE,properties:{},geometry:{type:DC.POINT,coordinates:t}}})),o=$k(r,n),a=0;a<i.length;a++){var s=i[a];t.feature.updateCoordinate(t.selectedCoordPaths[a],s[0]+o.lng,s[1]+o.lat)}},clickNoTarget:function(){this.changeMode(NC.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(NC.SIMPLE_SELECT)},clickActiveFeature:function(t){t.selectedCoordPaths=[],this.clearSelectedCoordinates(),t.feature.changed()},onSetup:function(t){var e=t.featureId,n=this.getFeature(e);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===DC.POINT)throw new TypeError("direct_select mode doesn't handle point features");var i={featureId:e,feature:n,dragMoveLocation:t.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:t.coordPath?[t.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(e,i.selectedCoordPaths)),this.setSelected(e),Gk(this),this.setActionableState({trash:!0}),i},onStop:function(){qk(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(t,e,n){t.featureId===e.properties.id?(e.properties.active=VC.ACTIVE,n(e),jk(e,{map:this.map,midpoints:!0,selectedPaths:t.selectedCoordPaths}).forEach(n)):(e.properties.active=VC.INACTIVE,n(e)),this.fireActionable(t)},onTrash:function(t){t.selectedCoordPaths.sort((function(t,e){return e.localeCompare(t,"en",{numeric:!0})})).forEach((function(e){return t.feature.removeCoordinate(e)})),this.fireUpdate(),t.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(t),!1===t.feature.isValid()&&(this.deleteFeature([t.featureId]),this.changeMode(NC.SIMPLE_SELECT,{}))},onMouseMove:function(t,e){var n=Lk(e),i=iE(e),r=0===t.selectedCoordPaths.length;this.updateUIClasses(n&&r||i&&!r?{mouse:RC.MOVE}:{mouse:RC.NONE}),this.stopDragging(t)},onMouseOut:function(t){t.dragMoving&&this.fireUpdate()}};oE.onTouchStart=oE.onMouseDown=function(t,e){return iE(e)?this.onVertex(t,e):Lk(e)?this.onFeature(t,e):rE(e)?this.onMidpoint(t,e):void 0},oE.onDrag=function(t,e){if(!0===t.canDragMove){t.dragMoving=!0,e.originalEvent.stopPropagation();var n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};t.selectedCoordPaths.length>0?this.dragVertex(t,e,n):this.dragFeature(t,e,n),t.dragMoveLocation=e.lngLat}},oE.onClick=function(t,e){return Rk(e)?this.clickNoTarget(t,e):Lk(e)?this.clickActiveFeature(t,e):Mk(e)?this.clickInactive(t,e):void this.stopDragging(t)},oE.onTap=function(t,e){return Rk(e)?this.clickNoTarget(t,e):Lk(e)?this.clickActiveFeature(t,e):Mk(e)?this.clickInactive(t,e):void 0},oE.onTouchEnd=oE.onMouseUp=function(t){t.dragMoving&&this.fireUpdate(),this.stopDragging(t)};var aE=oE,sE={onSetup:function(){var t=this.newFeature({type:DC.FEATURE,properties:{},geometry:{type:DC.POINT,coordinates:[]}});return this.addFeature(t),this.clearSelectedFeatures(),this.updateUIClasses({mouse:RC.ADD}),this.activateUIButton(OC.POINT),this.setActionableState({trash:!0}),{point:t}},stopDrawingAndRemove:function(t){this.deleteFeature([t.point.id],{silent:!0}),this.changeMode(NC.SIMPLE_SELECT)}};sE.onTap=sE.onClick=function(t,e){this.updateUIClasses({mouse:RC.MOVE}),t.point.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),this.map.fire(FC.CREATE,{features:[t.point.toGeoJSON()]}),this.changeMode(NC.SIMPLE_SELECT,{featureIds:[t.point.id]})},sE.onStop=function(t){this.activateUIButton(),t.point.getCoordinate().length||this.deleteFeature([t.point.id],{silent:!0})},sE.toDisplayFeatures=function(t,e,n){var i=e.properties.id===t.point.id;if(e.properties.active=i?VC.ACTIVE:VC.INACTIVE,!i)return n(e)},sE.onTrash=sE.stopDrawingAndRemove,sE.onKeyUp=function(t,e){if(Nk(e)||Fk(e))return this.stopDrawingAndRemove(t,e)};var lE=sE,uE=function(t,e){return!!t.lngLat&&t.lngLat.lng===e[0]&&t.lngLat.lat===e[1]},cE={onSetup:function(){var t=this.newFeature({type:DC.FEATURE,properties:{},geometry:{type:DC.POLYGON,coordinates:[[]]}});return this.addFeature(t),this.clearSelectedFeatures(),Gk(this),this.updateUIClasses({mouse:RC.ADD}),this.activateUIButton(OC.POLYGON),this.setActionableState({trash:!0}),{polygon:t,currentVertexPosition:0}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&uE(e,t.polygon.coordinates[0][t.currentVertexPosition-1]))return this.changeMode(NC.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:RC.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++,t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(NC.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},onMouseMove:function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),Ok(e)&&this.updateUIClasses({mouse:RC.POINTER})}};cE.onTap=cE.onClick=function(t,e){return Ok(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},cE.onKeyUp=function(t,e){Nk(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(NC.SIMPLE_SELECT)):Fk(e)&&this.changeMode(NC.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},cE.onStop=function(t){this.updateUIClasses({mouse:RC.NONE}),qk(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.removeCoordinate("0."+t.currentVertexPosition),t.polygon.isValid()?this.map.fire(FC.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(NC.SIMPLE_SELECT,{},{silent:!0})))},cE.toDisplayFeatures=function(t,e,n){var i=e.properties.id===t.polygon.id;if(e.properties.active=i?VC.ACTIVE:VC.INACTIVE,!i)return n(e);if(0!==e.geometry.coordinates.length){var r=e.geometry.coordinates[0].length;if(!(r<3)){if(e.properties.meta=BC.FEATURE,n(Uk(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),r>3){var o=e.geometry.coordinates[0].length-3;n(Uk(t.polygon.id,e.geometry.coordinates[0][o],"0."+o,!1))}if(r<=4&&(n({type:DC.FEATURE,properties:e.properties,geometry:{coordinates:[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]],type:DC.LINE_STRING}}),3===r))return;return n(e)}}},cE.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(NC.SIMPLE_SELECT)};var hE=cE,pE={onSetup:function(t){var e,n,i=(t=t||{}).featureId,r="forward";if(i){var o;if(!(e=this.getFeature(i)))throw new Error("Could not find a feature with the provided featureId");var a=t.from;if(a&&"Feature"===a.type&&a.geometry&&"Point"===a.geometry.type&&(a=a.geometry),a&&"Point"===a.type&&a.coordinates&&2===a.coordinates.length&&(a=a.coordinates),!a||!Array.isArray(a))throw new Error("Please use the `from` property to indicate which point to continue the line from");var s=e.coordinates.length-1;if(e.coordinates[s][0]===a[0]&&e.coordinates[s][1]===a[1])n=s+1,(o=e).addCoordinate.apply(o,[n].concat(_toConsumableArray(e.coordinates[s])));else{var l;if(e.coordinates[0][0]!==a[0]||e.coordinates[0][1]!==a[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");r="backwards",n=0,(l=e).addCoordinate.apply(l,[n].concat(_toConsumableArray(e.coordinates[0])))}}else e=this.newFeature({type:DC.FEATURE,properties:{},geometry:{type:DC.LINE_STRING,coordinates:[]}}),n=0,this.addFeature(e);return this.clearSelectedFeatures(),Gk(this),this.updateUIClasses({mouse:RC.ADD}),this.activateUIButton(OC.LINE),this.setActionableState({trash:!0}),{line:e,currentVertexPosition:n,direction:r}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&uE(e,t.line.coordinates[t.currentVertexPosition-1])||"backwards"===t.direction&&uE(e,t.line.coordinates[t.currentVertexPosition+1]))return this.changeMode(NC.SIMPLE_SELECT,{featureIds:[t.line.id]});this.updateUIClasses({mouse:RC.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),"forward"===t.direction?(t.currentVertexPosition++,t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)):t.line.addCoordinate(0,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(NC.SIMPLE_SELECT,{featureIds:[t.line.id]})},onMouseMove:function(t,e){t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),Ok(e)&&this.updateUIClasses({mouse:RC.POINTER})}};pE.onTap=pE.onClick=function(t,e){if(Ok(e))return this.clickOnVertex(t,e);this.clickAnywhere(t,e)},pE.onKeyUp=function(t,e){Fk(e)?this.changeMode(NC.SIMPLE_SELECT,{featureIds:[t.line.id]}):Nk(e)&&(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(NC.SIMPLE_SELECT))},pE.onStop=function(t){qk(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.removeCoordinate(""+t.currentVertexPosition),t.line.isValid()?this.map.fire(FC.CREATE,{features:[t.line.toGeoJSON()]}):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(NC.SIMPLE_SELECT,{},{silent:!0})))},pE.onTrash=function(t){this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(NC.SIMPLE_SELECT)},pE.toDisplayFeatures=function(t,e,n){var i=e.properties.id===t.line.id;if(e.properties.active=i?VC.ACTIVE:VC.INACTIVE,!i)return n(e);e.geometry.coordinates.length<2||(e.properties.meta=BC.FEATURE,n(Uk(t.line.id,e.geometry.coordinates["forward"===t.direction?e.geometry.coordinates.length-2:1],""+("forward"===t.direction?e.geometry.coordinates.length-2:1),!1)),n(e))};var fE={simple_select:nE,direct_select:aE,draw_point:lE,draw_polygon:hE,draw_line_string:pE},dE={defaultMode:NC.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}],modes:fE,controls:{},userProperties:!1},mE={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},gE={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function yE(t,e){return t.map((function(t){return t.source?t:Tk()(t,{id:"".concat(t.id,".").concat(e),source:"hot"===e?MC.HOT:MC.COLD})}))}var vE=n("XaGS"),_E=n.n(vE),bE=n("lJFB"),xE=n.n(bE),wE=n("qKyw"),CE=n.n(wE),kE={Polygon:dk,LineString:pk,Point:ck,MultiPolygon:vk,MultiLineString:vk,MultiPoint:vk};function EE(t){!function(t,e){var n={options:t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Tk()(t);return t.controls||(e.controls={}),e.controls=!1===t.displayControlsDefault?Tk()(gE,t.controls):Tk()(mE,t.controls),(e=Tk()(dE,e)).styles=yE(e.styles,"cold").concat(yE(e.styles,"hot")),e}(t)};e=function(t,e){return e.modes=NC,e.getFeatureIdsAt=function(e){return $C.click({point:e},null,t).map((function(t){return t.properties.id}))},e.getSelectedIds=function(){return t.store.getSelectedIds()},e.getSelected=function(){return{type:DC.FEATURE_COLLECTION,features:t.store.getSelectedIds().map((function(e){return t.store.get(e)})).map((function(t){return t.toGeoJSON()}))}},e.getSelectedPoints=function(){return{type:DC.FEATURE_COLLECTION,features:t.store.getSelectedCoordinates().map((function(t){return{type:DC.FEATURE,properties:{},geometry:{type:DC.POINT,coordinates:t.coordinates}}}))}},e.set=function(n){if(void 0===n.type||n.type!==DC.FEATURE_COLLECTION||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");var i=t.store.createRenderBatch(),r=t.store.getAllIds().slice(),o=e.add(n),a=new JC(o);return(r=r.filter((function(t){return!a.has(t)}))).length&&e.delete(r),i(),o},e.add=function(e){var n=CE.a.hint(e,{precisionWarning:!1}).filter((function(t){return"message"!==t.level}));if(n.length)throw new Error(n[0].message);var i=JSON.parse(JSON.stringify(xE()(e))).features.map((function(e){if(e.id=e.id||ak()(),null===e.geometry)throw new Error("Invalid geometry: null");if(void 0===t.store.get(e.id)||t.store.get(e.id).type!==e.geometry.type){var n=kE[e.geometry.type];if(void 0===n)throw new Error("Invalid geometry type: ".concat(e.geometry.type,"."));var i=new n(t,e);t.store.add(i)}else{var r=t.store.get(e.id);r.properties=e.properties,_E()(r.getCoordinates(),e.geometry.coordinates)||r.incomingCoords(e.geometry.coordinates)}return e.id}));return t.store.render(),i},e.get=function(e){var n=t.store.get(e);if(n)return n.toGeoJSON()},e.getAll=function(){return{type:DC.FEATURE_COLLECTION,features:t.store.getAll().map((function(t){return t.toGeoJSON()}))}},e.delete=function(n){return t.store.delete(n,{silent:!0}),e.getMode()!==NC.DIRECT_SELECT||t.store.getSelectedIds().length?t.store.render():t.events.changeMode(NC.SIMPLE_SELECT,void 0,{silent:!0}),e},e.deleteAll=function(){return t.store.delete(t.store.getAllIds(),{silent:!0}),e.getMode()===NC.DIRECT_SELECT?t.events.changeMode(NC.SIMPLE_SELECT,void 0,{silent:!0}):t.store.render(),e},e.changeMode=function(n){var i,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n===NC.SIMPLE_SELECT&&e.getMode()===NC.SIMPLE_SELECT?(i=o.featureIds||[],r=t.store.getSelectedIds(),i.length===r.length&&JSON.stringify(i.map((function(t){return t})).sort())===JSON.stringify(r.map((function(t){return t})).sort())||(t.store.setSelected(o.featureIds,{silent:!0}),t.store.render()),e):(n===NC.DIRECT_SELECT&&e.getMode()===NC.DIRECT_SELECT&&o.featureId===t.store.getSelectedIds()[0]||t.events.changeMode(n,o,{silent:!0}),e)},e.getMode=function(){return t.events.getMode()},e.trash=function(){return t.events.trash({silent:!0}),e},e.combineFeatures=function(){return t.events.combineFeatures({silent:!0}),e},e.uncombineFeatures=function(){return t.events.uncombineFeatures({silent:!0}),e},e.setFeatureProperty=function(n,i,r){return t.store.setFeatureProperty(n,i,r),e},e}(n,e),n.api=e;var i=function(t){var e=null,n=null,i={onRemove:function(){return t.map.off("load",i.connect),clearInterval(n),i.removeLayers(),t.store.restoreMapConfig(),t.ui.removeButtons(),t.events.removeEventListeners(),t.ui.clearMapClasses(),t.map=null,t.container=null,t.store=null,e&&e.parentNode&&e.parentNode.removeChild(e),e=null,this},connect:function(){t.map.off("load",i.connect),clearInterval(n),i.addLayers(),t.store.storeMapConfig(),t.events.addEventListeners()},onAdd:function(r){var o=r.fire;return r.fire=function(t,e){var n=arguments;return 1===o.length&&1!==arguments.length&&(n=[Tk()({},{type:t},e)]),o.apply(r,n)},t.map=r,t.events=function(t){var e=Object.keys(t.options.modes).reduce((function(e,n){return e[n]=(i=t.options.modes[n],r=Object.keys(i),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},o=r.reduce((function(t,e){return t[e]=i[e],t}),new bk(t));return{start:function(){var t=this;n=o.onSetup(e),wk.forEach((function(e){var r,a=xk[e],s=function(){return!1};i[a]&&(s=function(){return!0}),t.on(e,s,(r=a,function(t){o[r](n,t)}))}))},stop:function(){o.onStop(n)},trash:function(){o.onTrash(n)},combineFeatures:function(){o.onCombineFeatures(n)},uncombineFeatures:function(){o.onUncombineFeatures(n)},render:function(t,e){o.toDisplayFeatures(n,t,e)}}}),e;var i,r}),{}),n={},i={},r={},o=null,a=null;r.drag=function(e,n){n({point:e.point,time:(new Date).getTime()})?(t.ui.queueMapClasses({mouse:RC.DRAG}),a.drag(e)):e.originalEvent.stopPropagation()},r.mousedrag=function(t){r.drag(t,(function(t){return!ik(n,t)}))},r.touchdrag=function(t){r.drag(t,(function(t){return!rk(i,t)}))},r.mousemove=function(e){if(1===(void 0!==e.originalEvent.buttons?e.originalEvent.buttons:e.originalEvent.which))return r.mousedrag(e);var n=ek(e,t);e.featureTarget=n,a.mousemove(e)},r.mousedown=function(e){n={time:(new Date).getTime(),point:e.point};var i=ek(e,t);e.featureTarget=i,a.mousedown(e)},r.mouseup=function(e){var i=ek(e,t);e.featureTarget=i,ik(n,{point:e.point,time:(new Date).getTime()})?a.click(e):a.mouseup(e)},r.mouseout=function(t){a.mouseout(t)},r.touchstart=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled){i={time:(new Date).getTime(),point:e.point};var n=$C.touch(e,null,t)[0];e.featureTarget=n,a.touchstart(e)}},r.touchmove=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled)return a.touchmove(e),r.touchdrag(e)},r.touchend=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled){var n=$C.touch(e,null,t)[0];e.featureTarget=n,rk(i,{time:(new Date).getTime(),point:e.point})?a.tap(e):a.touchend(e)}};var s=function(t){return!(8===t||46===t||t>=48&&t<=57)};function l(n,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a.stop();var s=e[n];if(void 0===s)throw new Error(n+" is not valid");o=n;var l=s(t,i);a=TC(l,t),r.silent||t.map.fire(FC.MODE_CHANGE,{mode:n}),t.store.setDirty(),t.store.render()}r.keydown=function(e){"mapboxgl-canvas"===(e.srcElement||e.target).classList[0]&&(8!==e.keyCode&&46!==e.keyCode||!t.options.controls.trash?s(e.keyCode)?a.keydown(e):49===e.keyCode&&t.options.controls.point?l(NC.DRAW_POINT):50===e.keyCode&&t.options.controls.line_string?l(NC.DRAW_LINE_STRING):51===e.keyCode&&t.options.controls.polygon&&l(NC.DRAW_POLYGON):(e.preventDefault(),a.trash()))},r.keyup=function(t){s(t.keyCode)&&a.keyup(t)},r.zoomend=function(){t.store.changeZoom()},r.data=function(e){if("style"===e.dataType){var n=t.setup,i=t.map,r=t.options,o=t.store;r.styles.some((function(t){return i.getLayer(t.id)}))||(n.addLayers(),o.setDirty(),o.render())}};var u={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){o=t.options.defaultMode,a=TC(e[o](t),t)},changeMode:l,actionable:function(e){var n=!1;Object.keys(e).forEach((function(t){if(void 0===u[t])throw new Error("Invalid action type");u[t]!==e[t]&&(n=!0),u[t]=e[t]})),n&&t.map.fire(FC.ACTIONABLE,{actions:u})},currentModeName:function(){return o},currentModeRender:function(t,e){return a.render(t,e)},fire:function(t,e){r[t]&&r[t](e)},addEventListeners:function(){t.map.on("mousemove",r.mousemove),t.map.on("mousedown",r.mousedown),t.map.on("mouseup",r.mouseup),t.map.on("data",r.data),t.map.on("touchmove",r.touchmove),t.map.on("touchstart",r.touchstart),t.map.on("touchend",r.touchend),t.container.addEventListener("mouseout",r.mouseout),t.options.keybindings&&(t.container.addEventListener("keydown",r.keydown),t.container.addEventListener("keyup",r.keyup))},removeEventListeners:function(){t.map.off("mousemove",r.mousemove),t.map.off("mousedown",r.mousedown),t.map.off("mouseup",r.mouseup),t.map.off("data",r.data),t.map.off("touchmove",r.touchmove),t.map.off("touchstart",r.touchstart),t.map.off("touchend",r.touchend),t.container.removeEventListener("mouseout",r.mouseout),t.options.keybindings&&(t.container.removeEventListener("keydown",r.keydown),t.container.removeEventListener("keyup",r.keyup))},trash:function(t){a.trash(t)},combineFeatures:function(){a.combineFeatures()},uncombineFeatures:function(){a.uncombineFeatures()},getMode:function(){return o}}}(t),t.ui=function(t){var e={},n=null,i={mode:null,feature:null,mouse:null},r={mode:null,feature:null,mouse:null};function o(t){r=Tk()(r,t)}function a(){var e,n;if(t.container){var o=[],a=[];Pk.forEach((function(t){r[t]!==i[t]&&(o.push("".concat(t,"-").concat(i[t])),null!==r[t]&&a.push("".concat(t,"-").concat(r[t])))})),o.length>0&&(e=t.container.classList).remove.apply(e,o),a.length>0&&(n=t.container.classList).add.apply(n,a),i=Tk()(i,r)}}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=document.createElement("button");return i.className="".concat(LC.CONTROL_BUTTON," ").concat(e.className),i.setAttribute("title",e.title),e.container.appendChild(i),i.addEventListener("click",(function(i){if(i.preventDefault(),i.stopPropagation(),i.target===n)return l(),void e.onDeactivate();u(t),e.onActivate()}),!0),i}function l(){n&&(n.classList.remove(LC.ACTIVE_BUTTON),n=null)}function u(t){l();var i=e[t];i&&i&&"trash"!==t&&(i.classList.add(LC.ACTIVE_BUTTON),n=i)}return{setActiveButton:u,queueMapClasses:o,updateMapClasses:a,clearMapClasses:function(){o({mode:null,feature:null,mouse:null}),a()},addButtons:function(){var n=t.options.controls,i=document.createElement("div");return i.className="".concat(LC.CONTROL_GROUP," ").concat(LC.CONTROL_BASE),n?(n[OC.LINE]&&(e[OC.LINE]=s(OC.LINE,{container:i,className:LC.CONTROL_BUTTON_LINE,title:"LineString tool "+(t.options.keybindings?"(l)":""),onActivate:function(){return t.events.changeMode(NC.DRAW_LINE_STRING)},onDeactivate:function(){return t.events.trash()}})),n[OC.POLYGON]&&(e[OC.POLYGON]=s(OC.POLYGON,{container:i,className:LC.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(t.options.keybindings?"(p)":""),onActivate:function(){return t.events.changeMode(NC.DRAW_POLYGON)},onDeactivate:function(){return t.events.trash()}})),n[OC.POINT]&&(e[OC.POINT]=s(OC.POINT,{container:i,className:LC.CONTROL_BUTTON_POINT,title:"Marker tool "+(t.options.keybindings?"(m)":""),onActivate:function(){return t.events.changeMode(NC.DRAW_POINT)},onDeactivate:function(){return t.events.trash()}})),n.trash&&(e.trash=s("trash",{container:i,className:LC.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){t.events.trash()}})),n.combine_features&&(e.combine_features=s("combineFeatures",{container:i,className:LC.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){t.events.combineFeatures()}})),n.uncombine_features&&(e.uncombine_features=s("uncombineFeatures",{container:i,className:LC.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){t.events.uncombineFeatures()}})),i):i},removeButtons:function(){Object.keys(e).forEach((function(t){var n=e[t];n.parentNode&&n.parentNode.removeChild(n),delete e[t]}))}}}(t),t.container=r.getContainer(),t.store=new Ek(t),e=t.ui.addButtons(),t.options.boxSelect&&(r.boxZoom.disable(),r.dragPan.disable(),r.dragPan.enable()),r.loaded()?i.connect():(r.on("load",i.connect),n=setInterval((function(){r.loaded()&&i.connect()}),16)),t.events.start(),e},addLayers:function(){t.map.addSource(MC.COLD,{data:{type:DC.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.map.addSource(MC.HOT,{data:{type:DC.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.options.styles.forEach((function(e){t.map.addLayer(e)})),t.store.setDirty(!0),t.store.render()},removeLayers:function(){t.options.styles.forEach((function(e){t.map.getLayer(e.id)&&t.map.removeLayer(e.id)})),t.map.getSource(MC.COLD)&&t.map.removeSource(MC.COLD),t.map.getSource(MC.HOT)&&t.map.removeSource(MC.HOT)}};return t.setup=i,i}(n);e.onAdd=i.onAdd,e.onRemove=i.onRemove,e.types=OC,e.options=t}(t,this)}EE.modes=fE;var SE=EE,IE=n("WVt+"),TE=function(){function t(e,n,i){_classCallCheck(this,t),this.mapService=e,this.dialog=n,this.snackBar=i,this.value="",this.files=[],this.trafficLayerOptions=["BUS_Labels","london_tube","London_Bus_Route"],this.lat=51.515098,this.lng=-.094402,this.dataDocsPerPage=2,this.currentPage=1,this.spinnerMessage="",this.dataSource=[],this.searchDataSource=[],this.noDataFound=!1,this.displayedColumns=["Name"],this.jsonFileType=!1,this.loadingInProgress=!1,this.fileUploading=!1,this.mapLoaded=!1,this.mapLoading=!1,this.commentsVisibility=!0,this.archivedCommentsVisibility=!1,this.tubeLayerVisibility=!1,this.tflAccidentsVisibility=!1,this.tflAccidentsClusterVisibility=!1,this.tflCycleRoutesVisibility=!1,this.tflCycleParkingVisibility=!1,this.ptalVisibility=!1,this.busLabelsVisibility=!1,this.londonPlanningPermissionVisibility=!1,this.montrealBixiStationVisibility=!1,this.montrealCollisionDataVisibility=!1,this.searchMoviesCtrl=new Iv,this.isLoading=!1,this.options=["One","Two","Three"],this.educationCatCount=0,this.groceryCatCount=0,this.touristAttCatCount=0,this.schoolCatCount=0,this.hospitalCatCount=0,this.parkCatCount=0,this.trainCatCount=0,this.busCatCount=0,this.times=[{time:"10mins"},{time:"15mins"},{time:"20mins"}],this.title="google-places-autocomplete",this.userAddress="",this.userLatitude="",this.userLongitude="",this.transportMode="walking",this.addressLoaded=!1,this.resultsReturned=!1,this.qualifyingNeighbourhood=0,this.currentTime=15,this.currentTimeString="15mins",this.currentMapMarkers=[],this.tempSources=[],this.viewChosen="",this.viewChosenName="",this.onDestroy$=new L,this.TAG=" OC~MapComponent: "}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){t.lat=e.coords.latitude,t.lng=e.coords.longitude,t.map.flyTo({center:[t.lng,t.lat]})})),IC.accessToken="pk.eyJ1Ijoib3VyY29sbGVjdGl2ZSIsImEiOiJja2Nmem44bGowbjVyMnJwYndlcHpueTl4In0.ZTTDR6WlA6BNA4JFxbNj4Q",this.baseUrl="mapbox://styles/ourcollective/",this.mapStyle="ckrm7yroj20cs17o1rs0uf1as",this.map=new IC.Map({container:"map",style:this.baseUrl+this.mapStyle,zoom:10,center:[this.lng,this.lat],preserveDrawingBuffer:!0}),Object.defineProperty(window,"devicePixelRatio",{get:function(){return 3.125}});var e=new IC.NavigationControl;this.map.addControl(e,"top-right");var n=new SE({displayControlsDefault:!1,controls:{polygon:!0,trash:!0,point:!0,line_string:!0}});this.map.addControl(n,"top-right"),this.map.loadImage("https://docs.mapbox.com/mapbox-gl-js/assets/custom_marker.png",(function(e,n){if(e)throw e;t.map.addImage("custom-marker",n)})),this.map.on("zoomend",(function(t){})),this.map.on("pitchend",(function(t){})),this.map.on("rotateend",(function(e){t.map.getBearing()})),this.map.on("draw.create",(function(){var t=n.getAll();if(t.features.length>0){var e=IE.area(t);Math.round(100*e);var i=IE.lineString(t.features[0].geometry.coordinates[0]),r=IE.bbox(i);console.log(r);var o,a,s=IE.bboxPolygon(r),l=IE.polygonToLine(s),u=IE.lineOffset(l,1.2),c=[],h=_createForOfIteratorHelper((IE.bbox(u),IE.squareGrid(r,.5).features));try{for(h.s();!(a=h.n()).done;){var p=a.value;o=IE.centroid(p),c.push(o)}}catch(f){h.e(f)}finally{h.f()}}})),this.map.on("load",(function(e){t.map.addSource("iso",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),t.map.addLayer({id:"isoLayer",type:"fill",source:"iso",layout:{},paint:{"fill-color":"#5a3fc0","fill-opacity":.3}},"poi-label"),t.mapService.getIsoUpdateListener().pipe(Pg(t.onDestroy$)).subscribe((function(e){console.log(e),t.map.getSource("iso").setData(e.isoResponse.features[0].geometry),t.mapService.getGooglePlacesResponseListener().pipe(Pg(t.onDestroy$)).subscribe((function(e){console.log(e),t.resultsReturned?(t.clearMarkers(),t.resultsReturned=!1):t.resultsReturned=!0,t.addGoogleResponseMarkers(e)}));var n=[];n.push(e.isoResponse.features[0].geometry.coordinates[0]);var i=IE.polygon(n),r=IE.centroid(i),o=r.geometry.coordinates[0],a=r.geometry.coordinates[1];t.marker=(new IC.Marker).setLngLat([o,a]).addTo(t.map),t.currentMapMarkers.push(t.marker),t.map.flyTo({center:[o,a],zoom:13.5,speed:.6,curve:3}),t.mapService.findPlaces(o,a,e.mode)})),t.features=t.mapService.getFeatureData().pipe(Pg(t.onDestroy$)).subscribe((function(e){t.geometryType=e[0].geometry.type,t.source=new z_(e);var n=t.mapService.getSourceId();t.map.on("click",n,(function(e){t.buildPopup(e,n)}))}))})),this.map.on("mouseenter","PTAL",(function(){t.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave","PTAL",(function(){t.map.getCanvas().style.cursor=""})),this.map.on("mouseenter","London Tube",(function(){t.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave","London Tube",(function(){t.map.getCanvas().style.cursor=""})),this.map.on("mouseenter","London Bus Stops",(function(){t.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave","London Bus Stops",(function(){t.map.getCanvas().style.cursor=""})),this.map.on("mouseenter","TfL Accidents 2015-2019",(function(){t.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave","TfL Accidents 2015-2019",(function(){t.map.getCanvas().style.cursor=""})),this.map.on("mouseenter","TfL Cycle Routes",(function(){t.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave","TfL Cycle Routes",(function(){t.map.getCanvas().style.cursor=""})),this.map.on("mouseenter","London Planning Permission",(function(){t.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave","London Planning Permission",(function(){t.map.getCanvas().style.cursor=""})),this.map.on("mouseenter","TfL Cycle Parking",(function(){t.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave","TfL Cycle Parking",(function(){t.map.getCanvas().style.cursor=""})),this.map.on("mouseenter","park_layer",(function(){t.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave","park_layer",(function(){t.map.getCanvas().style.cursor=""})),this.map.on("mouseenter","school_layer",(function(){t.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave","school_layer",(function(){t.map.getCanvas().style.cursor=""})),this.map.on("mouseenter","supermarket_layer",(function(){t.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave","supermarket_layer",(function(){t.map.getCanvas().style.cursor=""})),this.map.on("mouseenter","train_station_layer",(function(){t.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave","train_station_layer",(function(){t.map.getCanvas().style.cursor=""})),this.map.on("mouseenter","hospital_layer",(function(){t.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave","hospital_layer",(function(){t.map.getCanvas().style.cursor=""})),this.map.on("mouseenter","tourist_attraction_layer",(function(){t.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave","tourist_attraction_layer",(function(){t.map.getCanvas().style.cursor=""})),this.map.on("click","TfL Accidents 2015-2019",(function(e){t.buildPopup(e,"TfL Accidents 2015-2019")})),this.map.on("click","PTAL",(function(e){t.buildPopup(e,"PTAL")})),this.map.on("click","London Bus Stops",(function(e){t.buildPopup(e,"London Bus Stops")})),this.map.on("click","TfL Cycle Routes",(function(e){t.buildPopup(e,"TfL Cycle Routes")})),this.map.on("click","London Tube",(function(e){t.buildPopup(e,"London Tube")})),this.map.on("click","London Planning Permission",(function(e){t.buildPopup(e,"London Planning Permission")})),this.map.on("click","TfL Cycle Parking",(function(e){t.buildPopup(e,"TfL Cycle Parking")})),this.map.on("click","Montreal Collision Data",(function(e){t.buildPopup(e,"Montreal Collision Data")})),this.map.on("click","Montreal Bixi Stations",(function(e){t.buildPopup(e,"Montreal Bixi Stations")})),this.map.on("click","park_layer",(function(e){t.buildPopup(e,"park_layer")})),this.map.on("click","bus_stop_layer",(function(e){t.buildPopup(e,"bus_stop_layer")})),this.map.on("click","train_station_layer",(function(e){t.buildPopup(e,"train_station_layer")})),this.map.on("click","supermarket_layer",(function(e){t.buildPopup(e,"supermarket_layer")})),this.map.on("click","school_layer",(function(e){t.buildPopup(e,"school_layer")})),this.map.on("click","hospital_layer",(function(e){t.buildPopup(e,"hospital_layer")})),this.map.on("click","tourist_attraction_layer",(function(e){t.buildPopup(e,"tourist_attraction_layer")})),this.form=new Tv({filecontent:new Iv(null,{validators:[Qy.required]})}),this.mapService.getLibraryLayerAddedListener().pipe(Pg(this.onDestroy$)).subscribe((function(e){t.applyVisibilityForLoadedLayer({name:e,visibility:!0})})),this.mapService.getZoomUpdateListener().pipe(Pg(this.onDestroy$)).subscribe((function(e){t.map.setZoom(e)})),this.mapService.getPreStyledLayerVisibilityListener().pipe(Pg(this.onDestroy$)).subscribe((function(e){t.switchPreStyledMapLayer(e.layer,null,e.visibility,!0)})),this.mapService.getMapInstructionListener().pipe(Pg(this.onDestroy$)).subscribe((function(e){if(e.instruction){t.removeAll();var n,i=_createForOfIteratorHelper(t.currentMapMarkers);try{for(i.s();!(n=i.n()).done;){n.value.remove()}}catch(r){i.e(r)}finally{i.f()}t.currentMapMarkers=[],t.dataSource=[],t.table.renderRows(),t.tubeLayerVisibility=!1,t.tflAccidentsVisibility=!1,t.tflAccidentsClusterVisibility=!1,t.tflCycleRoutesVisibility=!1,t.tflCycleParkingVisibility=!1,t.ptalVisibility=!1,t.busLabelsVisibility=!1,t.londonPlanningPermissionVisibility=!1,t.montrealBixiStationVisibility=!1,t.montrealCollisionDataVisibility=!1}}))}},{key:"callFindPlaces",value:function(t){setTimeout((function(){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1];(new IC.Marker).setLngLat([e,n]).addTo(this.map),this.mapService.findPlaces(e,n,this.transportMode)}),2e3)}},{key:"buildGrid",value:function(t){this.map.getLayer("collectivesquaregrid")?(console.log("CollectiveSquareGrid exists just updating source with new coordinates."),this.map.getSource("collectivesquaregrid").setData({type:"FeatureCollection",features:t})):(console.log("Adding CollectiveSquareGrid for first time."),this.map.addSource("collectivesquaregrid",{type:"geojson",data:{type:"FeatureCollection",features:t}}),this.map.addLayer({id:"collectivesquaregrid",source:"collectivesquaregrid",type:"line",paint:{"line-color":"#888"}}))}},{key:"handleAddressChange",value:function(t){this.addressLoaded&&(this.resultsReturned=!1),this.qualifyingNeighbourhood=0,this.addressLoaded&&this.clearMarkers(),t.formatted_address&&t.geometry?(this.userAddress=t.formatted_address,this.userLatitude=t.geometry.location.lat(),this.userLongitude=t.geometry.location.lng(),this.mapService.testIsochrone(this.userLatitude,this.userLongitude,this.transportMode),this.addressLoaded=!0):this.snackBar.open("Invalid address entered, please try again!","Close",{duration:3e3})}},{key:"changeMode",value:function(t){this.addressLoaded&&(this.clearMarkers(),this.transportMode=t,console.log("Updating IsoChrone for mode: "+t),this.mapService.testIsochrone(this.userLatitude,this.userLongitude,this.transportMode))}},{key:"changeTime",value:function(t){if(this.addressLoaded){var e=Number(t.substring(0,2));e==this.currentTime?console.log("Already at this level of time - do nothing"):(this.currentTime=e,this.currentTimeString=t,this.clearMarkers(),this.mapService.testIsochrone(this.userLatitude,this.userLongitude,this.transportMode,this.currentTime))}else this.snackBar.open("Please load an address first by typing in the Search Location box!","Close",{duration:3e3})}},{key:"addGoogleResponseMarkers",value:function(t){var e="";this.educationCatCount=t.categories[0].items.length,this.parkCatCount=t.categories[2].items.length,this.groceryCatCount=t.categories[3].items.length,this.hospitalCatCount=t.categories[4].items.length,this.touristAttCatCount=t.categories[5].items.length,this.busCatCount=t.categories[6].items.length,this.trainCatCount=t.categories[7].items.length,this.qualifyingNeighbourhood=this.busCatCount>0&&this.parkCatCount>0&&this.hospitalCatCount>0&&this.educationCatCount>0&&this.touristAttCatCount>0&&this.groceryCatCount>0?1:2;var n,i=_createForOfIteratorHelper(t.categories);try{for(i.s();!(n=i.n()).done;){var r,o=n.value,a=_createForOfIteratorHelper(o.items);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(s.categories){var l,u=_createForOfIteratorHelper(s.categories);try{for(u.s();!(l=u.n()).done;){var c=l.value;if("Family/General Practice Physicians"===c.name||"Healthcare and Healthcare Support Services"===c.name||"Medical Services/Clinics"===c.name){e="hospital";break}if("School"===c.name||"Educational Facility"===c.name){e="school";break}if("Park-Recreation Area"===c.name||"Recreation Center"===c.name||"Sports Facility/Venue"===c.name){e="park";break}if("Tourist Attraction"===c.name){e="tourist_attraction";break}if("Bus Stop"===c.name){e="bus_stop";break}if("Train Station"===c.name){e="train_station";break}if("Convenience Store"===c.name||"Grocery"===c.name){e="supermarket";break}console.log("Missing Item - not a 15 min city sorry!")}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){a.e(h)}finally{a.f()}""!==e&&this.addCategoryLayerType(e,o),e=""}}catch(h){i.e(h)}finally{i.f()}}},{key:"addCategoryLayerType",value:function(t,e){var n,i,r,o=[],a=_createForOfIteratorHelper(e.items);try{for(a.s();!(r=a.n()).done;){var s=r.value;n={type:"Feature",geometry:{type:"Point",coordinates:[s.position.lng,s.position.lat]},properties:{Name:s.title,Address:s.address.label}},o.push(n)}}catch(l){a.e(l)}finally{a.f()}i=t,"supermarket"===t&&(i="grocery-15"),"bus_stop"===t&&(i="bus"),"train_station"===t&&(i="bus"),"tourist_attraction"===t&&(i="museum-15"),"hospital"===t&&(i="hospital-15"),"school"===t&&(i="school-15"),"park"===t&&(i="park-15"),this.map.getSource(t+"_source")?this.map.getSource(t+"_source").setData({type:"FeatureCollection",features:o}):this.map.addSource(t+"_source",{type:"geojson",data:{type:"FeatureCollection",features:o}}),this.map.getLayer(t+"_layer")?console.log("Layer already present"):this.map.addLayer({id:t+"_layer",source:t+"_source",type:"symbol",layout:{"icon-image":i,"icon-size":1.8,"icon-allow-overlap":!0},paint:{}},"poi-label"),this.isLoading=!1}},{key:"goToLink",value:function(t){window.open(t,"_blank")}},{key:"updateSearch",value:function(t){var e=this;this.value=t.target.value,""===this.value||this.mapService.searchContent(this.value).subscribe((function(t){e.searchDataSource=t,console.log(e.searchDataSource)}))}},{key:"clearMarkers",value:function(){if(console.log("address loaded is currently set to: "+this.addressLoaded),this.currentMapMarkers.length>1){var t,e=_createForOfIteratorHelper(this.currentMapMarkers);try{for(e.s();!(t=e.n()).done;){t.value.remove()}}catch(l){e.e(l)}finally{e.f()}this.currentMapMarkers=[]}if(this.addressLoaded){var n,i=_createForOfIteratorHelper(["hospital_layer","school_layer","park_layer","supermarket_layer","train_station_layer","tourist_attraction_layer","bus_stop_layer","collectivesquaregrid"]);try{for(i.s();!(n=i.n()).done;){var r=n.value;this.map.getLayer(r)&&(console.log("Removing Layer: "+r),this.map.removeLayer(r))}}catch(l){i.e(l)}finally{i.f()}var o,a=_createForOfIteratorHelper(["hospital_source","school_source","park_source","supermarket_source","train_station_source","tourist_attraction_source","bus_stop_source","collectivesquaregrid"]);try{for(a.s();!(o=a.n()).done;){var s=o.value;this.map.getSource(s)&&(console.log("Removing Source: "+s),this.map.removeSource(s))}}catch(l){a.e(l)}finally{a.f()}}}},{key:"applyVisibilityForLoadedLayer",value:function(t){t.visibility&&(this.dataSource.includes({name:t.name})||(this.dataSource.push(t.colourRampInUse?{name:t.name,colourRamp:t.colourRamp}:t.colourPalette?{name:t.name,colourPalette:t.colourPalette}:{name:t.name}),this.table.renderRows()))}},{key:"buildPopup",value:function(t,e){var n=document.createElement("div"),i=document.createElement("h2"),r=document.createElement("h3"),o=document.createElement("ul");i.innerHTML="<b>Collective</b>",i.style.color="violet",i.style.fontSize="18px","hospital_layer"===e&&(r.innerHTML="<b>Hospital / Health</b>"),"school_layer"===e&&(r.innerHTML="<b>School / Education</b>"),"supermarket_layer"===e&&(r.innerHTML="<b>Supermarket / Grocery</b>"),"park_layer"===e&&(r.innerHTML="<b>Park / Recreation</b>"),"bus_station_layer"===e&&(r.innerHTML="<b>Bus Station</b>"),"train_station_layer"===e&&(r.innerHTML="<b>Train Station</b>"),this.propValues=Object.values(t.features[0].properties),this.propKeys=Object.keys(t.features[0].properties);for(var a=0;a<this.propValues.length;++a){var s=document.createElement("li");s.innerHTML="<b>"+this.propKeys[a]+"</b> : "+this.propValues[a],o.appendChild(s)}n.appendChild(i),n.appendChild(r),n.appendChild(o),new IC.Popup({className:"ocmap-popup"}).setLngLat(t.lngLat).setHTML(n.innerHTML).addTo(this.map)}},{key:"applySymbols",value:function(t){"no_image"===t.symbolInUse&&(this.pointPaint={"icon-color":t.color,"icon-opacity":t.opacity},this.pointType="symbol",this.geometryType="Point"),t.currentLabel&&t.currentLabelVisibility&&("no_image"===t.symbolInUse&&(t.symbolInUse="base-icon"),this.map.setLayoutProperty(t.id,"icon-image",t.symbolInUse),t.currentLabel&&(this.map.setLayoutProperty(t.id,"text-field",["format",["get",t.currentLabel],{"text-color":"#36454f","text-size":10}]),this.map.setLayoutProperty(t.id,"text-variable-anchor",["top","bottom","left","right"]),this.map.setLayoutProperty(t.id,"text-justify","auto"),this.map.setLayoutProperty(t.id,"text-radial-offset",.5))),this.applySymbol(t.id,t.symbolInUse)}},{key:"applyLabels",value:function(t){if("Polygon"===t.layer.type||"LineString"===t.layer.type||"MultiPolygon"===t.layer.type||"MultiLineString"===t.layer.type){var e=["format",["get",t.label],{"text-color":"#36454f","text-size":10}];this.map.getLayer(t.layer.id+"_labels")?this.map.setLayoutProperty(t.layer.id+"_labels","text-field",e):this.map.addLayer({id:t.layer.id+"_labels",type:"symbol",source:t.layer.id,layout:{"text-field":e,"symbol-placement":"point"},paint:{"text-color":["case",["boolean",["feature-state","hover"],!1],"rgba(255,0,0,0.75)","rgba(0,0,0,0.75)"],"text-halo-color":["case",["boolean",["feature-state","hover"],!1],"rgba(255,255,0,0.75)","rgba(255,255,255,0.75)"]}})}else"Point"===t.layer.type&&("No Label"===t.label&&this.map.setLayoutProperty(t.layer.id,"text-field",""),this.map.setLayoutProperty(t.layer.id,"text-field",["format",["get",t.label],{"text-color":"#36454f","text-size":10}]),this.map.setLayoutProperty(t.layer.id,"text-variable-anchor",["top","bottom","left","right"]),this.map.setLayoutProperty(t.layer.id,"text-justify","auto"),this.map.setLayoutProperty(t.layer.id,"text-radial-offset",.5))}},{key:"removeAll",value:function(){this.sessionDataLayers=this.mapService.getSessionDataLayers();for(var t=0;t<this.sessionDataLayers.length;t++){var e=this.map.getSource(this.sessionDataLayers[t].id);this.tempSources.push(e),this.map.getLayer(this.sessionDataLayers[t].id)&&this.map.removeLayer(this.sessionDataLayers[t].id),this.map.getLayer(this.sessionDataLayers[t].id+"_labels")&&this.map.removeLayer(this.sessionDataLayers[t].id+"_labels"),this.map.getLayer(this.sessionDataLayers[t].id+"-border")&&this.map.removeLayer(this.sessionDataLayers[t].id+"-border"),this.map.getSource(this.sessionDataLayers[t].id)&&this.map.removeSource(this.sessionDataLayers[t].id)}this.sessionDataLayers=[]}},{key:"toggleLayer",value:function(t,e,n){e?(this.map.setLayoutProperty(t,"visibility","none"),this.map.getLayer(t+"-border")&&this.map.setLayoutProperty(t+"-border","visibility","none"),n&&this.map.setLayoutProperty(t+"_labels","visibility","none")):(this.map.setLayoutProperty(t,"visibility","visible"),this.map.getLayer(t+"-border")&&this.map.setLayoutProperty(t+"-border","visibility","visible"),n&&this.map.setLayoutProperty(t+"_labels","visibility","visible"))}},{key:"setVisibilityOnLoad",value:function(t,e){e||(this.map.setLayoutProperty(t,"visibility","none"),this.map.getLayer(t+"_labels")&&this.map.setLayoutProperty(t+"_labels","visibility","none"),this.map.getLayer(t+"-border")&&this.map.setLayoutProperty(t+"-border","visibility","none"))}},{key:"switchMapView",value:function(t){var e=this;if("MONOCHROME"!==t&&"MONOCHROME"!==t.maptype||(this.viewChosenName="MONOCHROME",this.viewChosen="ckcg02rv10nbz1iqrp7se47j0"),"TRANSPORT"!==t&&"TRANSPORT"!==t.maptype||(this.viewChosenName="TRANSPORT",this.viewChosen="ckks6erhp0qot18qyji0r1kqr"),"SATELLITE"!==t&&"SATELLITE"!==t.maptype||(this.viewChosenName="SATELLITE",this.viewChosen="ckcg4f1ty0ri31iqrj5otd3qy"),"MONOCHROME LIGHT"!==t&&"MONOCHROME LIGHT"!==t.maptype||(this.viewChosenName="MONOCHROME LIGHT",this.viewChosen="ckk8d4hmw18vn18t3acls3j0u"),"CONSTRUCTION LOGISTICS"!==t&&"CONSTRUCTION LOGISTICS"!==t.maptype||(this.viewChosenName="CONSTRUCTION LOGISTICS",this.viewChosen="ckrm7yroj20cs17o1rs0uf1as"),this.mapStyle=this.viewChosen,this.mapService.setMapType(this.viewChosenName),this.mapService.setMapStyleField(this.viewChosen,t.maptype),t.loadMap)console.log((new Date).toISOString()+this.TAG+"No need to remove and add layers - Initial Load Map event triggered."),this.map.setStyle(this.baseUrl+this.viewChosen),this.delay(500).then((function(){e.map.hasImage("base-icon")||e.map.loadImage("/../assets/images/BLACK_CIRCLE.png",(function(t,n){if(t)throw t;e.map.addImage("base-icon",n,{sdf:!0})}))}));else{this.sessionDataLayers=this.mapService.getSessionDataLayers();for(var n=0;n<this.sessionDataLayers.length;n++){var i=this.map.getSource(this.sessionDataLayers[n].id);this.tempSources.push(i),this.map.getLayer(this.sessionDataLayers[n].id)&&(this.map.removeLayer(this.sessionDataLayers[n].id),this.map.getLayer(this.sessionDataLayers[n].id+"_labels")&&this.map.removeLayer(this.sessionDataLayers[n].id+"_labels"),this.map.getLayer(this.sessionDataLayers[n].id+"-border")&&this.map.removeLayer(this.sessionDataLayers[n].id+"-border")),this.map.getSource(this.sessionDataLayers[n].id)&&this.map.removeSource(this.sessionDataLayers[n].id)}this.map.setStyle(this.baseUrl+this.viewChosen),this.map.on("style.load",(function(){for(var t=0;t<e.sessionDataLayers.length;t++){var n,i=_createForOfIteratorHelper(e.tempSources);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.id===e.sessionDataLayers[t].id&&(e.mapService.setSourceId(r.id),e.tempGeoType=r._data.features[0].geometry.type,e.map.getSource(r.id)||e.map.addSource(r.id,{type:r.type,data:r._data}))}}catch(u){i.e(u)}finally{i.f()}}var o=e.mapService.getPreStyledLayers();if(o.length>0){var a,s=_createForOfIteratorHelper(o);try{for(s.s();!(a=s.n()).done;){var l=a.value;e.toggleLayer(l.layer,!1)}}catch(u){s.e(u)}finally{s.f()}}}))}this.snackBar.open("Map view updated!","Close",{duration:3e3})}},{key:"switchPreStyledMapLayer",value:function(t,e,n,i){if(e&&e.stopPropagation(),"PTAL"===t&&this.ptalVisibility)this.toggleLayer(t,!0),this.ptalVisibility=!1,this.mapService.removePreStyledLayer(t);else if("PTAL"!==t||this.ptalVisibility)if("TfL Accidents 2015-2019"===t&&this.tflAccidentsVisibility){this.toggleLayer(t,!0),this.tflAccidentsVisibility=!1;var r=this.dataSource.findIndex((function(t){return"TfL Accidents 2015-2019"===t.name}));this.dataSource.splice(r,1),this.mapService.removePreStyledLayer(t)}else if("TfL Accidents 2015-2019"!==t||this.tflAccidentsVisibility)if("TfL Accidents 2015-2019 Cluster"===t&&this.tflAccidentsClusterVisibility)this.toggleLayer(t,!0),this.tflAccidentsClusterVisibility=!1,this.mapService.removePreStyledLayer(t);else if("TfL Accidents 2015-2019 Cluster"!==t||this.tflAccidentsClusterVisibility)if("London Tube"===t&&this.tubeLayerVisibility){this.toggleLayer(t,!0),this.tubeLayerVisibility=!1;var o=this.dataSource.findIndex((function(t){return"London Tube"===t.name}));this.dataSource.splice(o,1),this.mapService.removePreStyledLayer(t)}else if("London Tube"!==t||this.tubeLayerVisibility)if("TfL Cycle Routes"===t&&this.tflCycleRoutesVisibility){this.toggleLayer(t,!0),this.tflCycleRoutesVisibility=!1;var a=this.dataSource.findIndex((function(t){return"TfL Cycle Routes"===t.name}));this.dataSource.splice(a,1),this.mapService.removePreStyledLayer(t)}else if("TfL Cycle Routes"!==t||this.tflCycleRoutesVisibility)if("London Planning Permission"===t&&this.londonPlanningPermissionVisibility){this.toggleLayer(t,!0),this.londonPlanningPermissionVisibility=!1;var s=this.dataSource.findIndex((function(t){return"London Planning Permission"===t.name}));this.dataSource.splice(s,1),this.mapService.removePreStyledLayer(t)}else if("London Planning Permission"!==t||this.londonPlanningPermissionVisibility)if("TfL Cycle Parking"===t&&this.tflCycleParkingVisibility){this.toggleLayer(t,!0),this.tflCycleParkingVisibility=!1;var l=this.dataSource.findIndex((function(t){return"TfL Cycle Parking"===t.name}));this.dataSource.splice(l,1),this.mapService.removePreStyledLayer(t)}else if("TfL Cycle Parking"!==t||this.tflCycleParkingVisibility)if("London Bus Stops"===t&&this.busLabelsVisibility){this.toggleLayer(t,!0),this.busLabelsVisibility=!1;var u=this.dataSource.findIndex((function(t){return"London Bus Stops"===t.name}));this.dataSource.splice(u,1),this.mapService.removePreStyledLayer(t)}else if("London Bus Stops"!==t||this.busLabelsVisibility)if("Montreal Bixi Stations"===t&&this.montrealBixiStationVisibility){this.toggleLayer(t,!0),this.montrealBixiStationVisibility=!1;var c=this.dataSource.findIndex((function(t){return"Montreal Bixi Stations"===t.name}));this.dataSource.splice(c,1),this.mapService.removePreStyledLayer(t)}else if("Montreal Bixi Stations"!==t||this.montrealBixiStationVisibility)if("Montreal Collision Data"===t&&this.montrealCollisionDataVisibility){this.toggleLayer(t,!0),this.montrealCollisionDataVisibility=!1;var h=this.dataSource.findIndex((function(t){return"Montreal Collision Data"===t.name}));this.dataSource.splice(h,1),this.mapService.removePreStyledLayer(t)}else"Montreal Collision Data"!==t||this.montrealCollisionDataVisibility||(this.toggleLayer(t,!1),this.montrealCollisionDataVisibility=!0,this.dataSource.push({name:"Montreal Collision Data"}),i||this.mapService.addPreStyledLayer({layer:t,visibility:!0}));else this.toggleLayer(t,!1),this.montrealBixiStationVisibility=!0,this.dataSource.push({name:"Montreal Bixi Stations"}),i||this.mapService.addPreStyledLayer({layer:t,visibility:!0});else this.toggleLayer(t,!1),this.busLabelsVisibility=!0,this.dataSource.push({name:"London Bus Stops"}),i||this.mapService.addPreStyledLayer({layer:t,visibility:!0});else this.toggleLayer(t,!1),this.tflCycleParkingVisibility=!0,this.dataSource.push({name:"TfL Cycle Parking"}),i||this.mapService.addPreStyledLayer({layer:t,visibility:!0});else this.toggleLayer(t,!1),this.londonPlanningPermissionVisibility=!0,this.dataSource.push({name:"London Planning Permission"}),i||this.mapService.addPreStyledLayer({layer:t,visibility:!0});else this.toggleLayer(t,!1),this.tflCycleRoutesVisibility=!0,this.dataSource.push({name:"TfL Cycle Routes"}),i||this.mapService.addPreStyledLayer({layer:t,visibility:!0});else this.toggleLayer(t,!1),this.tubeLayerVisibility=!0,this.dataSource.push({name:"London Tube"}),i||this.mapService.addPreStyledLayer({layer:t,visibility:!0});else this.toggleLayer(t,!1),this.tflAccidentsClusterVisibility=!0,i||this.mapService.addPreStyledLayer({layer:t,visibility:!0});else this.toggleLayer(t,!1),this.tflAccidentsVisibility=!0,this.dataSource.push({name:"TfL Accidents 2015-2019"}),i||this.mapService.addPreStyledLayer({layer:t,visibility:!0});else this.toggleLayer(t,!1),this.ptalVisibility=!0,i||this.mapService.addPreStyledLayer({layer:t,visibility:!0});this.table.renderRows()}},{key:"applyLayer",value:function(t,e){var n,i=this;n=e?e.id:this.mapService.getSourceId(),"Polygon"!==t&&"MultiPolygon"!==t||(this.map.addLayer({id:n,source:n,type:this.polyType,paint:this.polyPaint,filter:["==","$type","Polygon"]}),this.map.addLayer({id:n+"-border",source:n,type:this.lineType,paint:{"line-color":"#000000","line-width":0}})),"Point"===t&&(this.map.hasImage("base-icon")||this.map.loadImage("/../assets/images/BLACK_CIRCLE.png",(function(t,e){if(t)throw t;i.map.addImage("base-icon",e,{sdf:!0})})),null==this.map.getLayer(n)&&this.map.addLayer({id:n,source:n,type:this.pointType,layout:{"icon-image":"base-icon","icon-size":.3},paint:this.pointPaint,filter:["==","$type",t]})),"LineString"!==t&&"MultiLineString"!==t||this.map.addLayer({id:n,source:n,type:this.lineType,paint:this.linePaint,filter:["==","$type","LineString"]})}},{key:"applySymbol",value:function(t,e,n){"no_image"===e&&(e="base-icon"),this.map.setLayoutProperty(t,"icon-image",e),n&&(this.map.setLayoutProperty(t,"text-field",["format",["get",n],{"text-color":"#D0D6D0","text-size":10}]),this.map.setLayoutProperty(t,"text-variable-anchor",["top","bottom","left","right"]),this.map.setLayoutProperty(t,"text-justify","auto"),this.map.setLayoutProperty(t,"text-radial-offset",.5))}},{key:"setMap",value:function(t){this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"delay",value:function(t){return N_(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout((function(){return e()}),t)}));case 2:case"end":return e.stop()}}),e)})))}},{key:"ngOnDestroy",value:function(){console.log((new Date).toISOString()+this.TAG+" Killing all active Subs"),this.onDestroy$.next(),this.timerSubscription.unsubscribe()}}]),t}(),PE=Hn({encapsulation:0,styles:[[".match-parent[_ngcontent-%COMP%]{width:100%;height:100vh}.app[_ngcontent-%COMP%]{overflow:auto;margin-bottom:50px}.overlay[_ngcontent-%COMP%]{background:#fff;position:absolute;max-width:15vw;max-height:15vh;top:0;bottom:0;left:0;right:0;display:block}.example-card[_ngcontent-%COMP%]{border-radius:15px;font-size:small;top:10px}.example-form[_ngcontent-%COMP%]{opacity:.9;position:absolute;top:20px;min-width:150px;max-width:500px;width:100%;left:40vw;right:50vw}.example-full-width[_ngcontent-%COMP%]{width:100%;opacity:.9;border-radius:15px;border-style:solid;border-color:#f5f5f5;border-width:thick}mat-form-field[_ngcontent-%COMP%]{background:0 0;width:600px;margin-left:35%;margin-top:3%;margin-bottom:2%;border-radius:12px;font-family:Raleway,sans-serif;font-size:12px;border-color:#d0d6d0;color:#d0d6d0;border-width:1px}mat-list-option[_ngcontent-%COMP%]{color:#d0d6d0;font-family:Raleway,sans-serif;font-size:12px}.example-full-width-1[_ngcontent-%COMP%]{width:100%;opacity:.9;border-radius:15px;border-style:solid;border-color:#f5f5f5;border-width:thick;top:35px;color:#414241}.fileover[_ngcontent-%COMP%]{-webkit-animation:1s infinite shake;animation:1s infinite shake}.container[_ngcontent-%COMP%]{width:100%;height:100vh;border-radius:17px;position:relative;margin:0 auto}.example-table-container[_ngcontent-%COMP%]{position:relative;max-height:400px;overflow:auto;padding:0}tr.example-detail-row[_ngcontent-%COMP%]{height:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.innercontainer[_ngcontent-%COMP%]{overflow:auto;max-height:40vh;opacity:.8}.outercontainer[_ngcontent-%COMP%]{opacity:.9;max-width:13vw;background-color:#fff;width:30vw;left:10px;position:absolute;border-radius:3px;bottom:75px;box-shadow:0 1px 2px rgba(0,0,0,.1);font:12px/20px 'Raleway, sans-serif'}.legend[_ngcontent-%COMP%]{background-color:#fff;opacity:.9;border-radius:3px;bottom:30px;box-shadow:0 1px 2px rgba(0,0,0,.1);font:12px/20px 'Raleway, sans-serif';padding:10px;position:absolute;left:10px;max-width:10vw}td.mat-cell[_ngcontent-%COMP%], th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-style:none}.outercontainer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-radius:50%;display:inline-block;height:10px;margin-right:5px;width:10px}input[type=file][_ngcontent-%COMP%]{visibility:hidden;position:absolute;margin-left:auto;margin-right:auto}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.mapswitchbutton[_ngcontent-%COMP%]{position:absolute;color:#f5f5f5;background:#919c91;top:0;right:0;opacity:.7;margin-right:3rem;margin-top:1rem}.maplayersbutton[_ngcontent-%COMP%]{position:absolute;color:#f5f5f5;background:#919c91;top:0;right:0;opacity:.7;margin-right:6rem;margin-top:1rem}.modeselect[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{background-color:red}.modeselect[_ngcontent-%COMP%]{opacity:.9;background-color:#fff;position:absolute;border-radius:8px;top:58px;box-shadow:0 1px 2px rgba(0,0,0,.1);font:'Raleway, sans-serif'}.modeselectouter[_ngcontent-%COMP%]{opacity:.9;left:10px;position:absolute;border-radius:2px;top:35px;font:'Raleway, sans-serif'}.chiplist[_ngcontent-%COMP%]{opacity:.9;left:10px;position:absolute;border-radius:2px;top:115px;font:'Raleway, sans-serif'}.numbers[_ngcontent-%COMP%]{opacity:.9;left:10px;position:absolute;border-radius:2px;top:95px;font:'Raleway, sans-serif'}.tagteammatebutton[_ngcontent-%COMP%]{position:absolute;color:#f5f5f5;top:0;right:0;opacity:.7;margin-right:6rem;margin-top:3rem}.chatbutton[_ngcontent-%COMP%]{position:absolute;color:#f5f5f5;top:0;right:0;opacity:.7;margin-right:9rem;margin-top:3rem}.calculation-box[_ngcontent-%COMP%]{height:75px;width:150px;border-radius:17px;opacity:.7;position:absolute;bottom:40px;left:10px;color:#f5f5f5;background:#414241;padding:15px;text-align:center}h2[_ngcontent-%COMP%]{font-size:13px;font:'Raleway, sans-serif'}.resultsgrid[_ngcontent-%COMP%]{left:10px;border-radius:8px;width:25vw;height:25vh;top:178px;position:absolute;color:#414241;font:'Raleway, sans-serif'}a[_ngcontent-%COMP%]:hover{cursor:pointer}.oc-image[_ngcontent-%COMP%]{opacity:.7;position:absolute;bottom:60px;right:10px;padding:15px;text-align:center}.currentmap[_ngcontent-%COMP%]{height:45px;width:150px;border-radius:17px;opacity:.1;position:absolute;top:95px;right:48px;color:#f5f5f5;background:#414241;padding:15px;text-align:center;font-size:11px;font-family:Raleway,sans-serif}p[_ngcontent-%COMP%]{font-family:Raleway,sans-serif;margin:0;color:#f5f5f5;font-size:13px}.mapremove[_ngcontent-%COMP%]{position:absolute;color:#f5f5f5;top:0;right:0;opacity:.7;margin-right:6rem;margin-top:3rem}.example-box[_ngcontent-%COMP%]{color:#6b8e23;font-weight:700;font-family:Raleway,sans-serif}.example-box.cdk-drag-animating[_ngcontent-%COMP%], .example-chip[_ngcontent-%COMP%]   .cdk-drop-list-dragging[_ngcontent-%COMP%]{transition:transform 250ms cubic-bezier(0,0,.2,1)}@-webkit-keyframes shake{0%{transform:translate(1px,1px) rotate(0)}10%{transform:translate(-1px,-2px) rotate(-1deg)}20%{transform:translate(-3px,0) rotate(1deg)}30%{transform:translate(3px,2px) rotate(0)}40%{transform:translate(1px,-1px) rotate(1deg)}50%{transform:translate(-1px,2px) rotate(-1deg)}60%{transform:translate(-3px,1px) rotate(0)}70%{transform:translate(3px,1px) rotate(-1deg)}80%{transform:translate(-1px,-1px) rotate(1deg)}90%{transform:translate(1px,2px) rotate(0)}100%{transform:translate(1px,-2px) rotate(-1deg)}}@keyframes shake{0%{transform:translate(1px,1px) rotate(0)}10%{transform:translate(-1px,-2px) rotate(-1deg)}20%{transform:translate(-3px,0) rotate(1deg)}30%{transform:translate(3px,2px) rotate(0)}40%{transform:translate(1px,-1px) rotate(1deg)}50%{transform:translate(-1px,2px) rotate(-1deg)}60%{transform:translate(-3px,1px) rotate(0)}70%{transform:translate(3px,1px) rotate(-1deg)}80%{transform:translate(-1px,-1px) rotate(1deg)}90%{transform:translate(1px,2px) rotate(0)}100%{transform:translate(1px,-2px) rotate(-1deg)}}"]],data:{animation:[{type:7,name:"detailExpand",definitions:[{type:0,name:"collapsed",styles:{type:6,styles:{height:"0px",minHeight:"0"},offset:null},options:void 0},{type:0,name:"expanded",styles:{type:6,styles:{height:"*"},offset:null},options:void 0},{type:1,expr:"expanded <=> collapsed",animation:{type:4,styles:null,timings:"225ms cubic-bezier(0.4, 0.0, 0.2, 1)"},options:null}],options:{}}]}});function AE(t){return Jo(0,[(t()(),Oo(0,0,null,null,1,"app-search",[],null,null,null,Px,Sx)),$i(1,245760,null,0,D_,[Ex],null,null)],(function(t,e){t(e,1,0)}),null)}function LE(t){return Jo(0,[(t()(),Oo(0,0,null,null,1,"mat-spinner",[["class","mat-spinner mat-progress-spinner"],["mode","indeterminate"],["role","progressbar"]],[[2,"_mat-animation-noopable",null],[4,"width","px"],[4,"height","px"]],null,null,zx,Dx)),$i(1,114688,null,0,Rx,[rn,qp,[2,Vs],[2,kg],Mx],null,null)],(function(t,e){t(e,1,0)}),(function(t,e){t(e,0,0,Vi(e,1)._noopAnimations,Vi(e,1).diameter,Vi(e,1).diameter)}))}function ME(t){return Jo(0,[(t()(),Oo(0,0,null,null,4,"div",[["class","example-loading-shade"]],null,null,null,null,null)),(t()(),Ro(16777216,null,null,1,null,LE)),$i(2,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Oo(3,0,null,null,1,"div",[["style","position: relative; top: 7px; right:99px; font-family: 'Raleway', sans-serif; font-size: 16px; color:palevioletred;"]],null,null,null,null,null)),(t()(),Wo(4,null,[" "," "]))],(function(t,e){var n=e.component;t(e,2,0,n.fileUploading||n.loadingInProgress)}),(function(t,e){t(e,4,0,e.component.spinnerMessage)}))}function RE(t){return Jo(0,[(t()(),Oo(0,0,null,null,8,"mat-chip",[["cdkDrag",""],["class","example-box mat-chip"],["role","option"]],[[1,"tabindex",0],[2,"mat-chip-selected",null],[2,"mat-chip-with-avatar",null],[2,"mat-chip-with-trailing-icon",null],[2,"mat-chip-disabled",null],[2,"_mat-animation-noopable",null],[1,"disabled",0],[1,"aria-disabled",0],[1,"aria-selected",0]],[[null,"click"],[null,"keydown"],[null,"focus"],[null,"blur"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==Vi(t,4)._handleClick(n)&&i),"keydown"===e&&(i=!1!==Vi(t,4)._handleKeydown(n)&&i),"focus"===e&&(i=!1!==Vi(t,4).focus()&&i),"blur"===e&&(i=!1!==Vi(t,4)._blur()&&i),"click"===e&&(i=!1!==r.changeTime(t.context.$implicit.time)&&i),i}),null,null)),tr(512,null,Ms,Rs,[rn,Cn,ln]),$i(2,278528,null,0,Os,[Ms],{ngStyle:[0,"ngStyle"]},null),Xo(3,{"background-color":0,color:1}),$i(4,147456,[[10,4]],3,Bx,[rn,Yr,qp,[2,Wf],[2,kg],Se],null,null),Bo(603979776,11,{avatar:0}),Bo(603979776,12,{trailingIcon:0}),Bo(603979776,13,{removeIcon:0}),(t()(),Wo(8,null,[" "," "]))],(function(t,e){var n=e.component,i=t(e,3,0,n.currentTimeString===e.context.$implicit.time?"violet":"#414241",n.currentTimeString===e.context.$implicit.time?"whitesmoke":"olivedrab");t(e,2,0,i)}),(function(t,e){t(e,0,0,Vi(e,4).disabled?null:-1,Vi(e,4).selected,Vi(e,4).avatar,Vi(e,4).trailingIcon||Vi(e,4).removeIcon,Vi(e,4).disabled,Vi(e,4)._animationsDisabled,Vi(e,4).disabled||null,Vi(e,4).disabled.toString(),Vi(e,4).ariaSelected),t(e,8,0,e.context.$implicit.time)}))}function OE(t){return Jo(0,[(t()(),Oo(0,0,null,null,14,"mat-card",[["class","example-card mat-card"]],[[2,"_mat-animation-noopable",null]],null,null,Qx,Jx)),$i(1,49152,null,0,Yx,[[2,kg]],null,null),(t()(),Oo(2,0,null,0,2,"mat-card-title",[["class","mat-card-title"]],null,null,null,null,null)),$i(3,16384,null,0,Zx,[],null,null),(t()(),Wo(-1,null,["Congratulations!"])),(t()(),Oo(5,0,null,0,2,"mat-card-subtitle",[["class","mat-card-subtitle"]],null,null,null,null,null)),$i(6,16384,null,0,Wx,[],null,null),(t()(),Wo(-1,null,["You live in a 15min neighbourhood"])),(t()(),Oo(8,0,null,0,6,"mat-card-content",[["class","mat-card-content"],["style","color:blueviolet"]],null,null,null,null,null)),$i(9,16384,null,0,Xx,[],null,null),(t()(),Oo(10,0,null,null,1,"p",[["style","color:#919c91"]],null,null,null,null,null)),(t()(),Wo(-1,null,["You live in a neighbourhood where all your basic needs are served. "])),(t()(),Oo(12,0,null,null,2,"p",[["style","color: #f004f0"]],null,null,null,null,null)),(t()(),Oo(13,0,null,null,1,"a",[],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.goToLink("https://www.forbes.com/sites/carltonreid/2020/01/21/phasing-out-cars-key-to-paris-mayors-plans-for-15-minute-city/?sh=769ff96c6952")&&i),i}),null,null)),(t()(),Wo(-1,null,["What is a 15min neighbourhood? Want to know more?"]))],null,(function(t,e){t(e,0,0,"NoopAnimations"===Vi(e,1)._animationMode)}))}function DE(t){return Jo(0,[(t()(),Oo(0,0,null,null,12,"mat-card",[["class","example-card mat-card"]],[[2,"_mat-animation-noopable",null]],null,null,Qx,Jx)),$i(1,49152,null,0,Yx,[[2,kg]],null,null),(t()(),Oo(2,0,null,0,2,"mat-card-title",[["class","mat-card-title"]],null,null,null,null,null)),$i(3,16384,null,0,Zx,[],null,null),(t()(),Wo(-1,null,["Not quite there yet!"])),(t()(),Oo(5,0,null,0,2,"mat-card-subtitle",[["class","mat-card-subtitle"]],null,null,null,null,null)),$i(6,16384,null,0,Wx,[],null,null),(t()(),Wo(-1,null,["Your neighbourhood does not yet meet all the criteria of a 15min neighbourhood"])),(t()(),Oo(8,0,null,0,4,"mat-card-content",[["class","mat-card-content"],["style","color: blueviolet"]],null,null,null,null,null)),$i(9,16384,null,0,Xx,[],null,null),(t()(),Oo(10,0,null,null,2,"p",[["style","color: #f004f0"]],null,null,null,null,null)),(t()(),Oo(11,0,null,null,1,"a",[],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.goToLink("https://www.forbes.com/sites/carltonreid/2020/01/21/phasing-out-cars-key-to-paris-mayors-plans-for-15-minute-city/?sh=769ff96c6952")&&i),i}),null,null)),(t()(),Wo(-1,null,["What is a 15min neighbourhood? Want to know more?"]))],null,(function(t,e){t(e,0,0,"NoopAnimations"===Vi(e,1)._animationMode)}))}function NE(t){return Jo(0,[(t()(),Oo(0,0,null,null,10,"span",[["class","resultsgrid"]],null,null,null,null,null)),(t()(),Oo(1,0,null,null,0,"iframe",[["height","400"],["src","https://charts.mongodb.com/charts-project-0-eylso/embed/charts?id=6262a851-1fe8-4db7-8003-814b16094649&maxDataAge=5&theme=light&autoRefresh=true"],["style","background: transparent;border: none;border-radius: 2px;"],["width","400"]],null,null,null,null,null)),(t()(),Oo(2,0,null,null,0,"iframe",[["height","180"],["src","https://charts.mongodb.com/charts-project-0-eylso/embed/charts?id=6262c606-1fe8-4140-8753-814b1622abda&maxDataAge=5&theme=light&autoRefresh=true"],["style","background: #FFFFFF;border: none;border-radius: 2px;box-shadow: 0 2px 10px 0 rgba(70, 76, 79, .2);"],["width","180"]],null,null,null,null,null)),(t()(),Oo(3,0,null,null,0,"iframe",[["height","180"],["src","https://charts.mongodb.com/charts-project-0-eylso/embed/charts?id=6262c62b-1fe8-425a-8a36-814b1622f6bd&maxDataAge=5&theme=light&autoRefresh=true"],["style","background: #FFFFFF;border: none;border-radius: 2px;box-shadow: 0 2px 10px 0 rgba(70, 76, 79, .2);"],["width","180"]],null,null,null,null,null)),(t()(),Oo(4,0,null,null,0,"iframe",[["height","180"],["src","https://charts.mongodb.com/charts-project-0-eylso/embed/charts?id=6262c654-a53a-40b7-85f7-7e755d327dd3&maxDataAge=5&theme=light&autoRefresh=true"],["style","background: #FFFFFF;border: none;border-radius: 2px;box-shadow: 0 2px 10px 0 rgba(70, 76, 79, .2);"],["width","180"]],null,null,null,null,null)),(t()(),Oo(5,0,null,null,0,"iframe",[["height","180"],["src","https://charts.mongodb.com/charts-project-0-eylso/embed/charts?id=6262c674-a53a-4d3e-84a4-7e755d32c78d&maxDataAge=5&theme=light&autoRefresh=true"],["style","background: #FFFFFF;border: none;border-radius: 2px;box-shadow: 0 2px 10px 0 rgba(70, 76, 79, .2);"],["width","180"]],null,null,null,null,null)),(t()(),Oo(6,0,null,null,0,"iframe",[["height","180"],["src","https://charts.mongodb.com/charts-project-0-eylso/embed/charts?id=6262c6c8-fa53-42c6-80c3-a104c5f8ace9&maxDataAge=5&theme=light&autoRefresh=true"],["style","background: #FFFFFF;border: none;border-radius: 2px;box-shadow: 0 2px 10px 0 rgba(70, 76, 79, .2);"],["width","180"]],null,null,null,null,null)),(t()(),Ro(16777216,null,null,1,null,OE)),$i(8,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,DE)),$i(10,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,8,0,1==n.qualifyingNeighbourhood),t(e,10,0,2==n.qualifyingNeighbourhood)}),null)}function FE(t){return Jo(0,[(t()(),Oo(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"],["style","color: violet;"]],null,null,null,null,null)),$i(1,16384,null,0,Sw,[nw,rn],null,null),(t()(),Wo(-1,null,[" Active Layers "]))],null,null)}function zE(t){return Jo(0,[(t()(),Oo(0,0,null,null,2,"mat-icon",[["class","smallerdatalayerbutton mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(1,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,["train"]))],(function(t,e){t(e,1,0)}),(function(t,e){t(e,0,0,Vi(e,1).inline,"primary"!==Vi(e,1).color&&"accent"!==Vi(e,1).color&&"warn"!==Vi(e,1).color)}))}function BE(t){return Jo(0,[(t()(),Oo(0,0,null,null,2,"mat-icon",[["class","smallerdatalayerbutton mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(1,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,["warning"]))],(function(t,e){t(e,1,0)}),(function(t,e){t(e,0,0,Vi(e,1).inline,"primary"!==Vi(e,1).color&&"accent"!==Vi(e,1).color&&"warn"!==Vi(e,1).color)}))}function VE(t){return Jo(0,[(t()(),Oo(0,0,null,null,2,"mat-icon",[["class","smallerdatalayerbutton mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(1,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,["directions_bike"]))],(function(t,e){t(e,1,0)}),(function(t,e){t(e,0,0,Vi(e,1).inline,"primary"!==Vi(e,1).color&&"accent"!==Vi(e,1).color&&"warn"!==Vi(e,1).color)}))}function UE(t){return Jo(0,[(t()(),Oo(0,0,null,null,2,"mat-icon",[["class","smallerdatalayerbutton mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(1,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,["directions_bike"]))],(function(t,e){t(e,1,0)}),(function(t,e){t(e,0,0,Vi(e,1).inline,"primary"!==Vi(e,1).color&&"accent"!==Vi(e,1).color&&"warn"!==Vi(e,1).color)}))}function jE(t){return Jo(0,[(t()(),Oo(0,0,null,null,2,"mat-icon",[["class","smallerdatalayerbutton mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(1,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,["local_parking"]))],(function(t,e){t(e,1,0)}),(function(t,e){t(e,0,0,Vi(e,1).inline,"primary"!==Vi(e,1).color&&"accent"!==Vi(e,1).color&&"warn"!==Vi(e,1).color)}))}function qE(t){return Jo(0,[(t()(),Oo(0,0,null,null,2,"mat-icon",[["class","smallerdatalayerbutton mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(1,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,["house"]))],(function(t,e){t(e,1,0)}),(function(t,e){t(e,0,0,Vi(e,1).inline,"primary"!==Vi(e,1).color&&"accent"!==Vi(e,1).color&&"warn"!==Vi(e,1).color)}))}function GE(t){return Jo(0,[(t()(),Oo(0,0,null,null,2,"mat-icon",[["class","smallerdatalayerbutton mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(1,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,["directions_bus"]))],(function(t,e){t(e,1,0)}),(function(t,e){t(e,0,0,Vi(e,1).inline,"primary"!==Vi(e,1).color&&"accent"!==Vi(e,1).color&&"warn"!==Vi(e,1).color)}))}function HE(t){return Jo(0,[(t()(),Oo(0,0,null,null,16,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"],["style","font-size:x-small"]],null,null,null,null,null)),$i(1,16384,null,0,Iw,[nw,rn],null,null),(t()(),Wo(2,null,[" "," "])),(t()(),Ro(16777216,null,null,1,null,zE)),$i(4,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,BE)),$i(6,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,VE)),$i(8,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,UE)),$i(10,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,jE)),$i(12,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,qE)),$i(14,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,GE)),$i(16,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,4,0,"London Tube"===e.context.$implicit.name),t(e,6,0,"TfL Accidents 2015-2019"===e.context.$implicit.name||"Montreal Collision Data"===e.context.$implicit.name),t(e,8,0,"TfL Cycle Routes"===e.context.$implicit.name||"Montreal Bixi Stations"===e.context.$implicit.name),t(e,10,0,"TfL Cycle Parking"===e.context.$implicit.name),t(e,12,0,"TfL Cycle Parking"===e.context.$implicit.name),t(e,14,0,"London Planning Permission"===e.context.$implicit.name),t(e,16,0,"London Bus Stops"===e.context.$implicit.name)}),(function(t,e){t(e,2,0,e.context.$implicit.name)}))}function XE(t){return Jo(0,[(t()(),Oo(0,0,null,null,34,"mat-list",[["class","mat-list mat-list-base"]],null,null,null,t_,$v)),$i(1,704512,null,0,Wv,[rn],null,null),(t()(),Oo(2,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(3,0,null,null,0,"span",[["style","background-color: #B36305"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Bakerloo"])),(t()(),Oo(5,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(6,0,null,null,0,"span",[["style","background-color: #E32017"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Central"])),(t()(),Oo(8,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(9,0,null,null,0,"span",[["style","background-color: #FFD300"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Circle"])),(t()(),Oo(11,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(12,0,null,null,0,"span",[["style","background-color: #00782A"]],null,null,null,null,null)),(t()(),Wo(-1,null,["District"])),(t()(),Oo(14,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(15,0,null,null,0,"span",[["style","background-color: #00A4A7"]],null,null,null,null,null)),(t()(),Wo(-1,null,["DLR"])),(t()(),Oo(17,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(18,0,null,null,0,"span",[["style","background-color: #F3A9BB"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Hammersmith and City"])),(t()(),Oo(20,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(21,0,null,null,0,"span",[["style","background-color:\t#9B0056"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Metropolitan"])),(t()(),Oo(23,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(24,0,null,null,0,"span",[["style","background-color: #000000"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Northern"])),(t()(),Oo(26,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(27,0,null,null,0,"span",[["style","background-color: #003688"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Picadilly"])),(t()(),Oo(29,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(30,0,null,null,0,"span",[["style","background-color: #0098D4"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Victoria"])),(t()(),Oo(32,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(33,0,null,null,0,"span",[["style","background-color: #95CDBA"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Waterloo and City"]))],null,null)}function ZE(t){return Jo(0,[(t()(),Oo(0,0,null,null,10,"mat-list",[["class","mat-list mat-list-base"]],null,null,null,t_,$v)),$i(1,704512,null,0,Wv,[rn],null,null),(t()(),Oo(2,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(3,0,null,null,0,"span",[["style","background-color: #011a89"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Proposed Cycle Superhighway"])),(t()(),Oo(5,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(6,0,null,null,0,"span",[["style","background-color: #a033c1"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Proposed Quietway"])),(t()(),Oo(8,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(9,0,null,null,0,"span",[["style","background-color: #25781c"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Cycleway"]))],null,null)}function WE(t){return Jo(0,[(t()(),Oo(0,0,null,null,10,"mat-list",[["class","mat-list mat-list-base"]],null,null,null,t_,$v)),$i(1,704512,null,0,Wv,[rn],null,null),(t()(),Oo(2,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(3,0,null,null,0,"span",[["style","background-color: #6d93f3"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Slight"])),(t()(),Oo(5,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(6,0,null,null,0,"span",[["style","background-color: #f07070"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Serious"])),(t()(),Oo(8,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(9,0,null,null,0,"span",[["style","background-color: #312626"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Fatal"]))],null,null)}function YE(t){return Jo(0,[(t()(),Oo(0,0,null,null,28,"mat-list",[["class","mat-list mat-list-base"]],null,null,null,t_,$v)),$i(1,704512,null,0,Wv,[rn],null,null),(t()(),Oo(2,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(3,0,null,null,0,"span",[["style","background-color: #f7fcf5"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 1"])),(t()(),Oo(5,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(6,0,null,null,0,"span",[["style","background-color: #e5f5e0"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 2"])),(t()(),Oo(8,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(9,0,null,null,0,"span",[["style","background-color: #c7e9c0"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 3"])),(t()(),Oo(11,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(12,0,null,null,0,"span",[["style","background-color: #a1d99b"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 4"])),(t()(),Oo(14,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(15,0,null,null,0,"span",[["style","background-color: #74c476"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 5"])),(t()(),Oo(17,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(18,0,null,null,0,"span",[["style","background-color: #41ab5d"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 6"])),(t()(),Oo(20,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(21,0,null,null,0,"span",[["style","background-color: #238b45"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 7"])),(t()(),Oo(23,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(24,0,null,null,0,"span",[["style","background-color: #006d2c"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 8"])),(t()(),Oo(26,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(27,0,null,null,0,"span",[["style","background-color: #00441b"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 9"]))],null,null)}function KE(t){return Jo(0,[(t()(),Oo(0,0,null,null,28,"mat-list",[["class","mat-list mat-list-base"]],null,null,null,t_,$v)),$i(1,704512,null,0,Wv,[rn],null,null),(t()(),Oo(2,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(3,0,null,null,0,"span",[["style","background-color: #fff5f0"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 1"])),(t()(),Oo(5,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(6,0,null,null,0,"span",[["style","background-color: #fee0d2"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 2"])),(t()(),Oo(8,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(9,0,null,null,0,"span",[["style","background-color: #fcbba1"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 3"])),(t()(),Oo(11,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(12,0,null,null,0,"span",[["style","background-color: #fc9272"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 4"])),(t()(),Oo(14,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(15,0,null,null,0,"span",[["style","background-color: #fb6a4a"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 5"])),(t()(),Oo(17,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(18,0,null,null,0,"span",[["style","background-color: #ef3b2c"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 6"])),(t()(),Oo(20,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(21,0,null,null,0,"span",[["style","background-color: #cb181d"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 7"])),(t()(),Oo(23,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(24,0,null,null,0,"span",[["style","background-color: #a50f15"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 8"])),(t()(),Oo(26,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(27,0,null,null,0,"span",[["style","background-color: #67000d"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 9"]))],null,null)}function JE(t){return Jo(0,[(t()(),Oo(0,0,null,null,28,"mat-list",[["class","mat-list mat-list-base"]],null,null,null,t_,$v)),$i(1,704512,null,0,Wv,[rn],null,null),(t()(),Oo(2,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(3,0,null,null,0,"span",[["style","background-color: #fff7f3"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 1"])),(t()(),Oo(5,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(6,0,null,null,0,"span",[["style","background-color: #fde0dd"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 2"])),(t()(),Oo(8,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(9,0,null,null,0,"span",[["style","background-color: #fcc5c0"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 3"])),(t()(),Oo(11,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(12,0,null,null,0,"span",[["style","background-color: #fa9fb5"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 4"])),(t()(),Oo(14,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(15,0,null,null,0,"span",[["style","background-color: #f768a1"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 5"])),(t()(),Oo(17,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(18,0,null,null,0,"span",[["style","background-color: #dd3497"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 6"])),(t()(),Oo(20,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(21,0,null,null,0,"span",[["style","background-color: #ae017e"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 7"])),(t()(),Oo(23,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(24,0,null,null,0,"span",[["style","background-color: #7a0177"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 8"])),(t()(),Oo(26,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(27,0,null,null,0,"span",[["style","background-color: #49006a"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 9"]))],null,null)}function QE(t){return Jo(0,[(t()(),Oo(0,0,null,null,28,"mat-list",[["class","mat-list mat-list-base"]],null,null,null,t_,$v)),$i(1,704512,null,0,Wv,[rn],null,null),(t()(),Oo(2,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(3,0,null,null,0,"span",[["style","background-color: #ffffd9"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 1"])),(t()(),Oo(5,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(6,0,null,null,0,"span",[["style","background-color: #edf8b1"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 2"])),(t()(),Oo(8,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(9,0,null,null,0,"span",[["style","background-color: #c7e9b4"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 3"])),(t()(),Oo(11,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(12,0,null,null,0,"span",[["style","background-color: #7fcdbb"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 4"])),(t()(),Oo(14,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(15,0,null,null,0,"span",[["style","background-color: #41b6c4"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 5"])),(t()(),Oo(17,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(18,0,null,null,0,"span",[["style","background-color: #1d91c0"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 6"])),(t()(),Oo(20,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(21,0,null,null,0,"span",[["style","background-color: #225ea8"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 7"])),(t()(),Oo(23,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(24,0,null,null,0,"span",[["style","background-color: #253494"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 8"])),(t()(),Oo(26,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(27,0,null,null,0,"span",[["style","background-color: #081d58"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 9"]))],null,null)}function $E(t){return Jo(0,[(t()(),Oo(0,0,null,null,28,"mat-list",[["class","mat-list mat-list-base"]],null,null,null,t_,$v)),$i(1,704512,null,0,Wv,[rn],null,null),(t()(),Oo(2,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(3,0,null,null,0,"span",[["style","background-color: #ffffcc"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 1"])),(t()(),Oo(5,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(6,0,null,null,0,"span",[["style","background-color: #ffeda0"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 2"])),(t()(),Oo(8,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(9,0,null,null,0,"span",[["style","background-color: #fed976"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 3"])),(t()(),Oo(11,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(12,0,null,null,0,"span",[["style","background-color: #feb24c"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 4"])),(t()(),Oo(14,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(15,0,null,null,0,"span",[["style","background-color: #fd8d3c"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 5"])),(t()(),Oo(17,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(18,0,null,null,0,"span",[["style","background-color: #fc4e2a"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 6"])),(t()(),Oo(20,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(21,0,null,null,0,"span",[["style","background-color: #e31a1c"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 7"])),(t()(),Oo(23,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(24,0,null,null,0,"span",[["style","background-color: #bd0026"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 8"])),(t()(),Oo(26,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(27,0,null,null,0,"span",[["style","background-color: #800026"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 9"]))],null,null)}function tS(t){return Jo(0,[(t()(),Oo(0,0,null,null,28,"mat-list",[["class","mat-list mat-list-base"]],null,null,null,t_,$v)),$i(1,704512,null,0,Wv,[rn],null,null),(t()(),Oo(2,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(3,0,null,null,0,"span",[["style","background-color: #d53e4f"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 1"])),(t()(),Oo(5,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(6,0,null,null,0,"span",[["style","background-color: #f46d43"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 2"])),(t()(),Oo(8,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(9,0,null,null,0,"span",[["style","background-color: #fdae61"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 3"])),(t()(),Oo(11,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(12,0,null,null,0,"span",[["style","background-color: #fee08b"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 4"])),(t()(),Oo(14,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(15,0,null,null,0,"span",[["style","background-color: #ffffbf"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 5"])),(t()(),Oo(17,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(18,0,null,null,0,"span",[["style","background-color: #e6f598"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 6"])),(t()(),Oo(20,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(21,0,null,null,0,"span",[["style","background-color: #abdda4"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 7"])),(t()(),Oo(23,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(24,0,null,null,0,"span",[["style","background-color: #66c2a5"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 8"])),(t()(),Oo(26,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(27,0,null,null,0,"span",[["style","background-color: #3288bd"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 9"]))],null,null)}function eS(t){return Jo(0,[(t()(),Oo(0,0,null,null,28,"mat-list",[["class","mat-list mat-list-base"]],null,null,null,t_,$v)),$i(1,704512,null,0,Wv,[rn],null,null),(t()(),Oo(2,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(3,0,null,null,0,"span",[["style","background-color: #d73027"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 1"])),(t()(),Oo(5,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(6,0,null,null,0,"span",[["style","background-color: #f46d43"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 2"])),(t()(),Oo(8,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(9,0,null,null,0,"span",[["style","background-color: #fdae61"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 3"])),(t()(),Oo(11,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(12,0,null,null,0,"span",[["style","background-color: #fee08b"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 4"])),(t()(),Oo(14,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(15,0,null,null,0,"span",[["style","background-color: #ffffbf"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 5"])),(t()(),Oo(17,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(18,0,null,null,0,"span",[["style","background-color: #ffffbf"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 6"])),(t()(),Oo(20,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(21,0,null,null,0,"span",[["style","background-color: #a6d96a"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 7"])),(t()(),Oo(23,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(24,0,null,null,0,"span",[["style","background-color: #66bd63"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 8"])),(t()(),Oo(26,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(27,0,null,null,0,"span",[["style","background-color: #1a9850"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 9"]))],null,null)}function nS(t){return Jo(0,[(t()(),Oo(0,0,null,null,28,"mat-list",[["class","mat-list mat-list-base"]],null,null,null,t_,$v)),$i(1,704512,null,0,Wv,[rn],null,null),(t()(),Oo(2,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(3,0,null,null,0,"span",[["style","background-color: #e60049"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 1"])),(t()(),Oo(5,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(6,0,null,null,0,"span",[["style","background-color: #0bb4ff"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 2"])),(t()(),Oo(8,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(9,0,null,null,0,"span",[["style","background-color: #50e991"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 3"])),(t()(),Oo(11,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(12,0,null,null,0,"span",[["style","background-color: #e6d800"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 4"])),(t()(),Oo(14,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(15,0,null,null,0,"span",[["style","background-color: #9b19f5"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 5"])),(t()(),Oo(17,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(18,0,null,null,0,"span",[["style","background-color: #ffa300"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 6"])),(t()(),Oo(20,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(21,0,null,null,0,"span",[["style","background-color: #dc0ab4"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 7"])),(t()(),Oo(23,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(24,0,null,null,0,"span",[["style","background-color: #b3d4ff"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 8"])),(t()(),Oo(26,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(27,0,null,null,0,"span",[["style","background-color: #00bfa0"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 9"]))],null,null)}function iS(t){return Jo(0,[(t()(),Oo(0,0,null,null,28,"mat-list",[["class","mat-list mat-list-base"]],null,null,null,t_,$v)),$i(1,704512,null,0,Wv,[rn],null,null),(t()(),Oo(2,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(3,0,null,null,0,"span",[["style","background-color: #a03500"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 1"])),(t()(),Oo(5,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(6,0,null,null,0,"span",[["style","background-color: #d9b400"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 2"])),(t()(),Oo(8,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(9,0,null,null,0,"span",[["style","background-color: #3264c8"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 3"])),(t()(),Oo(11,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(12,0,null,null,0,"span",[["style","background-color: #72b38e"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 4"])),(t()(),Oo(14,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(15,0,null,null,0,"span",[["style","background-color: #986ba1"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 5"])),(t()(),Oo(17,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(18,0,null,null,0,"span",[["style","background-color: #b9a087"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 6"])),(t()(),Oo(20,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(21,0,null,null,0,"span",[["style","background-color: #4c91bf"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 7"])),(t()(),Oo(23,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(24,0,null,null,0,"span",[["style","background-color: #a5d236"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 8"])),(t()(),Oo(26,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(27,0,null,null,0,"span",[["style","background-color: #96aedc"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 9"]))],null,null)}function rS(t){return Jo(0,[(t()(),Oo(0,0,null,null,28,"mat-list",[["class","mat-list mat-list-base"]],null,null,null,t_,$v)),$i(1,704512,null,0,Wv,[rn],null,null),(t()(),Oo(2,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(3,0,null,null,0,"span",[["style","background-color: #ed5151"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 1"])),(t()(),Oo(5,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(6,0,null,null,0,"span",[["style","background-color: #149ece"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 2"])),(t()(),Oo(8,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(9,0,null,null,0,"span",[["style","background-color: #a7c636"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 3"])),(t()(),Oo(11,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(12,0,null,null,0,"span",[["style","background-color: #9e559c"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 4"])),(t()(),Oo(14,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(15,0,null,null,0,"span",[["style","background-color: #fc921f"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 5"])),(t()(),Oo(17,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(18,0,null,null,0,"span",[["style","background-color: #ffde3e"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 6"])),(t()(),Oo(20,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(21,0,null,null,0,"span",[["style","background-color: #f789d8"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 7"])),(t()(),Oo(23,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(24,0,null,null,0,"span",[["style","background-color: #b7814a"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 8"])),(t()(),Oo(26,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(27,0,null,null,0,"span",[["style","background-color: #3caf99"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 9"]))],null,null)}function oS(t){return Jo(0,[(t()(),Oo(0,0,null,null,28,"mat-list",[["class","mat-list mat-list-base"]],null,null,null,t_,$v)),$i(1,704512,null,0,Wv,[rn],null,null),(t()(),Oo(2,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(3,0,null,null,0,"span",[["style","background-color: #fd7f6f"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 1"])),(t()(),Oo(5,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(6,0,null,null,0,"span",[["style","background-color: #7eb0d5"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 2"])),(t()(),Oo(8,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(9,0,null,null,0,"span",[["style","background-color: #b2e061"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 3"])),(t()(),Oo(11,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(12,0,null,null,0,"span",[["style","background-color: #bd7ebe"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 4"])),(t()(),Oo(14,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(15,0,null,null,0,"span",[["style","background-color: #ffb55a"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 5"])),(t()(),Oo(17,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(18,0,null,null,0,"span",[["style","background-color: #ffee65"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 6"])),(t()(),Oo(20,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(21,0,null,null,0,"span",[["style","background-color: #beb9db"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 7"])),(t()(),Oo(23,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(24,0,null,null,0,"span",[["style","background-color: #fdcce5"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 8"])),(t()(),Oo(26,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),Oo(27,0,null,null,0,"span",[["style","background-color: #8bd3c7"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Sample 9"]))],null,null)}function aS(t){return Jo(0,[(t()(),Oo(0,0,null,null,30,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],[[1,"colspan",0]],null,null,null,null)),$i(1,16384,null,0,Iw,[nw,rn],null,null),(t()(),Oo(2,0,null,null,28,"div",[["class","example-element-detail"]],[[24,"@detailExpand",0]],null,null,null,null)),(t()(),Ro(16777216,null,null,1,null,XE)),$i(4,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,ZE)),$i(6,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,WE)),$i(8,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,YE)),$i(10,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,KE)),$i(12,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,JE)),$i(14,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,QE)),$i(16,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,$E)),$i(18,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,tS)),$i(20,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,eS)),$i(22,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,nS)),$i(24,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,iS)),$i(26,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,rS)),$i(28,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,oS)),$i(30,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,4,0,"London Tube"===e.context.$implicit.name&&n.tubeLayerVisibility),t(e,6,0,"TfL Cycle Routes"===e.context.$implicit.name&&n.tflCycleRoutesVisibility),t(e,8,0,"TfL Accidents 2015-2019"===e.context.$implicit.name&&n.tflAccidentsVisibility),t(e,10,0,"greenramp"===e.context.$implicit.colourRamp),t(e,12,0,"redramp"===e.context.$implicit.colourRamp),t(e,14,0,"pinkramp"===e.context.$implicit.colourRamp),t(e,16,0,"blueramp"===e.context.$implicit.colourRamp),t(e,18,0,"yellowramp"===e.context.$implicit.colourRamp),t(e,20,0,"blueredramp"===e.context.$implicit.colourRamp),t(e,22,0,"redgreenramp"===e.context.$implicit.colourRamp),t(e,24,0,"flowerpalette"===e.context.$implicit.colourPalette),t(e,26,0,"earthpalette"===e.context.$implicit.colourPalette),t(e,28,0,"movementpalette"===e.context.$implicit.colourPalette),t(e,30,0,"pastelpalette"===e.context.$implicit.colourPalette)}),(function(t,e){var n=e.component;t(e,0,0,n.displayedColumns.length),t(e,2,0,e.context.$implicit==n.expandedElement?"expanded":"collapsed")}))}function sS(t){return Jo(0,[(t()(),Oo(0,0,null,null,2,"tr",[["class","mat-header-row"],["mat-header-row",""],["role","row"]],null,null,null,Nw,Dw)),tr(6144,null,hw,null,[Aw]),$i(2,49152,null,0,Aw,[],null,null)],null,null)}function lS(t){return Jo(0,[(t()(),Oo(0,0,null,null,2,"tr",[["class","example-element-row mat-row"],["mat-row",""],["role","row"]],[[2,"example-expanded-row",null]],[[null,"click"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==(r.expandedElement=r.expandedElement===t.context.$implicit?null:t.context.$implicit)&&i),i}),zw,Fw)),tr(6144,null,pw,null,[Lw]),$i(2,49152,null,0,Lw,[],null,null)],null,(function(t,e){t(e,0,0,e.component.expandedElement===e.context.$implicit)}))}function uS(t){return Jo(0,[(t()(),Oo(0,0,null,null,2,"tr",[["class","example-detail-row mat-row"],["mat-row",""],["role","row"]],null,null,null,zw,Fw)),tr(6144,null,pw,null,[Lw]),$i(2,49152,null,0,Lw,[],null,null)],null,null)}function cS(t){return Jo(0,[(t()(),Oo(0,0,null,null,39,"table",[["class","example-table-container mat-table"],["mat-table",""],["multiTemplateDataRows",""]],null,null,null,Ow,Rw)),tr(6144,null,_w,null,[ww]),$i(2,2342912,[[2,4]],4,ww,[wn,Se,rn,[8,null],[2,rd],Vs,qp],{dataSource:[0,"dataSource"],multiTemplateDataRows:[1,"multiTemplateDataRows"]},null),Bo(603979776,14,{_contentColumnDefs:1}),Bo(603979776,15,{_contentRowDefs:1}),Bo(603979776,16,{_contentHeaderRowDefs:1}),Bo(603979776,17,{_contentFooterRowDefs:1}),(t()(),Oo(7,0,null,null,12,null,null,null,null,null,null,null)),tr(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Ew]),$i(9,16384,null,3,Ew,[],{name:[0,"name"]},null),Bo(603979776,18,{cell:0}),Bo(603979776,19,{headerCell:0}),Bo(603979776,20,{footerCell:0}),tr(2048,[[14,4]],nw,null,[Ew]),(t()(),Ro(0,null,null,2,null,FE)),$i(15,16384,null,0,kw,[In],null,null),tr(2048,[[19,4]],ew,null,[kw]),(t()(),Ro(0,null,null,2,null,HE)),$i(18,16384,null,0,Cw,[In],null,null),tr(2048,[[18,4]],tw,null,[Cw]),(t()(),Oo(20,0,null,null,9,null,null,null,null,null,null,null)),tr(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Ew]),$i(22,16384,null,3,Ew,[],{name:[0,"name"]},null),Bo(603979776,21,{cell:0}),Bo(603979776,22,{headerCell:0}),Bo(603979776,23,{footerCell:0}),tr(2048,[[14,4]],nw,null,[Ew]),(t()(),Ro(0,null,null,2,null,aS)),$i(28,16384,null,0,Cw,[In],null,null),tr(2048,[[21,4]],tw,null,[Cw]),(t()(),Ro(0,null,null,2,null,sS)),$i(31,540672,null,0,Tw,[In,wn],{columns:[0,"columns"]},null),tr(2048,[[16,4]],sw,null,[Tw]),(t()(),Ro(0,null,null,2,null,lS)),$i(34,540672,null,0,Pw,[In,wn],{columns:[0,"columns"]},null),tr(2048,[[15,4]],uw,null,[Pw]),(t()(),Ro(0,null,null,3,null,uS)),$i(37,540672,null,0,Pw,[In,wn],{columns:[0,"columns"]},null),Zo(32,38,new Array(1)),tr(2048,[[15,4]],uw,null,[Pw])],(function(t,e){var n=e.component;t(e,2,0,n.dataSource,""),t(e,9,0,"Name"),t(e,22,0,"expandedDetail"),t(e,31,0,n.displayedColumns),t(e,34,0,n.displayedColumns);var i=t(e,38,0,"expandedDetail");t(e,37,0,i)}),null)}function hS(t){return Jo(0,[Bo(671088640,1,{fileDropEl:0}),Bo(671088640,2,{table:0}),(t()(),Oo(2,0,null,null,217,"div",[["appDnd",""],["class","container"]],null,null,null,null,null)),(t()(),Oo(3,0,[[1,0],["fileDropRef",1]],null,0,"input",[["id","fileDropRef"],["multiple",""],["type","file"]],null,null,null,null,null)),(t()(),Oo(4,0,null,null,11,"div",[["class","match-parent"],["id","map"]],null,null,null,null,null)),(t()(),Oo(5,0,null,null,10,"div",[["class","example-form"]],null,null,null,null,null)),(t()(),Oo(6,0,null,null,7,"div",[],null,null,null,null,null)),(t()(),Oo(7,0,null,null,6,"input",[["class","example-full-width"],["id","autocomplete"],["ngx-google-places-autocomplete",""],["placeholder","Search Location"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"onAddressChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0,r=t.component;return"input"===e&&(i=!1!==Vi(t,8)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==Vi(t,8).onTouched()&&i),"compositionstart"===e&&(i=!1!==Vi(t,8)._compositionStart()&&i),"compositionend"===e&&(i=!1!==Vi(t,8)._compositionEnd(n.target.value)&&i),"onAddressChange"===e&&(i=!1!==r.handleAddressChange(n)&&i),i}),null,null)),$i(8,16384,null,0,Gy,[ln,rn,[2,qy]],null,null),tr(1024,null,jy,(function(t){return[t]}),[Gy]),$i(10,540672,null,0,Bv,[[8,null],[8,null],[6,jy],[2,zv]],{form:[0,"form"]},null),tr(2048,null,Wy,null,[Bv]),$i(12,16384,null,0,Yy,[[4,Wy]],null,null),$i(13,4210688,null,0,Vw,[rn,Yr],null,{onAddressChange:"onAddressChange"}),(t()(),Ro(16777216,null,null,1,null,AE)),$i(15,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Ro(16777216,null,null,1,null,ME)),$i(17,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Oo(18,16777216,null,null,43,"button",[["aria-haspopup","true"],["class","mapswitchbutton mat-menu-trigger"],["color","accent"],["mat-mini-fab",""],["matTooltip","Switch Map View"],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-expanded",0]],[[null,"longpress"],[null,"keydown"],[null,"touchend"],[null,"mousedown"],[null,"click"]],(function(t,e,n){var i=!0;return"longpress"===e&&(i=!1!==Vi(t,20).show()&&i),"keydown"===e&&(i=!1!==Vi(t,20)._handleKeydown(n)&&i),"touchend"===e&&(i=!1!==Vi(t,20)._handleTouchend()&&i),"mousedown"===e&&(i=!1!==Vi(t,21)._handleMousedown(n)&&i),"keydown"===e&&(i=!1!==Vi(t,21)._handleKeydown(n)&&i),"click"===e&&(i=!1!==Vi(t,21)._handleClick(n)&&i),i}),Ig,Sg)),$i(19,180224,null,0,ed,[rn,kf,[2,kg]],{color:[0,"color"]},null),$i(20,212992,null,0,Hw,[zb,rn,ub,Pn,Yr,qp,cf,kf,jw,[2,rd],[2,Gw],[2,Tu]],{message:[0,"message"]},null),$i(21,1196032,null,0,aC,[zb,rn,Pn,iC,[2,eC],[8,null],[2,rd],kf],{menu:[0,"menu"]},null),(t()(),Oo(22,0,null,0,36,"mat-menu",[],null,null,null,hC,uC)),$i(23,1294336,[["mapMenu",4]],3,nC,[rn,Yr,tC],null,null),Bo(603979776,3,{_allItems:1}),Bo(603979776,4,{items:1}),Bo(603979776,5,{lazyContent:0}),tr(2048,null,eC,null,[nC]),tr(2048,null,Qw,null,[eC]),(t()(),Oo(29,0,null,0,5,"button",[["class","mat-menu-item"],["mat-menu-item",""],["style","font-size: 13px;\n            font-family: 'Raleway', sans-serif;"]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==Vi(t,30)._checkDisabled(n)&&i),"mouseenter"===e&&(i=!1!==Vi(t,30)._handleMouseEnter()&&i),"click"===e&&(i=!1!==r.switchMapView("TRANSPORT")&&i),i}),fC,pC)),$i(30,180224,[[3,4],[4,4]],0,$w,[rn,Vs,kf,[2,Qw]],{disabled:[0,"disabled"]},null),(t()(),Oo(31,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(32,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,[" map "])),(t()(),Wo(-1,0,[" Transport "])),(t()(),Oo(35,0,null,0,5,"button",[["class","mat-menu-item"],["mat-menu-item",""],["style","font-size: 13px;\n            font-family: 'Raleway', sans-serif;"]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==Vi(t,36)._checkDisabled(n)&&i),"mouseenter"===e&&(i=!1!==Vi(t,36)._handleMouseEnter()&&i),"click"===e&&(i=!1!==r.switchMapView("MONOCHROME")&&i),i}),fC,pC)),$i(36,180224,[[3,4],[4,4]],0,$w,[rn,Vs,kf,[2,Qw]],{disabled:[0,"disabled"]},null),(t()(),Oo(37,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(38,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,[" map "])),(t()(),Wo(-1,0,[" MonoChrome "])),(t()(),Oo(41,0,null,0,5,"button",[["class","mat-menu-item"],["mat-menu-item",""],["style","font-size: 13px;\n            font-family: 'Raleway', sans-serif;"]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==Vi(t,42)._checkDisabled(n)&&i),"mouseenter"===e&&(i=!1!==Vi(t,42)._handleMouseEnter()&&i),"click"===e&&(i=!1!==r.switchMapView("MONOCHROME LIGHT")&&i),i}),fC,pC)),$i(42,180224,[[3,4],[4,4]],0,$w,[rn,Vs,kf,[2,Qw]],{disabled:[0,"disabled"]},null),(t()(),Oo(43,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(44,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,[" map "])),(t()(),Wo(-1,0,[" MonoChrome Light "])),(t()(),Oo(47,0,null,0,5,"button",[["class","mat-menu-item"],["mat-menu-item",""],["style","font-size: 13px;\n            font-family: 'Raleway', sans-serif;"]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==Vi(t,48)._checkDisabled(n)&&i),"mouseenter"===e&&(i=!1!==Vi(t,48)._handleMouseEnter()&&i),"click"===e&&(i=!1!==r.switchMapView("SATELLITE")&&i),i}),fC,pC)),$i(48,180224,[[3,4],[4,4]],0,$w,[rn,Vs,kf,[2,Qw]],{disabled:[0,"disabled"]},null),(t()(),Oo(49,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(50,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,[" map "])),(t()(),Wo(-1,0,[" Satellite "])),(t()(),Oo(53,0,null,0,5,"button",[["class","mat-menu-item"],["mat-menu-item",""],["style","font-size: 13px;\n            font-family: 'Raleway', sans-serif;"]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==Vi(t,54)._checkDisabled(n)&&i),"mouseenter"===e&&(i=!1!==Vi(t,54)._handleMouseEnter()&&i),"click"===e&&(i=!1!==r.switchMapView("CONSTRUCTION LOGISTICS")&&i),i}),fC,pC)),$i(54,180224,[[3,4],[4,4]],0,$w,[rn,Vs,kf,[2,Qw]],{disabled:[0,"disabled"]},null),(t()(),Oo(55,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(56,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,[" map "])),(t()(),Wo(-1,0,[" Construction Logistics "])),(t()(),Oo(59,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(60,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,[" map "])),(t()(),Oo(62,16777216,null,null,111,"button",[["aria-haspopup","true"],["class","maplayersbutton mat-menu-trigger"],["color","accent"],["mat-mini-fab",""],["matTooltip","Show / Hide Map Layers"],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-expanded",0]],[[null,"longpress"],[null,"keydown"],[null,"touchend"],[null,"mousedown"],[null,"click"]],(function(t,e,n){var i=!0;return"longpress"===e&&(i=!1!==Vi(t,64).show()&&i),"keydown"===e&&(i=!1!==Vi(t,64)._handleKeydown(n)&&i),"touchend"===e&&(i=!1!==Vi(t,64)._handleTouchend()&&i),"mousedown"===e&&(i=!1!==Vi(t,65)._handleMousedown(n)&&i),"keydown"===e&&(i=!1!==Vi(t,65)._handleKeydown(n)&&i),"click"===e&&(i=!1!==Vi(t,65)._handleClick(n)&&i),i}),Ig,Sg)),$i(63,180224,null,0,ed,[rn,kf,[2,kg]],{color:[0,"color"]},null),$i(64,212992,null,0,Hw,[zb,rn,ub,Pn,Yr,qp,cf,kf,jw,[2,rd],[2,Gw],[2,Tu]],{message:[0,"message"]},null),$i(65,1196032,null,0,aC,[zb,rn,Pn,iC,[2,eC],[8,null],[2,rd],kf],{menu:[0,"menu"]},null),(t()(),Oo(66,0,null,0,104,"mat-menu",[],null,null,null,hC,uC)),$i(67,1294336,[["preStyledLayerMenu",4]],3,nC,[rn,Yr,tC],null,null),Bo(603979776,6,{_allItems:1}),Bo(603979776,7,{items:1}),Bo(603979776,8,{lazyContent:0}),tr(2048,null,eC,null,[nC]),tr(2048,null,Qw,null,[eC]),(t()(),Oo(73,0,null,0,2,"mat-label",[["style","font-family: Raleway, sans-serif; font-size: 12px; color: violet"]],null,null,null,null,null)),$i(74,16384,null,0,Og,[],null,null),(t()(),Wo(-1,null,["London"])),(t()(),Oo(76,0,null,0,8,"button",[["class","mat-menu-item"],["mat-menu-item",""],["style","font-size: 13px;\n    font-family: 'Raleway', sans-serif;"]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==Vi(t,77)._checkDisabled(n)&&i),"mouseenter"===e&&(i=!1!==Vi(t,77)._handleMouseEnter()&&i),"click"===e&&(i=!1!==r.switchPreStyledMapLayer("PTAL",n,null,!1)&&i),i}),fC,pC)),$i(77,180224,[[6,4],[7,4]],0,$w,[rn,Vs,kf,[2,Qw]],null,null),(t()(),Oo(78,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(79,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,[" poll "])),(t()(),Wo(-1,0,[" PTAL "])),(t()(),Oo(82,0,null,0,2,"mat-icon",[["class","smallerdatalayerbutton mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(83,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(84,0,["",""])),(t()(),Oo(85,0,null,0,8,"button",[["class","mat-menu-item"],["mat-menu-item",""],["style","font-size: 13px;\n    font-family: 'Raleway', sans-serif;"]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==Vi(t,86)._checkDisabled(n)&&i),"mouseenter"===e&&(i=!1!==Vi(t,86)._handleMouseEnter()&&i),"click"===e&&(i=!1!==r.switchPreStyledMapLayer("London Tube",n,null,!1)&&i),i}),fC,pC)),$i(86,180224,[[6,4],[7,4]],0,$w,[rn,Vs,kf,[2,Qw]],null,null),(t()(),Oo(87,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(88,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,[" train "])),(t()(),Wo(-1,0,[" London Tube "])),(t()(),Oo(91,0,null,0,2,"mat-icon",[["class","smallerdatalayerbutton mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(92,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(93,0,["",""])),(t()(),Oo(94,0,null,0,8,"button",[["class","mat-menu-item"],["mat-menu-item",""],["style","font-size: 13px;\n        font-family: 'Raleway', sans-serif;"]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==Vi(t,95)._checkDisabled(n)&&i),"mouseenter"===e&&(i=!1!==Vi(t,95)._handleMouseEnter()&&i),"click"===e&&(i=!1!==r.switchPreStyledMapLayer("TfL Cycle Routes",n,null,!1)&&i),i}),fC,pC)),$i(95,180224,[[6,4],[7,4]],0,$w,[rn,Vs,kf,[2,Qw]],null,null),(t()(),Oo(96,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(97,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,[" directions_bike "])),(t()(),Wo(-1,0,[" TfL Cycle Routes "])),(t()(),Oo(100,0,null,0,2,"mat-icon",[["class","smallerdatalayerbutton mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(101,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(102,0,["",""])),(t()(),Oo(103,0,null,0,8,"button",[["class","mat-menu-item"],["mat-menu-item",""],["style","font-size: 13px;\n        font-family: 'Raleway', sans-serif;"]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==Vi(t,104)._checkDisabled(n)&&i),"mouseenter"===e&&(i=!1!==Vi(t,104)._handleMouseEnter()&&i),"click"===e&&(i=!1!==r.switchPreStyledMapLayer("TfL Cycle Parking",n,null,!1)&&i),i}),fC,pC)),$i(104,180224,[[6,4],[7,4]],0,$w,[rn,Vs,kf,[2,Qw]],null,null),(t()(),Oo(105,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(106,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,[" local_parking "])),(t()(),Wo(-1,0,[" TfL Cycle Parking "])),(t()(),Oo(109,0,null,0,2,"mat-icon",[["class","smallerdatalayerbutton mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(110,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(111,0,["",""])),(t()(),Oo(112,0,null,0,8,"button",[["class","mat-menu-item"],["mat-menu-item",""],["style","font-size: 13px;\n          font-family: 'Raleway', sans-serif;"]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==Vi(t,113)._checkDisabled(n)&&i),"mouseenter"===e&&(i=!1!==Vi(t,113)._handleMouseEnter()&&i),"click"===e&&(i=!1!==r.switchPreStyledMapLayer("TfL Accidents 2015-2019",n,null,!1)&&i),i}),fC,pC)),$i(113,180224,[[6,4],[7,4]],0,$w,[rn,Vs,kf,[2,Qw]],null,null),(t()(),Oo(114,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(115,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,[" warning "])),(t()(),Wo(-1,0,[" TfL Accidents 2015-2019 "])),(t()(),Oo(118,0,null,0,2,"mat-icon",[["class","smallerdatalayerbutton mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(119,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(120,0,["",""])),(t()(),Oo(121,0,null,0,8,"button",[["class","mat-menu-item"],["mat-menu-item",""],["style","font-size: 13px;\n            font-family: 'Raleway', sans-serif;"]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==Vi(t,122)._checkDisabled(n)&&i),"mouseenter"===e&&(i=!1!==Vi(t,122)._handleMouseEnter()&&i),"click"===e&&(i=!1!==r.switchPreStyledMapLayer("TfL Accidents 2015-2019 Cluster",n,null,!1)&&i),i}),fC,pC)),$i(122,180224,[[6,4],[7,4]],0,$w,[rn,Vs,kf,[2,Qw]],null,null),(t()(),Oo(123,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(124,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,[" warning "])),(t()(),Wo(-1,0,[" TfL Accidents 2015-2019 Cluster "])),(t()(),Oo(127,0,null,0,2,"mat-icon",[["class","smallerdatalayerbutton mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(128,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(129,0,["",""])),(t()(),Oo(130,0,null,0,8,"button",[["class","mat-menu-item"],["mat-menu-item",""],["style","font-size: 13px;\n            font-family: 'Raleway', sans-serif;"]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==Vi(t,131)._checkDisabled(n)&&i),"mouseenter"===e&&(i=!1!==Vi(t,131)._handleMouseEnter()&&i),"click"===e&&(i=!1!==r.switchPreStyledMapLayer("London Planning Permission",n,null,!1)&&i),i}),fC,pC)),$i(131,180224,[[6,4],[7,4]],0,$w,[rn,Vs,kf,[2,Qw]],null,null),(t()(),Oo(132,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(133,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,[" location_city "])),(t()(),Wo(-1,0,[" London Planning Permission "])),(t()(),Oo(136,0,null,0,2,"mat-icon",[["class","smallerdatalayerbutton mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(137,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(138,0,["",""])),(t()(),Oo(139,0,null,0,8,"button",[["class","mat-menu-item"],["mat-menu-item",""],["style","font-size: 13px;\n            font-family: 'Raleway', sans-serif;"]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==Vi(t,140)._checkDisabled(n)&&i),"mouseenter"===e&&(i=!1!==Vi(t,140)._handleMouseEnter()&&i),"click"===e&&(i=!1!==r.switchPreStyledMapLayer("London Bus Stops",n,null,!1)&&i),i}),fC,pC)),$i(140,180224,[[6,4],[7,4]],0,$w,[rn,Vs,kf,[2,Qw]],null,null),(t()(),Oo(141,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(142,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,[" directions_bus "])),(t()(),Wo(-1,0,[" London Bus Stop Frequencies "])),(t()(),Oo(145,0,null,0,2,"mat-icon",[["class","smallerdatalayerbutton mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(146,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(147,0,["",""])),(t()(),Oo(148,0,null,0,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,mC,dC)),$i(149,49152,null,0,Jv,[],null,null),(t()(),Oo(150,0,null,0,2,"mat-label",[["style","font-family: Raleway, sans-serif; font-size: 12px; color: violet"]],null,null,null,null,null)),$i(151,16384,null,0,Og,[],null,null),(t()(),Wo(-1,null,["Montreal"])),(t()(),Oo(153,0,null,0,8,"button",[["class","mat-menu-item"],["mat-menu-item",""],["style","font-size: 13px;\n            font-family: 'Raleway', sans-serif;"]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==Vi(t,154)._checkDisabled(n)&&i),"mouseenter"===e&&(i=!1!==Vi(t,154)._handleMouseEnter()&&i),"click"===e&&(i=!1!==r.switchPreStyledMapLayer("Montreal Bixi Stations",n,null,!1)&&i),i}),fC,pC)),$i(154,180224,[[6,4],[7,4]],0,$w,[rn,Vs,kf,[2,Qw]],null,null),(t()(),Oo(155,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(156,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,[" directions_bike "])),(t()(),Wo(-1,0,[" Montreal Bixi Stations "])),(t()(),Oo(159,0,null,0,2,"mat-icon",[["class","smallerdatalayerbutton mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(160,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(161,0,["",""])),(t()(),Oo(162,0,null,0,8,"button",[["class","mat-menu-item"],["mat-menu-item",""],["style","font-size: 13px;\n            font-family: 'Raleway', sans-serif;"]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==Vi(t,163)._checkDisabled(n)&&i),"mouseenter"===e&&(i=!1!==Vi(t,163)._handleMouseEnter()&&i),"click"===e&&(i=!1!==r.switchPreStyledMapLayer("Montreal Collision Data",n,null,!1)&&i),i}),fC,pC)),$i(163,180224,[[6,4],[7,4]],0,$w,[rn,Vs,kf,[2,Qw]],null,null),(t()(),Oo(164,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(165,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,[" warning "])),(t()(),Wo(-1,0,[" Montreal Collision Data "])),(t()(),Oo(168,0,null,0,2,"mat-icon",[["class","smallerdatalayerbutton mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(169,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(170,0,["",""])),(t()(),Oo(171,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(172,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,[" layers "])),(t()(),Oo(174,0,null,null,0,"div",[["class","coordinates"],["id","coordinates"]],null,null,null,null,null)),(t()(),Oo(175,0,null,null,34,"span",[["class","modeselectouter"]],null,null,null,null,null)),(t()(),Oo(176,0,null,null,1,"h2",[["style","color: #414241; font-weight: bold; font-family: Raleway, sans-serif; font-size: 25px;"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Do you live in a 15 Min Neighbourhood?"])),(t()(),Oo(178,0,null,null,1,"h3",[["style","color: #414241; font-weight: bold; font-family: Raleway, sans-serif;"]],null,null,null,null,null)),(t()(),Wo(-1,null,["Mode:"])),(t()(),Oo(180,0,null,null,22,"mat-button-toggle-group",[["aria-label","Favorite Color"],["class","modeselect mat-button-toggle-group"],["name","favoriteColor"],["role","group"]],[[1,"aria-disabled",0],[2,"mat-button-toggle-vertical",null],[2,"mat-button-toggle-group-appearance-standard",null]],null,null,null,null)),tr(5120,null,jy,(function(t){return[t]}),[bC]),tr(6144,null,yC,null,[bC]),$i(183,1130496,null,1,bC,[Se,[2,gC]],{name:[0,"name"]},null),Bo(603979776,9,{_buttonToggles:1}),(t()(),Oo(185,0,null,null,5,"mat-button-toggle",[["class","walking mat-button-toggle"],["value","walking"]],[[2,"mat-button-toggle-standalone",null],[2,"mat-button-toggle-checked",null],[2,"mat-button-toggle-disabled",null],[2,"mat-button-toggle-appearance-standard",null],[1,"tabindex",0],[1,"id",0],[1,"name",0]],[[null,"click"],[null,"focus"]],(function(t,e,n){var i=!0,r=t.component;return"focus"===e&&(i=!1!==Vi(t,186).focus()&&i),"click"===e&&(i=!1!==r.changeMode("walking")&&i),i}),kC,CC)),$i(186,245760,[[9,4]],0,xC,[[2,bC],Se,rn,kf,[8,null],[2,gC]],{value:[0,"value"]},null),(t()(),Wo(-1,0,[" Walking "])),(t()(),Oo(188,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(189,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,["directions_walk"])),(t()(),Oo(191,0,null,null,5,"mat-button-toggle",[["class","cycling mat-button-toggle"],["value","cycling"]],[[2,"mat-button-toggle-standalone",null],[2,"mat-button-toggle-checked",null],[2,"mat-button-toggle-disabled",null],[2,"mat-button-toggle-appearance-standard",null],[1,"tabindex",0],[1,"id",0],[1,"name",0]],[[null,"click"],[null,"focus"]],(function(t,e,n){var i=!0,r=t.component;return"focus"===e&&(i=!1!==Vi(t,192).focus()&&i),"click"===e&&(i=!1!==r.changeMode("cycling")&&i),i}),kC,CC)),$i(192,245760,[[9,4]],0,xC,[[2,bC],Se,rn,kf,[8,null],[2,gC]],{value:[0,"value"]},null),(t()(),Wo(-1,0,[" Cycling "])),(t()(),Oo(194,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(195,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,["directions_bike"])),(t()(),Oo(197,0,null,null,5,"mat-button-toggle",[["class","scooter mat-button-toggle"],["value","scooter"]],[[2,"mat-button-toggle-standalone",null],[2,"mat-button-toggle-checked",null],[2,"mat-button-toggle-disabled",null],[2,"mat-button-toggle-appearance-standard",null],[1,"tabindex",0],[1,"id",0],[1,"name",0]],[[null,"click"],[null,"focus"]],(function(t,e,n){var i=!0,r=t.component;return"focus"===e&&(i=!1!==Vi(t,198).focus()&&i),"click"===e&&(i=!1!==r.changeMode("scooter")&&i),i}),kC,CC)),$i(198,245760,[[9,4]],0,xC,[[2,bC],Se,rn,kf,[8,null],[2,gC]],{value:[0,"value"]},null),(t()(),Wo(-1,0,[" E-Scooter "])),(t()(),Oo(200,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,By,zy)),$i(201,9158656,null,0,Ny,[rn,Ty,[8,null],[2,My],[2,Yt]],null,null),(t()(),Wo(-1,0,["explicit"])),(t()(),Oo(203,0,null,null,6,"span",[["class","chiplist"]],null,null,null,null,null)),(t()(),Oo(204,0,null,null,5,"mat-chip-list",[["cdkDropList",""],["cdkDropListOrientation","horizontal"],["class","example-chip mat-chip-list"]],[[1,"tabindex",0],[1,"aria-describedby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-multiselectable",0],[1,"role",0],[2,"mat-chip-list-disabled",null],[2,"mat-chip-list-invalid",null],[2,"mat-chip-list-required",null],[1,"aria-orientation",0],[8,"id",0]],[[null,"focus"],[null,"blur"],[null,"keydown"]],(function(t,e,n){var i=!0;return"focus"===e&&(i=!1!==Vi(t,206).focus()&&i),"blur"===e&&(i=!1!==Vi(t,206)._blur()&&i),"keydown"===e&&(i=!1!==Vi(t,206)._keydown(n)&&i),i}),SC,EC)),tr(6144,null,Mg,null,[Gx]),$i(206,1556480,null,1,Gx,[rn,Se,[2,rd],[2,Lv],[2,Vv],Df,[8,null]],null,null),Bo(603979776,10,{chips:1}),(t()(),Ro(16777216,null,0,1,null,RE)),$i(209,278528,null,0,Cs,[Pn,In,wn],{ngForOf:[0,"ngForOf"]},null),(t()(),Ro(16777216,null,null,1,null,NE)),$i(211,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Oo(212,0,null,null,6,"div",[["class","outercontainer"],["id","outercontainer"],["mat-dialog-container",""]],null,null,null,null,null)),tr(512,null,Ms,Rs,[rn,Cn,ln]),$i(214,278528,null,0,Os,[Ms],{ngStyle:[0,"ngStyle"]},null),Xo(215,{display:0}),(t()(),Oo(216,0,null,null,2,"div",[["class","innercontainer"]],null,null,null,null,null)),(t()(),Ro(16777216,null,null,1,null,cS)),$i(218,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null),(t()(),Oo(219,0,null,null,0,"img",[["class","oc-image"],["src","../assets/images/mongo_logo.png"]],null,null,null,null,null))],(function(t,e){var n=e.component;t(e,10,0,n.searchMoviesCtrl),t(e,15,0,n.addressLoaded&&n.resultsReturned),t(e,17,0,n.fileUploading||n.loadingInProgress),t(e,19,0,"accent"),t(e,20,0,"Switch Map View"),t(e,21,0,Vi(e,23)),t(e,23,0),t(e,30,0,"TRANSPORT"===n.mapService.getMapType()),t(e,32,0),t(e,36,0,"MONOCHROME"===n.mapService.getMapType()),t(e,38,0),t(e,42,0,"MONOCHROME LIGHT"===n.mapService.getMapType()),t(e,44,0),t(e,48,0,"SATELLITE"===n.mapService.getMapType()),t(e,50,0),t(e,54,0,"CONSTRUCTION LOGISTICS"===n.mapService.getMapType()),t(e,56,0),t(e,60,0),t(e,63,0,"accent"),t(e,64,0,"Show / Hide Map Layers"),t(e,65,0,Vi(e,67)),t(e,67,0),t(e,79,0),t(e,83,0),t(e,88,0),t(e,92,0),t(e,97,0),t(e,101,0),t(e,106,0),t(e,110,0),t(e,115,0),t(e,119,0),t(e,124,0),t(e,128,0),t(e,133,0),t(e,137,0),t(e,142,0),t(e,146,0),t(e,156,0),t(e,160,0),t(e,165,0),t(e,169,0),t(e,172,0),t(e,183,0,"favoriteColor"),t(e,186,0,"walking"),t(e,189,0),t(e,192,0,"cycling"),t(e,195,0),t(e,198,0,"scooter"),t(e,201,0),t(e,206,0),t(e,209,0,n.times),t(e,211,0,n.addressLoaded&&n.resultsReturned);var i=t(e,215,0,n.dataSource.length>0?"":"none");t(e,214,0,i),t(e,218,0,!n.noDataFound)}),(function(t,e){var n=e.component;t(e,7,0,Vi(e,12).ngClassUntouched,Vi(e,12).ngClassTouched,Vi(e,12).ngClassPristine,Vi(e,12).ngClassDirty,Vi(e,12).ngClassValid,Vi(e,12).ngClassInvalid,Vi(e,12).ngClassPending),t(e,18,0,Vi(e,19).disabled||null,"NoopAnimations"===Vi(e,19)._animationMode,Vi(e,21).menuOpen||null),t(e,29,0,Vi(e,30).role,Vi(e,30)._highlighted,Vi(e,30)._triggersSubmenu,Vi(e,30)._getTabIndex(),Vi(e,30).disabled.toString(),Vi(e,30).disabled||null),t(e,31,0,Vi(e,32).inline,"primary"!==Vi(e,32).color&&"accent"!==Vi(e,32).color&&"warn"!==Vi(e,32).color),t(e,35,0,Vi(e,36).role,Vi(e,36)._highlighted,Vi(e,36)._triggersSubmenu,Vi(e,36)._getTabIndex(),Vi(e,36).disabled.toString(),Vi(e,36).disabled||null),t(e,37,0,Vi(e,38).inline,"primary"!==Vi(e,38).color&&"accent"!==Vi(e,38).color&&"warn"!==Vi(e,38).color),t(e,41,0,Vi(e,42).role,Vi(e,42)._highlighted,Vi(e,42)._triggersSubmenu,Vi(e,42)._getTabIndex(),Vi(e,42).disabled.toString(),Vi(e,42).disabled||null),t(e,43,0,Vi(e,44).inline,"primary"!==Vi(e,44).color&&"accent"!==Vi(e,44).color&&"warn"!==Vi(e,44).color),t(e,47,0,Vi(e,48).role,Vi(e,48)._highlighted,Vi(e,48)._triggersSubmenu,Vi(e,48)._getTabIndex(),Vi(e,48).disabled.toString(),Vi(e,48).disabled||null),t(e,49,0,Vi(e,50).inline,"primary"!==Vi(e,50).color&&"accent"!==Vi(e,50).color&&"warn"!==Vi(e,50).color),t(e,53,0,Vi(e,54).role,Vi(e,54)._highlighted,Vi(e,54)._triggersSubmenu,Vi(e,54)._getTabIndex(),Vi(e,54).disabled.toString(),Vi(e,54).disabled||null),t(e,55,0,Vi(e,56).inline,"primary"!==Vi(e,56).color&&"accent"!==Vi(e,56).color&&"warn"!==Vi(e,56).color),t(e,59,0,Vi(e,60).inline,"primary"!==Vi(e,60).color&&"accent"!==Vi(e,60).color&&"warn"!==Vi(e,60).color),t(e,62,0,Vi(e,63).disabled||null,"NoopAnimations"===Vi(e,63)._animationMode,Vi(e,65).menuOpen||null),t(e,76,0,Vi(e,77).role,Vi(e,77)._highlighted,Vi(e,77)._triggersSubmenu,Vi(e,77)._getTabIndex(),Vi(e,77).disabled.toString(),Vi(e,77).disabled||null),t(e,78,0,Vi(e,79).inline,"primary"!==Vi(e,79).color&&"accent"!==Vi(e,79).color&&"warn"!==Vi(e,79).color),t(e,82,0,Vi(e,83).inline,"primary"!==Vi(e,83).color&&"accent"!==Vi(e,83).color&&"warn"!==Vi(e,83).color),t(e,84,0,n.ptalVisibility?"visibility":"visibility_off"),t(e,85,0,Vi(e,86).role,Vi(e,86)._highlighted,Vi(e,86)._triggersSubmenu,Vi(e,86)._getTabIndex(),Vi(e,86).disabled.toString(),Vi(e,86).disabled||null),t(e,87,0,Vi(e,88).inline,"primary"!==Vi(e,88).color&&"accent"!==Vi(e,88).color&&"warn"!==Vi(e,88).color),t(e,91,0,Vi(e,92).inline,"primary"!==Vi(e,92).color&&"accent"!==Vi(e,92).color&&"warn"!==Vi(e,92).color),t(e,93,0,n.tubeLayerVisibility?"visibility":"visibility_off"),t(e,94,0,Vi(e,95).role,Vi(e,95)._highlighted,Vi(e,95)._triggersSubmenu,Vi(e,95)._getTabIndex(),Vi(e,95).disabled.toString(),Vi(e,95).disabled||null),t(e,96,0,Vi(e,97).inline,"primary"!==Vi(e,97).color&&"accent"!==Vi(e,97).color&&"warn"!==Vi(e,97).color),t(e,100,0,Vi(e,101).inline,"primary"!==Vi(e,101).color&&"accent"!==Vi(e,101).color&&"warn"!==Vi(e,101).color),t(e,102,0,n.tflCycleRoutesVisibility?"visibility":"visibility_off"),t(e,103,0,Vi(e,104).role,Vi(e,104)._highlighted,Vi(e,104)._triggersSubmenu,Vi(e,104)._getTabIndex(),Vi(e,104).disabled.toString(),Vi(e,104).disabled||null),t(e,105,0,Vi(e,106).inline,"primary"!==Vi(e,106).color&&"accent"!==Vi(e,106).color&&"warn"!==Vi(e,106).color),t(e,109,0,Vi(e,110).inline,"primary"!==Vi(e,110).color&&"accent"!==Vi(e,110).color&&"warn"!==Vi(e,110).color),t(e,111,0,n.tflCycleParkingVisibility?"visibility":"visibility_off"),t(e,112,0,Vi(e,113).role,Vi(e,113)._highlighted,Vi(e,113)._triggersSubmenu,Vi(e,113)._getTabIndex(),Vi(e,113).disabled.toString(),Vi(e,113).disabled||null),t(e,114,0,Vi(e,115).inline,"primary"!==Vi(e,115).color&&"accent"!==Vi(e,115).color&&"warn"!==Vi(e,115).color),t(e,118,0,Vi(e,119).inline,"primary"!==Vi(e,119).color&&"accent"!==Vi(e,119).color&&"warn"!==Vi(e,119).color),t(e,120,0,n.tflAccidentsVisibility?"visibility":"visibility_off"),t(e,121,0,Vi(e,122).role,Vi(e,122)._highlighted,Vi(e,122)._triggersSubmenu,Vi(e,122)._getTabIndex(),Vi(e,122).disabled.toString(),Vi(e,122).disabled||null),t(e,123,0,Vi(e,124).inline,"primary"!==Vi(e,124).color&&"accent"!==Vi(e,124).color&&"warn"!==Vi(e,124).color),t(e,127,0,Vi(e,128).inline,"primary"!==Vi(e,128).color&&"accent"!==Vi(e,128).color&&"warn"!==Vi(e,128).color),t(e,129,0,n.tflAccidentsClusterVisibility?"visibility":"visibility_off"),t(e,130,0,Vi(e,131).role,Vi(e,131)._highlighted,Vi(e,131)._triggersSubmenu,Vi(e,131)._getTabIndex(),Vi(e,131).disabled.toString(),Vi(e,131).disabled||null),t(e,132,0,Vi(e,133).inline,"primary"!==Vi(e,133).color&&"accent"!==Vi(e,133).color&&"warn"!==Vi(e,133).color),t(e,136,0,Vi(e,137).inline,"primary"!==Vi(e,137).color&&"accent"!==Vi(e,137).color&&"warn"!==Vi(e,137).color),t(e,138,0,n.londonPlanningPermissionVisibility?"visibility":"visibility_off"),t(e,139,0,Vi(e,140).role,Vi(e,140)._highlighted,Vi(e,140)._triggersSubmenu,Vi(e,140)._getTabIndex(),Vi(e,140).disabled.toString(),Vi(e,140).disabled||null),t(e,141,0,Vi(e,142).inline,"primary"!==Vi(e,142).color&&"accent"!==Vi(e,142).color&&"warn"!==Vi(e,142).color),t(e,145,0,Vi(e,146).inline,"primary"!==Vi(e,146).color&&"accent"!==Vi(e,146).color&&"warn"!==Vi(e,146).color),t(e,147,0,n.busLabelsVisibility?"visibility":"visibility_off"),t(e,148,0,Vi(e,149).vertical?"vertical":"horizontal",Vi(e,149).vertical,!Vi(e,149).vertical,Vi(e,149).inset),t(e,153,0,Vi(e,154).role,Vi(e,154)._highlighted,Vi(e,154)._triggersSubmenu,Vi(e,154)._getTabIndex(),Vi(e,154).disabled.toString(),Vi(e,154).disabled||null),t(e,155,0,Vi(e,156).inline,"primary"!==Vi(e,156).color&&"accent"!==Vi(e,156).color&&"warn"!==Vi(e,156).color),t(e,159,0,Vi(e,160).inline,"primary"!==Vi(e,160).color&&"accent"!==Vi(e,160).color&&"warn"!==Vi(e,160).color),t(e,161,0,n.montrealBixiStationVisibility?"visibility":"visibility_off"),t(e,162,0,Vi(e,163).role,Vi(e,163)._highlighted,Vi(e,163)._triggersSubmenu,Vi(e,163)._getTabIndex(),Vi(e,163).disabled.toString(),Vi(e,163).disabled||null),t(e,164,0,Vi(e,165).inline,"primary"!==Vi(e,165).color&&"accent"!==Vi(e,165).color&&"warn"!==Vi(e,165).color),t(e,168,0,Vi(e,169).inline,"primary"!==Vi(e,169).color&&"accent"!==Vi(e,169).color&&"warn"!==Vi(e,169).color),t(e,170,0,n.montrealCollisionDataVisibility?"visibility":"visibility_off"),t(e,171,0,Vi(e,172).inline,"primary"!==Vi(e,172).color&&"accent"!==Vi(e,172).color&&"warn"!==Vi(e,172).color),t(e,180,0,Vi(e,183).disabled,Vi(e,183).vertical,"standard"===Vi(e,183).appearance),t(e,185,0,!Vi(e,186).buttonToggleGroup,Vi(e,186).checked,Vi(e,186).disabled,"standard"===Vi(e,186).appearance,-1,Vi(e,186).id,null),t(e,188,0,Vi(e,189).inline,"primary"!==Vi(e,189).color&&"accent"!==Vi(e,189).color&&"warn"!==Vi(e,189).color),t(e,191,0,!Vi(e,192).buttonToggleGroup,Vi(e,192).checked,Vi(e,192).disabled,"standard"===Vi(e,192).appearance,-1,Vi(e,192).id,null),t(e,194,0,Vi(e,195).inline,"primary"!==Vi(e,195).color&&"accent"!==Vi(e,195).color&&"warn"!==Vi(e,195).color),t(e,197,0,!Vi(e,198).buttonToggleGroup,Vi(e,198).checked,Vi(e,198).disabled,"standard"===Vi(e,198).appearance,-1,Vi(e,198).id,null),t(e,200,0,Vi(e,201).inline,"primary"!==Vi(e,201).color&&"accent"!==Vi(e,201).color&&"warn"!==Vi(e,201).color),t(e,204,1,[Vi(e,206).disabled?null:Vi(e,206)._tabIndex,Vi(e,206)._ariaDescribedby||null,Vi(e,206).required.toString(),Vi(e,206).disabled.toString(),Vi(e,206).errorState,Vi(e,206).multiple,Vi(e,206).role,Vi(e,206).disabled,Vi(e,206).errorState,Vi(e,206).required,Vi(e,206).ariaOrientation,Vi(e,206)._uid])}))}var pS=Pi("app-map",TE,(function(t){return Jo(0,[(t()(),Oo(0,0,null,null,1,"app-map",[],null,null,null,hS,PE)),$i(1,245760,null,0,TE,[Ex,Jb,kx],null,null)],(function(t,e){t(e,1,0)}),null)}),{},{},[]),fS=Hn({encapsulation:2,styles:[".mat-tooltip-panel{pointer-events:none!important}.mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}@media (-ms-high-contrast:active){.mat-tooltip{outline:solid 1px}}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}"],data:{animation:[{type:7,name:"state",definitions:[{type:0,name:"initial, void, hidden",styles:{type:6,styles:{opacity:0,transform:"scale(0)"},offset:null},options:void 0},{type:0,name:"visible",styles:{type:6,styles:{transform:"scale(1)"},offset:null},options:void 0},{type:1,expr:"* => visible",animation:{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"scale(0)",offset:0},offset:null},{type:6,styles:{opacity:.5,transform:"scale(0.99)",offset:.5},offset:null},{type:6,styles:{opacity:1,transform:"scale(1)",offset:1},offset:null}]},timings:"200ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => hidden",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"100ms cubic-bezier(0, 0, 0.2, 1)"},options:null}],options:{}}]}});function dS(t){return Jo(2,[(t()(),Oo(0,0,null,null,4,"div",[["class","mat-tooltip"]],[[2,"mat-tooltip-handset",null],[24,"@state",0]],[[null,"@state.start"],[null,"@state.done"]],(function(t,e,n){var i=!0,r=t.component;return"@state.start"===e&&(i=!1!==r._animationStart()&&i),"@state.done"===e&&(i=!1!==r._animationDone(n)&&i),i}),null,null)),tr(512,null,_s,bs,[wn,Cn,rn,ln]),$i(2,278528,null,0,xs,[_s],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e=131072,n=zs,i=[Se],er(-1,e|=16,null,0,n,n,i)),(t()(),Wo(4,null,["",""]))],(function(t,e){t(e,2,0,"mat-tooltip",e.component.tooltipClass)}),(function(t,e){var n,i=e.component;t(e,0,0,null==(n=function(t,e,n,i){if(qe.isWrapped(i)){i=qe.unwrap(i);var r=t.def.nodes[0].bindingIndex+0,o=qe.unwrap(t.oldValues[r]);t.oldValues[r]=new qe(o)}return i}(e,0,0,Vi(e,3).transform(i._isHandset)))?null:n.matches,i._visibility),t(e,4,0,i.message)}));var e,n,i}var mS=Pi("mat-tooltip-component",Xw,(function(t){return Jo(0,[(t()(),Oo(0,0,null,null,1,"mat-tooltip-component",[["aria-hidden","true"]],[[4,"zoom",null]],[["body","click"]],(function(t,e,n){var i=!0;return"body:click"===e&&(i=!1!==Vi(t,1)._handleBodyInteraction()&&i),i}),dS,fS)),$i(1,180224,null,0,Xw,[Se,fx],null,null)],null,(function(t,e){t(e,0,0,"visible"===Vi(e,1)._visibility?1:null)}))}),{},{},[]),gS=Hn({encapsulation:2,styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}@media (-ms-high-contrast:active){.mat-dialog-container{outline:solid 1px}}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base{margin-left:0;margin-right:8px}"],data:{animation:[{type:7,name:"dialogContainer",definitions:[{type:0,name:"void, exit",styles:{type:6,styles:{opacity:0,transform:"scale(0.7)"},offset:null},options:void 0},{type:0,name:"enter",styles:{type:6,styles:{transform:"none"},offset:null},options:void 0},{type:1,expr:"* => enter",animation:{type:4,styles:{type:6,styles:{transform:"none",opacity:1},offset:null},timings:"150ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => void, * => exit",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"75ms cubic-bezier(0.4, 0.0, 0.2, 1)"},options:null}],options:{}}]}});function yS(t){return Jo(0,[(t()(),Ro(0,null,null,0))],null,null)}function vS(t){return Jo(0,[Bo(402653184,1,{_portalOutlet:0}),(t()(),Ro(16777216,null,null,1,null,yS)),$i(2,212992,[[1,4]],0,tb,[$e,Pn],{portal:[0,"portal"]},null)],(function(t,e){t(e,2,0,"")}),null)}var _S=Pi("mat-dialog-container",Gb,(function(t){return Jo(0,[(t()(),Oo(0,0,null,null,1,"mat-dialog-container",[["aria-modal","true"],["class","mat-dialog-container"],["tabindex","-1"]],[[1,"id",0],[1,"role",0],[1,"aria-labelledby",0],[1,"aria-label",0],[1,"aria-describedby",0],[40,"@dialogContainer",0]],[["component","@dialogContainer.start"],["component","@dialogContainer.done"]],(function(t,e,n){var i=!0;return"component:@dialogContainer.start"===e&&(i=!1!==Vi(t,1)._onAnimationStart(n)&&i),"component:@dialogContainer.done"===e&&(i=!1!==Vi(t,1)._onAnimationDone(n)&&i),i}),vS,gS)),$i(1,49152,null,0,Gb,[rn,_f,Se,[2,Vs],jb],null,null)],null,(function(t,e){t(e,0,0,Vi(e,1)._id,Vi(e,1)._config.role,Vi(e,1)._config.ariaLabel?null:Vi(e,1)._ariaLabelledBy,Vi(e,1)._config.ariaLabel,Vi(e,1)._config.ariaDescribedBy||null,Vi(e,1)._state)}))}),{},{},[]),bS=Hn({encapsulation:2,styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}@media (-ms-high-contrast:active){.mat-snack-bar-container{border:solid 1px}}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}"],data:{animation:[{type:7,name:"state",definitions:[{type:0,name:"void, hidden",styles:{type:6,styles:{transform:"scale(0.8)",opacity:0},offset:null},options:void 0},{type:0,name:"visible",styles:{type:6,styles:{transform:"scale(1)",opacity:1},offset:null},options:void 0},{type:1,expr:"* => visible",animation:{type:4,styles:null,timings:"150ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => void, * => hidden",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"75ms cubic-bezier(0.4, 0.0, 1, 1)"},options:null}],options:{}}]}});function xS(t){return Jo(0,[(t()(),Ro(0,null,null,0))],null,null)}function wS(t){return Jo(0,[Bo(402653184,1,{_portalOutlet:0}),(t()(),Ro(16777216,null,null,1,null,xS)),$i(2,212992,[[1,4]],0,tb,[$e,Pn],{portal:[0,"portal"]},null)],(function(t,e){t(e,2,0,"")}),null)}var CS=Pi("snack-bar-container",xx,(function(t){return Jo(0,[(t()(),Oo(0,0,null,null,1,"snack-bar-container",[["class","mat-snack-bar-container"]],[[1,"role",0],[40,"@state",0]],[["component","@state.done"]],(function(t,e,n){var i=!0;return"component:@state.done"===e&&(i=!1!==Vi(t,1).onAnimationEnd(n)&&i),i}),wS,bS)),$i(1,180224,null,0,xx,[Yr,rn,Se,_x],null,null)],null,(function(t,e){t(e,0,0,Vi(e,1)._role,Vi(e,1)._animationState)}))}),{},{},[]),kS=Hn({encapsulation:2,styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}"],data:{}});function ES(t){return Jo(0,[(t()(),Oo(0,0,null,null,3,"div",[["class","mat-simple-snackbar-action"]],null,null,null,null,null)),(t()(),Oo(1,0,null,null,2,"button",[["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.action()&&i),i}),Ig,Sg)),$i(2,180224,null,0,ed,[rn,kf,[2,kg]],null,null),(t()(),Wo(3,0,["",""]))],null,(function(t,e){var n=e.component;t(e,1,0,Vi(e,2).disabled||null,"NoopAnimations"===Vi(e,2)._animationMode),t(e,3,0,n.data.action)}))}function SS(t){return Jo(2,[(t()(),Oo(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),Wo(1,null,["",""])),(t()(),Ro(16777216,null,null,1,null,ES)),$i(3,16384,null,0,Es,[Pn,In],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,3,0,e.component.hasAction)}),(function(t,e){t(e,1,0,e.component.data.message)}))}var IS=Pi("simple-snack-bar",bx,(function(t){return Jo(0,[(t()(),Oo(0,0,null,null,1,"simple-snack-bar",[["class","mat-simple-snackbar"]],null,null,null,SS,kS)),$i(1,49152,null,0,bx,[yx,vx],null,null)],null,null)}),{},{},[]),TS=function t(e){_classCallCheck(this,t),this.data=e},PS=Hn({encapsulation:0,styles:[[""]],data:{}});function AS(t){return Jo(0,[(t()(),Oo(0,0,null,null,0,"img",[["class","oc-image"],["src","../assets/images/OUR COLLECTIVE LOGO_Newwhite-02-small.png"]],null,null,null,null,null)),(t()(),Oo(1,0,null,null,2,"h1",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),$i(2,81920,null,0,tx,[[2,Xb],rn,Jb],null,null),(t()(),Wo(-1,null,[" An Error Occurred\n"])),(t()(),Oo(4,0,null,null,3,"div",[["class","mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),$i(5,16384,null,0,ex,[],null,null),(t()(),Oo(6,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wo(7,null,[" ",""])),(t()(),Oo(8,0,null,null,5,"div",[["class","mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),$i(9,16384,null,0,nx,[],null,null),(t()(),Oo(10,0,null,null,3,"button",[["color","primary"],["mat-button",""],["mat-dialog-close",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-label",0],[1,"type",0]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==Vi(t,12).dialogRef.close(Vi(t,12).dialogResult)&&i),i}),Ig,Sg)),$i(11,180224,null,0,ed,[rn,kf,[2,kg]],{color:[0,"color"]},null),$i(12,606208,null,0,$b,[[2,Xb],rn,Jb],{dialogResult:[0,"dialogResult"]},null),(t()(),Wo(-1,0,["OK"]))],(function(t,e){t(e,2,0),t(e,11,0,"primary"),t(e,12,0,"")}),(function(t,e){var n=e.component;t(e,1,0,Vi(e,2).id),t(e,7,0,n.data.message),t(e,10,0,Vi(e,11).disabled||null,"NoopAnimations"===Vi(e,11)._animationMode,Vi(e,12).ariaLabel||null,Vi(e,12).type)}))}var LS=Pi("ng-component",TS,(function(t){return Jo(0,[(t()(),Oo(0,0,null,null,1,"ng-component",[],null,null,null,AS,PS)),$i(1,49152,null,0,TS,[Zb],null,null)],null,null)}),{},{},[]),MS=Hn({encapsulation:0,styles:[[""]],data:{}});function RS(t){return Jo(0,[(t()(),Oo(0,0,null,null,2,"main",[],null,null,null,null,null)),(t()(),Oo(1,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),$i(2,212992,null,0,lp,[sp,Pn,$e,[8,null],Se],null,null)],(function(t,e){t(e,2,0)}),null)}var OS=Pi("app-root",os,(function(t){return Jo(0,[(t()(),Oo(0,0,null,null,1,"app-root",[],null,null,null,RS,MS)),$i(1,114688,null,0,os,[],null,null)],(function(t,e){t(e,1,0)}),null)}),{},{},[]),DS=new Pt("mat-autocomplete-scroll-strategy");function NS(t){return function(){return t.scrollStrategies.reposition()}}var FS=function t(){_classCallCheck(this,t)},zS=function(){function t(e,n){_classCallCheck(this,t),this.dialog=e,this.mapService=n}return _createClass(t,[{key:"intercept",value:function(t,e){var n=this;return e.handle(t).pipe(_l((function(t){console.log(t);var e="An unknown error occurred!";return t.error.message&&(e=t.error.message),t.message&&(e=t.message),n.dialog.open(TS,{data:{message:e}}),n.mapService.killSpinners(!0),_y(t)})))}}]),t}(),BS=new Pt("mat-select-scroll-strategy");function VS(t){return function(){return t.scrollStrategies.reposition()}}var US,jS=function t(){_classCallCheck(this,t)},qS=((US=function t(){_classCallCheck(this,t),this.changes=new L,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=function(t,e,n){if(0==n||0==e)return"0 of "+n;var i=t*e;return"".concat(i+1," \u2013 ").concat(i<(n=Math.max(n,0))?Math.min(i+e,n):i+e," of ").concat(n)}}).ngInjectableDef=yt({factory:function(){return new US},token:US,providedIn:"root"}),US);function GS(t){return t||new qS}var HS=function t(){_classCallCheck(this,t)},XS=function t(){_classCallCheck(this,t)},ZS=function t(){_classCallCheck(this,t)},WS=function t(){_classCallCheck(this,t)},YS=function t(){_classCallCheck(this,t)},KS=function t(){_classCallCheck(this,t)},JS=function t(){_classCallCheck(this,t)},QS=function t(){_classCallCheck(this,t)},$S=function t(){_classCallCheck(this,t)},tI=function t(){_classCallCheck(this,t)},eI=function t(){_classCallCheck(this,t)},nI=function t(){_classCallCheck(this,t)},iI=function(){},rI=new ns(rs,[os],(function(t){return function(t){for(var e={},n=[],i=!1,r=0;r<t.length;r++){var o=t[r];o.token===Te&&!0===o.value&&(i=!0),1073741824&o.flags&&n.push(o.token),o.index=r,e[Gn(o.token)]=o}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:i}}([wi(512,$e,tn,[[8,[Rp,pS,mS,_S,CS,IS,LS,OS]],[3,$e],Vt]),wi(5120,Mr,Ao,[[3,Mr]]),wi(4608,gs,ys,[Mr,[2,ms]]),wi(5120,mr,Lo,[Yr]),wi(5120,Er,Sr,[]),wi(5120,wn,To,[]),wi(5120,Cn,Po,[]),wi(4608,Ru,Ou,[Vs]),wi(6144,xe,null,[Ru]),wi(4608,Iu,Bf,[[2,Nf],[2,Pf]]),wi(5120,nu,(function(t,e,n,i,r,o,a,s){return[new Eu(t,e,n),new Mu(i),new Pu(r,o,a,s)]}),[Vs,Yr,Pr,Vs,Vs,Iu,Lr,[2,Tu]]),wi(4608,iu,iu,[nu,Yr]),wi(135680,au,au,[Vs]),wi(4608,hu,hu,[iu,au,Er]),wi(5120,Md,xg,[]),wi(5120,wm,wg,[]),wi(4608,Ym,bg,[Vs,Md,wm]),wi(5120,an,Cg,[hu,Ym,Yr]),wi(6144,ou,null,[au]),wi(4608,io,io,[Yr]),wi(5120,Kc,Ep,[op]),wi(4608,pp,pp,[]),wi(6144,cp,null,[pp]),wi(135680,fp,fp,[op,go,Vr,Ae,cp]),wi(4608,hp,hp,[]),wi(5120,dp,bp,[op,Us,mp]),wi(5120,Pp,Tp,[Sp]),wi(5120,Ar,(function(t){return[t]}),[Pp]),wi(4608,ad,fg,[an,Vs]),wi(4608,o_,o_,[]),wi(4608,zb,zb,[bb,Pb,$e,Nb,Tb,Ae,Yr,Vs,rd,[2,cs]]),wi(5120,Bb,Vb,[zb]),wi(5120,DS,NS,[zb]),wi(4608,Df,Df,[]),wi(4608,jv,jv,[]),wi(4608,rv,rv,[]),wi(4608,fy,dy,[Vs,Pr,hy]),wi(4608,my,my,[fy,py]),wi(5120,Yb,Kb,[zb]),wi(135680,Jb,Jb,[zb,Ae,[2,cs],[2,Wb],Yb,[3,Jb],Pb]),wi(5120,oy,(function(t,e,n){return[t,new zS(e,n)]}),[my,Jb,Ex]),wi(4608,uy,uy,[]),wi(6144,ly,null,[uy]),wi(4608,cy,cy,[ly]),wi(6144,jg,null,[cy]),wi(4608,Ug,gy,[jg,Ae]),wi(4608,iy,iy,[Ug]),wi(5120,jw,qw,[zb]),wi(5120,BS,VS,[zb]),wi(5120,qS,GS,[[3,qS]]),wi(5120,iC,rC,[zb]),wi(1073742336,Bs,Bs,[]),wi(1024,Yt,ju,[]),wi(1024,so,(function(){return[vp()]}),[]),wi(512,Sp,Sp,[Ae]),wi(1024,Cr,(function(t,e){return[(n=t,$l("probe",eu),$l("coreTokens",Object.assign({},tu,(n||[]).reduce((function(t,e){return t[e.name]=e.token,t}),{}))),function(){return eu}),Ip(e)];var n}),[[2,so],Sp]),wi(512,kr,kr,[[2,Cr]]),wi(131584,fo,fo,[Yr,Lr,Ae,Yt,$e,kr]),wi(1073742336,Mo,Mo,[fo]),wi(1073742336,qu,qu,[[3,qu]]),wi(1024,gp,wp,[[3,op]]),wi(512,Tc,Pc,[]),wi(512,sp,sp,[]),wi(256,mp,{onSameUrlNavigation:"ignore"},[]),wi(1024,ls,xp,[as,[2,us],mp]),wi(512,cs,cs,[ls,as]),wi(512,Vr,Vr,[]),wi(512,go,_o,[Vr,[2,yo]]),wi(1024,Qh,(function(){return[[{path:"",component:TE},{path:"**",redirectTo:""}]]}),[]),wi(1024,op,kp,[fo,Tc,sp,cs,Ae,go,Vr,Qh,mp,[2,tp],[2,Kh]]),wi(1073742336,_p,_p,[[2,gp],[2,op]]),wi(1073742336,XS,XS,[]),wi(1073742336,Eg,Eg,[]),wi(1073742336,od,od,[]),wi(1073742336,Pf,Pf,[[2,Tf],[2,Tu]]),wi(1073742336,ZS,ZS,[]),wi(1073742336,Gp,Gp,[]),wi(1073742336,Kf,Kf,[]),wi(1073742336,wC,wC,[]),wi(1073742336,l_,l_,[]),wi(1073742336,Sf,Sf,[]),wi(1073742336,WS,WS,[]),wi(1073742336,cb,cb,[]),wi(1073742336,YS,YS,[]),wi(1073742336,Fy,Fy,[]),wi(1073742336,Jf,Jf,[]),wi(1073742336,Qf,Qf,[]),wi(1073742336,eb,eb,[]),wi(1073742336,Ub,Ub,[]),wi(1073742336,FS,FS,[]),wi(1073742336,A_,A_,[]),wi(1073742336,Vg,Vg,[]),wi(1073742336,O_,O_,[]),wi(1073742336,jf,jf,[]),wi(1073742336,Qv,Qv,[]),wi(1073742336,Kv,Kv,[]),wi(1073742336,Hx,Hx,[]),wi(1073742336,Uv,Uv,[]),wi(1073742336,Gv,Gv,[]),wi(1073742336,yy,yy,[]),wi(1073742336,vy,vy,[]),wi(1073742336,KS,KS,[]),wi(1073742336,nd,nd,[]),wi(1073742336,Ox,Ox,[]),wi(1073742336,Zw,Zw,[]),wi(1073742336,Kx,Kx,[]),wi(1073742336,qv,qv,[]),wi(1073742336,ax,ax,[]),wi(1073742336,xw,xw,[]),wi(1073742336,Mw,Mw,[]),wi(1073742336,jS,jS,[]),wi(1073742336,HS,HS,[]),wi(1073742336,JS,JS,[]),wi(1073742336,sC,sC,[]),wi(1073742336,lC,lC,[]),wi(1073742336,QS,QS,[]),wi(1073742336,$S,$S,[]),wi(1073742336,tI,tI,[]),wi(1073742336,wx,wx,[]),wi(1073742336,eI,eI,[]),wi(1073742336,nI,nI,[]),wi(1073742336,iI,iI,[]),wi(1073742336,rs,rs,[]),wi(256,Te,!0,[]),wi(256,kg,"BrowserAnimations",[]),wi(256,Vx,{separatorKeyCodes:[13]},[]),wi(256,hy,"XSRF-TOKEN",[]),wi(256,py,"X-XSRF-TOKEN",[])])}));(function(){if(Jt)throw new Error("Cannot enable prod mode after platform setup.");Kt=!1})(),Uu().bootstrapModuleFactory(rI).catch((function(t){return console.error(t)}))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);